function _mergeNamespaces(t,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function i(){var o=!1;try{o=this instanceof i}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),r}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function y(v){return v===null||typeof v!="object"?null:(v=g&&v[g]||v["@@iterator"],typeof v=="function"?v:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,x={};function A(v,V,N){this.props=v,this.context=V,this.refs=x,this.updater=N||S}A.prototype.isReactComponent={},A.prototype.setState=function(v,V){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,V,"setState")},A.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function D(){}D.prototype=A.prototype;function b(v,V,N){this.props=v,this.context=V,this.refs=x,this.updater=N||S}var I=b.prototype=new D;I.constructor=b,E(I,A.prototype),I.isPureReactComponent=!0;var R=Array.isArray,q=Object.prototype.hasOwnProperty,G={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function B(v,V,N){var P,T={},w=null,F=null;if(V!=null)for(P in V.ref!==void 0&&(F=V.ref),V.key!==void 0&&(w=""+V.key),V)q.call(V,P)&&!z.hasOwnProperty(P)&&(T[P]=V[P]);var U=arguments.length-2;if(U===1)T.children=N;else if(1<U){for(var H=Array(U),Y=0;Y<U;Y++)H[Y]=arguments[Y+2];T.children=H}if(v&&v.defaultProps)for(P in U=v.defaultProps,U)T[P]===void 0&&(T[P]=U[P]);return{$$typeof:t,type:v,key:w,ref:F,props:T,_owner:G.current}}function M(v,V){return{$$typeof:t,type:v.type,key:V,ref:v.ref,props:v.props,_owner:v._owner}}function O(v){return typeof v=="object"&&v!==null&&v.$$typeof===t}function W(v){var V={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(N){return V[N]})}var K=/\/+/g;function se(v,V){return typeof v=="object"&&v!==null&&v.key!=null?W(""+v.key):V.toString(36)}function $(v,V,N,P,T){var w=typeof v;(w==="undefined"||w==="boolean")&&(v=null);var F=!1;if(v===null)F=!0;else switch(w){case"string":case"number":F=!0;break;case"object":switch(v.$$typeof){case t:case e:F=!0}}if(F)return F=v,T=T(F),v=P===""?"."+se(F,0):P,R(T)?(N="",v!=null&&(N=v.replace(K,"$&/")+"/"),$(T,V,N,"",function(Y){return Y})):T!=null&&(O(T)&&(T=M(T,N+(!T.key||F&&F.key===T.key?"":(""+T.key).replace(K,"$&/")+"/")+v)),V.push(T)),1;if(F=0,P=P===""?".":P+":",R(v))for(var U=0;U<v.length;U++){w=v[U];var H=P+se(w,U);F+=$(w,V,N,H,T)}else if(H=y(v),typeof H=="function")for(v=H.call(v),U=0;!(w=v.next()).done;)w=w.value,H=P+se(w,U++),F+=$(w,V,N,H,T);else if(w==="object")throw V=String(v),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return F}function Q(v,V,N){if(v==null)return v;var P=[],T=0;return $(v,P,"","",function(w){return V.call(N,w,T++)}),P}function re(v){if(v._status===-1){var V=v._result;V=V(),V.then(function(N){(v._status===0||v._status===-1)&&(v._status=1,v._result=N)},function(N){(v._status===0||v._status===-1)&&(v._status=2,v._result=N)}),v._status===-1&&(v._status=0,v._result=V)}if(v._status===1)return v._result.default;throw v._result}var te={current:null},X={transition:null},L={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:X,ReactCurrentOwner:G};function C(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Q,forEach:function(v,V,N){Q(v,function(){V.apply(this,arguments)},N)},count:function(v){var V=0;return Q(v,function(){V++}),V},toArray:function(v){return Q(v,function(V){return V})||[]},only:function(v){if(!O(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},react_production_min.Component=A,react_production_min.Fragment=r,react_production_min.Profiler=o,react_production_min.PureComponent=b,react_production_min.StrictMode=i,react_production_min.Suspense=h,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,react_production_min.act=C,react_production_min.cloneElement=function(v,V,N){if(v==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+v+".");var P=E({},v.props),T=v.key,w=v.ref,F=v._owner;if(V!=null){if(V.ref!==void 0&&(w=V.ref,F=G.current),V.key!==void 0&&(T=""+V.key),v.type&&v.type.defaultProps)var U=v.type.defaultProps;for(H in V)q.call(V,H)&&!z.hasOwnProperty(H)&&(P[H]=V[H]===void 0&&U!==void 0?U[H]:V[H])}var H=arguments.length-2;if(H===1)P.children=N;else if(1<H){U=Array(H);for(var Y=0;Y<H;Y++)U[Y]=arguments[Y+2];P.children=U}return{$$typeof:t,type:v.type,key:T,ref:w,props:P,_owner:F}},react_production_min.createContext=function(v){return v={$$typeof:c,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},v.Provider={$$typeof:l,_context:v},v.Consumer=v},react_production_min.createElement=B,react_production_min.createFactory=function(v){var V=B.bind(null,v);return V.type=v,V},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(v){return{$$typeof:p,render:v}},react_production_min.isValidElement=O,react_production_min.lazy=function(v){return{$$typeof:d,_payload:{_status:-1,_result:v},_init:re}},react_production_min.memo=function(v,V){return{$$typeof:u,type:v,compare:V===void 0?null:V}},react_production_min.startTransition=function(v){var V=X.transition;X.transition={};try{v()}finally{X.transition=V}},react_production_min.unstable_act=C,react_production_min.useCallback=function(v,V){return te.current.useCallback(v,V)},react_production_min.useContext=function(v){return te.current.useContext(v)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(v){return te.current.useDeferredValue(v)},react_production_min.useEffect=function(v,V){return te.current.useEffect(v,V)},react_production_min.useId=function(){return te.current.useId()},react_production_min.useImperativeHandle=function(v,V,N){return te.current.useImperativeHandle(v,V,N)},react_production_min.useInsertionEffect=function(v,V){return te.current.useInsertionEffect(v,V)},react_production_min.useLayoutEffect=function(v,V){return te.current.useLayoutEffect(v,V)},react_production_min.useMemo=function(v,V){return te.current.useMemo(v,V)},react_production_min.useReducer=function(v,V,N){return te.current.useReducer(v,V,N)},react_production_min.useRef=function(v){return te.current.useRef(v)},react_production_min.useState=function(v){return te.current.useState(v)},react_production_min.useSyncExternalStore=function(v,V,N){return te.current.useSyncExternalStore(v,V,N)},react_production_min.useTransition=function(){return te.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(p,h,u){var d,g={},y=null,S=null;u!==void 0&&(y=""+u),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(S=h.ref);for(d in h)i.call(h,d)&&!l.hasOwnProperty(d)&&(g[d]=h[d]);if(p&&p.defaultProps)for(d in h=p.defaultProps,h)g[d]===void 0&&(g[d]=h[d]);return{$$typeof:e,type:p,key:y,ref:S,props:g,_owner:o.current}}return reactJsxRuntime_production_min.Fragment=r,reactJsxRuntime_production_min.jsx=c,reactJsxRuntime_production_min.jsxs=c,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(t){function e(X,L){var C=X.length;X.push(L);e:for(;0<C;){var v=C-1>>>1,V=X[v];if(0<o(V,L))X[v]=L,X[C]=V,C=v;else break e}}function r(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var L=X[0],C=X.pop();if(C!==L){X[0]=C;e:for(var v=0,V=X.length,N=V>>>1;v<N;){var P=2*(v+1)-1,T=X[P],w=P+1,F=X[w];if(0>o(T,C))w<V&&0>o(F,T)?(X[v]=F,X[w]=C,v=w):(X[v]=T,X[P]=C,v=P);else if(w<V&&0>o(F,C))X[v]=F,X[w]=C,v=w;else break e}}return L}function o(X,L){var C=X.sortIndex-L.sortIndex;return C!==0?C:X.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,p=c.now();t.unstable_now=function(){return c.now()-p}}var h=[],u=[],d=1,g=null,y=3,S=!1,E=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(X){for(var L=r(u);L!==null;){if(L.callback===null)i(u);else if(L.startTime<=X)i(u),L.sortIndex=L.expirationTime,e(h,L);else break;L=r(u)}}function R(X){if(x=!1,I(X),!E)if(r(h)!==null)E=!0,re(q);else{var L=r(u);L!==null&&te(R,L.startTime-X)}}function q(X,L){E=!1,x&&(x=!1,D(B),B=-1),S=!0;var C=y;try{for(I(L),g=r(h);g!==null&&(!(g.expirationTime>L)||X&&!W());){var v=g.callback;if(typeof v=="function"){g.callback=null,y=g.priorityLevel;var V=v(g.expirationTime<=L);L=t.unstable_now(),typeof V=="function"?g.callback=V:g===r(h)&&i(h),I(L)}else i(h);g=r(h)}if(g!==null)var N=!0;else{var P=r(u);P!==null&&te(R,P.startTime-L),N=!1}return N}finally{g=null,y=C,S=!1}}var G=!1,z=null,B=-1,M=5,O=-1;function W(){return!(t.unstable_now()-O<M)}function K(){if(z!==null){var X=t.unstable_now();O=X;var L=!0;try{L=z(!0,X)}finally{L?se():(G=!1,z=null)}}else G=!1}var se;if(typeof b=="function")se=function(){b(K)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=K,se=function(){Q.postMessage(null)}}else se=function(){A(K,0)};function re(X){z=X,G||(G=!0,se())}function te(X,L){B=A(function(){X(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){E||S||(E=!0,re(q))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(X){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var C=y;y=L;try{return X()}finally{y=C}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,L){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var C=y;y=X;try{return L()}finally{y=C}},t.unstable_scheduleCallback=function(X,L,C){var v=t.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?v+C:v):C=v,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=C+V,X={id:d++,callback:L,priorityLevel:X,startTime:C,expirationTime:V,sortIndex:-1},C>v?(X.sortIndex=C,e(u,X),r(h)===null&&X===r(u)&&(x?(D(B),B=-1):x=!0,te(R,C-v))):(X.sortIndex=V,e(h,X),E||S||(E=!0,re(q))),X},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(X){var L=y;return function(){var C=y;y=L;try{return X.apply(this,arguments)}finally{y=C}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),e=requireScheduler();function r(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},g={};function y(n){return h.call(g,n)?!0:h.call(d,n)?!1:u.test(n)?g[n]=!0:(d[n]=!0,!1)}function S(n,s,a,f){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function E(n,s,a,f){if(s===null||typeof s>"u"||S(n,s,a,f))return!0;if(f)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function x(n,s,a,f,m,_,k){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=_,this.removeEmptyString=k}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){A[n]=new x(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];A[s]=new x(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){A[n]=new x(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){A[n]=new x(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){A[n]=new x(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){A[n]=new x(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){A[n]=new x(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){A[n]=new x(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){A[n]=new x(n,5,!1,n.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function b(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(D,b);A[s]=new x(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(D,b);A[s]=new x(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(D,b);A[s]=new x(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){A[n]=new x(n,1,!1,n.toLowerCase(),null,!1,!1)}),A.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){A[n]=new x(n,1,!1,n.toLowerCase(),null,!0,!0)});function I(n,s,a,f){var m=A.hasOwnProperty(s)?A[s]:null;(m!==null?m.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(E(s,a,m,f)&&(a=null),f||m===null?y(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):m.mustUseProperty?n[m.propertyName]=a===null?m.type===3?!1:"":a:(s=m.attributeName,f=m.attributeNamespace,a===null?n.removeAttribute(s):(m=m.type,a=m===3||m===4&&a===!0?"":""+a,f?n.setAttributeNS(f,s,a):n.setAttribute(s,a))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),G=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),W=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),X=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var C=Object.assign,v;function V(n){if(v===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);v=s&&s[1]||""}return`
`+v+n}var N=!1;function P(n,s){if(!n||N)return"";N=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(de){var f=de}Reflect.construct(n,[],s)}else{try{s.call()}catch(de){f=de}n.call(s.prototype)}else{try{throw Error()}catch(de){f=de}n()}}catch(de){if(de&&f&&typeof de.stack=="string"){for(var m=de.stack.split(`
`),_=f.stack.split(`
`),k=m.length-1,J=_.length-1;1<=k&&0<=J&&m[k]!==_[J];)J--;for(;1<=k&&0<=J;k--,J--)if(m[k]!==_[J]){if(k!==1||J!==1)do if(k--,J--,0>J||m[k]!==_[J]){var j=`
`+m[k].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=k&&0<=J);break}}}finally{N=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?V(n):""}function T(n){switch(n.tag){case 5:return V(n.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return n=P(n.type,!1),n;case 11:return n=P(n.type.render,!1),n;case 1:return n=P(n.type,!0),n;default:return""}}function w(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case G:return"Portal";case M:return"Profiler";case B:return"StrictMode";case se:return"Suspense";case $:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case W:return(n.displayName||"Context")+".Consumer";case O:return(n._context.displayName||"Context")+".Provider";case K:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Q:return s=n.displayName||null,s!==null?s:w(n.type)||"Memo";case re:s=n._payload,n=n._init;try{return w(n(s))}catch{}}return null}function F(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w(s);case 8:return s===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function U(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function H(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Y(n){var s=H(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,_=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(k){f=""+k,_.call(this,k)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ne(n){n._valueTracker||(n._valueTracker=Y(n))}function ae(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),f="";return n&&(f=H(n)?n.checked?"true":"false":n.value),n=f,n!==a?(s.setValue(n),!0):!1}function ee(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ce(n,s){var a=s.checked;return C({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function pe(n,s){var a=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;a=U(s.value!=null?s.value:a),n._wrapperState={initialChecked:f,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function he(n,s){s=s.checked,s!=null&&I(n,"checked",s,!1)}function _e(n,s){he(n,s);var a=U(s.value),f=s.type;if(a!=null)f==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ce(n,s.type,a):s.hasOwnProperty("defaultValue")&&Ce(n,s.type,U(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ee(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ce(n,s,a){(s!=="number"||ee(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Re=Array.isArray;function ve(n,s,a,f){if(n=n.options,s){s={};for(var m=0;m<a.length;m++)s["$"+a[m]]=!0;for(a=0;a<n.length;a++)m=s.hasOwnProperty("$"+n[a].value),n[a].selected!==m&&(n[a].selected=m),m&&f&&(n[a].defaultSelected=!0)}else{for(a=""+U(a),s=null,m=0;m<n.length;m++){if(n[m].value===a){n[m].selected=!0,f&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function He(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return C({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ze(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(r(92));if(Re(a)){if(1<a.length)throw Error(r(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:U(a)}}function Ie(n,s){var a=U(s.value),f=U(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),f!=null&&(n.defaultValue=""+f)}function Oe(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function je(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?je(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var nt,zt=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,f,m){MSApp.execUnsafeLocalFunction(function(){return n(s,a,f,m)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=nt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function $e(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$n=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(n){$n.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),qe[s]=qe[n]})});function Qr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||qe.hasOwnProperty(n)&&qe[n]?(""+s).trim():s+"px"}function Zr(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var f=a.indexOf("--")===0,m=Qr(a,s[a],f);a==="float"&&(a="cssFloat"),f?n.setProperty(a,m):n[a]=m}}var ii=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mr(n,s){if(s){if(ii[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function yr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function ie(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var oe=null,Se=null,ke=null;function Ue(n){if(n=Dr(n)){if(typeof oe!="function")throw Error(r(280));var s=n.stateNode;s&&(s=_s(s),oe(n.stateNode,n.type,s))}}function De(n){Se?ke?ke.push(n):ke=[n]:Se=n}function Ft(){if(Se){var n=Se,s=ke;if(ke=Se=null,Ue(n),s)for(n=0;n<s.length;n++)Ue(s[n])}}function Qt(n,s){return n(s)}function Wt(){}var ot=!1;function Zt(n,s,a){if(ot)return n(s,a);ot=!0;try{return Qt(n,s,a)}finally{ot=!1,(Se!==null||ke!==null)&&(Wt(),Ft())}}function _t(n,s){var a=n.stateNode;if(a===null)return null;var f=_s(a);if(f===null)return null;a=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var cn=!1;if(p)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){cn=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{cn=!1}function Jn(n,s,a,f,m,_,k,J,j){var de=Array.prototype.slice.call(arguments,3);try{s.apply(a,de)}catch(me){this.onError(me)}}var $t=!1,dn=null,hn=!1,en=null,yt={onError:function(n){$t=!0,dn=n}};function In(n,s,a,f,m,_,k,J,j){$t=!1,dn=null,Jn.apply(yt,arguments)}function Pr(n,s,a,f,m,_,k,J,j){if(In.apply(this,arguments),$t){if($t){var de=dn;$t=!1,dn=null}else throw Error(r(198));hn||(hn=!0,en=de)}}function kn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function qo(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Go(n){if(kn(n)!==n)throw Error(r(188))}function Pu(n){var s=n.alternate;if(!s){if(s=kn(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,f=s;;){var m=a.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){a=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===a)return Go(m),n;if(_===f)return Go(m),s;_=_.sibling}throw Error(r(188))}if(a.return!==f.return)a=m,f=_;else{for(var k=!1,J=m.child;J;){if(J===a){k=!0,a=m,f=_;break}if(J===f){k=!0,f=m,a=_;break}J=J.sibling}if(!k){for(J=_.child;J;){if(J===a){k=!0,a=_,f=m;break}if(J===f){k=!0,f=_,a=m;break}J=J.sibling}if(!k)throw Error(r(189))}}if(a.alternate!==f)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function Ho(n){return n=Pu(n),n!==null?zo(n):null}function zo(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=zo(n);if(s!==null)return s;n=n.sibling}return null}var Wo=e.unstable_scheduleCallback,$o=e.unstable_cancelCallback,vu=e.unstable_shouldYield,_u=e.unstable_requestPaint,et=e.unstable_now,Eu=e.unstable_getCurrentPriorityLevel,oi=e.unstable_ImmediatePriority,Jo=e.unstable_UserBlockingPriority,es=e.unstable_NormalPriority,Su=e.unstable_LowPriority,Yo=e.unstable_IdlePriority,ts=null,Jt=null;function xu(n){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ts,n,void 0,(n.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:Au,Cu=Math.log,Tu=Math.LN2;function Au(n){return n>>>=0,n===0?32:31-(Cu(n)/Tu|0)|0}var ns=64,rs=4194304;function vr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ss(n,s){var a=n.pendingLanes;if(a===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes,k=a&268435455;if(k!==0){var J=k&~m;J!==0?f=vr(J):(_&=k,_!==0&&(f=vr(_)))}else k=a&~m,k!==0?f=vr(k):_!==0&&(f=vr(_));if(f===0)return 0;if(s!==0&&s!==f&&(s&m)===0&&(m=f&-f,_=s&-s,m>=_||m===16&&(_&4194240)!==0))return s;if((f&4)!==0&&(f|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)a=31-Dt(s),m=1<<a,f|=n[a],s&=~m;return f}function Vu(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bu(n,s){for(var a=n.suspendedLanes,f=n.pingedLanes,m=n.expirationTimes,_=n.pendingLanes;0<_;){var k=31-Dt(_),J=1<<k,j=m[k];j===-1?((J&a)===0||(J&f)!==0)&&(m[k]=Vu(J,s)):j<=s&&(n.expiredLanes|=J),_&=~J}}function ai(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ko(){var n=ns;return ns<<=1,(ns&4194240)===0&&(ns=64),n}function li(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function _r(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Dt(s),n[s]=a}function Ru(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<a;){var m=31-Dt(a),_=1<<m;s[m]=0,f[m]=-1,n[m]=-1,a&=~_}}function ui(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var f=31-Dt(a),m=1<<f;m&s|n[f]&s&&(n[f]|=s),a&=~m}}var Le=0;function Xo(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var jo,ci,Qo,Zo,ea,di=!1,is=[],fn=null,pn=null,gn=null,Er=new Map,Sr=new Map,mn=[],wu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ta(n,s){switch(n){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":Er.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(s.pointerId)}}function xr(n,s,a,f,m,_){return n===null||n.nativeEvent!==_?(n={blockedOn:s,domEventName:a,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},s!==null&&(s=Dr(s),s!==null&&ci(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function Mu(n,s,a,f,m){switch(s){case"focusin":return fn=xr(fn,n,s,a,f,m),!0;case"dragenter":return pn=xr(pn,n,s,a,f,m),!0;case"mouseover":return gn=xr(gn,n,s,a,f,m),!0;case"pointerover":var _=m.pointerId;return Er.set(_,xr(Er.get(_)||null,n,s,a,f,m)),!0;case"gotpointercapture":return _=m.pointerId,Sr.set(_,xr(Sr.get(_)||null,n,s,a,f,m)),!0}return!1}function na(n){var s=bn(n.target);if(s!==null){var a=kn(s);if(a!==null){if(s=a.tag,s===13){if(s=qo(a),s!==null){n.blockedOn=s,ea(n.priority,function(){Qo(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function os(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=fi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var f=new a.constructor(a.type,a);fe=f,a.target.dispatchEvent(f),fe=null}else return s=Dr(a),s!==null&&ci(s),n.blockedOn=a,!1;s.shift()}return!0}function ra(n,s,a){os(n)&&a.delete(s)}function Iu(){di=!1,fn!==null&&os(fn)&&(fn=null),pn!==null&&os(pn)&&(pn=null),gn!==null&&os(gn)&&(gn=null),Er.forEach(ra),Sr.forEach(ra)}function Cr(n,s){n.blockedOn===s&&(n.blockedOn=null,di||(di=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Iu)))}function Tr(n){function s(m){return Cr(m,n)}if(0<is.length){Cr(is[0],n);for(var a=1;a<is.length;a++){var f=is[a];f.blockedOn===n&&(f.blockedOn=null)}}for(fn!==null&&Cr(fn,n),pn!==null&&Cr(pn,n),gn!==null&&Cr(gn,n),Er.forEach(s),Sr.forEach(s),a=0;a<mn.length;a++)f=mn[a],f.blockedOn===n&&(f.blockedOn=null);for(;0<mn.length&&(a=mn[0],a.blockedOn===null);)na(a),a.blockedOn===null&&mn.shift()}var Yn=R.ReactCurrentBatchConfig,as=!0;function ku(n,s,a,f){var m=Le,_=Yn.transition;Yn.transition=null;try{Le=1,hi(n,s,a,f)}finally{Le=m,Yn.transition=_}}function bu(n,s,a,f){var m=Le,_=Yn.transition;Yn.transition=null;try{Le=4,hi(n,s,a,f)}finally{Le=m,Yn.transition=_}}function hi(n,s,a,f){if(as){var m=fi(n,s,a,f);if(m===null)wi(n,s,f,ls,a),ta(n,f);else if(Mu(m,n,s,a,f))f.stopPropagation();else if(ta(n,f),s&4&&-1<wu.indexOf(n)){for(;m!==null;){var _=Dr(m);if(_!==null&&jo(_),_=fi(n,s,a,f),_===null&&wi(n,s,f,ls,a),_===m)break;m=_}m!==null&&f.stopPropagation()}else wi(n,s,f,null,a)}}var ls=null;function fi(n,s,a,f){if(ls=null,n=ie(f),n=bn(n),n!==null)if(s=kn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=qo(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ls=n,null}function sa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eu()){case oi:return 1;case Jo:return 4;case es:case Su:return 16;case Yo:return 536870912;default:return 16}default:return 16}}var yn=null,pi=null,us=null;function ia(){if(us)return us;var n,s=pi,a=s.length,f,m="value"in yn?yn.value:yn.textContent,_=m.length;for(n=0;n<a&&s[n]===m[n];n++);var k=a-n;for(f=1;f<=k&&s[a-f]===m[_-f];f++);return us=m.slice(n,1<f?1-f:void 0)}function cs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ds(){return!0}function oa(){return!1}function At(n){function s(a,f,m,_,k){this._reactName=a,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=k,this.currentTarget=null;for(var J in n)n.hasOwnProperty(J)&&(a=n[J],this[J]=a?a(_):_[J]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ds:oa,this.isPropagationStopped=oa,this}return C(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),s}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=At(Kn),Ar=C({},Kn,{view:0,detail:0}),Nu=At(Ar),mi,yi,Vr,hs=C({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vr&&(Vr&&n.type==="mousemove"?(mi=n.screenX-Vr.screenX,yi=n.screenY-Vr.screenY):yi=mi=0,Vr=n),mi)},movementY:function(n){return"movementY"in n?n.movementY:yi}}),aa=At(hs),Fu=C({},hs,{dataTransfer:0}),Du=At(Fu),Lu=C({},Ar,{relatedTarget:0}),Pi=At(Lu),Uu=C({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ou=At(Uu),qu=C({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gu=At(qu),Hu=C({},Kn,{data:0}),la=At(Hu),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=$u[n])?!!s[n]:!1}function vi(){return Ju}var Yu=C({},Ar,{key:function(n){if(n.key){var s=zu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=cs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vi,charCode:function(n){return n.type==="keypress"?cs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?cs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ku=At(Yu),Xu=C({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=At(Xu),ju=C({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vi}),Qu=At(ju),Zu=C({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ec=At(Zu),tc=C({},hs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nc=At(tc),rc=[9,13,27,32],_i=p&&"CompositionEvent"in window,Br=null;p&&"documentMode"in document&&(Br=document.documentMode);var sc=p&&"TextEvent"in window&&!Br,ca=p&&(!_i||Br&&8<Br&&11>=Br),da=" ",ha=!1;function fa(n,s){switch(n){case"keyup":return rc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xn=!1;function ic(n,s){switch(n){case"compositionend":return pa(s);case"keypress":return s.which!==32?null:(ha=!0,da);case"textInput":return n=s.data,n===da&&ha?null:n;default:return null}}function oc(n,s){if(Xn)return n==="compositionend"||!_i&&fa(n,s)?(n=ia(),us=pi=yn=null,Xn=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ca&&s.locale!=="ko"?null:s.data;default:return null}}var ac={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ga(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ac[n.type]:s==="textarea"}function ma(n,s,a,f){De(f),s=ys(s,"onChange"),0<s.length&&(a=new gi("onChange","change",null,a,f),n.push({event:a,listeners:s}))}var Rr=null,wr=null;function lc(n){ba(n,0)}function fs(n){var s=tr(n);if(ae(s))return n}function uc(n,s){if(n==="change")return s}var ya=!1;if(p){var Ei;if(p){var Si="oninput"in document;if(!Si){var Pa=document.createElement("div");Pa.setAttribute("oninput","return;"),Si=typeof Pa.oninput=="function"}Ei=Si}else Ei=!1;ya=Ei&&(!document.documentMode||9<document.documentMode)}function va(){Rr&&(Rr.detachEvent("onpropertychange",_a),wr=Rr=null)}function _a(n){if(n.propertyName==="value"&&fs(wr)){var s=[];ma(s,wr,n,ie(n)),Zt(lc,s)}}function cc(n,s,a){n==="focusin"?(va(),Rr=s,wr=a,Rr.attachEvent("onpropertychange",_a)):n==="focusout"&&va()}function dc(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fs(wr)}function hc(n,s){if(n==="click")return fs(s)}function fc(n,s){if(n==="input"||n==="change")return fs(s)}function pc(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Lt=typeof Object.is=="function"?Object.is:pc;function Mr(n,s){if(Lt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),f=Object.keys(s);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var m=a[f];if(!h.call(s,m)||!Lt(n[m],s[m]))return!1}return!0}function Ea(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sa(n,s){var a=Ea(n);n=0;for(var f;a;){if(a.nodeType===3){if(f=n+a.textContent.length,n<=s&&f>=s)return{node:a,offset:s-n};n=f}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ea(a)}}function xa(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?xa(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ca(){for(var n=window,s=ee();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=ee(n.document)}return s}function xi(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function gc(n){var s=Ca(),a=n.focusedElem,f=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&xa(a.ownerDocument.documentElement,a)){if(f!==null&&xi(a)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var m=a.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!n.extend&&_>f&&(m=f,f=_,_=m),m=Sa(a,_);var k=Sa(a,f);m&&k&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==k.node||n.focusOffset!==k.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),n.removeAllRanges(),_>f?(n.addRange(s),n.extend(k.node,k.offset)):(s.setEnd(k.node,k.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var mc=p&&"documentMode"in document&&11>=document.documentMode,jn=null,Ci=null,Ir=null,Ti=!1;function Ta(n,s,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ti||jn==null||jn!==ee(f)||(f=jn,"selectionStart"in f&&xi(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ir&&Mr(Ir,f)||(Ir=f,f=ys(Ci,"onSelect"),0<f.length&&(s=new gi("onSelect","select",null,s,a),n.push({event:s,listeners:f}),s.target=jn)))}function ps(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Qn={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},Ai={},Aa={};p&&(Aa=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function gs(n){if(Ai[n])return Ai[n];if(!Qn[n])return n;var s=Qn[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Aa)return Ai[n]=s[a];return n}var Va=gs("animationend"),Ba=gs("animationiteration"),Ra=gs("animationstart"),wa=gs("transitionend"),Ma=new Map,Ia="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(n,s){Ma.set(n,s),l(s,[n])}for(var Vi=0;Vi<Ia.length;Vi++){var Bi=Ia[Vi],yc=Bi.toLowerCase(),Pc=Bi[0].toUpperCase()+Bi.slice(1);Pn(yc,"on"+Pc)}Pn(Va,"onAnimationEnd"),Pn(Ba,"onAnimationIteration"),Pn(Ra,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(wa,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vc=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function ka(n,s,a){var f=n.type||"unknown-event";n.currentTarget=a,Pr(f,s,void 0,n),n.currentTarget=null}function ba(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var f=n[a],m=f.event;f=f.listeners;e:{var _=void 0;if(s)for(var k=f.length-1;0<=k;k--){var J=f[k],j=J.instance,de=J.currentTarget;if(J=J.listener,j!==_&&m.isPropagationStopped())break e;ka(m,J,de),_=j}else for(k=0;k<f.length;k++){if(J=f[k],j=J.instance,de=J.currentTarget,J=J.listener,j!==_&&m.isPropagationStopped())break e;ka(m,J,de),_=j}}}if(hn)throw n=en,hn=!1,en=null,n}function ze(n,s){var a=s[Fi];a===void 0&&(a=s[Fi]=new Set);var f=n+"__bubble";a.has(f)||(Na(s,n,2,!1),a.add(f))}function Ri(n,s,a){var f=0;s&&(f|=4),Na(a,n,f,s)}var ms="_reactListening"+Math.random().toString(36).slice(2);function br(n){if(!n[ms]){n[ms]=!0,i.forEach(function(a){a!=="selectionchange"&&(vc.has(a)||Ri(a,!1,n),Ri(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ms]||(s[ms]=!0,Ri("selectionchange",!1,s))}}function Na(n,s,a,f){switch(sa(s)){case 1:var m=ku;break;case 4:m=bu;break;default:m=hi}a=m.bind(null,s,a,n),m=void 0,!cn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),f?m!==void 0?n.addEventListener(s,a,{capture:!0,passive:m}):n.addEventListener(s,a,!0):m!==void 0?n.addEventListener(s,a,{passive:m}):n.addEventListener(s,a,!1)}function wi(n,s,a,f,m){var _=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var J=f.stateNode.containerInfo;if(J===m||J.nodeType===8&&J.parentNode===m)break;if(k===4)for(k=f.return;k!==null;){var j=k.tag;if((j===3||j===4)&&(j=k.stateNode.containerInfo,j===m||j.nodeType===8&&j.parentNode===m))return;k=k.return}for(;J!==null;){if(k=bn(J),k===null)return;if(j=k.tag,j===5||j===6){f=_=k;continue e}J=J.parentNode}}f=f.return}Zt(function(){var de=_,me=ie(a),ye=[];e:{var ge=Ma.get(n);if(ge!==void 0){var xe=gi,Ae=n;switch(n){case"keypress":if(cs(a)===0)break e;case"keydown":case"keyup":xe=Ku;break;case"focusin":Ae="focus",xe=Pi;break;case"focusout":Ae="blur",xe=Pi;break;case"beforeblur":case"afterblur":xe=Pi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=aa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Qu;break;case Va:case Ba:case Ra:xe=Ou;break;case wa:xe=ec;break;case"scroll":xe=Nu;break;case"wheel":xe=nc;break;case"copy":case"cut":case"paste":xe=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=ua}var Ve=(s&4)!==0,tt=!Ve&&n==="scroll",le=Ve?ge!==null?ge+"Capture":null:ge;Ve=[];for(var Z=de,ue;Z!==null;){ue=Z;var Pe=ue.stateNode;if(ue.tag===5&&Pe!==null&&(ue=Pe,le!==null&&(Pe=_t(Z,le),Pe!=null&&Ve.push(Nr(Z,Pe,ue)))),tt)break;Z=Z.return}0<Ve.length&&(ge=new xe(ge,Ae,null,a,me),ye.push({event:ge,listeners:Ve}))}}if((s&7)===0){e:{if(ge=n==="mouseover"||n==="pointerover",xe=n==="mouseout"||n==="pointerout",ge&&a!==fe&&(Ae=a.relatedTarget||a.fromElement)&&(bn(Ae)||Ae[tn]))break e;if((xe||ge)&&(ge=me.window===me?me:(ge=me.ownerDocument)?ge.defaultView||ge.parentWindow:window,xe?(Ae=a.relatedTarget||a.toElement,xe=de,Ae=Ae?bn(Ae):null,Ae!==null&&(tt=kn(Ae),Ae!==tt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(xe=null,Ae=de),xe!==Ae)){if(Ve=aa,Pe="onMouseLeave",le="onMouseEnter",Z="mouse",(n==="pointerout"||n==="pointerover")&&(Ve=ua,Pe="onPointerLeave",le="onPointerEnter",Z="pointer"),tt=xe==null?ge:tr(xe),ue=Ae==null?ge:tr(Ae),ge=new Ve(Pe,Z+"leave",xe,a,me),ge.target=tt,ge.relatedTarget=ue,Pe=null,bn(me)===de&&(Ve=new Ve(le,Z+"enter",Ae,a,me),Ve.target=ue,Ve.relatedTarget=tt,Pe=Ve),tt=Pe,xe&&Ae)t:{for(Ve=xe,le=Ae,Z=0,ue=Ve;ue;ue=Zn(ue))Z++;for(ue=0,Pe=le;Pe;Pe=Zn(Pe))ue++;for(;0<Z-ue;)Ve=Zn(Ve),Z--;for(;0<ue-Z;)le=Zn(le),ue--;for(;Z--;){if(Ve===le||le!==null&&Ve===le.alternate)break t;Ve=Zn(Ve),le=Zn(le)}Ve=null}else Ve=null;xe!==null&&Fa(ye,ge,xe,Ve,!1),Ae!==null&&tt!==null&&Fa(ye,tt,Ae,Ve,!0)}}e:{if(ge=de?tr(de):window,xe=ge.nodeName&&ge.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ge.type==="file")var Be=uc;else if(ga(ge))if(ya)Be=fc;else{Be=dc;var we=cc}else(xe=ge.nodeName)&&xe.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(Be=hc);if(Be&&(Be=Be(n,de))){ma(ye,Be,a,me);break e}we&&we(n,ge,de),n==="focusout"&&(we=ge._wrapperState)&&we.controlled&&ge.type==="number"&&Ce(ge,"number",ge.value)}switch(we=de?tr(de):window,n){case"focusin":(ga(we)||we.contentEditable==="true")&&(jn=we,Ci=de,Ir=null);break;case"focusout":Ir=Ci=jn=null;break;case"mousedown":Ti=!0;break;case"contextmenu":case"mouseup":case"dragend":Ti=!1,Ta(ye,a,me);break;case"selectionchange":if(mc)break;case"keydown":case"keyup":Ta(ye,a,me)}var Me;if(_i)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Xn?fa(n,a)&&(be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(ca&&a.locale!=="ko"&&(Xn||be!=="onCompositionStart"?be==="onCompositionEnd"&&Xn&&(Me=ia()):(yn=me,pi="value"in yn?yn.value:yn.textContent,Xn=!0)),we=ys(de,be),0<we.length&&(be=new la(be,n,null,a,me),ye.push({event:be,listeners:we}),Me?be.data=Me:(Me=pa(a),Me!==null&&(be.data=Me)))),(Me=sc?ic(n,a):oc(n,a))&&(de=ys(de,"onBeforeInput"),0<de.length&&(me=new la("onBeforeInput","beforeinput",null,a,me),ye.push({event:me,listeners:de}),me.data=Me))}ba(ye,s)})}function Nr(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ys(n,s){for(var a=s+"Capture",f=[];n!==null;){var m=n,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=_t(n,a),_!=null&&f.unshift(Nr(n,_,m)),_=_t(n,s),_!=null&&f.push(Nr(n,_,m))),n=n.return}return f}function Zn(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Fa(n,s,a,f,m){for(var _=s._reactName,k=[];a!==null&&a!==f;){var J=a,j=J.alternate,de=J.stateNode;if(j!==null&&j===f)break;J.tag===5&&de!==null&&(J=de,m?(j=_t(a,_),j!=null&&k.unshift(Nr(a,j,J))):m||(j=_t(a,_),j!=null&&k.push(Nr(a,j,J)))),a=a.return}k.length!==0&&n.push({event:s,listeners:k})}var _c=/\r\n?/g,Ec=/\u0000|\uFFFD/g;function Da(n){return(typeof n=="string"?n:""+n).replace(_c,`
`).replace(Ec,"")}function Ps(n,s,a){if(s=Da(s),Da(n)!==s&&a)throw Error(r(425))}function vs(){}var Mi=null,Ii=null;function ki(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bi=typeof setTimeout=="function"?setTimeout:void 0,Sc=typeof clearTimeout=="function"?clearTimeout:void 0,La=typeof Promise=="function"?Promise:void 0,xc=typeof queueMicrotask=="function"?queueMicrotask:typeof La<"u"?function(n){return La.resolve(null).then(n).catch(Cc)}:bi;function Cc(n){setTimeout(function(){throw n})}function Ni(n,s){var a=s,f=0;do{var m=a.nextSibling;if(n.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(f===0){n.removeChild(m),Tr(s);return}f--}else a!=="$"&&a!=="$?"&&a!=="$!"||f++;a=m}while(a);Tr(s)}function vn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Ua(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var er=Math.random().toString(36).slice(2),Yt="__reactFiber$"+er,Fr="__reactProps$"+er,tn="__reactContainer$"+er,Fi="__reactEvents$"+er,Tc="__reactListeners$"+er,Ac="__reactHandles$"+er;function bn(n){var s=n[Yt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[tn]||a[Yt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Ua(n);n!==null;){if(a=n[Yt])return a;n=Ua(n)}return s}n=a,a=n.parentNode}return null}function Dr(n){return n=n[Yt]||n[tn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function tr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function _s(n){return n[Fr]||null}var Di=[],nr=-1;function _n(n){return{current:n}}function We(n){0>nr||(n.current=Di[nr],Di[nr]=null,nr--)}function Ge(n,s){nr++,Di[nr]=n.current,n.current=s}var En={},ft=_n(En),Et=_n(!1),Nn=En;function rr(n,s){var a=n.type.contextTypes;if(!a)return En;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in a)m[_]=s[_];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=m),m}function St(n){return n=n.childContextTypes,n!=null}function Es(){We(Et),We(ft)}function Oa(n,s,a){if(ft.current!==En)throw Error(r(168));Ge(ft,s),Ge(Et,a)}function qa(n,s,a){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return a;f=f.getChildContext();for(var m in f)if(!(m in s))throw Error(r(108,F(n)||"Unknown",m));return C({},a,f)}function Ss(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||En,Nn=ft.current,Ge(ft,n),Ge(Et,Et.current),!0}function Ga(n,s,a){var f=n.stateNode;if(!f)throw Error(r(169));a?(n=qa(n,s,Nn),f.__reactInternalMemoizedMergedChildContext=n,We(Et),We(ft),Ge(ft,n)):We(Et),Ge(Et,a)}var nn=null,xs=!1,Li=!1;function Ha(n){nn===null?nn=[n]:nn.push(n)}function Vc(n){xs=!0,Ha(n)}function Sn(){if(!Li&&nn!==null){Li=!0;var n=0,s=Le;try{var a=nn;for(Le=1;n<a.length;n++){var f=a[n];do f=f(!0);while(f!==null)}nn=null,xs=!1}catch(m){throw nn!==null&&(nn=nn.slice(n+1)),Wo(oi,Sn),m}finally{Le=s,Li=!1}}return null}var sr=[],ir=0,Cs=null,Ts=0,wt=[],Mt=0,Fn=null,rn=1,sn="";function Dn(n,s){sr[ir++]=Ts,sr[ir++]=Cs,Cs=n,Ts=s}function za(n,s,a){wt[Mt++]=rn,wt[Mt++]=sn,wt[Mt++]=Fn,Fn=n;var f=rn;n=sn;var m=32-Dt(f)-1;f&=~(1<<m),a+=1;var _=32-Dt(s)+m;if(30<_){var k=m-m%5;_=(f&(1<<k)-1).toString(32),f>>=k,m-=k,rn=1<<32-Dt(s)+m|a<<m|f,sn=_+n}else rn=1<<_|a<<m|f,sn=n}function Ui(n){n.return!==null&&(Dn(n,1),za(n,1,0))}function Oi(n){for(;n===Cs;)Cs=sr[--ir],sr[ir]=null,Ts=sr[--ir],sr[ir]=null;for(;n===Fn;)Fn=wt[--Mt],wt[Mt]=null,sn=wt[--Mt],wt[Mt]=null,rn=wt[--Mt],wt[Mt]=null}var Vt=null,Bt=null,Ye=!1,Ut=null;function Wa(n,s){var a=Nt(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function $a(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Vt=n,Bt=vn(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Vt=n,Bt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Fn!==null?{id:rn,overflow:sn}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Nt(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Vt=n,Bt=null,!0):!1;default:return!1}}function qi(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Gi(n){if(Ye){var s=Bt;if(s){var a=s;if(!$a(n,s)){if(qi(n))throw Error(r(418));s=vn(a.nextSibling);var f=Vt;s&&$a(n,s)?Wa(f,a):(n.flags=n.flags&-4097|2,Ye=!1,Vt=n)}}else{if(qi(n))throw Error(r(418));n.flags=n.flags&-4097|2,Ye=!1,Vt=n}}}function Ja(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Vt=n}function As(n){if(n!==Vt)return!1;if(!Ye)return Ja(n),Ye=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!ki(n.type,n.memoizedProps)),s&&(s=Bt)){if(qi(n))throw Ya(),Error(r(418));for(;s;)Wa(n,s),s=vn(s.nextSibling)}if(Ja(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Bt=vn(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Bt=null}}else Bt=Vt?vn(n.stateNode.nextSibling):null;return!0}function Ya(){for(var n=Bt;n;)n=vn(n.nextSibling)}function or(){Bt=Vt=null,Ye=!1}function Hi(n){Ut===null?Ut=[n]:Ut.push(n)}var Bc=R.ReactCurrentBatchConfig;function Lr(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var f=a.stateNode}if(!f)throw Error(r(147,n));var m=f,_=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===_?s.ref:(s=function(k){var J=m.refs;k===null?delete J[_]:J[_]=k},s._stringRef=_,s)}if(typeof n!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,n))}return n}function Vs(n,s){throw n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Ka(n){var s=n._init;return s(n._payload)}function Xa(n){function s(le,Z){if(n){var ue=le.deletions;ue===null?(le.deletions=[Z],le.flags|=16):ue.push(Z)}}function a(le,Z){if(!n)return null;for(;Z!==null;)s(le,Z),Z=Z.sibling;return null}function f(le,Z){for(le=new Map;Z!==null;)Z.key!==null?le.set(Z.key,Z):le.set(Z.index,Z),Z=Z.sibling;return le}function m(le,Z){return le=wn(le,Z),le.index=0,le.sibling=null,le}function _(le,Z,ue){return le.index=ue,n?(ue=le.alternate,ue!==null?(ue=ue.index,ue<Z?(le.flags|=2,Z):ue):(le.flags|=2,Z)):(le.flags|=1048576,Z)}function k(le){return n&&le.alternate===null&&(le.flags|=2),le}function J(le,Z,ue,Pe){return Z===null||Z.tag!==6?(Z=No(ue,le.mode,Pe),Z.return=le,Z):(Z=m(Z,ue),Z.return=le,Z)}function j(le,Z,ue,Pe){var Be=ue.type;return Be===z?me(le,Z,ue.props.children,Pe,ue.key):Z!==null&&(Z.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===re&&Ka(Be)===Z.type)?(Pe=m(Z,ue.props),Pe.ref=Lr(le,Z,ue),Pe.return=le,Pe):(Pe=js(ue.type,ue.key,ue.props,null,le.mode,Pe),Pe.ref=Lr(le,Z,ue),Pe.return=le,Pe)}function de(le,Z,ue,Pe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ue.containerInfo||Z.stateNode.implementation!==ue.implementation?(Z=Fo(ue,le.mode,Pe),Z.return=le,Z):(Z=m(Z,ue.children||[]),Z.return=le,Z)}function me(le,Z,ue,Pe,Be){return Z===null||Z.tag!==7?(Z=Wn(ue,le.mode,Pe,Be),Z.return=le,Z):(Z=m(Z,ue),Z.return=le,Z)}function ye(le,Z,ue){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=No(""+Z,le.mode,ue),Z.return=le,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case q:return ue=js(Z.type,Z.key,Z.props,null,le.mode,ue),ue.ref=Lr(le,null,Z),ue.return=le,ue;case G:return Z=Fo(Z,le.mode,ue),Z.return=le,Z;case re:var Pe=Z._init;return ye(le,Pe(Z._payload),ue)}if(Re(Z)||L(Z))return Z=Wn(Z,le.mode,ue,null),Z.return=le,Z;Vs(le,Z)}return null}function ge(le,Z,ue,Pe){var Be=Z!==null?Z.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Be!==null?null:J(le,Z,""+ue,Pe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case q:return ue.key===Be?j(le,Z,ue,Pe):null;case G:return ue.key===Be?de(le,Z,ue,Pe):null;case re:return Be=ue._init,ge(le,Z,Be(ue._payload),Pe)}if(Re(ue)||L(ue))return Be!==null?null:me(le,Z,ue,Pe,null);Vs(le,ue)}return null}function xe(le,Z,ue,Pe,Be){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return le=le.get(ue)||null,J(Z,le,""+Pe,Be);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case q:return le=le.get(Pe.key===null?ue:Pe.key)||null,j(Z,le,Pe,Be);case G:return le=le.get(Pe.key===null?ue:Pe.key)||null,de(Z,le,Pe,Be);case re:var we=Pe._init;return xe(le,Z,ue,we(Pe._payload),Be)}if(Re(Pe)||L(Pe))return le=le.get(ue)||null,me(Z,le,Pe,Be,null);Vs(Z,Pe)}return null}function Ae(le,Z,ue,Pe){for(var Be=null,we=null,Me=Z,be=Z=0,ut=null;Me!==null&&be<ue.length;be++){Me.index>be?(ut=Me,Me=null):ut=Me.sibling;var Fe=ge(le,Me,ue[be],Pe);if(Fe===null){Me===null&&(Me=ut);break}n&&Me&&Fe.alternate===null&&s(le,Me),Z=_(Fe,Z,be),we===null?Be=Fe:we.sibling=Fe,we=Fe,Me=ut}if(be===ue.length)return a(le,Me),Ye&&Dn(le,be),Be;if(Me===null){for(;be<ue.length;be++)Me=ye(le,ue[be],Pe),Me!==null&&(Z=_(Me,Z,be),we===null?Be=Me:we.sibling=Me,we=Me);return Ye&&Dn(le,be),Be}for(Me=f(le,Me);be<ue.length;be++)ut=xe(Me,le,be,ue[be],Pe),ut!==null&&(n&&ut.alternate!==null&&Me.delete(ut.key===null?be:ut.key),Z=_(ut,Z,be),we===null?Be=ut:we.sibling=ut,we=ut);return n&&Me.forEach(function(Mn){return s(le,Mn)}),Ye&&Dn(le,be),Be}function Ve(le,Z,ue,Pe){var Be=L(ue);if(typeof Be!="function")throw Error(r(150));if(ue=Be.call(ue),ue==null)throw Error(r(151));for(var we=Be=null,Me=Z,be=Z=0,ut=null,Fe=ue.next();Me!==null&&!Fe.done;be++,Fe=ue.next()){Me.index>be?(ut=Me,Me=null):ut=Me.sibling;var Mn=ge(le,Me,Fe.value,Pe);if(Mn===null){Me===null&&(Me=ut);break}n&&Me&&Mn.alternate===null&&s(le,Me),Z=_(Mn,Z,be),we===null?Be=Mn:we.sibling=Mn,we=Mn,Me=ut}if(Fe.done)return a(le,Me),Ye&&Dn(le,be),Be;if(Me===null){for(;!Fe.done;be++,Fe=ue.next())Fe=ye(le,Fe.value,Pe),Fe!==null&&(Z=_(Fe,Z,be),we===null?Be=Fe:we.sibling=Fe,we=Fe);return Ye&&Dn(le,be),Be}for(Me=f(le,Me);!Fe.done;be++,Fe=ue.next())Fe=xe(Me,le,be,Fe.value,Pe),Fe!==null&&(n&&Fe.alternate!==null&&Me.delete(Fe.key===null?be:Fe.key),Z=_(Fe,Z,be),we===null?Be=Fe:we.sibling=Fe,we=Fe);return n&&Me.forEach(function(ad){return s(le,ad)}),Ye&&Dn(le,be),Be}function tt(le,Z,ue,Pe){if(typeof ue=="object"&&ue!==null&&ue.type===z&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case q:e:{for(var Be=ue.key,we=Z;we!==null;){if(we.key===Be){if(Be=ue.type,Be===z){if(we.tag===7){a(le,we.sibling),Z=m(we,ue.props.children),Z.return=le,le=Z;break e}}else if(we.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===re&&Ka(Be)===we.type){a(le,we.sibling),Z=m(we,ue.props),Z.ref=Lr(le,we,ue),Z.return=le,le=Z;break e}a(le,we);break}else s(le,we);we=we.sibling}ue.type===z?(Z=Wn(ue.props.children,le.mode,Pe,ue.key),Z.return=le,le=Z):(Pe=js(ue.type,ue.key,ue.props,null,le.mode,Pe),Pe.ref=Lr(le,Z,ue),Pe.return=le,le=Pe)}return k(le);case G:e:{for(we=ue.key;Z!==null;){if(Z.key===we)if(Z.tag===4&&Z.stateNode.containerInfo===ue.containerInfo&&Z.stateNode.implementation===ue.implementation){a(le,Z.sibling),Z=m(Z,ue.children||[]),Z.return=le,le=Z;break e}else{a(le,Z);break}else s(le,Z);Z=Z.sibling}Z=Fo(ue,le.mode,Pe),Z.return=le,le=Z}return k(le);case re:return we=ue._init,tt(le,Z,we(ue._payload),Pe)}if(Re(ue))return Ae(le,Z,ue,Pe);if(L(ue))return Ve(le,Z,ue,Pe);Vs(le,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,Z!==null&&Z.tag===6?(a(le,Z.sibling),Z=m(Z,ue),Z.return=le,le=Z):(a(le,Z),Z=No(ue,le.mode,Pe),Z.return=le,le=Z),k(le)):a(le,Z)}return tt}var ar=Xa(!0),ja=Xa(!1),Bs=_n(null),Rs=null,lr=null,zi=null;function Wi(){zi=lr=Rs=null}function $i(n){var s=Bs.current;We(Bs),n._currentValue=s}function Ji(n,s,a){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===a)break;n=n.return}}function ur(n,s){Rs=n,zi=lr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(xt=!0),n.firstContext=null)}function It(n){var s=n._currentValue;if(zi!==n)if(n={context:n,memoizedValue:s,next:null},lr===null){if(Rs===null)throw Error(r(308));lr=n,Rs.dependencies={lanes:0,firstContext:n}}else lr=lr.next=n;return s}var Ln=null;function Yi(n){Ln===null?Ln=[n]:Ln.push(n)}function Qa(n,s,a,f){var m=s.interleaved;return m===null?(a.next=a,Yi(s)):(a.next=m.next,m.next=a),s.interleaved=a,on(n,f)}function on(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var xn=!1;function Ki(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Za(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function an(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Cn(n,s,a){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(Ne&2)!==0){var m=f.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),f.pending=s,on(n,a)}return m=f.interleaved,m===null?(s.next=s,Yi(f)):(s.next=m.next,m.next=s),f.interleaved=s,on(n,a)}function ws(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,a|=f,s.lanes=a,ui(n,a)}}function el(n,s){var a=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var m=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var k={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};_===null?m=_=k:_=_.next=k,a=a.next}while(a!==null);_===null?m=_=s:_=_.next=s}else m=_=s;a={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Ms(n,s,a,f){var m=n.updateQueue;xn=!1;var _=m.firstBaseUpdate,k=m.lastBaseUpdate,J=m.shared.pending;if(J!==null){m.shared.pending=null;var j=J,de=j.next;j.next=null,k===null?_=de:k.next=de,k=j;var me=n.alternate;me!==null&&(me=me.updateQueue,J=me.lastBaseUpdate,J!==k&&(J===null?me.firstBaseUpdate=de:J.next=de,me.lastBaseUpdate=j))}if(_!==null){var ye=m.baseState;k=0,me=de=j=null,J=_;do{var ge=J.lane,xe=J.eventTime;if((f&ge)===ge){me!==null&&(me=me.next={eventTime:xe,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Ae=n,Ve=J;switch(ge=s,xe=a,Ve.tag){case 1:if(Ae=Ve.payload,typeof Ae=="function"){ye=Ae.call(xe,ye,ge);break e}ye=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ve.payload,ge=typeof Ae=="function"?Ae.call(xe,ye,ge):Ae,ge==null)break e;ye=C({},ye,ge);break e;case 2:xn=!0}}J.callback!==null&&J.lane!==0&&(n.flags|=64,ge=m.effects,ge===null?m.effects=[J]:ge.push(J))}else xe={eventTime:xe,lane:ge,tag:J.tag,payload:J.payload,callback:J.callback,next:null},me===null?(de=me=xe,j=ye):me=me.next=xe,k|=ge;if(J=J.next,J===null){if(J=m.shared.pending,J===null)break;ge=J,J=ge.next,ge.next=null,m.lastBaseUpdate=ge,m.shared.pending=null}}while(!0);if(me===null&&(j=ye),m.baseState=j,m.firstBaseUpdate=de,m.lastBaseUpdate=me,s=m.shared.interleaved,s!==null){m=s;do k|=m.lane,m=m.next;while(m!==s)}else _===null&&(m.shared.lanes=0);qn|=k,n.lanes=k,n.memoizedState=ye}}function tl(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],m=f.callback;if(m!==null){if(f.callback=null,f=a,typeof m!="function")throw Error(r(191,m));m.call(f)}}}var Ur={},Kt=_n(Ur),Or=_n(Ur),qr=_n(Ur);function Un(n){if(n===Ur)throw Error(r(174));return n}function Xi(n,s){switch(Ge(qr,s),Ge(Or,n),Ge(Kt,Ur),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ht(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ht(s,n)}We(Kt),Ge(Kt,s)}function cr(){We(Kt),We(Or),We(qr)}function nl(n){Un(qr.current);var s=Un(Kt.current),a=ht(s,n.type);s!==a&&(Ge(Or,n),Ge(Kt,a))}function ji(n){Or.current===n&&(We(Kt),We(Or))}var Ke=_n(0);function Is(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Qi=[];function Zi(){for(var n=0;n<Qi.length;n++)Qi[n]._workInProgressVersionPrimary=null;Qi.length=0}var ks=R.ReactCurrentDispatcher,eo=R.ReactCurrentBatchConfig,On=0,Xe=null,st=null,at=null,bs=!1,Gr=!1,Hr=0,Rc=0;function pt(){throw Error(r(321))}function to(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Lt(n[a],s[a]))return!1;return!0}function no(n,s,a,f,m,_){if(On=_,Xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ks.current=n===null||n.memoizedState===null?kc:bc,n=a(f,m),Gr){_=0;do{if(Gr=!1,Hr=0,25<=_)throw Error(r(301));_+=1,at=st=null,s.updateQueue=null,ks.current=Nc,n=a(f,m)}while(Gr)}if(ks.current=Ds,s=st!==null&&st.next!==null,On=0,at=st=Xe=null,bs=!1,s)throw Error(r(300));return n}function ro(){var n=Hr!==0;return Hr=0,n}function Xt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Xe.memoizedState=at=n:at=at.next=n,at}function kt(){if(st===null){var n=Xe.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var s=at===null?Xe.memoizedState:at.next;if(s!==null)at=s,st=n;else{if(n===null)throw Error(r(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},at===null?Xe.memoizedState=at=n:at=at.next=n}return at}function zr(n,s){return typeof s=="function"?s(n):s}function so(n){var s=kt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var f=st,m=f.baseQueue,_=a.pending;if(_!==null){if(m!==null){var k=m.next;m.next=_.next,_.next=k}f.baseQueue=m=_,a.pending=null}if(m!==null){_=m.next,f=f.baseState;var J=k=null,j=null,de=_;do{var me=de.lane;if((On&me)===me)j!==null&&(j=j.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),f=de.hasEagerState?de.eagerState:n(f,de.action);else{var ye={lane:me,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};j===null?(J=j=ye,k=f):j=j.next=ye,Xe.lanes|=me,qn|=me}de=de.next}while(de!==null&&de!==_);j===null?k=f:j.next=J,Lt(f,s.memoizedState)||(xt=!0),s.memoizedState=f,s.baseState=k,s.baseQueue=j,a.lastRenderedState=f}if(n=a.interleaved,n!==null){m=n;do _=m.lane,Xe.lanes|=_,qn|=_,m=m.next;while(m!==n)}else m===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function io(n){var s=kt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var f=a.dispatch,m=a.pending,_=s.memoizedState;if(m!==null){a.pending=null;var k=m=m.next;do _=n(_,k.action),k=k.next;while(k!==m);Lt(_,s.memoizedState)||(xt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,f]}function rl(){}function sl(n,s){var a=Xe,f=kt(),m=s(),_=!Lt(f.memoizedState,m);if(_&&(f.memoizedState=m,xt=!0),f=f.queue,oo(al.bind(null,a,f,n),[n]),f.getSnapshot!==s||_||at!==null&&at.memoizedState.tag&1){if(a.flags|=2048,Wr(9,ol.bind(null,a,f,m,s),void 0,null),lt===null)throw Error(r(349));(On&30)!==0||il(a,s,m)}return m}function il(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Xe.updateQueue,s===null?(s={lastEffect:null,stores:null},Xe.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ol(n,s,a,f){s.value=a,s.getSnapshot=f,ll(s)&&ul(n)}function al(n,s,a){return a(function(){ll(s)&&ul(n)})}function ll(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Lt(n,a)}catch{return!0}}function ul(n){var s=on(n,1);s!==null&&Ht(s,n,1,-1)}function cl(n){var s=Xt();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:n},s.queue=n,n=n.dispatch=Ic.bind(null,Xe,n),[s.memoizedState,n]}function Wr(n,s,a,f){return n={tag:n,create:s,destroy:a,deps:f,next:null},s=Xe.updateQueue,s===null?(s={lastEffect:null,stores:null},Xe.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(f=a.next,a.next=n,n.next=f,s.lastEffect=n)),n}function dl(){return kt().memoizedState}function Ns(n,s,a,f){var m=Xt();Xe.flags|=n,m.memoizedState=Wr(1|s,a,void 0,f===void 0?null:f)}function Fs(n,s,a,f){var m=kt();f=f===void 0?null:f;var _=void 0;if(st!==null){var k=st.memoizedState;if(_=k.destroy,f!==null&&to(f,k.deps)){m.memoizedState=Wr(s,a,_,f);return}}Xe.flags|=n,m.memoizedState=Wr(1|s,a,_,f)}function hl(n,s){return Ns(8390656,8,n,s)}function oo(n,s){return Fs(2048,8,n,s)}function fl(n,s){return Fs(4,2,n,s)}function pl(n,s){return Fs(4,4,n,s)}function gl(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function ml(n,s,a){return a=a!=null?a.concat([n]):null,Fs(4,4,gl.bind(null,s,n),a)}function ao(){}function yl(n,s){var a=kt();s=s===void 0?null:s;var f=a.memoizedState;return f!==null&&s!==null&&to(s,f[1])?f[0]:(a.memoizedState=[n,s],n)}function Pl(n,s){var a=kt();s=s===void 0?null:s;var f=a.memoizedState;return f!==null&&s!==null&&to(s,f[1])?f[0]:(n=n(),a.memoizedState=[n,s],n)}function vl(n,s,a){return(On&21)===0?(n.baseState&&(n.baseState=!1,xt=!0),n.memoizedState=a):(Lt(a,s)||(a=Ko(),Xe.lanes|=a,qn|=a,n.baseState=!0),s)}function wc(n,s){var a=Le;Le=a!==0&&4>a?a:4,n(!0);var f=eo.transition;eo.transition={};try{n(!1),s()}finally{Le=a,eo.transition=f}}function _l(){return kt().memoizedState}function Mc(n,s,a){var f=Bn(n);if(a={lane:f,action:a,hasEagerState:!1,eagerState:null,next:null},El(n))Sl(s,a);else if(a=Qa(n,s,a,f),a!==null){var m=vt();Ht(a,n,f,m),xl(a,s,f)}}function Ic(n,s,a){var f=Bn(n),m={lane:f,action:a,hasEagerState:!1,eagerState:null,next:null};if(El(n))Sl(s,m);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var k=s.lastRenderedState,J=_(k,a);if(m.hasEagerState=!0,m.eagerState=J,Lt(J,k)){var j=s.interleaved;j===null?(m.next=m,Yi(s)):(m.next=j.next,j.next=m),s.interleaved=m;return}}catch{}finally{}a=Qa(n,s,m,f),a!==null&&(m=vt(),Ht(a,n,f,m),xl(a,s,f))}}function El(n){var s=n.alternate;return n===Xe||s!==null&&s===Xe}function Sl(n,s){Gr=bs=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function xl(n,s,a){if((a&4194240)!==0){var f=s.lanes;f&=n.pendingLanes,a|=f,s.lanes=a,ui(n,a)}}var Ds={readContext:It,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},kc={readContext:It,useCallback:function(n,s){return Xt().memoizedState=[n,s===void 0?null:s],n},useContext:It,useEffect:hl,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Ns(4194308,4,gl.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ns(4194308,4,n,s)},useInsertionEffect:function(n,s){return Ns(4,2,n,s)},useMemo:function(n,s){var a=Xt();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var f=Xt();return s=a!==void 0?a(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=Mc.bind(null,Xe,n),[f.memoizedState,n]},useRef:function(n){var s=Xt();return n={current:n},s.memoizedState=n},useState:cl,useDebugValue:ao,useDeferredValue:function(n){return Xt().memoizedState=n},useTransition:function(){var n=cl(!1),s=n[0];return n=wc.bind(null,n[1]),Xt().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var f=Xe,m=Xt();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),lt===null)throw Error(r(349));(On&30)!==0||il(f,s,a)}m.memoizedState=a;var _={value:a,getSnapshot:s};return m.queue=_,hl(al.bind(null,f,_,n),[n]),f.flags|=2048,Wr(9,ol.bind(null,f,_,a,s),void 0,null),a},useId:function(){var n=Xt(),s=lt.identifierPrefix;if(Ye){var a=sn,f=rn;a=(f&~(1<<32-Dt(f)-1)).toString(32)+a,s=":"+s+"R"+a,a=Hr++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Rc++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},bc={readContext:It,useCallback:yl,useContext:It,useEffect:oo,useImperativeHandle:ml,useInsertionEffect:fl,useLayoutEffect:pl,useMemo:Pl,useReducer:so,useRef:dl,useState:function(){return so(zr)},useDebugValue:ao,useDeferredValue:function(n){var s=kt();return vl(s,st.memoizedState,n)},useTransition:function(){var n=so(zr)[0],s=kt().memoizedState;return[n,s]},useMutableSource:rl,useSyncExternalStore:sl,useId:_l,unstable_isNewReconciler:!1},Nc={readContext:It,useCallback:yl,useContext:It,useEffect:oo,useImperativeHandle:ml,useInsertionEffect:fl,useLayoutEffect:pl,useMemo:Pl,useReducer:io,useRef:dl,useState:function(){return io(zr)},useDebugValue:ao,useDeferredValue:function(n){var s=kt();return st===null?s.memoizedState=n:vl(s,st.memoizedState,n)},useTransition:function(){var n=io(zr)[0],s=kt().memoizedState;return[n,s]},useMutableSource:rl,useSyncExternalStore:sl,useId:_l,unstable_isNewReconciler:!1};function Ot(n,s){if(n&&n.defaultProps){s=C({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function lo(n,s,a,f){s=n.memoizedState,a=a(f,s),a=a==null?s:C({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ls={isMounted:function(n){return(n=n._reactInternals)?kn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var f=vt(),m=Bn(n),_=an(f,m);_.payload=s,a!=null&&(_.callback=a),s=Cn(n,_,m),s!==null&&(Ht(s,n,m,f),ws(s,n,m))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var f=vt(),m=Bn(n),_=an(f,m);_.tag=1,_.payload=s,a!=null&&(_.callback=a),s=Cn(n,_,m),s!==null&&(Ht(s,n,m,f),ws(s,n,m))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=vt(),f=Bn(n),m=an(a,f);m.tag=2,s!=null&&(m.callback=s),s=Cn(n,m,f),s!==null&&(Ht(s,n,f,a),ws(s,n,f))}};function Cl(n,s,a,f,m,_,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,_,k):s.prototype&&s.prototype.isPureReactComponent?!Mr(a,f)||!Mr(m,_):!0}function Tl(n,s,a){var f=!1,m=En,_=s.contextType;return typeof _=="object"&&_!==null?_=It(_):(m=St(s)?Nn:ft.current,f=s.contextTypes,_=(f=f!=null)?rr(n,m):En),s=new s(a,_),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ls,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=_),s}function Al(n,s,a,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,f),s.state!==n&&Ls.enqueueReplaceState(s,s.state,null)}function uo(n,s,a,f){var m=n.stateNode;m.props=a,m.state=n.memoizedState,m.refs={},Ki(n);var _=s.contextType;typeof _=="object"&&_!==null?m.context=It(_):(_=St(s)?Nn:ft.current,m.context=rr(n,_)),m.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(lo(n,s,_,a),m.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&Ls.enqueueReplaceState(m,m.state,null),Ms(n,a,m,f),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function dr(n,s){try{var a="",f=s;do a+=T(f),f=f.return;while(f);var m=a}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:s,stack:m,digest:null}}function co(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function ho(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Fc=typeof WeakMap=="function"?WeakMap:Map;function Vl(n,s,a){a=an(-1,a),a.tag=3,a.payload={element:null};var f=s.value;return a.callback=function(){Ws||(Ws=!0,Vo=f),ho(n,s)},a}function Bl(n,s,a){a=an(-1,a),a.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var m=s.value;a.payload=function(){return f(m)},a.callback=function(){ho(n,s)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){ho(n,s),typeof f!="function"&&(An===null?An=new Set([this]):An.add(this));var k=s.stack;this.componentDidCatch(s.value,{componentStack:k!==null?k:""})}),a}function Rl(n,s,a){var f=n.pingCache;if(f===null){f=n.pingCache=new Fc;var m=new Set;f.set(s,m)}else m=f.get(s),m===void 0&&(m=new Set,f.set(s,m));m.has(a)||(m.add(a),n=Xc.bind(null,n,s,a),s.then(n,n))}function wl(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Ml(n,s,a,f,m){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=an(-1,1),s.tag=2,Cn(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var Dc=R.ReactCurrentOwner,xt=!1;function Pt(n,s,a,f){s.child=n===null?ja(s,null,a,f):ar(s,n.child,a,f)}function Il(n,s,a,f,m){a=a.render;var _=s.ref;return ur(s,m),f=no(n,s,a,f,_,m),a=ro(),n!==null&&!xt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,ln(n,s,m)):(Ye&&a&&Ui(s),s.flags|=1,Pt(n,s,f,m),s.child)}function kl(n,s,a,f,m){if(n===null){var _=a.type;return typeof _=="function"&&!bo(_)&&_.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=_,bl(n,s,_,f,m)):(n=js(a.type,null,f,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(_=n.child,(n.lanes&m)===0){var k=_.memoizedProps;if(a=a.compare,a=a!==null?a:Mr,a(k,f)&&n.ref===s.ref)return ln(n,s,m)}return s.flags|=1,n=wn(_,f),n.ref=s.ref,n.return=s,s.child=n}function bl(n,s,a,f,m){if(n!==null){var _=n.memoizedProps;if(Mr(_,f)&&n.ref===s.ref)if(xt=!1,s.pendingProps=f=_,(n.lanes&m)!==0)(n.flags&131072)!==0&&(xt=!0);else return s.lanes=n.lanes,ln(n,s,m)}return fo(n,s,a,f,m)}function Nl(n,s,a){var f=s.pendingProps,m=f.children,_=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(fr,Rt),Rt|=a;else{if((a&1073741824)===0)return n=_!==null?_.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ge(fr,Rt),Rt|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:a,Ge(fr,Rt),Rt|=f}else _!==null?(f=_.baseLanes|a,s.memoizedState=null):f=a,Ge(fr,Rt),Rt|=f;return Pt(n,s,m,a),s.child}function Fl(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function fo(n,s,a,f,m){var _=St(a)?Nn:ft.current;return _=rr(s,_),ur(s,m),a=no(n,s,a,f,_,m),f=ro(),n!==null&&!xt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,ln(n,s,m)):(Ye&&f&&Ui(s),s.flags|=1,Pt(n,s,a,m),s.child)}function Dl(n,s,a,f,m){if(St(a)){var _=!0;Ss(s)}else _=!1;if(ur(s,m),s.stateNode===null)Os(n,s),Tl(s,a,f),uo(s,a,f,m),f=!0;else if(n===null){var k=s.stateNode,J=s.memoizedProps;k.props=J;var j=k.context,de=a.contextType;typeof de=="object"&&de!==null?de=It(de):(de=St(a)?Nn:ft.current,de=rr(s,de));var me=a.getDerivedStateFromProps,ye=typeof me=="function"||typeof k.getSnapshotBeforeUpdate=="function";ye||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(J!==f||j!==de)&&Al(s,k,f,de),xn=!1;var ge=s.memoizedState;k.state=ge,Ms(s,f,k,m),j=s.memoizedState,J!==f||ge!==j||Et.current||xn?(typeof me=="function"&&(lo(s,a,me,f),j=s.memoizedState),(J=xn||Cl(s,a,J,f,ge,j,de))?(ye||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(s.flags|=4194308)):(typeof k.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=j),k.props=f,k.state=j,k.context=de,f=J):(typeof k.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{k=s.stateNode,Za(n,s),J=s.memoizedProps,de=s.type===s.elementType?J:Ot(s.type,J),k.props=de,ye=s.pendingProps,ge=k.context,j=a.contextType,typeof j=="object"&&j!==null?j=It(j):(j=St(a)?Nn:ft.current,j=rr(s,j));var xe=a.getDerivedStateFromProps;(me=typeof xe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(J!==ye||ge!==j)&&Al(s,k,f,j),xn=!1,ge=s.memoizedState,k.state=ge,Ms(s,f,k,m);var Ae=s.memoizedState;J!==ye||ge!==Ae||Et.current||xn?(typeof xe=="function"&&(lo(s,a,xe,f),Ae=s.memoizedState),(de=xn||Cl(s,a,de,f,ge,Ae,j)||!1)?(me||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,Ae,j),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,Ae,j)),typeof k.componentDidUpdate=="function"&&(s.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof k.componentDidUpdate!="function"||J===n.memoizedProps&&ge===n.memoizedState||(s.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||J===n.memoizedProps&&ge===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Ae),k.props=f,k.state=Ae,k.context=j,f=de):(typeof k.componentDidUpdate!="function"||J===n.memoizedProps&&ge===n.memoizedState||(s.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||J===n.memoizedProps&&ge===n.memoizedState||(s.flags|=1024),f=!1)}return po(n,s,a,f,_,m)}function po(n,s,a,f,m,_){Fl(n,s);var k=(s.flags&128)!==0;if(!f&&!k)return m&&Ga(s,a,!1),ln(n,s,_);f=s.stateNode,Dc.current=s;var J=k&&typeof a.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&k?(s.child=ar(s,n.child,null,_),s.child=ar(s,null,J,_)):Pt(n,s,J,_),s.memoizedState=f.state,m&&Ga(s,a,!0),s.child}function Ll(n){var s=n.stateNode;s.pendingContext?Oa(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Oa(n,s.context,!1),Xi(n,s.containerInfo)}function Ul(n,s,a,f,m){return or(),Hi(m),s.flags|=256,Pt(n,s,a,f),s.child}var go={dehydrated:null,treeContext:null,retryLane:0};function mo(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ol(n,s,a){var f=s.pendingProps,m=Ke.current,_=!1,k=(s.flags&128)!==0,J;if((J=k)||(J=n!==null&&n.memoizedState===null?!1:(m&2)!==0),J?(_=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Ge(Ke,m&1),n===null)return Gi(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(k=f.children,n=f.fallback,_?(f=s.mode,_=s.child,k={mode:"hidden",children:k},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=k):_=Qs(k,f,0,null),n=Wn(n,f,a,null),_.return=s,n.return=s,_.sibling=n,s.child=_,s.child.memoizedState=mo(a),s.memoizedState=go,n):yo(s,k));if(m=n.memoizedState,m!==null&&(J=m.dehydrated,J!==null))return Lc(n,s,k,f,J,m,a);if(_){_=f.fallback,k=s.mode,m=n.child,J=m.sibling;var j={mode:"hidden",children:f.children};return(k&1)===0&&s.child!==m?(f=s.child,f.childLanes=0,f.pendingProps=j,s.deletions=null):(f=wn(m,j),f.subtreeFlags=m.subtreeFlags&14680064),J!==null?_=wn(J,_):(_=Wn(_,k,a,null),_.flags|=2),_.return=s,f.return=s,f.sibling=_,s.child=f,f=_,_=s.child,k=n.child.memoizedState,k=k===null?mo(a):{baseLanes:k.baseLanes|a,cachePool:null,transitions:k.transitions},_.memoizedState=k,_.childLanes=n.childLanes&~a,s.memoizedState=go,f}return _=n.child,n=_.sibling,f=wn(_,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=a),f.return=s,f.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=f,s.memoizedState=null,f}function yo(n,s){return s=Qs({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Us(n,s,a,f){return f!==null&&Hi(f),ar(s,n.child,null,a),n=yo(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Lc(n,s,a,f,m,_,k){if(a)return s.flags&256?(s.flags&=-257,f=co(Error(r(422))),Us(n,s,k,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(_=f.fallback,m=s.mode,f=Qs({mode:"visible",children:f.children},m,0,null),_=Wn(_,m,k,null),_.flags|=2,f.return=s,_.return=s,f.sibling=_,s.child=f,(s.mode&1)!==0&&ar(s,n.child,null,k),s.child.memoizedState=mo(k),s.memoizedState=go,_);if((s.mode&1)===0)return Us(n,s,k,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var J=f.dgst;return f=J,_=Error(r(419)),f=co(_,f,void 0),Us(n,s,k,f)}if(J=(k&n.childLanes)!==0,xt||J){if(f=lt,f!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|k))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,on(n,m),Ht(f,n,m,-1))}return ko(),f=co(Error(r(421))),Us(n,s,k,f)}return m.data==="$?"?(s.flags|=128,s.child=n.child,s=jc.bind(null,n),m._reactRetry=s,null):(n=_.treeContext,Bt=vn(m.nextSibling),Vt=s,Ye=!0,Ut=null,n!==null&&(wt[Mt++]=rn,wt[Mt++]=sn,wt[Mt++]=Fn,rn=n.id,sn=n.overflow,Fn=s),s=yo(s,f.children),s.flags|=4096,s)}function ql(n,s,a){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),Ji(n.return,s,a)}function Po(n,s,a,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=a,_.tailMode=m)}function Gl(n,s,a){var f=s.pendingProps,m=f.revealOrder,_=f.tail;if(Pt(n,s,f.children,a),f=Ke.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ql(n,a,s);else if(n.tag===19)ql(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Ge(Ke,f),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(a=s.child,m=null;a!==null;)n=a.alternate,n!==null&&Is(n)===null&&(m=a),a=a.sibling;a=m,a===null?(m=s.child,s.child=null):(m=a.sibling,a.sibling=null),Po(s,!1,m,a,_);break;case"backwards":for(a=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Is(n)===null){s.child=m;break}n=m.sibling,m.sibling=a,a=m,m=n}Po(s,!0,a,null,_);break;case"together":Po(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Os(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ln(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),qn|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=wn(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=wn(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Uc(n,s,a){switch(s.tag){case 3:Ll(s),or();break;case 5:nl(s);break;case 1:St(s.type)&&Ss(s);break;case 4:Xi(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,m=s.memoizedProps.value;Ge(Bs,f._currentValue),f._currentValue=m;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(Ge(Ke,Ke.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Ol(n,s,a):(Ge(Ke,Ke.current&1),n=ln(n,s,a),n!==null?n.sibling:null);Ge(Ke,Ke.current&1);break;case 19:if(f=(a&s.childLanes)!==0,(n.flags&128)!==0){if(f)return Gl(n,s,a);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ge(Ke,Ke.current),f)break;return null;case 22:case 23:return s.lanes=0,Nl(n,s,a)}return ln(n,s,a)}var Hl,vo,zl,Wl;Hl=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},vo=function(){},zl=function(n,s,a,f){var m=n.memoizedProps;if(m!==f){n=s.stateNode,Un(Kt.current);var _=null;switch(a){case"input":m=ce(n,m),f=ce(n,f),_=[];break;case"select":m=C({},m,{value:void 0}),f=C({},f,{value:void 0}),_=[];break;case"textarea":m=He(n,m),f=He(n,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=vs)}mr(a,f);var k;a=null;for(de in m)if(!f.hasOwnProperty(de)&&m.hasOwnProperty(de)&&m[de]!=null)if(de==="style"){var J=m[de];for(k in J)J.hasOwnProperty(k)&&(a||(a={}),a[k]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(o.hasOwnProperty(de)?_||(_=[]):(_=_||[]).push(de,null));for(de in f){var j=f[de];if(J=m?.[de],f.hasOwnProperty(de)&&j!==J&&(j!=null||J!=null))if(de==="style")if(J){for(k in J)!J.hasOwnProperty(k)||j&&j.hasOwnProperty(k)||(a||(a={}),a[k]="");for(k in j)j.hasOwnProperty(k)&&J[k]!==j[k]&&(a||(a={}),a[k]=j[k])}else a||(_||(_=[]),_.push(de,a)),a=j;else de==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,J=J?J.__html:void 0,j!=null&&J!==j&&(_=_||[]).push(de,j)):de==="children"?typeof j!="string"&&typeof j!="number"||(_=_||[]).push(de,""+j):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(o.hasOwnProperty(de)?(j!=null&&de==="onScroll"&&ze("scroll",n),_||J===j||(_=[])):(_=_||[]).push(de,j))}a&&(_=_||[]).push("style",a);var de=_;(s.updateQueue=de)&&(s.flags|=4)}},Wl=function(n,s,a,f){a!==f&&(s.flags|=4)};function $r(n,s){if(!Ye)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function gt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,f=0;if(s)for(var m=n.child;m!==null;)a|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)a|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=f,n.childLanes=a,s}function Oc(n,s,a){var f=s.pendingProps;switch(Oi(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(s),null;case 1:return St(s.type)&&Es(),gt(s),null;case 3:return f=s.stateNode,cr(),We(Et),We(ft),Zi(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(As(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ut!==null&&(wo(Ut),Ut=null))),vo(n,s),gt(s),null;case 5:ji(s);var m=Un(qr.current);if(a=s.type,n!==null&&s.stateNode!=null)zl(n,s,a,f,m),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(r(166));return gt(s),null}if(n=Un(Kt.current),As(s)){f=s.stateNode,a=s.type;var _=s.memoizedProps;switch(f[Yt]=s,f[Fr]=_,n=(s.mode&1)!==0,a){case"dialog":ze("cancel",f),ze("close",f);break;case"iframe":case"object":case"embed":ze("load",f);break;case"video":case"audio":for(m=0;m<kr.length;m++)ze(kr[m],f);break;case"source":ze("error",f);break;case"img":case"image":case"link":ze("error",f),ze("load",f);break;case"details":ze("toggle",f);break;case"input":pe(f,_),ze("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},ze("invalid",f);break;case"textarea":Ze(f,_),ze("invalid",f)}mr(a,_),m=null;for(var k in _)if(_.hasOwnProperty(k)){var J=_[k];k==="children"?typeof J=="string"?f.textContent!==J&&(_.suppressHydrationWarning!==!0&&Ps(f.textContent,J,n),m=["children",J]):typeof J=="number"&&f.textContent!==""+J&&(_.suppressHydrationWarning!==!0&&Ps(f.textContent,J,n),m=["children",""+J]):o.hasOwnProperty(k)&&J!=null&&k==="onScroll"&&ze("scroll",f)}switch(a){case"input":ne(f),Ee(f,_,!0);break;case"textarea":ne(f),Oe(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=vs)}f=m,s.updateQueue=f,f!==null&&(s.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=je(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=k.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=k.createElement(a,{is:f.is}):(n=k.createElement(a),a==="select"&&(k=n,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):n=k.createElementNS(n,a),n[Yt]=s,n[Fr]=f,Hl(n,s,!1,!1),s.stateNode=n;e:{switch(k=yr(a,f),a){case"dialog":ze("cancel",n),ze("close",n),m=f;break;case"iframe":case"object":case"embed":ze("load",n),m=f;break;case"video":case"audio":for(m=0;m<kr.length;m++)ze(kr[m],n);m=f;break;case"source":ze("error",n),m=f;break;case"img":case"image":case"link":ze("error",n),ze("load",n),m=f;break;case"details":ze("toggle",n),m=f;break;case"input":pe(n,f),m=ce(n,f),ze("invalid",n);break;case"option":m=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},m=C({},f,{value:void 0}),ze("invalid",n);break;case"textarea":Ze(n,f),m=He(n,f),ze("invalid",n);break;default:m=f}mr(a,m),J=m;for(_ in J)if(J.hasOwnProperty(_)){var j=J[_];_==="style"?Zr(n,j):_==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&zt(n,j)):_==="children"?typeof j=="string"?(a!=="textarea"||j!=="")&&$e(n,j):typeof j=="number"&&$e(n,""+j):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(o.hasOwnProperty(_)?j!=null&&_==="onScroll"&&ze("scroll",n):j!=null&&I(n,_,j,k))}switch(a){case"input":ne(n),Ee(n,f,!1);break;case"textarea":ne(n),Oe(n);break;case"option":f.value!=null&&n.setAttribute("value",""+U(f.value));break;case"select":n.multiple=!!f.multiple,_=f.value,_!=null?ve(n,!!f.multiple,_,!1):f.defaultValue!=null&&ve(n,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=vs)}switch(a){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return gt(s),null;case 6:if(n&&s.stateNode!=null)Wl(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(r(166));if(a=Un(qr.current),Un(Kt.current),As(s)){if(f=s.stateNode,a=s.memoizedProps,f[Yt]=s,(_=f.nodeValue!==a)&&(n=Vt,n!==null))switch(n.tag){case 3:Ps(f.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ps(f.nodeValue,a,(n.mode&1)!==0)}_&&(s.flags|=4)}else f=(a.nodeType===9?a:a.ownerDocument).createTextNode(f),f[Yt]=s,s.stateNode=f}return gt(s),null;case 13:if(We(Ke),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&Bt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ya(),or(),s.flags|=98560,_=!1;else if(_=As(s),f!==null&&f.dehydrated!==null){if(n===null){if(!_)throw Error(r(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Yt]=s}else or(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),_=!1}else Ut!==null&&(wo(Ut),Ut=null),_=!0;if(!_)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Ke.current&1)!==0?it===0&&(it=3):ko())),s.updateQueue!==null&&(s.flags|=4),gt(s),null);case 4:return cr(),vo(n,s),n===null&&br(s.stateNode.containerInfo),gt(s),null;case 10:return $i(s.type._context),gt(s),null;case 17:return St(s.type)&&Es(),gt(s),null;case 19:if(We(Ke),_=s.memoizedState,_===null)return gt(s),null;if(f=(s.flags&128)!==0,k=_.rendering,k===null)if(f)$r(_,!1);else{if(it!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(k=Is(n),k!==null){for(s.flags|=128,$r(_,!1),f=k.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=a,a=s.child;a!==null;)_=a,n=f,_.flags&=14680066,k=_.alternate,k===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=k.childLanes,_.lanes=k.lanes,_.child=k.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=k.memoizedProps,_.memoizedState=k.memoizedState,_.updateQueue=k.updateQueue,_.type=k.type,n=k.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ge(Ke,Ke.current&1|2),s.child}n=n.sibling}_.tail!==null&&et()>pr&&(s.flags|=128,f=!0,$r(_,!1),s.lanes=4194304)}else{if(!f)if(n=Is(k),n!==null){if(s.flags|=128,f=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$r(_,!0),_.tail===null&&_.tailMode==="hidden"&&!k.alternate&&!Ye)return gt(s),null}else 2*et()-_.renderingStartTime>pr&&a!==1073741824&&(s.flags|=128,f=!0,$r(_,!1),s.lanes=4194304);_.isBackwards?(k.sibling=s.child,s.child=k):(a=_.last,a!==null?a.sibling=k:s.child=k,_.last=k)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=et(),s.sibling=null,a=Ke.current,Ge(Ke,f?a&1|2:a&1),s):(gt(s),null);case 22:case 23:return Io(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(Rt&1073741824)!==0&&(gt(s),s.subtreeFlags&6&&(s.flags|=8192)):gt(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function qc(n,s){switch(Oi(s),s.tag){case 1:return St(s.type)&&Es(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return cr(),We(Et),We(ft),Zi(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return ji(s),null;case 13:if(We(Ke),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));or()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return We(Ke),null;case 4:return cr(),null;case 10:return $i(s.type._context),null;case 22:case 23:return Io(),null;case 24:return null;default:return null}}var qs=!1,mt=!1,Gc=typeof WeakSet=="function"?WeakSet:Set,Te=null;function hr(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(f){Qe(n,s,f)}else a.current=null}function _o(n,s,a){try{a()}catch(f){Qe(n,s,f)}}var $l=!1;function Hc(n,s){if(Mi=as,n=Ca(),xi(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var k=0,J=-1,j=-1,de=0,me=0,ye=n,ge=null;t:for(;;){for(var xe;ye!==a||m!==0&&ye.nodeType!==3||(J=k+m),ye!==_||f!==0&&ye.nodeType!==3||(j=k+f),ye.nodeType===3&&(k+=ye.nodeValue.length),(xe=ye.firstChild)!==null;)ge=ye,ye=xe;for(;;){if(ye===n)break t;if(ge===a&&++de===m&&(J=k),ge===_&&++me===f&&(j=k),(xe=ye.nextSibling)!==null)break;ye=ge,ge=ye.parentNode}ye=xe}a=J===-1||j===-1?null:{start:J,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ii={focusedElem:n,selectionRange:a},as=!1,Te=s;Te!==null;)if(s=Te,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Te=n;else for(;Te!==null;){s=Te;try{var Ae=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Ve=Ae.memoizedProps,tt=Ae.memoizedState,le=s.stateNode,Z=le.getSnapshotBeforeUpdate(s.elementType===s.type?Ve:Ot(s.type,Ve),tt);le.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ue=s.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Pe){Qe(s,s.return,Pe)}if(n=s.sibling,n!==null){n.return=s.return,Te=n;break}Te=s.return}return Ae=$l,$l=!1,Ae}function Jr(n,s,a){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&n)===n){var _=m.destroy;m.destroy=void 0,_!==void 0&&_o(s,a,_)}m=m.next}while(m!==f)}}function Gs(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var f=a.create;a.destroy=f()}a=a.next}while(a!==s)}}function Eo(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Jl(n){var s=n.alternate;s!==null&&(n.alternate=null,Jl(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Yt],delete s[Fr],delete s[Fi],delete s[Tc],delete s[Ac])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Yl(n){return n.tag===5||n.tag===3||n.tag===4}function Kl(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Yl(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function So(n,s,a){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=vs));else if(f!==4&&(n=n.child,n!==null))for(So(n,s,a),n=n.sibling;n!==null;)So(n,s,a),n=n.sibling}function xo(n,s,a){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(xo(n,s,a),n=n.sibling;n!==null;)xo(n,s,a),n=n.sibling}var ct=null,qt=!1;function Tn(n,s,a){for(a=a.child;a!==null;)Xl(n,s,a),a=a.sibling}function Xl(n,s,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ts,a)}catch{}switch(a.tag){case 5:mt||hr(a,s);case 6:var f=ct,m=qt;ct=null,Tn(n,s,a),ct=f,qt=m,ct!==null&&(qt?(n=ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):ct.removeChild(a.stateNode));break;case 18:ct!==null&&(qt?(n=ct,a=a.stateNode,n.nodeType===8?Ni(n.parentNode,a):n.nodeType===1&&Ni(n,a),Tr(n)):Ni(ct,a.stateNode));break;case 4:f=ct,m=qt,ct=a.stateNode.containerInfo,qt=!0,Tn(n,s,a),ct=f,qt=m;break;case 0:case 11:case 14:case 15:if(!mt&&(f=a.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,k=_.destroy;_=_.tag,k!==void 0&&((_&2)!==0||(_&4)!==0)&&_o(a,s,k),m=m.next}while(m!==f)}Tn(n,s,a);break;case 1:if(!mt&&(hr(a,s),f=a.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=a.memoizedProps,f.state=a.memoizedState,f.componentWillUnmount()}catch(J){Qe(a,s,J)}Tn(n,s,a);break;case 21:Tn(n,s,a);break;case 22:a.mode&1?(mt=(f=mt)||a.memoizedState!==null,Tn(n,s,a),mt=f):Tn(n,s,a);break;default:Tn(n,s,a)}}function jl(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Gc),s.forEach(function(f){var m=Qc.bind(null,n,f);a.has(f)||(a.add(f),f.then(m,m))})}}function Gt(n,s){var a=s.deletions;if(a!==null)for(var f=0;f<a.length;f++){var m=a[f];try{var _=n,k=s,J=k;e:for(;J!==null;){switch(J.tag){case 5:ct=J.stateNode,qt=!1;break e;case 3:ct=J.stateNode.containerInfo,qt=!0;break e;case 4:ct=J.stateNode.containerInfo,qt=!0;break e}J=J.return}if(ct===null)throw Error(r(160));Xl(_,k,m),ct=null,qt=!1;var j=m.alternate;j!==null&&(j.return=null),m.return=null}catch(de){Qe(m,s,de)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ql(s,n),s=s.sibling}function Ql(n,s){var a=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Gt(s,n),jt(n),f&4){try{Jr(3,n,n.return),Gs(3,n)}catch(Ve){Qe(n,n.return,Ve)}try{Jr(5,n,n.return)}catch(Ve){Qe(n,n.return,Ve)}}break;case 1:Gt(s,n),jt(n),f&512&&a!==null&&hr(a,a.return);break;case 5:if(Gt(s,n),jt(n),f&512&&a!==null&&hr(a,a.return),n.flags&32){var m=n.stateNode;try{$e(m,"")}catch(Ve){Qe(n,n.return,Ve)}}if(f&4&&(m=n.stateNode,m!=null)){var _=n.memoizedProps,k=a!==null?a.memoizedProps:_,J=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{J==="input"&&_.type==="radio"&&_.name!=null&&he(m,_),yr(J,k);var de=yr(J,_);for(k=0;k<j.length;k+=2){var me=j[k],ye=j[k+1];me==="style"?Zr(m,ye):me==="dangerouslySetInnerHTML"?zt(m,ye):me==="children"?$e(m,ye):I(m,me,ye,de)}switch(J){case"input":_e(m,_);break;case"textarea":Ie(m,_);break;case"select":var ge=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var xe=_.value;xe!=null?ve(m,!!_.multiple,xe,!1):ge!==!!_.multiple&&(_.defaultValue!=null?ve(m,!!_.multiple,_.defaultValue,!0):ve(m,!!_.multiple,_.multiple?[]:"",!1))}m[Fr]=_}catch(Ve){Qe(n,n.return,Ve)}}break;case 6:if(Gt(s,n),jt(n),f&4){if(n.stateNode===null)throw Error(r(162));m=n.stateNode,_=n.memoizedProps;try{m.nodeValue=_}catch(Ve){Qe(n,n.return,Ve)}}break;case 3:if(Gt(s,n),jt(n),f&4&&a!==null&&a.memoizedState.isDehydrated)try{Tr(s.containerInfo)}catch(Ve){Qe(n,n.return,Ve)}break;case 4:Gt(s,n),jt(n);break;case 13:Gt(s,n),jt(n),m=n.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(Ao=et())),f&4&&jl(n);break;case 22:if(me=a!==null&&a.memoizedState!==null,n.mode&1?(mt=(de=mt)||me,Gt(s,n),mt=de):Gt(s,n),jt(n),f&8192){if(de=n.memoizedState!==null,(n.stateNode.isHidden=de)&&!me&&(n.mode&1)!==0)for(Te=n,me=n.child;me!==null;){for(ye=Te=me;Te!==null;){switch(ge=Te,xe=ge.child,ge.tag){case 0:case 11:case 14:case 15:Jr(4,ge,ge.return);break;case 1:hr(ge,ge.return);var Ae=ge.stateNode;if(typeof Ae.componentWillUnmount=="function"){f=ge,a=ge.return;try{s=f,Ae.props=s.memoizedProps,Ae.state=s.memoizedState,Ae.componentWillUnmount()}catch(Ve){Qe(f,a,Ve)}}break;case 5:hr(ge,ge.return);break;case 22:if(ge.memoizedState!==null){tu(ye);continue}}xe!==null?(xe.return=ge,Te=xe):tu(ye)}me=me.sibling}e:for(me=null,ye=n;;){if(ye.tag===5){if(me===null){me=ye;try{m=ye.stateNode,de?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(J=ye.stateNode,j=ye.memoizedProps.style,k=j!=null&&j.hasOwnProperty("display")?j.display:null,J.style.display=Qr("display",k))}catch(Ve){Qe(n,n.return,Ve)}}}else if(ye.tag===6){if(me===null)try{ye.stateNode.nodeValue=de?"":ye.memoizedProps}catch(Ve){Qe(n,n.return,Ve)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===n)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===n)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===n)break e;me===ye&&(me=null),ye=ye.return}me===ye&&(me=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Gt(s,n),jt(n),f&4&&jl(n);break;case 21:break;default:Gt(s,n),jt(n)}}function jt(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Yl(a)){var f=a;break e}a=a.return}throw Error(r(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&($e(m,""),f.flags&=-33);var _=Kl(n);xo(n,_,m);break;case 3:case 4:var k=f.stateNode.containerInfo,J=Kl(n);So(n,J,k);break;default:throw Error(r(161))}}catch(j){Qe(n,n.return,j)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function zc(n,s,a){Te=n,Zl(n)}function Zl(n,s,a){for(var f=(n.mode&1)!==0;Te!==null;){var m=Te,_=m.child;if(m.tag===22&&f){var k=m.memoizedState!==null||qs;if(!k){var J=m.alternate,j=J!==null&&J.memoizedState!==null||mt;J=qs;var de=mt;if(qs=k,(mt=j)&&!de)for(Te=m;Te!==null;)k=Te,j=k.child,k.tag===22&&k.memoizedState!==null?nu(m):j!==null?(j.return=k,Te=j):nu(m);for(;_!==null;)Te=_,Zl(_),_=_.sibling;Te=m,qs=J,mt=de}eu(n)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,Te=_):eu(n)}}function eu(n){for(;Te!==null;){var s=Te;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:mt||Gs(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!mt)if(a===null)f.componentDidMount();else{var m=s.elementType===s.type?a.memoizedProps:Ot(s.type,a.memoizedProps);f.componentDidUpdate(m,a.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=s.updateQueue;_!==null&&tl(s,_,f);break;case 3:var k=s.updateQueue;if(k!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}tl(s,k,a)}break;case 5:var J=s.stateNode;if(a===null&&s.flags&4){a=J;var j=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&a.focus();break;case"img":j.src&&(a.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var de=s.alternate;if(de!==null){var me=de.memoizedState;if(me!==null){var ye=me.dehydrated;ye!==null&&Tr(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}mt||s.flags&512&&Eo(s)}catch(ge){Qe(s,s.return,ge)}}if(s===n){Te=null;break}if(a=s.sibling,a!==null){a.return=s.return,Te=a;break}Te=s.return}}function tu(n){for(;Te!==null;){var s=Te;if(s===n){Te=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Te=a;break}Te=s.return}}function nu(n){for(;Te!==null;){var s=Te;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Gs(4,s)}catch(j){Qe(s,a,j)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var m=s.return;try{f.componentDidMount()}catch(j){Qe(s,m,j)}}var _=s.return;try{Eo(s)}catch(j){Qe(s,_,j)}break;case 5:var k=s.return;try{Eo(s)}catch(j){Qe(s,k,j)}}}catch(j){Qe(s,s.return,j)}if(s===n){Te=null;break}var J=s.sibling;if(J!==null){J.return=s.return,Te=J;break}Te=s.return}}var Wc=Math.ceil,Hs=R.ReactCurrentDispatcher,Co=R.ReactCurrentOwner,bt=R.ReactCurrentBatchConfig,Ne=0,lt=null,rt=null,dt=0,Rt=0,fr=_n(0),it=0,Yr=null,qn=0,zs=0,To=0,Kr=null,Ct=null,Ao=0,pr=1/0,un=null,Ws=!1,Vo=null,An=null,$s=!1,Vn=null,Js=0,Xr=0,Bo=null,Ys=-1,Ks=0;function vt(){return(Ne&6)!==0?et():Ys!==-1?Ys:Ys=et()}function Bn(n){return(n.mode&1)===0?1:(Ne&2)!==0&&dt!==0?dt&-dt:Bc.transition!==null?(Ks===0&&(Ks=Ko()),Ks):(n=Le,n!==0||(n=window.event,n=n===void 0?16:sa(n.type)),n)}function Ht(n,s,a,f){if(50<Xr)throw Xr=0,Bo=null,Error(r(185));_r(n,a,f),((Ne&2)===0||n!==lt)&&(n===lt&&((Ne&2)===0&&(zs|=a),it===4&&Rn(n,dt)),Tt(n,f),a===1&&Ne===0&&(s.mode&1)===0&&(pr=et()+500,xs&&Sn()))}function Tt(n,s){var a=n.callbackNode;Bu(n,s);var f=ss(n,n===lt?dt:0);if(f===0)a!==null&&$o(a),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(a!=null&&$o(a),s===1)n.tag===0?Vc(su.bind(null,n)):Ha(su.bind(null,n)),xc(function(){(Ne&6)===0&&Sn()}),a=null;else{switch(Xo(f)){case 1:a=oi;break;case 4:a=Jo;break;case 16:a=es;break;case 536870912:a=Yo;break;default:a=es}a=hu(a,ru.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function ru(n,s){if(Ys=-1,Ks=0,(Ne&6)!==0)throw Error(r(327));var a=n.callbackNode;if(gr()&&n.callbackNode!==a)return null;var f=ss(n,n===lt?dt:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||s)s=Xs(n,f);else{s=f;var m=Ne;Ne|=2;var _=ou();(lt!==n||dt!==s)&&(un=null,pr=et()+500,Hn(n,s));do try{Yc();break}catch(J){iu(n,J)}while(!0);Wi(),Hs.current=_,Ne=m,rt!==null?s=0:(lt=null,dt=0,s=it)}if(s!==0){if(s===2&&(m=ai(n),m!==0&&(f=m,s=Ro(n,m))),s===1)throw a=Yr,Hn(n,0),Rn(n,f),Tt(n,et()),a;if(s===6)Rn(n,f);else{if(m=n.current.alternate,(f&30)===0&&!$c(m)&&(s=Xs(n,f),s===2&&(_=ai(n),_!==0&&(f=_,s=Ro(n,_))),s===1))throw a=Yr,Hn(n,0),Rn(n,f),Tt(n,et()),a;switch(n.finishedWork=m,n.finishedLanes=f,s){case 0:case 1:throw Error(r(345));case 2:zn(n,Ct,un);break;case 3:if(Rn(n,f),(f&130023424)===f&&(s=Ao+500-et(),10<s)){if(ss(n,0)!==0)break;if(m=n.suspendedLanes,(m&f)!==f){vt(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=bi(zn.bind(null,n,Ct,un),s);break}zn(n,Ct,un);break;case 4:if(Rn(n,f),(f&4194240)===f)break;for(s=n.eventTimes,m=-1;0<f;){var k=31-Dt(f);_=1<<k,k=s[k],k>m&&(m=k),f&=~_}if(f=m,f=et()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Wc(f/1960))-f,10<f){n.timeoutHandle=bi(zn.bind(null,n,Ct,un),f);break}zn(n,Ct,un);break;case 5:zn(n,Ct,un);break;default:throw Error(r(329))}}}return Tt(n,et()),n.callbackNode===a?ru.bind(null,n):null}function Ro(n,s){var a=Kr;return n.current.memoizedState.isDehydrated&&(Hn(n,s).flags|=256),n=Xs(n,s),n!==2&&(s=Ct,Ct=a,s!==null&&wo(s)),n}function wo(n){Ct===null?Ct=n:Ct.push.apply(Ct,n)}function $c(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var f=0;f<a.length;f++){var m=a[f],_=m.getSnapshot;m=m.value;try{if(!Lt(_(),m))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rn(n,s){for(s&=~To,s&=~zs,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Dt(s),f=1<<a;n[a]=-1,s&=~f}}function su(n){if((Ne&6)!==0)throw Error(r(327));gr();var s=ss(n,0);if((s&1)===0)return Tt(n,et()),null;var a=Xs(n,s);if(n.tag!==0&&a===2){var f=ai(n);f!==0&&(s=f,a=Ro(n,f))}if(a===1)throw a=Yr,Hn(n,0),Rn(n,s),Tt(n,et()),a;if(a===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,zn(n,Ct,un),Tt(n,et()),null}function Mo(n,s){var a=Ne;Ne|=1;try{return n(s)}finally{Ne=a,Ne===0&&(pr=et()+500,xs&&Sn())}}function Gn(n){Vn!==null&&Vn.tag===0&&(Ne&6)===0&&gr();var s=Ne;Ne|=1;var a=bt.transition,f=Le;try{if(bt.transition=null,Le=1,n)return n()}finally{Le=f,bt.transition=a,Ne=s,(Ne&6)===0&&Sn()}}function Io(){Rt=fr.current,We(fr)}function Hn(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Sc(a)),rt!==null)for(a=rt.return;a!==null;){var f=a;switch(Oi(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Es();break;case 3:cr(),We(Et),We(ft),Zi();break;case 5:ji(f);break;case 4:cr();break;case 13:We(Ke);break;case 19:We(Ke);break;case 10:$i(f.type._context);break;case 22:case 23:Io()}a=a.return}if(lt=n,rt=n=wn(n.current,null),dt=Rt=s,it=0,Yr=null,To=zs=qn=0,Ct=Kr=null,Ln!==null){for(s=0;s<Ln.length;s++)if(a=Ln[s],f=a.interleaved,f!==null){a.interleaved=null;var m=f.next,_=a.pending;if(_!==null){var k=_.next;_.next=m,f.next=k}a.pending=f}Ln=null}return n}function iu(n,s){do{var a=rt;try{if(Wi(),ks.current=Ds,bs){for(var f=Xe.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}bs=!1}if(On=0,at=st=Xe=null,Gr=!1,Hr=0,Co.current=null,a===null||a.return===null){it=1,Yr=s,rt=null;break}e:{var _=n,k=a.return,J=a,j=s;if(s=dt,J.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var de=j,me=J,ye=me.tag;if((me.mode&1)===0&&(ye===0||ye===11||ye===15)){var ge=me.alternate;ge?(me.updateQueue=ge.updateQueue,me.memoizedState=ge.memoizedState,me.lanes=ge.lanes):(me.updateQueue=null,me.memoizedState=null)}var xe=wl(k);if(xe!==null){xe.flags&=-257,Ml(xe,k,J,_,s),xe.mode&1&&Rl(_,de,s),s=xe,j=de;var Ae=s.updateQueue;if(Ae===null){var Ve=new Set;Ve.add(j),s.updateQueue=Ve}else Ae.add(j);break e}else{if((s&1)===0){Rl(_,de,s),ko();break e}j=Error(r(426))}}else if(Ye&&J.mode&1){var tt=wl(k);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),Ml(tt,k,J,_,s),Hi(dr(j,J));break e}}_=j=dr(j,J),it!==4&&(it=2),Kr===null?Kr=[_]:Kr.push(_),_=k;do{switch(_.tag){case 3:_.flags|=65536,s&=-s,_.lanes|=s;var le=Vl(_,j,s);el(_,le);break e;case 1:J=j;var Z=_.type,ue=_.stateNode;if((_.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(An===null||!An.has(ue)))){_.flags|=65536,s&=-s,_.lanes|=s;var Pe=Bl(_,J,s);el(_,Pe);break e}}_=_.return}while(_!==null)}lu(a)}catch(Be){s=Be,rt===a&&a!==null&&(rt=a=a.return);continue}break}while(!0)}function ou(){var n=Hs.current;return Hs.current=Ds,n===null?Ds:n}function ko(){(it===0||it===3||it===2)&&(it=4),lt===null||(qn&268435455)===0&&(zs&268435455)===0||Rn(lt,dt)}function Xs(n,s){var a=Ne;Ne|=2;var f=ou();(lt!==n||dt!==s)&&(un=null,Hn(n,s));do try{Jc();break}catch(m){iu(n,m)}while(!0);if(Wi(),Ne=a,Hs.current=f,rt!==null)throw Error(r(261));return lt=null,dt=0,it}function Jc(){for(;rt!==null;)au(rt)}function Yc(){for(;rt!==null&&!vu();)au(rt)}function au(n){var s=du(n.alternate,n,Rt);n.memoizedProps=n.pendingProps,s===null?lu(n):rt=s,Co.current=null}function lu(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Oc(a,s,Rt),a!==null){rt=a;return}}else{if(a=qc(a,s),a!==null){a.flags&=32767,rt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{it=6,rt=null;return}}if(s=s.sibling,s!==null){rt=s;return}rt=s=n}while(s!==null);it===0&&(it=5)}function zn(n,s,a){var f=Le,m=bt.transition;try{bt.transition=null,Le=1,Kc(n,s,a,f)}finally{bt.transition=m,Le=f}return null}function Kc(n,s,a,f){do gr();while(Vn!==null);if((Ne&6)!==0)throw Error(r(327));a=n.finishedWork;var m=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var _=a.lanes|a.childLanes;if(Ru(n,_),n===lt&&(rt=lt=null,dt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||$s||($s=!0,hu(es,function(){return gr(),null})),_=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||_){_=bt.transition,bt.transition=null;var k=Le;Le=1;var J=Ne;Ne|=4,Co.current=null,Hc(n,a),Ql(a,n),gc(Ii),as=!!Mi,Ii=Mi=null,n.current=a,zc(a),_u(),Ne=J,Le=k,bt.transition=_}else n.current=a;if($s&&($s=!1,Vn=n,Js=m),_=n.pendingLanes,_===0&&(An=null),xu(a.stateNode),Tt(n,et()),s!==null)for(f=n.onRecoverableError,a=0;a<s.length;a++)m=s[a],f(m.value,{componentStack:m.stack,digest:m.digest});if(Ws)throw Ws=!1,n=Vo,Vo=null,n;return(Js&1)!==0&&n.tag!==0&&gr(),_=n.pendingLanes,(_&1)!==0?n===Bo?Xr++:(Xr=0,Bo=n):Xr=0,Sn(),null}function gr(){if(Vn!==null){var n=Xo(Js),s=bt.transition,a=Le;try{if(bt.transition=null,Le=16>n?16:n,Vn===null)var f=!1;else{if(n=Vn,Vn=null,Js=0,(Ne&6)!==0)throw Error(r(331));var m=Ne;for(Ne|=4,Te=n.current;Te!==null;){var _=Te,k=_.child;if((Te.flags&16)!==0){var J=_.deletions;if(J!==null){for(var j=0;j<J.length;j++){var de=J[j];for(Te=de;Te!==null;){var me=Te;switch(me.tag){case 0:case 11:case 15:Jr(8,me,_)}var ye=me.child;if(ye!==null)ye.return=me,Te=ye;else for(;Te!==null;){me=Te;var ge=me.sibling,xe=me.return;if(Jl(me),me===de){Te=null;break}if(ge!==null){ge.return=xe,Te=ge;break}Te=xe}}}var Ae=_.alternate;if(Ae!==null){var Ve=Ae.child;if(Ve!==null){Ae.child=null;do{var tt=Ve.sibling;Ve.sibling=null,Ve=tt}while(Ve!==null)}}Te=_}}if((_.subtreeFlags&2064)!==0&&k!==null)k.return=_,Te=k;else e:for(;Te!==null;){if(_=Te,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Jr(9,_,_.return)}var le=_.sibling;if(le!==null){le.return=_.return,Te=le;break e}Te=_.return}}var Z=n.current;for(Te=Z;Te!==null;){k=Te;var ue=k.child;if((k.subtreeFlags&2064)!==0&&ue!==null)ue.return=k,Te=ue;else e:for(k=Z;Te!==null;){if(J=Te,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Gs(9,J)}}catch(Be){Qe(J,J.return,Be)}if(J===k){Te=null;break e}var Pe=J.sibling;if(Pe!==null){Pe.return=J.return,Te=Pe;break e}Te=J.return}}if(Ne=m,Sn(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ts,n)}catch{}f=!0}return f}finally{Le=a,bt.transition=s}}return!1}function uu(n,s,a){s=dr(a,s),s=Vl(n,s,1),n=Cn(n,s,1),s=vt(),n!==null&&(_r(n,1,s),Tt(n,s))}function Qe(n,s,a){if(n.tag===3)uu(n,n,a);else for(;s!==null;){if(s.tag===3){uu(s,n,a);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(An===null||!An.has(f))){n=dr(a,n),n=Bl(s,n,1),s=Cn(s,n,1),n=vt(),s!==null&&(_r(s,1,n),Tt(s,n));break}}s=s.return}}function Xc(n,s,a){var f=n.pingCache;f!==null&&f.delete(s),s=vt(),n.pingedLanes|=n.suspendedLanes&a,lt===n&&(dt&a)===a&&(it===4||it===3&&(dt&130023424)===dt&&500>et()-Ao?Hn(n,0):To|=a),Tt(n,s)}function cu(n,s){s===0&&((n.mode&1)===0?s=1:(s=rs,rs<<=1,(rs&130023424)===0&&(rs=4194304)));var a=vt();n=on(n,s),n!==null&&(_r(n,s,a),Tt(n,a))}function jc(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),cu(n,a)}function Qc(n,s){var a=0;switch(n.tag){case 13:var f=n.stateNode,m=n.memoizedState;m!==null&&(a=m.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(r(314))}f!==null&&f.delete(s),cu(n,a)}var du;du=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Et.current)xt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return xt=!1,Uc(n,s,a);xt=(n.flags&131072)!==0}else xt=!1,Ye&&(s.flags&1048576)!==0&&za(s,Ts,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Os(n,s),n=s.pendingProps;var m=rr(s,ft.current);ur(s,a),m=no(null,s,f,n,m,a);var _=ro();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,St(f)?(_=!0,Ss(s)):_=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Ki(s),m.updater=Ls,s.stateNode=m,m._reactInternals=s,uo(s,f,n,a),s=po(null,s,f,!0,_,a)):(s.tag=0,Ye&&_&&Ui(s),Pt(null,s,m,a),s=s.child),s;case 16:f=s.elementType;e:{switch(Os(n,s),n=s.pendingProps,m=f._init,f=m(f._payload),s.type=f,m=s.tag=ed(f),n=Ot(f,n),m){case 0:s=fo(null,s,f,n,a);break e;case 1:s=Dl(null,s,f,n,a);break e;case 11:s=Il(null,s,f,n,a);break e;case 14:s=kl(null,s,f,Ot(f.type,n),a);break e}throw Error(r(306,f,""))}return s;case 0:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ot(f,m),fo(n,s,f,m,a);case 1:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ot(f,m),Dl(n,s,f,m,a);case 3:e:{if(Ll(s),n===null)throw Error(r(387));f=s.pendingProps,_=s.memoizedState,m=_.element,Za(n,s),Ms(s,f,null,a);var k=s.memoizedState;if(f=k.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){m=dr(Error(r(423)),s),s=Ul(n,s,f,a,m);break e}else if(f!==m){m=dr(Error(r(424)),s),s=Ul(n,s,f,a,m);break e}else for(Bt=vn(s.stateNode.containerInfo.firstChild),Vt=s,Ye=!0,Ut=null,a=ja(s,null,f,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(or(),f===m){s=ln(n,s,a);break e}Pt(n,s,f,a)}s=s.child}return s;case 5:return nl(s),n===null&&Gi(s),f=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,k=m.children,ki(f,m)?k=null:_!==null&&ki(f,_)&&(s.flags|=32),Fl(n,s),Pt(n,s,k,a),s.child;case 6:return n===null&&Gi(s),null;case 13:return Ol(n,s,a);case 4:return Xi(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=ar(s,null,f,a):Pt(n,s,f,a),s.child;case 11:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ot(f,m),Il(n,s,f,m,a);case 7:return Pt(n,s,s.pendingProps,a),s.child;case 8:return Pt(n,s,s.pendingProps.children,a),s.child;case 12:return Pt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(f=s.type._context,m=s.pendingProps,_=s.memoizedProps,k=m.value,Ge(Bs,f._currentValue),f._currentValue=k,_!==null)if(Lt(_.value,k)){if(_.children===m.children&&!Et.current){s=ln(n,s,a);break e}}else for(_=s.child,_!==null&&(_.return=s);_!==null;){var J=_.dependencies;if(J!==null){k=_.child;for(var j=J.firstContext;j!==null;){if(j.context===f){if(_.tag===1){j=an(-1,a&-a),j.tag=2;var de=_.updateQueue;if(de!==null){de=de.shared;var me=de.pending;me===null?j.next=j:(j.next=me.next,me.next=j),de.pending=j}}_.lanes|=a,j=_.alternate,j!==null&&(j.lanes|=a),Ji(_.return,a,s),J.lanes|=a;break}j=j.next}}else if(_.tag===10)k=_.type===s.type?null:_.child;else if(_.tag===18){if(k=_.return,k===null)throw Error(r(341));k.lanes|=a,J=k.alternate,J!==null&&(J.lanes|=a),Ji(k,a,s),k=_.sibling}else k=_.child;if(k!==null)k.return=_;else for(k=_;k!==null;){if(k===s){k=null;break}if(_=k.sibling,_!==null){_.return=k.return,k=_;break}k=k.return}_=k}Pt(n,s,m.children,a),s=s.child}return s;case 9:return m=s.type,f=s.pendingProps.children,ur(s,a),m=It(m),f=f(m),s.flags|=1,Pt(n,s,f,a),s.child;case 14:return f=s.type,m=Ot(f,s.pendingProps),m=Ot(f.type,m),kl(n,s,f,m,a);case 15:return bl(n,s,s.type,s.pendingProps,a);case 17:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ot(f,m),Os(n,s),s.tag=1,St(f)?(n=!0,Ss(s)):n=!1,ur(s,a),Tl(s,f,m),uo(s,f,m,a),po(null,s,f,!0,n,a);case 19:return Gl(n,s,a);case 22:return Nl(n,s,a)}throw Error(r(156,s.tag))};function hu(n,s){return Wo(n,s)}function Zc(n,s,a,f){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(n,s,a,f){return new Zc(n,s,a,f)}function bo(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ed(n){if(typeof n=="function")return bo(n)?1:0;if(n!=null){if(n=n.$$typeof,n===K)return 11;if(n===Q)return 14}return 2}function wn(n,s){var a=n.alternate;return a===null?(a=Nt(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function js(n,s,a,f,m,_){var k=2;if(f=n,typeof n=="function")bo(n)&&(k=1);else if(typeof n=="string")k=5;else e:switch(n){case z:return Wn(a.children,m,_,s);case B:k=8,m|=8;break;case M:return n=Nt(12,a,s,m|2),n.elementType=M,n.lanes=_,n;case se:return n=Nt(13,a,s,m),n.elementType=se,n.lanes=_,n;case $:return n=Nt(19,a,s,m),n.elementType=$,n.lanes=_,n;case te:return Qs(a,m,_,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:k=10;break e;case W:k=9;break e;case K:k=11;break e;case Q:k=14;break e;case re:k=16,f=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return s=Nt(k,a,s,m),s.elementType=n,s.type=f,s.lanes=_,s}function Wn(n,s,a,f){return n=Nt(7,n,f,s),n.lanes=a,n}function Qs(n,s,a,f){return n=Nt(22,n,f,s),n.elementType=te,n.lanes=a,n.stateNode={isHidden:!1},n}function No(n,s,a){return n=Nt(6,n,null,s),n.lanes=a,n}function Fo(n,s,a){return s=Nt(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function td(n,s,a,f,m){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=li(0),this.expirationTimes=li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Do(n,s,a,f,m,_,k,J,j){return n=new td(n,s,a,J,j),s===1?(s=1,_===!0&&(s|=8)):s=0,_=Nt(3,null,null,s),n.current=_,_.stateNode=n,_.memoizedState={element:f,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ki(_),n}function nd(n,s,a){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:f==null?null:""+f,children:n,containerInfo:s,implementation:a}}function fu(n){if(!n)return En;n=n._reactInternals;e:{if(kn(n)!==n||n.tag!==1)throw Error(r(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(St(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(n.tag===1){var a=n.type;if(St(a))return qa(n,a,s)}return s}function pu(n,s,a,f,m,_,k,J,j){return n=Do(a,f,!0,n,m,_,k,J,j),n.context=fu(null),a=n.current,f=vt(),m=Bn(a),_=an(f,m),_.callback=s??null,Cn(a,_,m),n.current.lanes=m,_r(n,m,f),Tt(n,f),n}function Zs(n,s,a,f){var m=s.current,_=vt(),k=Bn(m);return a=fu(a),s.context===null?s.context=a:s.pendingContext=a,s=an(_,k),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=Cn(m,s,k),n!==null&&(Ht(n,m,k,_),ws(n,m,k)),k}function ei(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function gu(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Lo(n,s){gu(n,s),(n=n.alternate)&&gu(n,s)}function rd(){return null}var mu=typeof reportError=="function"?reportError:function(n){console.error(n)};function Uo(n){this._internalRoot=n}ti.prototype.render=Uo.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));Zs(n,s,null,null)},ti.prototype.unmount=Uo.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Gn(function(){Zs(null,n,null,null)}),s[tn]=null}};function ti(n){this._internalRoot=n}ti.prototype.unstable_scheduleHydration=function(n){if(n){var s=Zo();n={blockedOn:null,target:n,priority:s};for(var a=0;a<mn.length&&s!==0&&s<mn[a].priority;a++);mn.splice(a,0,n),a===0&&na(n)}};function Oo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ni(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yu(){}function sd(n,s,a,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var de=ei(k);_.call(de)}}var k=pu(s,f,n,0,null,!1,!1,"",yu);return n._reactRootContainer=k,n[tn]=k.current,br(n.nodeType===8?n.parentNode:n),Gn(),k}for(;m=n.lastChild;)n.removeChild(m);if(typeof f=="function"){var J=f;f=function(){var de=ei(j);J.call(de)}}var j=Do(n,0,!1,null,null,!1,!1,"",yu);return n._reactRootContainer=j,n[tn]=j.current,br(n.nodeType===8?n.parentNode:n),Gn(function(){Zs(s,j,a,f)}),j}function ri(n,s,a,f,m){var _=a._reactRootContainer;if(_){var k=_;if(typeof m=="function"){var J=m;m=function(){var j=ei(k);J.call(j)}}Zs(s,k,n,m)}else k=sd(a,s,n,m,f);return ei(k)}jo=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=vr(s.pendingLanes);a!==0&&(ui(s,a|1),Tt(s,et()),(Ne&6)===0&&(pr=et()+500,Sn()))}break;case 13:Gn(function(){var f=on(n,1);if(f!==null){var m=vt();Ht(f,n,1,m)}}),Lo(n,1)}},ci=function(n){if(n.tag===13){var s=on(n,134217728);if(s!==null){var a=vt();Ht(s,n,134217728,a)}Lo(n,134217728)}},Qo=function(n){if(n.tag===13){var s=Bn(n),a=on(n,s);if(a!==null){var f=vt();Ht(a,n,s,f)}Lo(n,s)}},Zo=function(){return Le},ea=function(n,s){var a=Le;try{return Le=n,s()}finally{Le=a}},oe=function(n,s,a){switch(s){case"input":if(_e(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var f=a[s];if(f!==n&&f.form===n.form){var m=_s(f);if(!m)throw Error(r(90));ae(f),_e(f,m)}}}break;case"textarea":Ie(n,a);break;case"select":s=a.value,s!=null&&ve(n,!!a.multiple,s,!1)}},Qt=Mo,Wt=Gn;var id={usingClientEntryPoint:!1,Events:[Dr,tr,_s,De,Ft,Mo]},jr={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},od={bundleType:jr.bundleType,version:jr.version,rendererPackageName:jr.rendererPackageName,rendererConfig:jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ho(n),n===null?null:n.stateNode},findFiberByHostInstance:jr.findFiberByHostInstance||rd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!si.isDisabled&&si.supportsFiber)try{ts=si.inject(od),Jt=si}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=id,reactDom_production_min.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oo(s))throw Error(r(200));return nd(n,s,null,a)},reactDom_production_min.createRoot=function(n,s){if(!Oo(n))throw Error(r(299));var a=!1,f="",m=mu;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=Do(n,1,!1,null,null,a,!1,f,m),n[tn]=s.current,br(n.nodeType===8?n.parentNode:n),new Uo(s)},reactDom_production_min.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=Ho(s),n=n===null?null:n.stateNode,n},reactDom_production_min.flushSync=function(n){return Gn(n)},reactDom_production_min.hydrate=function(n,s,a){if(!ni(s))throw Error(r(200));return ri(null,n,s,!0,a)},reactDom_production_min.hydrateRoot=function(n,s,a){if(!Oo(n))throw Error(r(405));var f=a!=null&&a.hydratedSources||null,m=!1,_="",k=mu;if(a!=null&&(a.unstable_strictMode===!0&&(m=!0),a.identifierPrefix!==void 0&&(_=a.identifierPrefix),a.onRecoverableError!==void 0&&(k=a.onRecoverableError)),s=pu(s,null,n,1,a??null,m,!1,_,k),n[tn]=s.current,br(n),f)for(n=0;n<f.length;n++)a=f[n],m=a._getVersion,m=m(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,m]:s.mutableSourceEagerHydrationData.push(a,m);return new ti(s)},reactDom_production_min.render=function(n,s,a){if(!ni(s))throw Error(r(200));return ri(null,n,s,!1,a)},reactDom_production_min.unmountComponentAtNode=function(n){if(!ni(n))throw Error(r(40));return n._reactRootContainer?(Gn(function(){ri(null,null,n,!1,function(){n._reactRootContainer=null,n[tn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Mo,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(n,s,a,f){if(!ni(a))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return ri(n,s,a,!1,f)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var t=requireReactDom();return client.createRoot=t.createRoot,client.hydrateRoot=t.hydrateRoot,client}var clientExports=requireClient();requireReactDom();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_extends$2.apply(this,arguments)}var Action;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:c,hash:p}=i.location;return createLocation("",{pathname:l,search:c,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(e,r,null,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,r,i){return r===void 0&&(r=null),_extends$2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:r,key:e&&e.key||i||createKey()})}function createPath(t){let{pathname:e="/",search:r="",hash:i=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function parsePath(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,r,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,p=Action.Pop,h=null,u=d();u==null&&(u=0,c.replaceState(_extends$2({},c.state,{idx:u}),""));function d(){return(c.state||{idx:null}).idx}function g(){p=Action.Pop;let A=d(),D=A==null?null:A-u;u=A,h&&h({action:p,location:x.location,delta:D})}function y(A,D){p=Action.Push;let b=createLocation(x.location,A,D);u=d()+1;let I=getHistoryState(b,u),R=x.createHref(b);try{c.pushState(I,"",R)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;o.location.assign(R)}l&&h&&h({action:p,location:x.location,delta:1})}function S(A,D){p=Action.Replace;let b=createLocation(x.location,A,D);u=d();let I=getHistoryState(b,u),R=x.createHref(b);c.replaceState(I,"",R),l&&h&&h({action:p,location:x.location,delta:0})}function E(A){let D=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof A=="string"?A:createPath(A);return b=b.replace(/ $/,"%20"),invariant(D,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,D)}let x={get action(){return p},get location(){return t(o,c)},listen(A){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,g),h=A,()=>{o.removeEventListener(PopStateEventType,g),h=null}},createHref(A){return e(o,A)},createURL:E,encodeLocation(A){let D=E(A);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:y,replace:S,go(A){return c.go(A)}};return x}var ResultType;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ResultType||(ResultType={}));function matchRoutes(t,e,r){return r===void 0&&(r="/"),matchRoutesImpl(t,e,r)}function matchRoutesImpl(t,e,r,i){let o=typeof e=="string"?parsePath(e):e,l=stripBasename(o.pathname||"/",r);if(l==null)return null;let c=flattenRoutes(t);rankRouteBranches(c);let p=null;for(let h=0;p==null&&h<c.length;++h){let u=decodePath(l);p=matchRouteBranch(c[h],u)}return p}function flattenRoutes(t,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let o=(l,c,p)=>{let h={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(invariant(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let u=joinPaths([i,h.relativePath]),d=r.concat(h);l.children&&l.children.length>0&&(invariant(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),flattenRoutes(l.children,e,d,u)),!(l.path==null&&!l.index)&&e.push({path:u,score:computeScore(u,l.index),routesMeta:d})};return t.forEach((l,c)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,c);else for(let h of explodeOptionalSegments(l.path))o(l,c,h)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=explodeOptionalSegments(i.join("/")),p=[];return p.push(...c.map(h=>h===""?l:[l,h].join("/"))),o&&p.push(...c),p.map(h=>t.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:compareIndexes(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let r=t.split("/"),i=r.length;return r.some(isSplat)&&(i+=splatPenalty),e&&(i+=indexRouteValue),r.filter(o=>!isSplat(o)).reduce((o,l)=>o+(paramRe.test(l)?dynamicSegmentValue:l===""?emptySegmentValue:staticSegmentValue),i)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,r){let{routesMeta:i}=t,o={},l="/",c=[];for(let p=0;p<i.length;++p){let h=i[p],u=p===i.length-1,d=l==="/"?e:e.slice(l.length)||"/",g=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:u},d),y=h.route;if(!g)return null;Object.assign(o,g.params),c.push({params:o,pathname:joinPaths([l,g.pathname]),pathnameBase:normalizePathname(joinPaths([l,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(l=joinPaths([l,g.pathnameBase]))}return c}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=compilePath(t.path,t.caseSensitive,t.end),o=e.match(r);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((u,d,g)=>{let{paramName:y,isOptional:S}=d;if(y==="*"){let x=p[g]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const E=p[g];return S&&!E?u[y]=void 0:u[y]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:c,pattern:t}}function compilePath(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,p,h)=>(i.push({paramName:p,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function resolvePath(t,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:o=""}=typeof t=="string"?parsePath(t):t;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,e):e,search:normalizeSearch(i),hash:normalizeHash(o)}}function resolvePathname(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(t,e,r,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t,e){let r=getPathContributingMatches(t);return e?r.map((i,o)=>o===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function resolveTo(t,e,r,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=parsePath(t):(o=_extends$2({},t),invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let l=t===""||o.pathname==="",c=l?"/":o.pathname,p;if(c==null)p=r;else{let g=e.length-1;if(!i&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),g-=1;o.pathname=y.join("/")}p=g>=0?e[g]:"/"}let h=resolvePath(o,p),u=c&&c!=="/"&&c.endsWith("/"),d=(l||c===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(u||d)&&(h.pathname+="/"),h}const joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(t,e){let{relative:r}=e===void 0?{}:e;useInRouterContext()||invariant(!1);let{basename:i,navigator:o}=reactExports.useContext(NavigationContext),{hash:l,pathname:c,search:p}=useResolvedPath(t,{relative:r}),h=c;return i!=="/"&&(h=c==="/"?i:joinPaths([i,c])),o.createHref({pathname:h,search:p,hash:l})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let t=reactExports.useContext(DataRouterContext),{basename:e,future:r,navigator:i}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),c=JSON.stringify(getResolveToMatches(o,r.v7_relativeSplatPath)),p=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{p.current=!0}),reactExports.useCallback(function(u,d){if(d===void 0&&(d={}),!p.current)return;if(typeof u=="number"){i.go(u);return}let g=resolveTo(u,JSON.parse(c),l,d.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:joinPaths([e,g.pathname])),(d.replace?i.replace:i.push)(g,d.state,d)},[e,i,c,l,t])}function useResolvedPath(t,e){let{relative:r}=e===void 0?{}:e,{future:i}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),c=JSON.stringify(getResolveToMatches(o,i.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(c),l,r==="path"),[t,c,l,r])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,r,i){useInRouterContext()||invariant(!1);let{navigator:o}=reactExports.useContext(NavigationContext),{matches:l}=reactExports.useContext(RouteContext),c=l[l.length-1],p=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let u=useLocation(),d;if(e){var g;let A=typeof e=="string"?parsePath(e):e;h==="/"||(g=A.pathname)!=null&&g.startsWith(h)||invariant(!1),d=A}else d=u;let y=d.pathname||"/",S=y;if(h!=="/"){let A=h.replace(/^\//,"").split("/");S="/"+y.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=matchRoutes(t,{pathname:S}),x=_renderMatches(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},p,A.params),pathname:joinPaths([h,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:joinPaths([h,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),l,r,i);return e&&x?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Action.Pop}},x):x}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),r?reactExports.createElement("pre",{style:o},r):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(t){let{routeContext:e,match:r,children:i}=t,o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),reactExports.createElement(RouteContext.Provider,{value:e},i)}function _renderMatches(t,e,r,i){var o;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,p=(o=r)==null?void 0:o.errors;if(p!=null){let d=c.findIndex(g=>g.route.id&&p?.[g.route.id]!==void 0);d>=0||invariant(!1),c=c.slice(0,Math.min(c.length,d+1))}let h=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let d=0;d<c.length;d++){let g=c[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=d),g.route.id){let{loaderData:y,errors:S}=r,E=g.route.loader&&y[g.route.id]===void 0&&(!S||S[g.route.id]===void 0);if(g.route.lazy||E){h=!0,u>=0?c=c.slice(0,u+1):c=[c[0]];break}}}return c.reduceRight((d,g,y)=>{let S,E=!1,x=null,A=null;r&&(S=p&&g.route.id?p[g.route.id]:void 0,x=g.route.errorElement||defaultErrorElement,h&&(u<0&&y===0?(warningOnce("route-fallback"),E=!0,A=null):u===y&&(E=!0,A=g.route.hydrateFallbackElement||null)));let D=e.concat(c.slice(0,y+1)),b=()=>{let I;return S?I=x:E?I=A:g.route.Component?I=reactExports.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=d,reactExports.createElement(RenderedRoute,{match:g,routeContext:{outlet:d,matches:D,isDataRoute:r!=null},children:I})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:x,error:S,children:b(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):b()},null)}var DataRouterHook$1=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(DataRouterHook$1||{}),DataRouterStateHook$1=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(DataRouterStateHook$1||{});function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(t){let e=useRouteContext(),r=e.matches[e.matches.length-1];return r.route.id||invariant(!1),r.route.id}function useRouteError(){var t;let e=reactExports.useContext(RouteErrorContext),r=useDataRouterState(),i=useCurrentRouteId();return e!==void 0?e:(t=r.errors)==null?void 0:t[i]}function useNavigateStable(){let{router:t}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{r.current=!0}),reactExports.useCallback(function(o,l){l===void 0&&(l={}),r.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,_extends$1({fromRouteId:e},l)))},[t,e])}const alreadyWarned$1={};function warningOnce(t,e,r){alreadyWarned$1[t]||(alreadyWarned$1[t]=!0)}function logV6DeprecationWarnings(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Route(t){invariant(!1)}function Router(t){let{basename:e="/",children:r=null,location:i,navigationType:o=Action.Pop,navigator:l,static:c=!1,future:p}=t;useInRouterContext()&&invariant(!1);let h=e.replace(/^\/*/,"/"),u=reactExports.useMemo(()=>({basename:h,navigator:l,static:c,future:_extends$1({v7_relativeSplatPath:!1},p)}),[h,p,l,c]);typeof i=="string"&&(i=parsePath(i));let{pathname:d="/",search:g="",hash:y="",state:S=null,key:E="default"}=i,x=reactExports.useMemo(()=>{let A=stripBasename(d,h);return A==null?null:{location:{pathname:A,search:g,hash:y,state:S,key:E},navigationType:o}},[h,d,g,y,S,E,o]);return x==null?null:reactExports.createElement(NavigationContext.Provider,{value:u},reactExports.createElement(LocationContext.Provider,{children:r,value:x}))}function Routes(t){let{children:e,location:r}=t;return useRoutes(createRoutesFromChildren(e),r)}new Promise(()=>{});function createRoutesFromChildren(t,e){e===void 0&&(e=[]);let r=[];return reactExports.Children.forEach(t,(i,o)=>{if(!reactExports.isValidElement(i))return;let l=[...e,o];if(i.type===reactExports.Fragment){r.push.apply(r,createRoutesFromChildren(i.props.children,l));return}i.type!==Route&&invariant(!1),!i.props.index||!i.props.children||invariant(!1);let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=createRoutesFromChildren(i.props.children,l)),r.push(c)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var r={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(t){let{basename:e,children:r,future:i,window:o}=t,l=reactExports.useRef();l.current==null&&(l.current=createBrowserHistory({window:o,v5Compat:!0}));let c=l.current,[p,h]=reactExports.useState({action:c.action,location:c.location}),{v7_startTransition:u}=i||{},d=reactExports.useCallback(g=>{u&&startTransitionImpl?startTransitionImpl(()=>h(g)):h(g)},[h,u]);return reactExports.useLayoutEffect(()=>c.listen(d),[c,d]),reactExports.useEffect(()=>logV6DeprecationWarnings(i),[i]),reactExports.createElement(Router,{basename:e,children:r,location:p.location,navigationType:p.action,navigator:c,future:i})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,r){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:p,target:h,to:u,preventScrollReset:d,viewTransition:g}=e,y=_objectWithoutPropertiesLoose(e,_excluded),{basename:S}=reactExports.useContext(NavigationContext),E,x=!1;if(typeof u=="string"&&ABSOLUTE_URL_REGEX.test(u)&&(E=u,isBrowser))try{let I=new URL(window.location.href),R=u.startsWith("//")?new URL(I.protocol+u):new URL(u),q=stripBasename(R.pathname,S);R.origin===I.origin&&q!=null?u=q+R.search+R.hash:x=!0}catch{}let A=useHref(u,{relative:o}),D=useLinkClickHandler(u,{replace:c,state:p,target:h,preventScrollReset:d,relative:o,viewTransition:g});function b(I){i&&i(I),I.defaultPrevented||D(I)}return reactExports.createElement("a",_extends({},y,{href:E||A,onClick:x||l?i:b,ref:r,target:h}))});var DataRouterHook;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(t,e){let{target:r,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:p}=e===void 0?{}:e,h=useNavigate(),u=useLocation(),d=useResolvedPath(t,{relative:c});return reactExports.useCallback(g=>{if(shouldProcessLinkClick(g,r)){g.preventDefault();let y=i!==void 0?i:createPath(u)===createPath(d);h(t,{replace:y,state:o,preventScrollReset:l,relative:c,viewTransition:p})}},[u,h,d,i,o,r,t,l,c,p])}const greekColumn="/Schedule-Sculptor/assets/greek-column-BPmWnMjY.png",logo="/Schedule-Sculptor/assets/logo-PNohiI9b.png";function Welcome(){const t=useNavigate(),[e,r]=reactExports.useState(!1);reactExports.useEffect(()=>{const o=localStorage.getItem("parsedAuditData");r(!!o)},[]);const i=()=>{t(e?"/dashboard":"/audit")};return jsxRuntimeExports.jsxs("div",{className:"relative min-h-screen font-sans bg-[#FAF8F5] overflow-x-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full w-1/4 hidden lg:flex items-stretch justify-start pl-2 xl:pl-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20 transform scale-x-[-1]"})}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 h-full w-1/4 hidden lg:flex items-stretch justify-end pr-2 xl:pr-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen text-center px-4",children:[jsxRuntimeExports.jsx("img",{src:logo,alt:"Schedule Sculptor Logo",className:"w-40 h-auto mb-8 lg:mb-12"}),jsxRuntimeExports.jsx("h1",{className:"serif-title text-5xl lg:text-6xl font-bold brand-purple mb-4",children:"Welcome to ScheduleSculptor"}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl text-gray-500 mb-10",children:"Simplify your academic planning with clear, interactive degree paths."}),jsxRuntimeExports.jsx("button",{onClick:i,className:"px-8 py-3 bg-purple-700 text-white rounded-lg hover:bg-purple-800 transition-colors text-lg font-medium",children:e?"View Progress":"Get Started"})]})]})}function Layout({children:t}){return jsxRuntimeExports.jsxs("div",{className:"relative min-h-screen font-sans bg-[#FAF8F5] overflow-x-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full w-1/4 hidden lg:flex items-stretch justify-start pl-2 xl:pl-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20 transform scale-x-[-1]"})}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 h-full w-1/4 hidden lg:flex items-stretch justify-end pr-2 xl:pl-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 pt-5 flex flex-col min-h-screen",children:[jsxRuntimeExports.jsx("header",{className:"main-container py-8 animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b border-gray-300 pb-4",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"serif-title text-2xl font-semibold tracking-wider brand-purple",children:"SCHEDULE SCULPTOR"}),jsxRuntimeExports.jsxs("nav",{className:"hidden md:flex items-center space-x-8 text-sm font-medium text-gray-600",children:[jsxRuntimeExports.jsx(Link,{to:"/audit",className:"hover:text-purple-800 transition-colors",children:"Upload Audit"}),jsxRuntimeExports.jsx(Link,{to:"/dashboard",className:"hover:text-purple-800 transition-colors",children:"Dashboard"}),jsxRuntimeExports.jsx(Link,{to:"/sculpt",className:"hover:text-purple-800 transition-colors",children:"Sculpt your Semester"}),jsxRuntimeExports.jsx(Link,{to:"/ai-assistant",className:"hover:text-purple-800 transition-colors",children:"AI Assistant"})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-grow flex items-center animate-fade-in",style:{animationDelay:"0.2s"},children:jsxRuntimeExports.jsx("main",{className:"main-container",children:t})})]})]})}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(e,r){module.exports=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=_e,e.arraysToBytes=Ee,e.assert=N,e.bytesToString=pe,e.createPromiseCapability=yr,e.createValidAbsoluteUrl=T,e.escapeString=zt,e.getModificationDate=mr,e.getVerbosityLevel=L,e.info=C,e.isArrayBuffer=Zr,e.isArrayEqual=ii,e.isAscii=$e,e.objectFromMap=ve,e.objectSize=Re,e.setVerbosityLevel=X,e.shadow=w,e.string32=Ce,e.stringToBytes=he,e.stringToPDFString=nt,e.stringToUTF16BEString=qe,e.stringToUTF8String=$n,e.unreachable=V,e.utf8StringToString=Qr,e.warn=v,r(2);const i=[1,0,0,1,0,0];e.IDENTITY_MATRIX=i;const o=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=o;const l=1.35;e.LINE_FACTOR=l;const c=.35;e.LINE_DESCENT_FACTOR=c;const p={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=p;const h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=h;const u="pdfjs_internal_editor_";e.AnnotationEditorPrefix=u;const d={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=d;const g={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=g;const y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=y;const S={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=S;const E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=E;const x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=x;const A={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=A;const D={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=D;const b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=b;const I={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=I;const R={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=R;const q={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=q;const G={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=G;const z={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=z;const B={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=B;const M={O:"PageOpen",C:"PageClose"};e.PageActionEventType=M;const O={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=O;const W={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=W;const K={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=K;const se={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=se;const $={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=$;const Q={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=Q;const re={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=re;let te=K.WARNINGS;function X(fe){Number.isInteger(fe)&&(te=fe)}function L(){return te}function C(fe){te>=K.INFOS&&console.log(`Info: ${fe}`)}function v(fe){te>=K.WARNINGS&&console.log(`Warning: ${fe}`)}function V(fe){throw new Error(fe)}function N(fe,ie){fe||V(ie)}function P(fe){if(!fe)return!1;switch(fe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function T(fe,ie=null,oe=null){if(!fe)return null;try{if(oe&&typeof fe=="string"){if(oe.addDefaultProtocol&&fe.startsWith("www.")){const ke=fe.match(/\./g);ke&&ke.length>=2&&(fe=`http://${fe}`)}if(oe.tryConvertEncoding)try{fe=$n(fe)}catch{}}const Se=ie?new URL(fe,ie):new URL(fe);if(P(Se))return Se}catch{}return null}function w(fe,ie,oe){return Object.defineProperty(fe,ie,{value:oe,enumerable:!0,configurable:!0,writable:!1}),oe}const F=(function(){function ie(oe,Se){this.constructor===ie&&V("Cannot initialize BaseException."),this.message=oe,this.name=Se}return ie.prototype=new Error,ie.constructor=ie,ie})();e.BaseException=F;class U extends F{constructor(ie,oe){super(ie,"PasswordException"),this.code=oe}}e.PasswordException=U;class H extends F{constructor(ie,oe){super(ie,"UnknownErrorException"),this.details=oe}}e.UnknownErrorException=H;class Y extends F{constructor(ie){super(ie,"InvalidPDFException")}}e.InvalidPDFException=Y;class ne extends F{constructor(ie){super(ie,"MissingPDFException")}}e.MissingPDFException=ne;class ae extends F{constructor(ie,oe){super(ie,"UnexpectedResponseException"),this.status=oe}}e.UnexpectedResponseException=ae;class ee extends F{constructor(ie){super(ie,"FormatError")}}e.FormatError=ee;class ce extends F{constructor(ie){super(ie,"AbortException")}}e.AbortException=ce;function pe(fe){(typeof fe!="object"||fe===null||fe.length===void 0)&&V("Invalid argument for bytesToString");const ie=fe.length,oe=8192;if(ie<oe)return String.fromCharCode.apply(null,fe);const Se=[];for(let ke=0;ke<ie;ke+=oe){const Ue=Math.min(ke+oe,ie),De=fe.subarray(ke,Ue);Se.push(String.fromCharCode.apply(null,De))}return Se.join("")}function he(fe){typeof fe!="string"&&V("Invalid argument for stringToBytes");const ie=fe.length,oe=new Uint8Array(ie);for(let Se=0;Se<ie;++Se)oe[Se]=fe.charCodeAt(Se)&255;return oe}function _e(fe){if(fe.length!==void 0)return fe.length;if(fe.byteLength!==void 0)return fe.byteLength;V("Invalid argument for arrayByteLength")}function Ee(fe){const ie=fe.length;if(ie===1&&fe[0]instanceof Uint8Array)return fe[0];let oe=0;for(let Ue=0;Ue<ie;Ue++)oe+=_e(fe[Ue]);let Se=0;const ke=new Uint8Array(oe);for(let Ue=0;Ue<ie;Ue++){let De=fe[Ue];De instanceof Uint8Array||(typeof De=="string"?De=he(De):De=new Uint8Array(De));const Ft=De.byteLength;ke.set(De,Se),Se+=Ft}return ke}function Ce(fe){return String.fromCharCode(fe>>24&255,fe>>16&255,fe>>8&255,fe&255)}function Re(fe){return Object.keys(fe).length}function ve(fe){const ie=Object.create(null);for(const[oe,Se]of fe)ie[oe]=Se;return ie}function He(){const fe=new Uint8Array(4);return fe[0]=1,new Uint32Array(fe.buffer,0,1)[0]===1}function Ze(){try{return new Function(""),!0}catch{return!1}}class Ie{static get isLittleEndian(){return w(this,"isLittleEndian",He())}static get isEvalSupported(){return w(this,"isEvalSupported",Ze())}static get isOffscreenCanvasSupported(){return w(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=Ie;const Oe=[...Array(256).keys()].map(fe=>fe.toString(16).padStart(2,"0"));class je{static makeHexColor(ie,oe,Se){return`#${Oe[ie]}${Oe[oe]}${Oe[Se]}`}static scaleMinMax(ie,oe){let Se;ie[0]?(ie[0]<0&&(Se=oe[0],oe[0]=oe[1],oe[1]=Se),oe[0]*=ie[0],oe[1]*=ie[0],ie[3]<0&&(Se=oe[2],oe[2]=oe[3],oe[3]=Se),oe[2]*=ie[3],oe[3]*=ie[3]):(Se=oe[0],oe[0]=oe[2],oe[2]=Se,Se=oe[1],oe[1]=oe[3],oe[3]=Se,ie[1]<0&&(Se=oe[2],oe[2]=oe[3],oe[3]=Se),oe[2]*=ie[1],oe[3]*=ie[1],ie[2]<0&&(Se=oe[0],oe[0]=oe[1],oe[1]=Se),oe[0]*=ie[2],oe[1]*=ie[2]),oe[0]+=ie[4],oe[1]+=ie[4],oe[2]+=ie[5],oe[3]+=ie[5]}static transform(ie,oe){return[ie[0]*oe[0]+ie[2]*oe[1],ie[1]*oe[0]+ie[3]*oe[1],ie[0]*oe[2]+ie[2]*oe[3],ie[1]*oe[2]+ie[3]*oe[3],ie[0]*oe[4]+ie[2]*oe[5]+ie[4],ie[1]*oe[4]+ie[3]*oe[5]+ie[5]]}static applyTransform(ie,oe){const Se=ie[0]*oe[0]+ie[1]*oe[2]+oe[4],ke=ie[0]*oe[1]+ie[1]*oe[3]+oe[5];return[Se,ke]}static applyInverseTransform(ie,oe){const Se=oe[0]*oe[3]-oe[1]*oe[2],ke=(ie[0]*oe[3]-ie[1]*oe[2]+oe[2]*oe[5]-oe[4]*oe[3])/Se,Ue=(-ie[0]*oe[1]+ie[1]*oe[0]+oe[4]*oe[1]-oe[5]*oe[0])/Se;return[ke,Ue]}static getAxialAlignedBoundingBox(ie,oe){const Se=je.applyTransform(ie,oe),ke=je.applyTransform(ie.slice(2,4),oe),Ue=je.applyTransform([ie[0],ie[3]],oe),De=je.applyTransform([ie[2],ie[1]],oe);return[Math.min(Se[0],ke[0],Ue[0],De[0]),Math.min(Se[1],ke[1],Ue[1],De[1]),Math.max(Se[0],ke[0],Ue[0],De[0]),Math.max(Se[1],ke[1],Ue[1],De[1])]}static inverseTransform(ie){const oe=ie[0]*ie[3]-ie[1]*ie[2];return[ie[3]/oe,-ie[1]/oe,-ie[2]/oe,ie[0]/oe,(ie[2]*ie[5]-ie[4]*ie[3])/oe,(ie[4]*ie[1]-ie[5]*ie[0])/oe]}static apply3dTransform(ie,oe){return[ie[0]*oe[0]+ie[1]*oe[1]+ie[2]*oe[2],ie[3]*oe[0]+ie[4]*oe[1]+ie[5]*oe[2],ie[6]*oe[0]+ie[7]*oe[1]+ie[8]*oe[2]]}static singularValueDecompose2dScale(ie){const oe=[ie[0],ie[2],ie[1],ie[3]],Se=ie[0]*oe[0]+ie[1]*oe[2],ke=ie[0]*oe[1]+ie[1]*oe[3],Ue=ie[2]*oe[0]+ie[3]*oe[2],De=ie[2]*oe[1]+ie[3]*oe[3],Ft=(Se+De)/2,Qt=Math.sqrt((Se+De)**2-4*(Se*De-Ue*ke))/2,Wt=Ft+Qt||1,ot=Ft-Qt||1;return[Math.sqrt(Wt),Math.sqrt(ot)]}static normalizeRect(ie){const oe=ie.slice(0);return ie[0]>ie[2]&&(oe[0]=ie[2],oe[2]=ie[0]),ie[1]>ie[3]&&(oe[1]=ie[3],oe[3]=ie[1]),oe}static intersect(ie,oe){const Se=Math.max(Math.min(ie[0],ie[2]),Math.min(oe[0],oe[2])),ke=Math.min(Math.max(ie[0],ie[2]),Math.max(oe[0],oe[2]));if(Se>ke)return null;const Ue=Math.max(Math.min(ie[1],ie[3]),Math.min(oe[1],oe[3])),De=Math.min(Math.max(ie[1],ie[3]),Math.max(oe[1],oe[3]));return Ue>De?null:[Se,Ue,ke,De]}static bezierBoundingBox(ie,oe,Se,ke,Ue,De,Ft,Qt){const Wt=[],ot=[[],[]];let Zt,_t,cn,Je,Jn,$t,dn,hn;for(let Pr=0;Pr<2;++Pr){if(Pr===0?(_t=6*ie-12*Se+6*Ue,Zt=-3*ie+9*Se-9*Ue+3*Ft,cn=3*Se-3*ie):(_t=6*oe-12*ke+6*De,Zt=-3*oe+9*ke-9*De+3*Qt,cn=3*ke-3*oe),Math.abs(Zt)<1e-12){if(Math.abs(_t)<1e-12)continue;Je=-cn/_t,0<Je&&Je<1&&Wt.push(Je);continue}dn=_t*_t-4*cn*Zt,hn=Math.sqrt(dn),!(dn<0)&&(Jn=(-_t+hn)/(2*Zt),0<Jn&&Jn<1&&Wt.push(Jn),$t=(-_t-hn)/(2*Zt),0<$t&&$t<1&&Wt.push($t))}let en=Wt.length,yt;const In=en;for(;en--;)Je=Wt[en],yt=1-Je,ot[0][en]=yt*yt*yt*ie+3*yt*yt*Je*Se+3*yt*Je*Je*Ue+Je*Je*Je*Ft,ot[1][en]=yt*yt*yt*oe+3*yt*yt*Je*ke+3*yt*Je*Je*De+Je*Je*Je*Qt;return ot[0][In]=ie,ot[1][In]=oe,ot[0][In+1]=Ft,ot[1][In+1]=Qt,ot[0].length=ot[1].length=In+2,[Math.min(...ot[0]),Math.min(...ot[1]),Math.max(...ot[0]),Math.max(...ot[1])]}}e.Util=je;const ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function nt(fe){if(fe[0]>=""){let oe;if(fe[0]===""&&fe[1]===""?oe="utf-16be":fe[0]===""&&fe[1]===""?oe="utf-16le":fe[0]===""&&fe[1]===""&&fe[2]===""&&(oe="utf-8"),oe)try{const Se=new TextDecoder(oe,{fatal:!0}),ke=he(fe);return Se.decode(ke)}catch(Se){v(`stringToPDFString: "${Se}".`)}}const ie=[];for(let oe=0,Se=fe.length;oe<Se;oe++){const ke=ht[fe.charCodeAt(oe)];ie.push(ke?String.fromCharCode(ke):fe.charAt(oe))}return ie.join("")}function zt(fe){return fe.replace(/([()\\\n\r])/g,ie=>ie===`
`?"\\n":ie==="\r"?"\\r":`\\${ie}`)}function $e(fe){return/^[\x00-\x7F]*$/.test(fe)}function qe(fe){const ie=[""];for(let oe=0,Se=fe.length;oe<Se;oe++){const ke=fe.charCodeAt(oe);ie.push(String.fromCharCode(ke>>8&255),String.fromCharCode(ke&255))}return ie.join("")}function $n(fe){return decodeURIComponent(escape(fe))}function Qr(fe){return unescape(encodeURIComponent(fe))}function Zr(fe){return typeof fe=="object"&&fe!==null&&fe.byteLength!==void 0}function ii(fe,ie){if(fe.length!==ie.length)return!1;for(let oe=0,Se=fe.length;oe<Se;oe++)if(fe[oe]!==ie[oe])return!1;return!0}function mr(fe=new Date){return[fe.getUTCFullYear().toString(),(fe.getUTCMonth()+1).toString().padStart(2,"0"),fe.getUTCDate().toString().padStart(2,"0"),fe.getUTCHours().toString().padStart(2,"0"),fe.getUTCMinutes().toString().padStart(2,"0"),fe.getUTCSeconds().toString().padStart(2,"0")].join("")}function yr(){const fe=Object.create(null);let ie=!1;return Object.defineProperty(fe,"settled",{get(){return ie}}),fe.promise=new Promise(function(oe,Se){fe.resolve=function(ke){ie=!0,oe(ke)},fe.reject=function(ke){ie=!0,Se(ke)}}),fe}}),((t,e,r)=>{r(3)}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=r}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=t,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}let createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let r;if(typeof t=="string"||t instanceof URL)r={url:t};else if((0,_util.isArrayBuffer)(t))r={data:t};else if(t instanceof PDFDataRangeTransport)r={range:t};else{if(typeof t!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=t}const i=Object.create(null);let o=null,l=null;for(const p in r){const h=r[p];switch(p){case"url":if(typeof window<"u")try{i[p]=new URL(h,window.location).href;continue}catch(u){(0,_util.warn)(`Cannot create valid URL: "${u}".`)}else if(typeof h=="string"||h instanceof URL){i[p]=h.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=h;continue;case"worker":l=h;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&h instanceof Buffer)i[p]=new Uint8Array(h);else{if(h instanceof Uint8Array)break;if(typeof h=="string")i[p]=(0,_util.stringToBytes)(h);else if(typeof h=="object"&&h!==null&&!isNaN(h.length))i[p]=new Uint8Array(h);else if((0,_util.isArrayBuffer)(h))i[p]=new Uint8Array(h);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}i[p]=h}if(i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory,i.StandardFontDataFactory=i.StandardFontDataFactory||DefaultStandardFontDataFactory,i.ignoreErrors=i.stopAtErrors!==!0,i.fontExtraProperties=i.fontExtraProperties===!0,i.pdfBug=i.pdfBug===!0,i.enableXfa=i.enableXfa===!0,(!Number.isInteger(i.rangeChunkSize)||i.rangeChunkSize<1)&&(i.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof i.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(i.docBaseUrl))&&(i.docBaseUrl=null),(!Number.isInteger(i.maxImageSize)||i.maxImageSize<-1)&&(i.maxImageSize=-1),typeof i.cMapUrl!="string"&&(i.cMapUrl=null),typeof i.standardFontDataUrl!="string"&&(i.standardFontDataUrl=null),typeof i.useWorkerFetch!="boolean"&&(i.useWorkerFetch=i.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&i.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof i.isEvalSupported!="boolean"&&(i.isEvalSupported=!0),typeof i.disableFontFace!="boolean"&&(i.disableFontFace=_is_node.isNodeJS),typeof i.useSystemFonts!="boolean"&&(i.useSystemFonts=!_is_node.isNodeJS&&!i.disableFontFace),(typeof i.ownerDocument!="object"||i.ownerDocument===null)&&(i.ownerDocument=globalThis.document),typeof i.disableRange!="boolean"&&(i.disableRange=!1),typeof i.disableStream!="boolean"&&(i.disableStream=!1),typeof i.disableAutoFetch!="boolean"&&(i.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(i.verbosity),!l){const p={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};l=p.port?PDFWorker.fromPort(p):new PDFWorker(p),e._worker=l}const c=e.docId;return l.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const p=_fetchDocument(l,i,o,c),h=new Promise(function(u){let d;o?d=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},o):i.data||(d=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream})),u(d)});return Promise.all([p,h]).then(function([u,d]){if(e.destroyed)throw new Error("Loading aborted");const g=new _message_handler.MessageHandler(c,u,l.port),y=new WorkerTransport(g,e,d,i);e._transport=y,g.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(t,e,r,i){if(t.destroyed)throw new Error("Worker was destroyed");r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone,e.contentDispositionFilename=r.contentDispositionFilename);const o=await t.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(e.data&&(e.data=null),t.destroyed)throw new Error("Worker was destroyed");return o}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,r,i=!1,o=null){this.length=e,this.initialData=r,this.progressiveDone=i,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,r){for(const i of this._rangeListeners)i(e,r)}onDataProgress(e,r){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,r)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,r){this._pdfInfo=e,this._transport=r,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,r,i,o,l=!1){this._pageIndex=e,this._pageInfo=r,this._ownerDocument=o,this._transport=i,this._stats=l?new _display_utils.StatTimer:null,this._pdfBug=l,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:i=0,offsetY:o=0,dontFlip:l=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:r,offsetX:i,offsetY:o,dontFlip:l})}getAnnotations({intent:e="display"}={}){const r=this._transport.getRenderingIntent(e);let i=this._annotationPromises.get(r.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,i),i=i.then(o=>{for(const l of o)l.titleObj!==void 0&&Object.defineProperty(l,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),l.titleObj.str}}),l.contentsObj!==void 0&&Object.defineProperty(l,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),l.contentsObj.str}});return o})),i}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:r,intent:i="display",annotationMode:o=_util.AnnotationMode.ENABLE,transform:l=null,imageLayer:c=null,canvasFactory:p=null,background:h=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:g=null,printAnnotationStorage:y=null}){arguments[0]?.renderInteractiveForms!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&o===_util.AnnotationMode.ENABLE&&(o=_util.AnnotationMode.ENABLE_FORMS)),arguments[0]?.includeAnnotationStorage!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&o===_util.AnnotationMode.ENABLE&&(o=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const S=this._transport.getRenderingIntent(i,o,y);this.pendingCleanup=!1,u||(u=this._transport.getOptionalContentConfig());let E=this._intentStates.get(S.cacheKey);E||(E=Object.create(null),this._intentStates.set(S.cacheKey,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const x=p||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),A=!!(S.renderingIntent&_util.RenderingIntentFlag.PRINT);E.displayReadyCapability||(E.displayReadyCapability=(0,_util.createPromiseCapability)(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(S));const D=R=>{E.renderTasks.delete(b),(this.cleanupAfterRender||A)&&(this.pendingCleanup=!0),this._tryCleanup(),R?(b.capability.reject(R),this._abortOperatorList({intentState:E,reason:R instanceof Error?R:new Error(R)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},b=new InternalRenderTask({callback:D,params:{canvasContext:e,viewport:r,transform:l,imageLayer:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:x,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:g});(E.renderTasks||=new Set).add(b);const I=b.task;return Promise.all([E.displayReadyCapability.promise,u]).then(([R,q])=>{if(this.pendingCleanup){D();return}this._stats&&this._stats.time("Rendering"),b.initializeGraphics({transparency:R,optionalContentConfig:q}),b.operatorListChanged()}).catch(D),I}getOperatorList({intent:e="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(p))}const l=this._transport.getRenderingIntent(e,r,i,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let p;return c.opListReadCapability||(p=Object.create(null),p.operatorListChanged=o,c.opListReadCapability=(0,_util.createPromiseCapability)(),(c.renderTasks||=new Set).add(p),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:r===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const r=this.streamTextContent(e);return new Promise(function(i,o){function l(){c.read().then(function({value:h,done:u}){if(u){i(p);return}Object.assign(p.styles,h.styles),p.items.push(...h.items),l()},o)}const c=r.getReader(),p={items:[],styles:Object.create(null)};l()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const i of r.renderTasks)e.push(i.completed),i.cancel();this.objs.clear();for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:r,operatorList:i}of this._intentStates.values())if(r.size>0||!i.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,r){const i=this._intentStates.get(r);i&&(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(e))}_renderPageChunk(e,r){for(let i=0,o=e.length;i<o;i++)r.operatorList.fnArray.push(e.fnArray[i]),r.operatorList.argsArray.push(e.argsArray[i]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const i of r.renderTasks)i.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageMap:i}){const l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:i}).getReader(),c=this._intentStates.get(r);c.streamReader=l;const p=()=>{l.read().then(({value:h,done:u})=>{if(u){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),p())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const u of c.renderTasks)u.operatorListChanged();this._tryCleanup()}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};p()}_abortOperatorList({intentState:e,reason:r,force:i=!1}){if(e.streamReader){if(!i){if(e.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:r,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[o,l]of this._intentStates)if(l===e){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,r){const i={data:structuredClone(e,r)};this._deferred.then(()=>{for(const o of this._listeners)o.call(this,i)})}addEventListener(e,r){this._listeners.push(r)}removeEventListener(e,r){const i=this._listeners.indexOf(r);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let r;try{if(r=new URL(t),!r.origin||r.origin==="null")return!1}catch{return!1}const i=new URL(e,r);return r.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts=new WeakMap;constructor({name:t=null,port:e=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#workerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=t,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){PDFWorker.#workerPorts.set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),r=new _message_handler.MessageHandler("main","worker",e),i=()=>{e.removeEventListener("error",o),r.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||i()};e.addEventListener("error",o),r.on("test",c=>{if(e.removeEventListener("error",o),this.destroyed){i();return}c?(this._messageHandler=r,this._port=e,this._webWorker=e,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),e.terminate())}),r.on("ready",c=>{if(e.removeEventListener("error",o),this.destroyed){i();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const c=new Uint8Array;r.send("test",c,[c.buffer])};l();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const r=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(r+"_worker",r,e);t.setup(i,e);const o=new _message_handler.MessageHandler(r,r+"_worker",e);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(t.port)?this.#workerPorts.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#e=null;#t=new Map;#s=new Map;#n=null;constructor(e,r,i,o){this.messageHandler=e,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,o.useWorkerFetch||(this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.StandardFontDataFactory=new o.StandardFontDataFactory({baseUrl:o.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#e}getRenderingIntent(e,r=_util.AnnotationMode.ENABLE,i=null,o=!1){let l=_util.RenderingIntentFlag.DISPLAY,c=null;switch(e){case"any":l=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":l=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(r){case _util.AnnotationMode.DISABLE:l+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:l+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:l+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,c=(l&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return o&&(l+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:l,cacheKey:`${l}_${_annotation_storage.AnnotationStorage.getHash(c)}`,annotationStorageMap:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#n=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(i,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},o.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(l),"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{o.error(l)})},o.onCancel=l=>{this._fullReader.cancel(l),o.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",i=>{const o=(0,_util.createPromiseCapability)(),l=this._fullReader;return l.headersReady.then(()=>{(!l.isStreamingSupported||!l.isRangeSupported)&&(this._lastProgress&&r.onProgress?.(this._lastProgress),l.onProgress=c=>{r.onProgress?.({loaded:c.loaded,total:c.total})}),o.resolve({isStreamingSupported:l.isStreamingSupported,isRangeSupported:l.isRangeSupported,contentLength:l.contentLength})},o.reject),o.promise}),e.on("GetRangeReader",(i,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){o.close();return}o.onPull=()=>{l.read().then(function({value:c,done:p}){if(p){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(c),"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{o.error(c)})},o.onCancel=c=>{l.cancel(c),o.ready.catch(p=>{if(!this.destroyed)throw p})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(i,this))}),e.on("DocException",function(i){let o;switch(i.name){case"PasswordException":o=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":o=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(o)}),e.on("PasswordRequest",i=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const o=l=>{l instanceof Error?this._passwordCapability.reject(l):this._passwordCapability.resolve({password:l})};try{r.onPassword(o,i.code)}catch(l){this._passwordCapability.reject(l)}}else this._passwordCapability.reject(new _util.PasswordException(i.message,i.code));return this._passwordCapability.promise}),e.on("DataLoaded",i=>{r.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,o,l])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(o){case"Font":const c=this._params;if("error"in l){const u=l.error;(0,_util.warn)(`Error during font loading: ${u}`),this.commonObjs.resolve(i,u);break}let p=null;c.pdfBug&&globalThis.FontInspector?.enabled&&(p={registerFont(u,d){globalThis.FontInspector.fontAdded(u,d)}});const h=new _font_loader.FontFaceObject(l,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:p});this.fontLoader.bind(h).catch(u=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"FontPath":case"Image":this.commonObjs.resolve(i,l);break;default:throw new Error(`Got unknown common object type ${o}`)}}),e.on("obj",([i,o,l,c])=>{if(this.destroyed)return;const p=this.#t.get(o);if(!p.objs.has(i))switch(l){case"Image":p.objs.resolve(i,c);const h=8e6;if(c){let u;if(c.bitmap){const{bitmap:d,width:g,height:y}=c;u=g*y*4,p._bitmaps.add(d)}else u=c.data?.length||0;u>h&&(p.cleanupAfterRender=!0)}break;case"Pattern":p.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${l}`)}}),e.on("DocProgress",i=>{this.destroyed||r.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("DocStats",i=>{this.destroyed||(this.#e=Object.freeze({streamTypes:Object.freeze(i.streamTypes),fontTypes:Object.freeze(i.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,i=this.#s.get(r);if(i)return i;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");const c=new PDFPageProxy(r,l,this,this._params.ownerDocument,this._params.pdfBug);return this.#t.set(r,c),c});return this.#s.set(r,o),o}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#n||=this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const r of this.#t.values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#n=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}class PDFObjects{#e=Object.create(null);#t(e){const r=this.#e[e];return r||(this.#e[e]={capability:(0,_util.createPromiseCapability)(),data:null})}get(e,r=null){if(r){const o=this.#t(e);return o.capability.promise.then(()=>r(o.data)),null}const i=this.#e[e];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,r=null){const i=this.#t(e);i.data=r,i.capability.resolve()}clear(){this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(){this.#e.cancel()}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:r}=this.#e;return e.form||e.canvas&&r?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:r,objs:i,commonObjs:o,annotationCanvasMap:l,operatorList:c,pageIndex:p,canvasFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:g=null}){this.callback=e,this.params=r,this.objs=i,this.commonObjs=o,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=p,this.canvasFactory=h,this._pdfBug=d,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:o,transform:l,imageLayer:c,background:p}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,c,r,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:o,transparency:e,background:p}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=r(1),o=r(6),l=r(10);class c{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(u,d){const g=this._storage.get(u);return g===void 0?d:Object.assign(d,g)}getRawValue(u){return this._storage.get(u)}remove(u){if(this._storage.delete(u),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of this._storage.values())if(d instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(u,d){const g=this._storage.get(u);let y=!1;if(g!==void 0)for(const[S,E]of Object.entries(d))g[S]!==E&&(y=!0,g[S]=E);else y=!0,this._storage.set(u,d);y&&this.#e(),d instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(u){return this._storage.has(u)}getAll(){return this._storage.size>0?(0,i.objectFromMap)(this._storage):null}get size(){return this._storage.size}#e(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new p(this)}get serializable(){if(this._storage.size===0)return null;const u=new Map;for(const[d,g]of this._storage){const y=g instanceof o.AnnotationEditor?g.serialize():g;y&&u.set(d,y)}return u}static getHash(u){if(!u)return"";const d=new l.MurmurHash3_64;for(const[g,y]of u)d.update(`${g}:${JSON.stringify(y)}`);return d.hexdigest()}}e.AnnotationStorage=c;class p extends c{#e=null;constructor(u){super(),this.#e=structuredClone(u.serializable)}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=p}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=r(7),o=r(1);class l{#e=this.focusin.bind(this);#t=this.focusout.bind(this);#s=!1;#n=!1;#i=!1;#c=l._zIndex++;static _colorManager=new i.ColorManager;static _zIndex=1;constructor(p){this.constructor===l&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null;const[h,u]=this.parent.viewportBaseDimensions;this.x=p.x/h,this.y=p.y/u,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#c}focusin(p){this.#s?this.#s=!1:this.parent.setSelected(this)}focusout(p){!this.isAttachedToDOM||p.relatedTarget?.closest(`#${this.id}`)||(p.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(p){const h=this.parent.div.getBoundingClientRect();this.startX=p.clientX-h.x,this.startY=p.clientY-h.y,p.dataTransfer.setData("text/plain",this.id),p.dataTransfer.effectAllowed="move"}setAt(p,h,u,d){const[g,y]=this.parent.viewportBaseDimensions;[u,d]=this.screenToPageTranslation(u,d),this.x=(p+u)/g,this.y=(h+d)/y,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(p,h){const[u,d]=this.parent.viewportBaseDimensions;[p,h]=this.screenToPageTranslation(p,h),this.x+=p/u,this.y+=h/d,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(p,h){const{rotation:u}=this.parent.viewport;switch(u){case 90:return[h,-p];case 180:return[-p,-h];case 270:return[-h,p];default:return[p,h]}}setDims(p,h){const[u,d]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*p/u}%`,this.div.style.height=`${100*h/d}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#e),this.div.addEventListener("focusout",this.#t);const[p,h]=this.getInitialTranslation();return this.translate(p,h),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(p){const h=i.KeyboardManager.platform.isMac;if(p.button!==0||p.ctrlKey&&h){p.preventDefault();return}p.ctrlKey&&!h||p.shiftKey||p.metaKey&&h?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#s=!0}getRect(p,h){const[u,d]=this.parent.viewportBaseDimensions,[g,y]=this.parent.pageDimensions,S=g*p/u,E=y*h/d,x=this.x*g,A=this.y*y,D=this.width*g,b=this.height*y;switch(this.rotation){case 0:return[x+S,y-A-E-b,x+S+D,y-A-E];case 90:return[x+E,y-A+S,x+E+b,y-A+S+D];case 180:return[x-S-D,y-A+E,x-S,y-A+E+b];case 270:return[x-E-b,y-A-S-D,x-E,y-A-S];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,h){const[u,d,g,y]=p,S=g-u,E=y-d;switch(this.rotation){case 0:return[u,h-y,S,E];case 90:return[u,h-d,E,S];case 180:return[g,h-d,S,E];case 270:return[g,h-y,E,S];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#i=!0}disableEditMode(){this.#i=!1}isInEditMode(){return this.#i}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#e)}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(p,h){const u=new this.prototype.constructor({parent:h,id:h.getNextId()});u.rotation=p.rotation;const[d,g]=h.pageDimensions,[y,S,E,x]=u.getRectInCurrentCoords(p.rect,g);return u.x=y/d,u.y=S/g,u.width=E/d,u.height=x/g,u}remove(){this.div.removeEventListener("focusin",this.#e),this.div.removeEventListener("focusout",this.#t),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(p,h){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#n}set isEditing(p){this.#n=p,p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}e.AnnotationEditor=l}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=l,e.opacityToHex=c;var i=r(1),o=r(8);function l(S,E,x){for(const A of x)E.addEventListener(A,S[A].bind(S))}function c(S){return Math.round(Math.min(255,Math.max(1,255*S))).toString(16).padStart(2,"0")}class p{#e=0;getId(){return`${i.AnnotationEditorPrefix}${this.#e++}`}}class h{#e=[];#t=!1;#s;#n=-1;constructor(E=128){this.#s=E}add({cmd:E,undo:x,mustExec:A,type:D=NaN,overwriteIfSameType:b=!1,keepUndo:I=!1}){if(A&&E(),this.#t)return;const R={cmd:E,undo:x,type:D};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(R);return}if(b&&this.#e[this.#n].type===D){I&&(R.undo=this.#e[this.#n].undo),this.#e[this.#n]=R;return}const q=this.#n+1;q===this.#s?this.#e.splice(0,1):(this.#n=q,q<this.#e.length&&this.#e.splice(q)),this.#e.push(R)}undo(){this.#n!==-1&&(this.#t=!0,this.#e[this.#n].undo(),this.#t=!1,this.#n-=1)}redo(){this.#n<this.#e.length-1&&(this.#n+=1,this.#t=!0,this.#e[this.#n].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=h;class u{constructor(E){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const x=u.platform.isMac;for(const[A,D]of E)for(const b of A){const I=b.startsWith("mac+");x&&I?(this.callbacks.set(b.slice(4),D),this.allKeys.add(b.split("+").at(-1))):!x&&!I&&(this.callbacks.set(b,D),this.allKeys.add(b.split("+").at(-1)))}}static get platform(){const E=typeof navigator<"u"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:E.includes("Win"),isMac:E.includes("Mac")})}#e(E){E.altKey&&this.buffer.push("alt"),E.ctrlKey&&this.buffer.push("ctrl"),E.metaKey&&this.buffer.push("meta"),E.shiftKey&&this.buffer.push("shift"),this.buffer.push(E.key);const x=this.buffer.join("+");return this.buffer.length=0,x}exec(E,x){if(!this.allKeys.has(x.key))return;const A=this.callbacks.get(this.#e(x));A&&(A.bind(E)(),x.stopPropagation(),x.preventDefault())}}e.KeyboardManager=u;class d{#e=null;copy(E){E&&(Array.isArray(E)?this.#e=E.map(x=>x.serialize()):this.#e=[E.serialize()],this.#e=this.#e.filter(x=>!!x),this.#e.length===0&&(this.#e=null))}paste(){return this.#e}isEmpty(){return this.#e===null}destroy(){this.#e=null}}class g{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const E=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(E),(0,i.shadow)(this,"_colors",E)}convert(E){const x=(0,o.getRGB)(E);if(!window.matchMedia("(forced-colors: active)").matches)return x;for(const[A,D]of this._colors)if(D.every((b,I)=>b===x[I]))return g._colorsMapping.get(A);return x}getHexCode(E){const x=this._colors.get(E);return x?i.Util.makeHexColor(...x):E}}e.ColorManager=g;class y{#e=null;#t=new Map;#s=new Map;#n=new d;#i=new h;#c=0;#a=null;#r=null;#h=new p;#l=!1;#u=i.AnnotationEditorType.NONE;#o=new Set;#m=this.keydown.bind(this);#p=this.onEditingAction.bind(this);#C=this.onPageChanging.bind(this);#T={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#P=null;static _keyboardManager=new u([[["ctrl+a","mac+meta+a"],y.prototype.selectAll],[["ctrl+c","mac+meta+c"],y.prototype.copy],[["ctrl+v","mac+meta+v"],y.prototype.paste],[["ctrl+x","mac+meta+x"],y.prototype.cut],[["ctrl+z","mac+meta+z"],y.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],y.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],y.prototype.delete],[["Escape","mac+Escape"],y.prototype.unselectAll]]);constructor(E,x){this.#P=E,this.#r=x,this.#r._on("editingaction",this.#p),this.#r._on("pagechanging",this.#C)}destroy(){this.#_(),this.#r._off("editingaction",this.#p),this.#r._off("pagechanging",this.#C);for(const E of this.#s.values())E.destroy();this.#s.clear(),this.#t.clear(),this.#e=null,this.#o.clear(),this.#n.destroy(),this.#i.destroy()}onPageChanging({pageNumber:E}){this.#c=E-1}focusMainContainer(){this.#P.focus()}#A(){this.#P.addEventListener("keydown",this.#m)}#_(){this.#P.removeEventListener("keydown",this.#m)}keydown(E){this.getActive()?.shouldGetKeyboardEvents()||y._keyboardManager.exec(this,E)}onEditingAction(E){["undo","redo","cut","copy","paste","delete","selectAll"].includes(E.name)&&this[E.name]()}#d(E){Object.entries(E).some(([A,D])=>this.#T[A]!==D)&&this.#r.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#T,E)})}#v(E){this.#r.dispatch("annotationeditorparamschanged",{source:this,details:E})}setEditingState(E){E?(this.#A(),this.#d({isEditing:this.#u!==i.AnnotationEditorType.NONE,isEmpty:this.#g(),hasSomethingToUndo:this.#i.hasSomethingToUndo(),hasSomethingToRedo:this.#i.hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:this.#n.isEmpty()})):(this.#_(),this.#d({isEditing:!1}))}registerEditorTypes(E){this.#a=E;for(const x of this.#a)this.#v(x.defaultPropertiesToUpdate)}getId(){return this.#h.getId()}addLayer(E){this.#s.set(E.pageIndex,E),this.#l?E.enable():E.disable()}removeLayer(E){this.#s.delete(E.pageIndex)}updateMode(E){if(this.#u=E,E===i.AnnotationEditorType.NONE)this.setEditingState(!1),this.#f();else{this.setEditingState(!0),this.#V();for(const x of this.#s.values())x.updateMode(E)}}updateToolbar(E){E!==this.#u&&this.#r.dispatch("switchannotationeditormode",{source:this,mode:E})}updateParams(E,x){for(const A of this.#o)A.updateParams(E,x);for(const A of this.#a)A.updateDefaultParams(E,x)}#V(){if(!this.#l){this.#l=!0;for(const E of this.#s.values())E.enable()}}#f(){if(this.unselectAll(),this.#l){this.#l=!1;for(const E of this.#s.values())E.disable()}}getEditors(E){const x=[];for(const A of this.#t.values())A.pageIndex===E&&x.push(A);return x}getEditor(E){return this.#t.get(E)}addEditor(E){this.#t.set(E.id,E)}removeEditor(E){this.#t.delete(E.id),this.unselect(E)}#E(E){const x=this.#s.get(E.pageIndex);x?x.addOrRebuild(E):this.addEditor(E)}setActiveEditor(E){this.#e!==E&&(this.#e=E,E&&this.#v(E.propertiesToUpdate))}toggleSelected(E){if(this.#o.has(E)){this.#o.delete(E),E.unselect(),this.#d({hasSelectedEditor:this.hasSelection});return}this.#o.add(E),E.select(),this.#v(E.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}setSelected(E){for(const x of this.#o)x!==E&&x.unselect();this.#o.clear(),this.#o.add(E),E.select(),this.#v(E.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}isSelected(E){return this.#o.has(E)}unselect(E){E.unselect(),this.#o.delete(E),this.#d({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#o.size!==0}undo(){this.#i.undo(),this.#d({hasSomethingToUndo:this.#i.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#g()})}redo(){this.#i.redo(),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:this.#i.hasSomethingToRedo(),isEmpty:this.#g()})}addCommands(E){this.#i.add(E),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#g()})}#g(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const E of this.#t.values())return E.isEmpty();return!1}delete(){if(this.#e&&this.#e.commitOrRemove(),!this.hasSelection)return;const E=[...this.#o],x=()=>{for(const D of E)D.remove()},A=()=>{for(const D of E)this.#E(D)};this.addCommands({cmd:x,undo:A,mustExec:!0})}copy(){if(this.#e&&this.#e.commitOrRemove(),this.hasSelection){const E=[];for(const x of this.#o)x.isEmpty()||E.push(x);if(E.length===0)return;this.#n.copy(E),this.#d({hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(this.#n.isEmpty())return;this.unselectAll();const E=this.#s.get(this.#c),x=this.#n.paste().map(b=>E.deserialize(b)),A=()=>{for(const b of x)this.#E(b);this.#y(x)},D=()=>{for(const b of x)b.remove()};this.addCommands({cmd:A,undo:D,mustExec:!0})}#y(E){this.#o.clear();for(const x of E)x.isEmpty()||(this.#o.add(x),x.select());this.#d({hasSelectedEditor:!0})}selectAll(){for(const E of this.#o)E.commit();this.#y(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.#y.size!==0){for(const E of this.#o)E.unselect();this.#o.clear(),this.#d({hasSelectedEditor:!1})}}isActive(E){return this.#e===E}getActive(){return this.#e}getMode(){return this.#u}}e.AnnotationEditorUIManager=y}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=G,e.getColorValues=W,e.getCurrentTransform=K,e.getCurrentTransformInverse=se,e.getFilenameFromUrl=D,e.getPdfFilenameFromUrl=b,e.getRGB=O,e.getXfaPageViewport=M,e.isDataScheme=x,e.isPdfFile=A,e.isValidFetchUrl=R,e.loadScript=q;var i=r(9),o=r(1);const l="http://www.w3.org/2000/svg",c="pdfjs_internal_id_";e.AnnotationPrefix=c;class p{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=p;class h extends i.BaseCanvasFactory{constructor({ownerDocument:Q=globalThis.document}={}){super(),this._document=Q}_createCanvas(Q,re){const te=this._document.createElement("canvas");return te.width=Q,te.height=re,te}}e.DOMCanvasFactory=h;async function u($,Q=!1){if(R($,document.baseURI)){const re=await fetch($);if(!re.ok)throw new Error(re.statusText);return Q?new Uint8Array(await re.arrayBuffer()):(0,o.stringToBytes)(await re.text())}return new Promise((re,te)=>{const X=new XMLHttpRequest;X.open("GET",$,!0),Q&&(X.responseType="arraybuffer"),X.onreadystatechange=()=>{if(X.readyState===XMLHttpRequest.DONE){if(X.status===200||X.status===0){let L;if(Q&&X.response?L=new Uint8Array(X.response):!Q&&X.responseText&&(L=(0,o.stringToBytes)(X.responseText)),L){re(L);return}}te(new Error(X.statusText))}},X.send(null)})}class d extends i.BaseCMapReaderFactory{_fetchData(Q,re){return u(Q,this.isCompressed).then(te=>({cMapData:te,compressionType:re}))}}e.DOMCMapReaderFactory=d;class g extends i.BaseStandardFontDataFactory{_fetchData(Q){return u(Q,!0)}}e.DOMStandardFontDataFactory=g;class y extends i.BaseSVGFactory{_createSVG(Q){return document.createElementNS(l,Q)}}e.DOMSVGFactory=y;class S{constructor({viewBox:Q,scale:re,rotation:te,offsetX:X=0,offsetY:L=0,dontFlip:C=!1}){this.viewBox=Q,this.scale=re,this.rotation=te,this.offsetX=X,this.offsetY=L;const v=(Q[2]+Q[0])/2,V=(Q[3]+Q[1])/2;let N,P,T,w;switch(te%=360,te<0&&(te+=360),te){case 180:N=-1,P=0,T=0,w=1;break;case 90:N=0,P=1,T=1,w=0;break;case 270:N=0,P=-1,T=-1,w=0;break;case 0:N=1,P=0,T=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}C&&(T=-T,w=-w);let F,U,H,Y;N===0?(F=Math.abs(V-Q[1])*re+X,U=Math.abs(v-Q[0])*re+L,H=Math.abs(Q[3]-Q[1])*re,Y=Math.abs(Q[2]-Q[0])*re):(F=Math.abs(v-Q[0])*re+X,U=Math.abs(V-Q[1])*re+L,H=Math.abs(Q[2]-Q[0])*re,Y=Math.abs(Q[3]-Q[1])*re),this.transform=[N*re,P*re,T*re,w*re,F-N*re*v-T*re*V,U-P*re*v-w*re*V],this.width=H,this.height=Y}clone({scale:Q=this.scale,rotation:re=this.rotation,offsetX:te=this.offsetX,offsetY:X=this.offsetY,dontFlip:L=!1}={}){return new S({viewBox:this.viewBox.slice(),scale:Q,rotation:re,offsetX:te,offsetY:X,dontFlip:L})}convertToViewportPoint(Q,re){return o.Util.applyTransform([Q,re],this.transform)}convertToViewportRectangle(Q){const re=o.Util.applyTransform([Q[0],Q[1]],this.transform),te=o.Util.applyTransform([Q[2],Q[3]],this.transform);return[re[0],re[1],te[0],te[1]]}convertToPdfPoint(Q,re){return o.Util.applyInverseTransform([Q,re],this.transform)}}e.PageViewport=S;class E extends o.BaseException{constructor(Q,re){super(Q,"RenderingCancelledException"),this.type=re}}e.RenderingCancelledException=E;function x($){const Q=$.length;let re=0;for(;re<Q&&$[re].trim()==="";)re++;return $.substring(re,re+5).toLowerCase()==="data:"}function A($){return typeof $=="string"&&/\.pdf$/i.test($)}function D($){const Q=$.indexOf("#"),re=$.indexOf("?"),te=Math.min(Q>0?Q:$.length,re>0?re:$.length);return $.substring($.lastIndexOf("/",te)+1,te)}function b($,Q="document.pdf"){if(typeof $!="string")return Q;if(x($))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Q;const re=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,te=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,X=re.exec($);let L=te.exec(X[1])||te.exec(X[2])||te.exec(X[3]);if(L&&(L=L[0],L.includes("%")))try{L=te.exec(decodeURIComponent(L))[0]}catch{}return L||Q}class I{constructor(){this.started=Object.create(null),this.times=[]}time(Q){Q in this.started&&(0,o.warn)(`Timer is already running for ${Q}`),this.started[Q]=Date.now()}timeEnd(Q){Q in this.started||(0,o.warn)(`Timer has not been started for ${Q}`),this.times.push({name:Q,start:this.started[Q],end:Date.now()}),delete this.started[Q]}toString(){const Q=[];let re=0;for(const te of this.times){const X=te.name;X.length>re&&(re=X.length)}for(const te of this.times){const X=te.end-te.start;Q.push(`${te.name.padEnd(re)} ${X}ms
`)}return Q.join("")}}e.StatTimer=I;function R($,Q){try{const{protocol:re}=Q?new URL($,Q):new URL($);return re==="http:"||re==="https:"}catch{return!1}}function q($,Q=!1){return new Promise((re,te)=>{const X=document.createElement("script");X.src=$,X.onload=function(L){Q&&X.remove(),re(L)},X.onerror=function(){te(new Error(`Cannot load script at: ${X.src}`))},(document.head||document.documentElement).append(X)})}function G($){console.log("Deprecated API usage: "+$)}let z;class B{static toDateObject(Q){if(!Q||typeof Q!="string")return null;z||(z=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const re=z.exec(Q);if(!re)return null;const te=parseInt(re[1],10);let X=parseInt(re[2],10);X=X>=1&&X<=12?X-1:0;let L=parseInt(re[3],10);L=L>=1&&L<=31?L:1;let C=parseInt(re[4],10);C=C>=0&&C<=23?C:0;let v=parseInt(re[5],10);v=v>=0&&v<=59?v:0;let V=parseInt(re[6],10);V=V>=0&&V<=59?V:0;const N=re[7]||"Z";let P=parseInt(re[8],10);P=P>=0&&P<=23?P:0;let T=parseInt(re[9],10)||0;return T=T>=0&&T<=59?T:0,N==="-"?(C+=P,v+=T):N==="+"&&(C-=P,v-=T),new Date(Date.UTC(te,X,L,C,v,V))}}e.PDFDateString=B;function M($,{scale:Q=1,rotation:re=0}){const{width:te,height:X}=$.attributes.style,L=[0,0,parseInt(te),parseInt(X)];return new S({viewBox:L,scale:Q,rotation:re})}function O($){if($.startsWith("#")){const Q=parseInt($.slice(1),16);return[(Q&16711680)>>16,(Q&65280)>>8,Q&255]}return $.startsWith("rgb(")?$.slice(4,-1).split(",").map(Q=>parseInt(Q)):$.startsWith("rgba(")?$.slice(5,-1).split(",").map(Q=>parseInt(Q)).slice(0,3):((0,o.warn)(`Not a valid color format: "${$}"`),[0,0,0])}function W($){const Q=document.createElement("span");Q.style.visibility="hidden",document.body.append(Q);for(const re of $.keys()){Q.style.color=re;const te=window.getComputedStyle(Q).color;$.set(re,O(te))}Q.remove()}function K($){const{a:Q,b:re,c:te,d:X,e:L,f:C}=$.getTransform();return[Q,re,te,X,L,C]}function se($){const{a:Q,b:re,c:te,d:X,e:L,f:C}=$.getTransform().invertSelf();return[Q,re,te,X,L,C]}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=r(1);class o{constructor(){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,d){if(u<=0||d<=0)throw new Error("Invalid canvas size");const g=this._createCanvas(u,d);return{canvas:g,context:g.getContext("2d")}}reset(u,d,g){if(!u.canvas)throw new Error("Canvas is not specified");if(d<=0||g<=0)throw new Error("Invalid canvas size");u.canvas.width=d,u.canvas.height=g}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,d){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=o;class l{constructor({baseUrl:u=null,isCompressed:d=!1}){this.constructor===l&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=d}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const d=this.baseUrl+u+(this.isCompressed?".bcmap":""),g=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(d,g).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${d}`)})}_fetchData(u,d){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=l;class c{constructor({baseUrl:u=null}){this.constructor===c&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const d=`${this.baseUrl}${u}`;return this._fetchData(d).catch(g=>{throw new Error(`Unable to load font data at: ${d}`)})}_fetchData(u){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=c;class p{constructor(){this.constructor===p&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,d,g=!1){if(u<=0||d<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),g||(y.setAttribute("width",`${u}px`),y.setAttribute("height",`${d}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${u} ${d}`),y}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=p}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=r(1);const o=3285377520,l=4294901760,c=65535;class p{constructor(u){this.h1=u?u&4294967295:o,this.h2=u?u&4294967295:o}update(u){let d,g;if(typeof u=="string"){d=new Uint8Array(u.length*2),g=0;for(let z=0,B=u.length;z<B;z++){const M=u.charCodeAt(z);M<=255?d[g++]=M:(d[g++]=M>>>8,d[g++]=M&255)}}else if((0,i.isArrayBuffer)(u))d=u.slice(),g=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const y=g>>2,S=g-y*4,E=new Uint32Array(d.buffer,0,y);let x=0,A=0,D=this.h1,b=this.h2;const I=3432918353,R=461845907,q=I&c,G=R&c;for(let z=0;z<y;z++)z&1?(x=E[z],x=x*I&l|x*q&c,x=x<<15|x>>>17,x=x*R&l|x*G&c,D^=x,D=D<<13|D>>>19,D=D*5+3864292196):(A=E[z],A=A*I&l|A*q&c,A=A<<15|A>>>17,A=A*R&l|A*G&c,b^=A,b=b<<13|b>>>19,b=b*5+3864292196);switch(x=0,S){case 3:x^=d[y*4+2]<<16;case 2:x^=d[y*4+1]<<8;case 1:x^=d[y*4],x=x*I&l|x*q&c,x=x<<15|x>>>17,x=x*R&l|x*G&c,y&1?D^=x:b^=x}this.h1=D,this.h2=b}hexdigest(){let u=this.h1,d=this.h2;u^=d>>>1,u=u*3981806797&l|u*36045&c,d=d*4283543511&l|((d<<16|u>>>16)*2950163797&l)>>>16,u^=d>>>1,u=u*444984403&l|u*60499&c,d=d*3301882366&l|((d<<16|u>>>16)*3120437893&l)>>>16,u^=d>>>1;const g=(u>>>0).toString(16),y=(d>>>0).toString(16);return g.padStart(8,"0")+y.padStart(8,"0")}}e.MurmurHash3_64=p}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=r(1);class o{constructor({docId:h,onUnsupportedFeature:u,ownerDocument:d=globalThis.document,styleElement:g=null}){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=h,this._onUnsupportedFeature=u,this._document=d,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(h){this.nativeFontFaces.push(h),this._document.fonts.add(h)}insertRule(h){let u=this.styleElement;u||(u=this.styleElement=this._document.createElement("style"),u.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(u));const d=u.sheet;d.insertRule(h,d.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(h){if(h.attached||h.missingFile)return;if(h.attached=!0,this.isFontLoadingAPISupported){const d=h.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(g){throw this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${d.family}': '${g}'.`),h.disableFontFace=!0,g}}return}const u=h.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const g=this._queueLoadingCallback(d);this._prepareFontLoadEvent([u],[h],g)})}}_queueLoadingCallback(h){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const h=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(h,u,d){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let l;e.FontLoader=l,e.FontLoader=l=class extends o{constructor(h){super(h),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let h=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(h=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function u(){for((0,i.assert)(!g.done,"completeRequest() cannot be called twice."),g.done=!0;d.requests.length>0&&d.requests[0].done;){const y=d.requests.shift();setTimeout(y.callback,0)}}const d=this.loadingContext,g={id:`pdfjs-font-loading-${d.nextRequestId++}`,done:!1,complete:u,callback:h};return d.requests.push(g),g}get _loadTestFont(){const h=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,i.shadow)(this,"_loadTestFont",h())}_prepareFontLoadEvent(h,u,d){function g(se,$){return se.charCodeAt($)<<24|se.charCodeAt($+1)<<16|se.charCodeAt($+2)<<8|se.charCodeAt($+3)&255}function y(se,$,Q,re){const te=se.substring(0,$),X=se.substring($+Q);return te+re+X}let S,E;const x=this._document.createElement("canvas");x.width=1,x.height=1;const A=x.getContext("2d");let D=0;function b(se,$){if(D++,D>30){(0,i.warn)("Load test font never loaded."),$();return}if(A.font="30px "+se,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(b.bind(null,se,$))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let R=this._loadTestFont;R=y(R,976,I.length,I);const G=16,z=1482184792;let B=g(R,G);for(S=0,E=I.length-3;S<E;S+=4)B=B-z+g(I,S)|0;S<I.length&&(B=B-z+g(I+"XXX",S)|0),R=y(R,G,4,(0,i.string32)(B));const M=`url(data:font/opentype;base64,${btoa(R)});`,O=`@font-face {font-family:"${I}";src:${M}}`;this.insertRule(O);const W=[];for(const se of u)W.push(se.loadedName);W.push(I);const K=this._document.createElement("div");K.style.visibility="hidden",K.style.width=K.style.height="10px",K.style.position="absolute",K.style.top=K.style.left="0px";for(const se of W){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=se,K.append($)}this._document.body.append(K),b(I,()=>{K.remove(),d.complete()})}};class c{constructor(h,{isEvalSupported:u=!0,disableFontFace:d=!1,ignoreErrors:g=!1,onUnsupportedFeature:y,fontRegistry:S=null}){this.compiledGlyphs=Object.create(null);for(const E in h)this[E]=h[E];this.isEvalSupported=u!==!1,this.disableFontFace=d===!0,this.ignoreErrors=g===!0,this._onUnsupportedFeature=y,this.fontRegistry=S}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const u={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(u.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,u)}return this.fontRegistry&&this.fontRegistry.registerFont(this),h}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const h=(0,i.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(h)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let g=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(g+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${g}src:${u}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,u),d}getPathGenerator(h,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let d;try{d=h.get(this.loadedName+"_path_"+u)}catch(g){if(!this.ignoreErrors)throw g;return this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${g}".`),this.compiledGlyphs[u]=function(y,S){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const g=[];for(const y of d){const S=y.args!==void 0?y.args.join(","):"";g.push("c.",y.cmd,"(",S,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",g.join(""))}return this.compiledGlyphs[u]=function(g,y){for(const S of d)S.cmd==="scale"&&(S.args=[y,-y]),g[S.cmd].apply(g,S.args)}}}e.FontFaceObject=c}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=r(8),o=r(1),l=r(13),c=r(14),p=r(3);const h=16,u=100,d=4096,g=15,y=10,S=p.isNodeJS&&typeof Path2D>"u"?-1:1e3,E=16;function x(L,C){if(L._removeMirroring)throw new Error("Context is already forwarding operations.");L.__originalSave=L.save,L.__originalRestore=L.restore,L.__originalRotate=L.rotate,L.__originalScale=L.scale,L.__originalTranslate=L.translate,L.__originalTransform=L.transform,L.__originalSetTransform=L.setTransform,L.__originalResetTransform=L.resetTransform,L.__originalClip=L.clip,L.__originalMoveTo=L.moveTo,L.__originalLineTo=L.lineTo,L.__originalBezierCurveTo=L.bezierCurveTo,L.__originalRect=L.rect,L.__originalClosePath=L.closePath,L.__originalBeginPath=L.beginPath,L._removeMirroring=()=>{L.save=L.__originalSave,L.restore=L.__originalRestore,L.rotate=L.__originalRotate,L.scale=L.__originalScale,L.translate=L.__originalTranslate,L.transform=L.__originalTransform,L.setTransform=L.__originalSetTransform,L.resetTransform=L.__originalResetTransform,L.clip=L.__originalClip,L.moveTo=L.__originalMoveTo,L.lineTo=L.__originalLineTo,L.bezierCurveTo=L.__originalBezierCurveTo,L.rect=L.__originalRect,L.closePath=L.__originalClosePath,L.beginPath=L.__originalBeginPath,delete L._removeMirroring},L.save=function(){C.save(),this.__originalSave()},L.restore=function(){C.restore(),this.__originalRestore()},L.translate=function(V,N){C.translate(V,N),this.__originalTranslate(V,N)},L.scale=function(V,N){C.scale(V,N),this.__originalScale(V,N)},L.transform=function(V,N,P,T,w,F){C.transform(V,N,P,T,w,F),this.__originalTransform(V,N,P,T,w,F)},L.setTransform=function(V,N,P,T,w,F){C.setTransform(V,N,P,T,w,F),this.__originalSetTransform(V,N,P,T,w,F)},L.resetTransform=function(){C.resetTransform(),this.__originalResetTransform()},L.rotate=function(V){C.rotate(V),this.__originalRotate(V)},L.clip=function(V){C.clip(V),this.__originalClip(V)},L.moveTo=function(v,V){C.moveTo(v,V),this.__originalMoveTo(v,V)},L.lineTo=function(v,V){C.lineTo(v,V),this.__originalLineTo(v,V)},L.bezierCurveTo=function(v,V,N,P,T,w){C.bezierCurveTo(v,V,N,P,T,w),this.__originalBezierCurveTo(v,V,N,P,T,w)},L.rect=function(v,V,N,P){C.rect(v,V,N,P),this.__originalRect(v,V,N,P)},L.closePath=function(){C.closePath(),this.__originalClosePath()},L.beginPath=function(){C.beginPath(),this.__originalBeginPath()}}class A{constructor(C){this.canvasFactory=C,this.cache=Object.create(null)}getCanvas(C,v,V){let N;return this.cache[C]!==void 0?(N=this.cache[C],this.canvasFactory.reset(N,v,V)):(N=this.canvasFactory.create(v,V),this.cache[C]=N),N}delete(C){delete this.cache[C]}clear(){for(const C in this.cache){const v=this.cache[C];this.canvasFactory.destroy(v),delete this.cache[C]}}}function D(L,C,v,V,N,P,T,w,F,U){const[H,Y,ne,ae,ee,ce]=(0,i.getCurrentTransform)(L);if(Y===0&&ne===0){const _e=T*H+ee,Ee=Math.round(_e),Ce=w*ae+ce,Re=Math.round(Ce),ve=(T+F)*H+ee,He=Math.abs(Math.round(ve)-Ee)||1,Ze=(w+U)*ae+ce,Ie=Math.abs(Math.round(Ze)-Re)||1;return L.setTransform(Math.sign(H),0,0,Math.sign(ae),Ee,Re),L.drawImage(C,v,V,N,P,0,0,He,Ie),L.setTransform(H,Y,ne,ae,ee,ce),[He,Ie]}if(H===0&&ae===0){const _e=w*ne+ee,Ee=Math.round(_e),Ce=T*Y+ce,Re=Math.round(Ce),ve=(w+U)*ne+ee,He=Math.abs(Math.round(ve)-Ee)||1,Ze=(T+F)*Y+ce,Ie=Math.abs(Math.round(Ze)-Re)||1;return L.setTransform(0,Math.sign(Y),Math.sign(ne),0,Ee,Re),L.drawImage(C,v,V,N,P,0,0,Ie,He),L.setTransform(H,Y,ne,ae,ee,ce),[Ie,He]}L.drawImage(C,v,V,N,P,T,w,F,U);const pe=Math.hypot(H,Y),he=Math.hypot(ne,ae);return[pe*F,he*U]}function b(L){const{width:C,height:v}=L;if(C>S||v>S)return null;const V=1e3,N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),P=C+1;let T=new Uint8Array(P*(v+1)),w,F,U;const H=C+7&-8;let Y=new Uint8Array(H*v),ne=0;for(const he of L.data){let _e=128;for(;_e>0;)Y[ne++]=he&_e?0:255,_e>>=1}let ae=0;for(ne=0,Y[ne]!==0&&(T[0]=1,++ae),F=1;F<C;F++)Y[ne]!==Y[ne+1]&&(T[F]=Y[ne]?2:1,++ae),ne++;for(Y[ne]!==0&&(T[F]=2,++ae),w=1;w<v;w++){ne=w*H,U=w*P,Y[ne-H]!==Y[ne]&&(T[U]=Y[ne]?1:8,++ae);let he=(Y[ne]?4:0)+(Y[ne-H]?8:0);for(F=1;F<C;F++)he=(he>>2)+(Y[ne+1]?4:0)+(Y[ne-H+1]?8:0),N[he]&&(T[U+F]=N[he],++ae),ne++;if(Y[ne-H]!==Y[ne]&&(T[U+F]=Y[ne]?2:4,++ae),ae>V)return null}for(ne=H*(v-1),U=w*P,Y[ne]!==0&&(T[U]=8,++ae),F=1;F<C;F++)Y[ne]!==Y[ne+1]&&(T[U+F]=Y[ne]?4:8,++ae),ne++;if(Y[ne]!==0&&(T[U+F]=4,++ae),ae>V)return null;const ee=new Int32Array([0,P,-1,0,-P,0,0,0,1]),ce=new Path2D;for(w=0;ae&&w<=v;w++){let he=w*P;const _e=he+C;for(;he<_e&&!T[he];)he++;if(he===_e)continue;ce.moveTo(he%P,w);const Ee=he;let Ce=T[he];do{const Re=ee[Ce];do he+=Re;while(!T[he]);const ve=T[he];ve!==5&&ve!==10?(Ce=ve,T[he]=0):(Ce=ve&51*Ce>>4,T[he]&=Ce>>2|Ce<<2),ce.lineTo(he%P,he/P|0),T[he]||--ae}while(Ee!==he);--w}return Y=null,T=null,function(he){he.save(),he.scale(1/C,-1/v),he.translate(0,-v),he.fill(ce),he.beginPath(),he.restore()}}class I{constructor(C,v){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,C,v])}clone(){const C=Object.create(this);return C.clipBox=this.clipBox.slice(),C}setCurrentPoint(C,v){this.x=C,this.y=v}updatePathMinMax(C,v,V){[v,V]=o.Util.applyTransform([v,V],C),this.minX=Math.min(this.minX,v),this.minY=Math.min(this.minY,V),this.maxX=Math.max(this.maxX,v),this.maxY=Math.max(this.maxY,V)}updateRectMinMax(C,v){const V=o.Util.applyTransform(v,C),N=o.Util.applyTransform(v.slice(2),C);this.minX=Math.min(this.minX,V[0],N[0]),this.minY=Math.min(this.minY,V[1],N[1]),this.maxX=Math.max(this.maxX,V[0],N[0]),this.maxY=Math.max(this.maxY,V[1],N[1])}updateScalingPathMinMax(C,v){o.Util.scaleMinMax(C,v),this.minX=Math.min(this.minX,v[0]),this.maxX=Math.max(this.maxX,v[1]),this.minY=Math.min(this.minY,v[2]),this.maxY=Math.max(this.maxY,v[3])}updateCurvePathMinMax(C,v,V,N,P,T,w,F,U,H){const Y=o.Util.bezierBoundingBox(v,V,N,P,T,w,F,U);if(H){H[0]=Math.min(H[0],Y[0],Y[2]),H[1]=Math.max(H[1],Y[0],Y[2]),H[2]=Math.min(H[2],Y[1],Y[3]),H[3]=Math.max(H[3],Y[1],Y[3]);return}this.updateRectMinMax(C,Y)}getPathBoundingBox(C=l.PathType.FILL,v=null){const V=[this.minX,this.minY,this.maxX,this.maxY];if(C===l.PathType.STROKE){v||(0,o.unreachable)("Stroke bounding box must include transform.");const N=o.Util.singularValueDecompose2dScale(v),P=N[0]*this.lineWidth/2,T=N[1]*this.lineWidth/2;V[0]-=P,V[1]-=T,V[2]+=P,V[3]+=T}return V}updateClipFromPath(){const C=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(C||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(C){this.clipBox=C,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(C=l.PathType.FILL,v=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(C,v))}}function R(L,C,v=null){if(typeof ImageData<"u"&&C instanceof ImageData){L.putImageData(C,0,0);return}const V=C.height,N=C.width,P=V%E,T=(V-P)/E,w=P===0?T:T+1,F=L.createImageData(N,E);let U=0,H;const Y=C.data,ne=F.data;let ae,ee,ce,pe,he,_e,Ee,Ce;if(v)switch(v.length){case 1:he=v[0],_e=v[0],Ee=v[0],Ce=v[0];break;case 4:he=v[0],_e=v[1],Ee=v[2],Ce=v[3];break}if(C.kind===o.ImageKind.GRAYSCALE_1BPP){const Re=Y.byteLength,ve=new Uint32Array(ne.buffer,0,ne.byteLength>>2),He=ve.length,Ze=N+7>>3;let Ie=4294967295,Oe=o.FeatureTest.isLittleEndian?4278190080:255;for(Ce&&Ce[0]===255&&Ce[255]===0&&([Ie,Oe]=[Oe,Ie]),ae=0;ae<w;ae++){for(ce=ae<T?E:P,H=0,ee=0;ee<ce;ee++){const je=Re-U;let ht=0;const nt=je>Ze?N:je*8-7,zt=nt&-8;let $e=0,qe=0;for(;ht<zt;ht+=8)qe=Y[U++],ve[H++]=qe&128?Ie:Oe,ve[H++]=qe&64?Ie:Oe,ve[H++]=qe&32?Ie:Oe,ve[H++]=qe&16?Ie:Oe,ve[H++]=qe&8?Ie:Oe,ve[H++]=qe&4?Ie:Oe,ve[H++]=qe&2?Ie:Oe,ve[H++]=qe&1?Ie:Oe;for(;ht<nt;ht++)$e===0&&(qe=Y[U++],$e=128),ve[H++]=qe&$e?Ie:Oe,$e>>=1}for(;H<He;)ve[H++]=0;L.putImageData(F,0,ae*E)}}else if(C.kind===o.ImageKind.RGBA_32BPP){const Re=!!(he||_e||Ee);for(ee=0,pe=N*E*4,ae=0;ae<T;ae++){if(ne.set(Y.subarray(U,U+pe)),U+=pe,Re)for(let ve=0;ve<pe;ve+=4)he&&(ne[ve+0]=he[ne[ve+0]]),_e&&(ne[ve+1]=_e[ne[ve+1]]),Ee&&(ne[ve+2]=Ee[ne[ve+2]]);L.putImageData(F,0,ee),ee+=E}if(ae<w){if(pe=N*P*4,ne.set(Y.subarray(U,U+pe)),Re)for(let ve=0;ve<pe;ve+=4)he&&(ne[ve+0]=he[ne[ve+0]]),_e&&(ne[ve+1]=_e[ne[ve+1]]),Ee&&(ne[ve+2]=Ee[ne[ve+2]]);L.putImageData(F,0,ee)}}else if(C.kind===o.ImageKind.RGB_24BPP){const Re=!!(he||_e||Ee);for(ce=E,pe=N*ce,ae=0;ae<w;ae++){for(ae>=T&&(ce=P,pe=N*ce),H=0,ee=pe;ee--;)ne[H++]=Y[U++],ne[H++]=Y[U++],ne[H++]=Y[U++],ne[H++]=255;if(Re)for(let ve=0;ve<H;ve+=4)he&&(ne[ve+0]=he[ne[ve+0]]),_e&&(ne[ve+1]=_e[ne[ve+1]]),Ee&&(ne[ve+2]=Ee[ne[ve+2]]);L.putImageData(F,0,ae*E)}}else throw new Error(`bad image kind: ${C.kind}`)}function q(L,C){if(C.bitmap){L.drawImage(C.bitmap,0,0);return}const v=C.height,V=C.width,N=v%E,P=(v-N)/E,T=N===0?P:P+1,w=L.createImageData(V,E);let F=0;const U=C.data,H=w.data;for(let Y=0;Y<T;Y++){const ne=Y<P?E:N;({srcPos:F}=(0,c.applyMaskImageData)({src:U,srcPos:F,dest:H,width:V,height:ne})),L.putImageData(w,0,Y*E)}}function G(L,C){const v=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let V=0,N=v.length;V<N;V++){const P=v[V];L[P]!==void 0&&(C[P]=L[P])}L.setLineDash!==void 0&&(C.setLineDash(L.getLineDash()),C.lineDashOffset=L.lineDashOffset)}function z(L,C){L.strokeStyle=L.fillStyle=C||"#000000",L.fillRule="nonzero",L.globalAlpha=1,L.lineWidth=1,L.lineCap="butt",L.lineJoin="miter",L.miterLimit=10,L.globalCompositeOperation="source-over",L.font="10px sans-serif",L.setLineDash!==void 0&&(L.setLineDash([]),L.lineDashOffset=0)}function B(L,C,v,V){const N=L.length;for(let P=3;P<N;P+=4){const T=L[P];if(T===0)L[P-3]=C,L[P-2]=v,L[P-1]=V;else if(T<255){const w=255-T;L[P-3]=L[P-3]*T+C*w>>8,L[P-2]=L[P-2]*T+v*w>>8,L[P-1]=L[P-1]*T+V*w>>8}}}function M(L,C,v){const V=L.length,N=1/255;for(let P=3;P<V;P+=4){const T=v?v[L[P]]:L[P];C[P]=C[P]*T*N|0}}function O(L,C,v){const V=L.length;for(let N=3;N<V;N+=4){const P=L[N-3]*77+L[N-2]*152+L[N-1]*28;C[N]=v?C[N]*v[P>>8]>>8:C[N]*P>>16}}function W(L,C,v,V,N,P,T,w,F,U,H){const Y=!!P,ne=Y?P[0]:0,ae=Y?P[1]:0,ee=Y?P[2]:0;let ce;N==="Luminosity"?ce=O:ce=M;const he=Math.min(V,Math.ceil(1048576/v));for(let _e=0;_e<V;_e+=he){const Ee=Math.min(he,V-_e),Ce=L.getImageData(w-U,_e+(F-H),v,Ee),Re=C.getImageData(w,_e+F,v,Ee);Y&&B(Ce.data,ne,ae,ee),ce(Ce.data,Re.data,T),C.putImageData(Re,w,_e+F)}}function K(L,C,v,V){const N=V[0],P=V[1],T=V[2]-N,w=V[3]-P;T===0||w===0||(W(C.context,v,T,w,C.subtype,C.backdrop,C.transferMap,N,P,C.offsetX,C.offsetY),L.save(),L.globalAlpha=1,L.globalCompositeOperation="source-over",L.setTransform(1,0,0,1,0,0),L.drawImage(v.canvas,0,0),L.restore())}function se(L,C){const v=o.Util.singularValueDecompose2dScale(L);v[0]=Math.fround(v[0]),v[1]=Math.fround(v[1]);const V=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return C!==void 0?C:v[0]<=V||v[1]<=V}const $=["butt","round","square"],Q=["miter","round","bevel"],re={},te={};class X{constructor(C,v,V,N,P,T,w,F){this.ctx=C,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=v,this.objs=V,this.canvasFactory=N,this.imageLayer=P,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=T,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=w,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=F?.background||null,this.foregroundColor=F?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(C,v=null){return typeof C=="string"?C.startsWith("g_")?this.commonObjs.get(C):this.objs.get(C):v}beginDrawing({transform:C,viewport:v,transparency:V=!1,background:N=null}){const P=this.ctx.canvas.width,T=this.ctx.canvas.height,w=N||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const F=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const U=this.backgroundColor=this.ctx.fillStyle;let H=!0,Y=w;if(this.ctx.fillStyle=w,Y=this.ctx.fillStyle,H=typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y),F==="#000000"&&U==="#ffffff"||F===U||!H)this.foregroundColor=this.backgroundColor=null;else{const[ne,ae,ee]=(0,i.getRGB)(Y),ce=he=>(he/=255,he<=.03928?he/12.92:((he+.055)/1.055)**2.4),pe=Math.round(.2126*ce(ne)+.7152*ce(ae)+.0722*ce(ee));this.selectColor=(he,_e,Ee)=>{const Ce=.2126*ce(he)+.7152*ce(_e)+.0722*ce(Ee);return Math.round(Ce)===pe?U:F}}}if(this.ctx.fillStyle=this.backgroundColor||w,this.ctx.fillRect(0,0,P,T),this.ctx.restore(),V){const F=this.cachedCanvases.getCanvas("transparent",P,T);this.compositeCtx=this.ctx,this.transparentCanvas=F.canvas,this.ctx=F.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),z(this.ctx,this.foregroundColor),C&&(this.ctx.transform(...C),this.outputScaleX=C[0],this.outputScaleY=C[0]),this.ctx.transform(...v.transform),this.viewportScale=v.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx),this.imageLayer&&((0,i.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(C,v,V,N){const P=C.argsArray,T=C.fnArray;let w=v||0;const F=P.length;if(F===w)return w;const U=F-w>y&&typeof V=="function",H=U?Date.now()+g:0;let Y=0;const ne=this.commonObjs,ae=this.objs;let ee;for(;;){if(N!==void 0&&w===N.nextBreakPoint)return N.breakIt(w,V),w;if(ee=T[w],ee!==o.OPS.dependency)this[ee].apply(this,P[w]);else for(const ce of P[w]){const pe=ce.startsWith("g_")?ne:ae;if(!pe.has(ce))return pe.get(ce,V),w}if(w++,w===F)return w;if(U&&++Y>y){if(Date.now()>H)return V(),w;Y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const C of this._cachedBitmapsMap.values()){for(const v of C.values())typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement&&(v.width=v.height=0);C.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(C,v){const V=C.width,N=C.height;let P=Math.max(Math.hypot(v[0],v[1]),1),T=Math.max(Math.hypot(v[2],v[3]),1),w=V,F=N,U="prescale1",H,Y;for(;P>2&&w>1||T>2&&F>1;){let ne=w,ae=F;P>2&&w>1&&(ne=Math.ceil(w/2),P/=w/ne),T>2&&F>1&&(ae=Math.ceil(F/2),T/=F/ae),H=this.cachedCanvases.getCanvas(U,ne,ae),Y=H.context,Y.clearRect(0,0,ne,ae),Y.drawImage(C,0,0,w,F,0,0,ne,ae),C=H.canvas,w=ne,F=ae,U=U==="prescale1"?"prescale2":"prescale1"}return{img:C,paintWidth:w,paintHeight:F}}_createMaskCanvas(C){const v=this.ctx,{width:V,height:N}=C,P=this.current.fillColor,T=this.current.patternFill,w=(0,i.getCurrentTransform)(v);let F,U,H,Y;if((C.bitmap||C.data)&&C.count>1){const He=C.bitmap||C.data.buffer,Ze=w.slice(0,4);U=JSON.stringify(T?Ze:[Ze,P]),F=this._cachedBitmapsMap.get(He),F||(F=new Map,this._cachedBitmapsMap.set(He,F));const Ie=F.get(U);if(Ie&&!T){const Oe=Math.round(Math.min(w[0],w[2])+w[4]),je=Math.round(Math.min(w[1],w[3])+w[5]);return{canvas:Ie,offsetX:Oe,offsetY:je}}H=Ie}H||(Y=this.cachedCanvases.getCanvas("maskCanvas",V,N),q(Y.context,C));let ne=o.Util.transform(w,[1/V,0,0,-1/N,0,0]);ne=o.Util.transform(ne,[1,0,0,1,0,-N]);const ae=o.Util.applyTransform([0,0],ne),ee=o.Util.applyTransform([V,N],ne),ce=o.Util.normalizeRect([ae[0],ae[1],ee[0],ee[1]]),pe=Math.round(ce[2]-ce[0])||1,he=Math.round(ce[3]-ce[1])||1,_e=this.cachedCanvases.getCanvas("fillCanvas",pe,he),Ee=_e.context,Ce=Math.min(ae[0],ee[0]),Re=Math.min(ae[1],ee[1]);Ee.translate(-Ce,-Re),Ee.transform(...ne),H||(H=this._scaleImage(Y.canvas,(0,i.getCurrentTransformInverse)(Ee)),H=H.img,F&&T&&F.set(U,H)),Ee.imageSmoothingEnabled=se((0,i.getCurrentTransform)(Ee),C.interpolate),D(Ee,H,0,0,H.width,H.height,0,0,V,N),Ee.globalCompositeOperation="source-in";const ve=o.Util.transform((0,i.getCurrentTransformInverse)(Ee),[1,0,0,1,-Ce,-Re]);return Ee.fillStyle=T?P.getPattern(v,this,ve,l.PathType.FILL):P,Ee.fillRect(0,0,V,N),F&&!T&&(this.cachedCanvases.delete("fillCanvas"),F.set(U,_e.canvas)),{canvas:_e.canvas,offsetX:Math.round(Ce),offsetY:Math.round(Re)}}setLineWidth(C){C!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=C,this.ctx.lineWidth=C}setLineCap(C){this.ctx.lineCap=$[C]}setLineJoin(C){this.ctx.lineJoin=Q[C]}setMiterLimit(C){this.ctx.miterLimit=C}setDash(C,v){const V=this.ctx;V.setLineDash!==void 0&&(V.setLineDash(C),V.lineDashOffset=v)}setRenderingIntent(C){}setFlatness(C){}setGState(C){for(let v=0,V=C.length;v<V;v++){const N=C[v],P=N[0],T=N[1];switch(P){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=N[1];break;case"ca":this.current.fillAlpha=N[1],this.ctx.globalAlpha=N[1];break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=T}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const C=this.inSMaskMode;this.current.activeSMask&&!C?this.beginSMaskMode():!this.current.activeSMask&&C&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const C=this.ctx.canvas.width,v=this.ctx.canvas.height,V="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(V,C,v);this.suspendedCtx=this.ctx,this.ctx=N.context;const P=this.ctx;P.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),G(this.suspendedCtx,P),x(P,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),G(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(C){if(!this.current.activeSMask)return;C?(C[0]=Math.floor(C[0]),C[1]=Math.floor(C[1]),C[2]=Math.ceil(C[2]),C[3]=Math.ceil(C[3])):C=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const v=this.current.activeSMask,V=this.suspendedCtx;K(V,v,this.ctx,C),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(G(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const C=this.current;this.stateStack.push(C),this.current=C.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),G(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(C,v,V,N,P,T){this.ctx.transform(C,v,V,N,P,T),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(C,v,V){const N=this.ctx,P=this.current;let T=P.x,w=P.y,F,U;const H=(0,i.getCurrentTransform)(N),Y=H[0]===0&&H[3]===0||H[1]===0&&H[2]===0,ne=Y?V.slice(0):null;for(let ae=0,ee=0,ce=C.length;ae<ce;ae++)switch(C[ae]|0){case o.OPS.rectangle:T=v[ee++],w=v[ee++];const pe=v[ee++],he=v[ee++],_e=T+pe,Ee=w+he;N.moveTo(T,w),pe===0||he===0?N.lineTo(_e,Ee):(N.lineTo(_e,w),N.lineTo(_e,Ee),N.lineTo(T,Ee)),Y||P.updateRectMinMax(H,[T,w,_e,Ee]),N.closePath();break;case o.OPS.moveTo:T=v[ee++],w=v[ee++],N.moveTo(T,w),Y||P.updatePathMinMax(H,T,w);break;case o.OPS.lineTo:T=v[ee++],w=v[ee++],N.lineTo(T,w),Y||P.updatePathMinMax(H,T,w);break;case o.OPS.curveTo:F=T,U=w,T=v[ee+4],w=v[ee+5],N.bezierCurveTo(v[ee],v[ee+1],v[ee+2],v[ee+3],T,w),P.updateCurvePathMinMax(H,F,U,v[ee],v[ee+1],v[ee+2],v[ee+3],T,w,ne),ee+=6;break;case o.OPS.curveTo2:F=T,U=w,N.bezierCurveTo(T,w,v[ee],v[ee+1],v[ee+2],v[ee+3]),P.updateCurvePathMinMax(H,F,U,T,w,v[ee],v[ee+1],v[ee+2],v[ee+3],ne),T=v[ee+2],w=v[ee+3],ee+=4;break;case o.OPS.curveTo3:F=T,U=w,T=v[ee+2],w=v[ee+3],N.bezierCurveTo(v[ee],v[ee+1],T,w,T,w),P.updateCurvePathMinMax(H,F,U,v[ee],v[ee+1],T,w,T,w,ne),ee+=4;break;case o.OPS.closePath:N.closePath();break}Y&&P.updateScalingPathMinMax(H,ne),P.setCurrentPoint(T,w)}closePath(){this.ctx.closePath()}stroke(C){C=typeof C<"u"?C:!0;const v=this.ctx,V=this.current.strokeColor;v.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof V=="object"&&V?.getPattern?(v.save(),v.strokeStyle=V.getPattern(v,this,(0,i.getCurrentTransformInverse)(v),l.PathType.STROKE),this.rescaleAndStroke(!1),v.restore()):this.rescaleAndStroke(!0)),C&&this.consumePath(this.current.getClippedPathBoundingBox()),v.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(C){C=typeof C<"u"?C:!0;const v=this.ctx,V=this.current.fillColor,N=this.current.patternFill;let P=!1;N&&(v.save(),v.fillStyle=V.getPattern(v,this,(0,i.getCurrentTransformInverse)(v),l.PathType.FILL),P=!0);const T=this.current.getClippedPathBoundingBox();this.contentVisible&&T!==null&&(this.pendingEOFill?(v.fill("evenodd"),this.pendingEOFill=!1):v.fill()),P&&v.restore(),C&&this.consumePath(T)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=re}eoClip(){this.pendingClip=te}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const C=this.pendingTextPaths,v=this.ctx;if(C===void 0){v.beginPath();return}v.save(),v.beginPath();for(const V of C)v.setTransform(...V.transform),v.translate(V.x,V.y),V.addToPath(v,V.fontSize);v.restore(),v.clip(),v.beginPath(),delete this.pendingTextPaths}setCharSpacing(C){this.current.charSpacing=C}setWordSpacing(C){this.current.wordSpacing=C}setHScale(C){this.current.textHScale=C/100}setLeading(C){this.current.leading=-C}setFont(C,v){const V=this.commonObjs.get(C),N=this.current;if(!V)throw new Error(`Can't find font for ${C}`);if(N.fontMatrix=V.fontMatrix||o.FONT_IDENTITY_MATRIX,(N.fontMatrix[0]===0||N.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+C),v<0?(v=-v,N.fontDirection=-1):N.fontDirection=1,this.current.font=V,this.current.fontSize=v,V.isType3Font)return;const P=V.loadedName||"sans-serif";let T="normal";V.black?T="900":V.bold&&(T="bold");const w=V.italic?"italic":"normal",F=`"${P}", ${V.fallbackName}`;let U=v;v<h?U=h:v>u&&(U=u),this.current.fontSizeScale=v/U,this.ctx.font=`${w} ${T} ${U}px ${F}`}setTextRenderingMode(C){this.current.textRenderingMode=C}setTextRise(C){this.current.textRise=C}moveText(C,v){this.current.x=this.current.lineX+=C,this.current.y=this.current.lineY+=v}setLeadingMoveText(C,v){this.setLeading(-v),this.moveText(C,v)}setTextMatrix(C,v,V,N,P,T){this.current.textMatrix=[C,v,V,N,P,T],this.current.textMatrixScale=Math.hypot(C,v),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(C,v,V,N){const P=this.ctx,T=this.current,w=T.font,F=T.textRenderingMode,U=T.fontSize/T.fontSizeScale,H=F&o.TextRenderingMode.FILL_STROKE_MASK,Y=!!(F&o.TextRenderingMode.ADD_TO_PATH_FLAG),ne=T.patternFill&&!w.missingFile;let ae;(w.disableFontFace||Y||ne)&&(ae=w.getPathGenerator(this.commonObjs,C)),w.disableFontFace||ne?(P.save(),P.translate(v,V),P.beginPath(),ae(P,U),N&&P.setTransform(...N),(H===o.TextRenderingMode.FILL||H===o.TextRenderingMode.FILL_STROKE)&&P.fill(),(H===o.TextRenderingMode.STROKE||H===o.TextRenderingMode.FILL_STROKE)&&P.stroke(),P.restore()):((H===o.TextRenderingMode.FILL||H===o.TextRenderingMode.FILL_STROKE)&&P.fillText(C,v,V),(H===o.TextRenderingMode.STROKE||H===o.TextRenderingMode.FILL_STROKE)&&P.strokeText(C,v,V)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(P),x:v,y:V,fontSize:U,addToPath:ae})}get isFontSubpixelAAEnabled(){const{context:C}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);C.scale(1.5,1),C.fillText("I",0,10);const v=C.getImageData(0,0,10,10).data;let V=!1;for(let N=3;N<v.length;N+=4)if(v[N]>0&&v[N]<255){V=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",V)}showText(C){const v=this.current,V=v.font;if(V.isType3Font)return this.showType3Text(C);const N=v.fontSize;if(N===0)return;const P=this.ctx,T=v.fontSizeScale,w=v.charSpacing,F=v.wordSpacing,U=v.fontDirection,H=v.textHScale*U,Y=C.length,ne=V.vertical,ae=ne?1:-1,ee=V.defaultVMetrics,ce=N*v.fontMatrix[0],pe=v.textRenderingMode===o.TextRenderingMode.FILL&&!V.disableFontFace&&!v.patternFill;P.save(),P.transform(...v.textMatrix),P.translate(v.x,v.y+v.textRise),U>0?P.scale(H,-1):P.scale(H,1);let he;if(v.patternFill){P.save();const ve=v.fillColor.getPattern(P,this,(0,i.getCurrentTransformInverse)(P),l.PathType.FILL);he=(0,i.getCurrentTransform)(P),P.restore(),P.fillStyle=ve}let _e=v.lineWidth;const Ee=v.textMatrixScale;if(Ee===0||_e===0){const ve=v.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(ve===o.TextRenderingMode.STROKE||ve===o.TextRenderingMode.FILL_STROKE)&&(_e=this.getSinglePixelWidth())}else _e/=Ee;T!==1&&(P.scale(T,T),_e/=T),P.lineWidth=_e;let Ce=0,Re;for(Re=0;Re<Y;++Re){const ve=C[Re];if(typeof ve=="number"){Ce+=ae*ve*N/1e3;continue}let He=!1;const Ze=(ve.isSpace?F:0)+w,Ie=ve.fontChar,Oe=ve.accent;let je,ht,nt=ve.width;if(ne){const $e=ve.vmetric||ee,qe=-(ve.vmetric?$e[1]:nt*.5)*ce,$n=$e[2]*ce;nt=$e?-$e[0]:nt,je=qe/T,ht=(Ce+$n)/T}else je=Ce/T,ht=0;if(V.remeasure&&nt>0){const $e=P.measureText(Ie).width*1e3/N*T;if(nt<$e&&this.isFontSubpixelAAEnabled){const qe=nt/$e;He=!0,P.save(),P.scale(qe,1),je/=qe}else nt!==$e&&(je+=(nt-$e)/2e3*N/T)}if(this.contentVisible&&(ve.isInFont||V.missingFile)){if(pe&&!Oe)P.fillText(Ie,je,ht);else if(this.paintChar(Ie,je,ht,he),Oe){const $e=je+N*Oe.offset.x/T,qe=ht-N*Oe.offset.y/T;this.paintChar(Oe.fontChar,$e,qe,he)}}let zt;ne?zt=nt*ce-Ze*U:zt=nt*ce+Ze*U,Ce+=zt,He&&P.restore()}ne?v.y-=Ce:v.x+=Ce*H,P.restore(),this.compose()}showType3Text(C){const v=this.ctx,V=this.current,N=V.font,P=V.fontSize,T=V.fontDirection,w=N.vertical?1:-1,F=V.charSpacing,U=V.wordSpacing,H=V.textHScale*T,Y=V.fontMatrix||o.FONT_IDENTITY_MATRIX,ne=C.length,ae=V.textRenderingMode===o.TextRenderingMode.INVISIBLE;let ee,ce,pe,he;if(!(ae||P===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,v.save(),v.transform(...V.textMatrix),v.translate(V.x,V.y),v.scale(H,T),ee=0;ee<ne;++ee){if(ce=C[ee],typeof ce=="number"){he=w*ce*P/1e3,this.ctx.translate(he,0),V.x+=he*H;continue}const _e=(ce.isSpace?U:0)+F,Ee=N.charProcOperatorList[ce.operatorListId];if(!Ee){(0,o.warn)(`Type3 character "${ce.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ce,this.save(),v.scale(P,P),v.transform(...Y),this.executeOperatorList(Ee),this.restore()),pe=o.Util.applyTransform([ce.width,0],Y)[0]*P+_e,v.translate(pe,0),V.x+=pe*H}v.restore(),this.processingType3=null}}setCharWidth(C,v){}setCharWidthAndBounds(C,v,V,N,P,T){this.ctx.rect(V,N,P-V,T-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(C){let v;if(C[0]==="TilingPattern"){const V=C[1],N=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),P={createCanvasGraphics:T=>new X(T,this.commonObjs,this.objs,this.canvasFactory)};v=new l.TilingPattern(C,V,this.ctx,P,N)}else v=this._getPattern(C[1],C[2]);return v}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(C,v,V){const N=this.selectColor?.(C,v,V)||o.Util.makeHexColor(C,v,V);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(C,v,V){const N=this.selectColor?.(C,v,V)||o.Util.makeHexColor(C,v,V);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(C,v=null){let V;return this.cachedPatterns.has(C)?V=this.cachedPatterns.get(C):(V=(0,l.getShadingPattern)(this.objs.get(C)),this.cachedPatterns.set(C,V)),v&&(V.matrix=v),V}shadingFill(C){if(!this.contentVisible)return;const v=this.ctx;this.save();const V=this._getPattern(C);v.fillStyle=V.getPattern(v,this,(0,i.getCurrentTransformInverse)(v),l.PathType.SHADING);const N=(0,i.getCurrentTransformInverse)(v);if(N){const P=v.canvas,T=P.width,w=P.height,F=o.Util.applyTransform([0,0],N),U=o.Util.applyTransform([0,w],N),H=o.Util.applyTransform([T,0],N),Y=o.Util.applyTransform([T,w],N),ne=Math.min(F[0],U[0],H[0],Y[0]),ae=Math.min(F[1],U[1],H[1],Y[1]),ee=Math.max(F[0],U[0],H[0],Y[0]),ce=Math.max(F[1],U[1],H[1],Y[1]);this.ctx.fillRect(ne,ae,ee-ne,ce-ae)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(C,v){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(C)&&C.length===6&&this.transform(...C),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),v)){const V=v[2]-v[0],N=v[3]-v[1];this.ctx.rect(v[0],v[1],V,N),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),v),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(C){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const v=this.ctx;C.isolated||(0,o.info)("TODO: Support non-isolated groups."),C.knockout&&(0,o.warn)("Knockout groups not supported.");const V=(0,i.getCurrentTransform)(v);if(C.matrix&&v.transform(...C.matrix),!C.bbox)throw new Error("Bounding box is required.");let N=o.Util.getAxialAlignedBoundingBox(C.bbox,(0,i.getCurrentTransform)(v));const P=[0,0,v.canvas.width,v.canvas.height];N=o.Util.intersect(N,P)||[0,0,0,0];const T=Math.floor(N[0]),w=Math.floor(N[1]);let F=Math.max(Math.ceil(N[2])-T,1),U=Math.max(Math.ceil(N[3])-w,1),H=1,Y=1;F>d&&(H=F/d,F=d),U>d&&(Y=U/d,U=d),this.current.startNewPathAndClipBox([0,0,F,U]);let ne="groupAt"+this.groupLevel;C.smask&&(ne+="_smask_"+this.smaskCounter++%2);const ae=this.cachedCanvases.getCanvas(ne,F,U),ee=ae.context;ee.scale(1/H,1/Y),ee.translate(-T,-w),ee.transform(...V),C.smask?this.smaskStack.push({canvas:ae.canvas,context:ee,offsetX:T,offsetY:w,scaleX:H,scaleY:Y,subtype:C.smask.subtype,backdrop:C.smask.backdrop,transferMap:C.smask.transferMap||null,startTransformInverse:null}):(v.setTransform(1,0,0,1,0,0),v.translate(T,w),v.scale(H,Y),v.save()),G(v,ee),this.ctx=ee,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(v),this.groupLevel++}endGroup(C){if(!this.contentVisible)return;this.groupLevel--;const v=this.ctx,V=this.groupStack.pop();if(this.ctx=V,this.ctx.imageSmoothingEnabled=!1,C.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const N=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);const P=o.Util.getAxialAlignedBoundingBox([0,0,v.canvas.width,v.canvas.height],N);this.ctx.drawImage(v.canvas,0,0),this.ctx.restore(),this.compose(P)}}beginAnnotation(C,v,V,N,P){if(this.#e(),z(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(v)&&v.length===4){const T=v[2]-v[0],w=v[3]-v[1];if(P&&this.annotationCanvasMap){V=V.slice(),V[4]-=v[0],V[5]-=v[1],v=v.slice(),v[0]=v[1]=0,v[2]=T,v[3]=w;const[F,U]=o.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:H}=this,Y=Math.ceil(T*this.outputScaleX*H),ne=Math.ceil(w*this.outputScaleY*H);this.annotationCanvas=this.canvasFactory.create(Y,ne);const{canvas:ae,context:ee}=this.annotationCanvas;this.annotationCanvasMap.set(C,ae),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ee,this.ctx.setTransform(F,0,0,-U,0,w*U),z(this.ctx,this.foregroundColor)}else z(this.ctx,this.foregroundColor),this.ctx.rect(v[0],v[1],T,w),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...V),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(C){if(!this.contentVisible)return;const v=C.count;C=this.getObject(C.data,C),C.count=v;const V=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=b(C)),N.compiled)){N.compiled(V);return}const P=this._createMaskCanvas(C),T=P.canvas;V.save(),V.setTransform(1,0,0,1,0,0),V.drawImage(T,P.offsetX,P.offsetY),V.restore(),this.compose()}paintImageMaskXObjectRepeat(C,v,V=0,N=0,P,T){if(!this.contentVisible)return;C=this.getObject(C.data,C);const w=this.ctx;w.save();const F=(0,i.getCurrentTransform)(w);w.transform(v,V,N,P,0,0);const U=this._createMaskCanvas(C);w.setTransform(1,0,0,1,0,0);for(let H=0,Y=T.length;H<Y;H+=2){const ne=o.Util.transform(F,[v,V,N,P,T[H],T[H+1]]),[ae,ee]=o.Util.applyTransform([0,0],ne);w.drawImage(U.canvas,ae,ee)}w.restore(),this.compose()}paintImageMaskXObjectGroup(C){if(!this.contentVisible)return;const v=this.ctx,V=this.current.fillColor,N=this.current.patternFill;for(const P of C){const{data:T,width:w,height:F,transform:U}=P,H=this.cachedCanvases.getCanvas("maskCanvas",w,F),Y=H.context;Y.save();const ne=this.getObject(T,P);q(Y,ne),Y.globalCompositeOperation="source-in",Y.fillStyle=N?V.getPattern(Y,this,(0,i.getCurrentTransformInverse)(v),l.PathType.FILL):V,Y.fillRect(0,0,w,F),Y.restore(),v.save(),v.transform(...U),v.scale(1,-1),D(v,H.canvas,0,0,w,F,0,-1,1,1),v.restore()}this.compose()}paintImageXObject(C){if(!this.contentVisible)return;const v=this.getObject(C);if(!v){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(v)}paintImageXObjectRepeat(C,v,V,N){if(!this.contentVisible)return;const P=this.getObject(C);if(!P){(0,o.warn)("Dependent image isn't ready yet");return}const T=P.width,w=P.height,F=[];for(let U=0,H=N.length;U<H;U+=2)F.push({transform:[v,0,0,V,N[U],N[U+1]],x:0,y:0,w:T,h:w});this.paintInlineImageXObjectGroup(P,F)}paintInlineImageXObject(C){if(!this.contentVisible)return;const v=C.width,V=C.height,N=this.ctx;this.save(),N.scale(1/v,-1/V);let P;if(typeof HTMLElement=="function"&&C instanceof HTMLElement||!C.data)P=C;else{const U=this.cachedCanvases.getCanvas("inlineImage",v,V),H=U.context;R(H,C,this.current.transferMaps),P=U.canvas}const T=this._scaleImage(P,(0,i.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=se((0,i.getCurrentTransform)(N),C.interpolate);const[w,F]=D(N,T.img,0,0,T.paintWidth,T.paintHeight,0,-V,v,V);if(this.imageLayer){const[U,H]=o.Util.applyTransform([0,-V],(0,i.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:C,left:U,top:H,width:w,height:F})}this.compose(),this.restore()}paintInlineImageXObjectGroup(C,v){if(!this.contentVisible)return;const V=this.ctx,N=C.width,P=C.height,T=this.cachedCanvases.getCanvas("inlineImage",N,P),w=T.context;R(w,C,this.current.transferMaps);for(const F of v){if(V.save(),V.transform(...F.transform),V.scale(1,-1),D(V,T.canvas,F.x,F.y,F.w,F.h,0,-1,1,1),this.imageLayer){const[U,H]=o.Util.applyTransform([F.x,F.y],(0,i.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:C,left:U,top:H,width:N,height:P})}V.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(C){}markPointProps(C,v){}beginMarkedContent(C){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(C,v){C==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(v)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(C){const v=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(C);const V=this.ctx;this.pendingClip&&(v||(this.pendingClip===te?V.clip("evenodd"):V.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),V.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const C=(0,i.getCurrentTransform)(this.ctx);if(C[1]===0&&C[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(C[0]),Math.abs(C[3]));else{const v=Math.abs(C[0]*C[3]-C[2]*C[1]),V=Math.hypot(C[0],C[2]),N=Math.hypot(C[1],C[3]);this._cachedGetSinglePixelWidth=Math.max(V,N)/v}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:C}=this.current,v=(0,i.getCurrentTransform)(this.ctx);let V,N;if(v[1]===0&&v[2]===0){const P=Math.abs(v[0]),T=Math.abs(v[3]);if(C===0)V=1/P,N=1/T;else{const w=P*C,F=T*C;V=w<1?1/w:1,N=F<1?1/F:1}}else{const P=Math.abs(v[0]*v[3]-v[2]*v[1]),T=Math.hypot(v[0],v[1]),w=Math.hypot(v[2],v[3]);if(C===0)V=w/P,N=T/P;else{const F=C*P;V=w>F?w/F:1,N=T>F?T/F:1}}this._cachedScaleForStroking=[V,N]}return this._cachedScaleForStroking}rescaleAndStroke(C){const{ctx:v}=this,{lineWidth:V}=this.current,[N,P]=this.getScaleForStroking();if(v.lineWidth=V||1,N===1&&P===1){v.stroke();return}let T,w,F;C&&(T=(0,i.getCurrentTransform)(v),w=v.getLineDash().slice(),F=v.lineDashOffset),v.scale(N,P);const U=Math.max(N,P);v.setLineDash(v.getLineDash().map(H=>H/U)),v.lineDashOffset/=U,v.stroke(),C&&(v.setTransform(...T),v.setLineDash(w),v.lineDashOffset=F)}isContentVisible(){for(let C=this.markedContentStack.length-1;C>=0;C--)if(!this.markedContentStack[C].visible)return!1;return!0}}e.CanvasGraphics=X;for(const L in o.OPS)X.prototype[L]!==void 0&&(X.prototype[o.OPS[L]]=X.prototype[L])}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=E;var i=r(1),o=r(8),l=r(3);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=c;function p(D,b){if(!b||l.isNodeJS)return;const I=b[2]-b[0],R=b[3]-b[1],q=new Path2D;q.rect(b[0],b[1],I,R),D.clip(q)}class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class u extends h{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let I;this._type==="axial"?I=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(I=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const R of this._colorStops)I.addColorStop(R[0],R[1]);return I}getPattern(b,I,R,q){let G;if(q===c.STROKE||q===c.FILL){const z=I.current.getClippedPathBoundingBox(q,(0,o.getCurrentTransform)(b))||[0,0,0,0],B=Math.ceil(z[2]-z[0])||1,M=Math.ceil(z[3]-z[1])||1,O=I.cachedCanvases.getCanvas("pattern",B,M,!0),W=O.context;W.clearRect(0,0,W.canvas.width,W.canvas.height),W.beginPath(),W.rect(0,0,W.canvas.width,W.canvas.height),W.translate(-z[0],-z[1]),R=i.Util.transform(R,[1,0,0,1,z[0],z[1]]),W.transform(...I.baseTransform),this.matrix&&W.transform(...this.matrix),p(W,this._bbox),W.fillStyle=this._createGradient(W),W.fill(),G=b.createPattern(O.canvas,"no-repeat");const K=new DOMMatrix(R);try{G.setTransform(K)}catch(se){(0,i.warn)(`RadialAxialShadingPattern.getPattern: "${se?.message}".`)}}else p(b,this._bbox),G=this._createGradient(b);return G}}function d(D,b,I,R,q,G,z,B){const M=b.coords,O=b.colors,W=D.data,K=D.width*4;let se;M[I+1]>M[R+1]&&(se=I,I=R,R=se,se=G,G=z,z=se),M[R+1]>M[q+1]&&(se=R,R=q,q=se,se=z,z=B,B=se),M[I+1]>M[R+1]&&(se=I,I=R,R=se,se=G,G=z,z=se);const $=(M[I]+b.offsetX)*b.scaleX,Q=(M[I+1]+b.offsetY)*b.scaleY,re=(M[R]+b.offsetX)*b.scaleX,te=(M[R+1]+b.offsetY)*b.scaleY,X=(M[q]+b.offsetX)*b.scaleX,L=(M[q+1]+b.offsetY)*b.scaleY;if(Q>=L)return;const C=O[G],v=O[G+1],V=O[G+2],N=O[z],P=O[z+1],T=O[z+2],w=O[B],F=O[B+1],U=O[B+2],H=Math.round(Q),Y=Math.round(L);let ne,ae,ee,ce,pe,he,_e,Ee;for(let Ce=H;Ce<=Y;Ce++){if(Ce<te){let Ie;Ce<Q?Ie=0:Ie=(Q-Ce)/(Q-te),ne=$-($-re)*Ie,ae=C-(C-N)*Ie,ee=v-(v-P)*Ie,ce=V-(V-T)*Ie}else{let Ie;Ce>L?Ie=1:te===L?Ie=0:Ie=(te-Ce)/(te-L),ne=re-(re-X)*Ie,ae=N-(N-w)*Ie,ee=P-(P-F)*Ie,ce=T-(T-U)*Ie}let Re;Ce<Q?Re=0:Ce>L?Re=1:Re=(Q-Ce)/(Q-L),pe=$-($-X)*Re,he=C-(C-w)*Re,_e=v-(v-F)*Re,Ee=V-(V-U)*Re;const ve=Math.round(Math.min(ne,pe)),He=Math.round(Math.max(ne,pe));let Ze=K*Ce+ve*4;for(let Ie=ve;Ie<=He;Ie++)Re=(ne-Ie)/(ne-pe),Re<0?Re=0:Re>1&&(Re=1),W[Ze++]=ae-(ae-he)*Re|0,W[Ze++]=ee-(ee-_e)*Re|0,W[Ze++]=ce-(ce-Ee)*Re|0,W[Ze++]=255}}function g(D,b,I){const R=b.coords,q=b.colors;let G,z;switch(b.type){case"lattice":const B=b.verticesPerRow,M=Math.floor(R.length/B)-1,O=B-1;for(G=0;G<M;G++){let W=G*B;for(let K=0;K<O;K++,W++)d(D,I,R[W],R[W+1],R[W+B],q[W],q[W+1],q[W+B]),d(D,I,R[W+B+1],R[W+1],R[W+B],q[W+B+1],q[W+1],q[W+B])}break;case"triangles":for(G=0,z=R.length;G<z;G+=3)d(D,I,R[G],R[G+1],R[G+2],q[G],q[G+1],q[G+2]);break;default:throw new Error("illegal figure")}}class y extends h{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,I,R){const B=Math.floor(this._bounds[0]),M=Math.floor(this._bounds[1]),O=Math.ceil(this._bounds[2])-B,W=Math.ceil(this._bounds[3])-M,K=Math.min(Math.ceil(Math.abs(O*b[0]*1.1)),3e3),se=Math.min(Math.ceil(Math.abs(W*b[1]*1.1)),3e3),$=O/K,Q=W/se,re={coords:this._coords,colors:this._colors,offsetX:-B,offsetY:-M,scaleX:1/$,scaleY:1/Q},te=K+4,X=se+4,L=R.getCanvas("mesh",te,X,!1),C=L.context,v=C.createImageData(K,se);if(I){const N=v.data;for(let P=0,T=N.length;P<T;P+=4)N[P]=I[0],N[P+1]=I[1],N[P+2]=I[2],N[P+3]=255}for(const N of this._figures)g(v,N,re);return C.putImageData(v,2,2),{canvas:L.canvas,offsetX:B-2*$,offsetY:M-2*Q,scaleX:$,scaleY:Q}}getPattern(b,I,R,q){p(b,this._bbox);let G;if(q===c.SHADING)G=i.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(b));else if(G=i.Util.singularValueDecompose2dScale(I.baseTransform),this.matrix){const B=i.Util.singularValueDecompose2dScale(this.matrix);G=[G[0]*B[0],G[1]*B[1]]}const z=this._createMeshCanvas(G,q===c.SHADING?null:this._background,I.cachedCanvases);return q!==c.SHADING&&(b.setTransform(...I.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(z.offsetX,z.offsetY),b.scale(z.scaleX,z.scaleY),b.createPattern(z.canvas,"no-repeat")}}class S extends h{getPattern(){return"hotpink"}}function E(D){switch(D[0]){case"RadialAxial":return new u(D);case"Mesh":return new y(D);case"Dummy":return new S}throw new Error(`Unknown IR type: ${D[0]}`)}const x={COLORED:1,UNCOLORED:2};class A{static get MAX_PATTERN_SIZE(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(b,I,R,q,G){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=I,this.ctx=R,this.canvasGraphicsFactory=q,this.baseTransform=G}createPatternCanvas(b){const I=this.operatorList,R=this.bbox,q=this.xstep,G=this.ystep,z=this.paintType,B=this.tilingType,M=this.color,O=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+B);const W=R[0],K=R[1],se=R[2],$=R[3],Q=i.Util.singularValueDecompose2dScale(this.matrix),re=i.Util.singularValueDecompose2dScale(this.baseTransform),te=[Q[0]*re[0],Q[1]*re[1]],X=this.getSizeAndScale(q,this.ctx.canvas.width,te[0]),L=this.getSizeAndScale(G,this.ctx.canvas.height,te[1]),C=b.cachedCanvases.getCanvas("pattern",X.size,L.size,!0),v=C.context,V=O.createCanvasGraphics(v);V.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(V,z,M);let N=W,P=K,T=se,w=$;return W<0&&(N=0,T+=Math.abs(W)),K<0&&(P=0,w+=Math.abs(K)),v.translate(-(X.scale*N),-(L.scale*P)),V.transform(X.scale,0,0,L.scale,0,0),v.save(),this.clipBbox(V,N,P,T,w),V.baseTransform=(0,o.getCurrentTransform)(V.ctx),V.executeOperatorList(I),V.endDrawing(),{canvas:C.canvas,scaleX:X.scale,scaleY:L.scale,offsetX:N,offsetY:P}}getSizeAndScale(b,I,R){b=Math.abs(b);const q=Math.max(A.MAX_PATTERN_SIZE,I);let G=Math.ceil(b*R);return G>=q?G=q:R=G/b,{scale:R,size:G}}clipBbox(b,I,R,q,G){const z=q-I,B=G-R;b.ctx.rect(I,R,z,B),b.current.updateRectMinMax((0,o.getCurrentTransform)(b.ctx),[I,R,q,G]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,I,R){const q=b.ctx,G=b.current;switch(I){case x.COLORED:const z=this.ctx;q.fillStyle=z.fillStyle,q.strokeStyle=z.strokeStyle,G.fillColor=z.fillStyle,G.strokeColor=z.strokeStyle;break;case x.UNCOLORED:const B=i.Util.makeHexColor(R[0],R[1],R[2]);q.fillStyle=B,q.strokeStyle=B,G.fillColor=B,G.strokeColor=B;break;default:throw new i.FormatError(`Unsupported paint type: ${I}`)}}getPattern(b,I,R,q){let G=R;q!==c.SHADING&&(G=i.Util.transform(G,I.baseTransform),this.matrix&&(G=i.Util.transform(G,this.matrix)));const z=this.createPatternCanvas(I);let B=new DOMMatrix(G);B=B.translate(z.offsetX,z.offsetY),B=B.scale(1/z.scaleX,1/z.scaleY);const M=b.createPattern(z.canvas,"repeat");try{M.setTransform(B)}catch(O){(0,i.warn)(`TilingPattern.getPattern: "${O?.message}".`)}return M}}e.TilingPattern=A}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=o;var i=r(1);function o({src:l,srcPos:c=0,dest:p,destPos:h=0,width:u,height:d,inverseDecode:g=!1}){const y=i.FeatureTest.isLittleEndian?4278190080:255,[S,E]=g?[0,y]:[y,0],x=u>>3,A=u&7,D=l.length;p=new Uint32Array(p.buffer);for(let b=0;b<d;b++){for(const R=c+x;c<R;c++){const q=c<D?l[c]:255;p[h++]=q&128?E:S,p[h++]=q&64?E:S,p[h++]=q&32?E:S,p[h++]=q&16?E:S,p[h++]=q&8?E:S,p[h++]=q&4?E:S,p[h++]=q&2?E:S,p[h++]=q&1?E:S}if(A===0)continue;const I=c<D?l[c++]:255;for(let R=0;R<A;R++)p[h++]=I&1<<7-R?E:S}return{srcPos:c,destPos:h}}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const r=Object.create(null);e.GlobalWorkerOptions=r,r.workerPort=r.workerPort===void 0?null:r.workerPort,r.workerSrc=r.workerSrc===void 0?"":r.workerSrc}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=r(1);const o={DATA:1,ERROR:2},l={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function c(h){switch(h instanceof Error||typeof h=="object"&&h!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new i.AbortException(h.message);case"MissingPDFException":return new i.MissingPDFException(h.message);case"PasswordException":return new i.PasswordException(h.message,h.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(h.message,h.status);case"UnknownErrorException":return new i.UnknownErrorException(h.message,h.details);default:return new i.UnknownErrorException(h.message,h.toString())}}class p{constructor(u,d,g){this.sourceName=u,this.targetName=d,this.comObj=g,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const S=y.data;if(S.targetName!==this.sourceName)return;if(S.stream){this._processStreamMessage(S);return}if(S.callback){const x=S.callbackId,A=this.callbackCapabilities[x];if(!A)throw new Error(`Cannot resolve callback ${x}`);if(delete this.callbackCapabilities[x],S.callback===o.DATA)A.resolve(S.data);else if(S.callback===o.ERROR)A.reject(c(S.reason));else throw new Error("Unexpected callback case");return}const E=this.actionHandler[S.action];if(!E)throw new Error(`Unknown action from worker: ${S.action}`);if(S.callbackId){const x=this.sourceName,A=S.sourceName;new Promise(function(D){D(E(S.data))}).then(function(D){g.postMessage({sourceName:x,targetName:A,callback:o.DATA,callbackId:S.callbackId,data:D})},function(D){g.postMessage({sourceName:x,targetName:A,callback:o.ERROR,callbackId:S.callbackId,reason:c(D)})});return}if(S.streamId){this._createStreamSink(S);return}E(S.data)},g.addEventListener("message",this._onComObjOnMessage)}on(u,d){const g=this.actionHandler;if(g[u])throw new Error(`There is already an actionName called "${u}"`);g[u]=d}send(u,d,g){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:d},g)}sendWithPromise(u,d,g){const y=this.callbackId++,S=(0,i.createPromiseCapability)();this.callbackCapabilities[y]=S;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:y,data:d},g)}catch(E){S.reject(E)}return S.promise}sendWithStream(u,d,g,y){const S=this.streamId++,E=this.sourceName,x=this.targetName,A=this.comObj;return new ReadableStream({start:D=>{const b=(0,i.createPromiseCapability)();return this.streamControllers[S]={controller:D,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:E,targetName:x,action:u,streamId:S,data:d,desiredSize:D.desiredSize},y),b.promise},pull:D=>{const b=(0,i.createPromiseCapability)();return this.streamControllers[S].pullCall=b,A.postMessage({sourceName:E,targetName:x,stream:l.PULL,streamId:S,desiredSize:D.desiredSize}),b.promise},cancel:D=>{(0,i.assert)(D instanceof Error,"cancel must have a valid reason");const b=(0,i.createPromiseCapability)();return this.streamControllers[S].cancelCall=b,this.streamControllers[S].isClosed=!0,A.postMessage({sourceName:E,targetName:x,stream:l.CANCEL,streamId:S,reason:c(D)}),b.promise}},g)}_createStreamSink(u){const d=u.streamId,g=this.sourceName,y=u.sourceName,S=this.comObj,E=this,x=this.actionHandler[u.action],A={enqueue(D,b=1,I){if(this.isCancelled)return;const R=this.desiredSize;this.desiredSize-=b,R>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),S.postMessage({sourceName:g,targetName:y,stream:l.ENQUEUE,streamId:d,chunk:D},I)},close(){this.isCancelled||(this.isCancelled=!0,S.postMessage({sourceName:g,targetName:y,stream:l.CLOSE,streamId:d}),delete E.streamSinks[d])},error(D){(0,i.assert)(D instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,S.postMessage({sourceName:g,targetName:y,stream:l.ERROR,streamId:d,reason:c(D)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[d]=A,new Promise(function(D){D(x(u.data,A))}).then(function(){S.postMessage({sourceName:g,targetName:y,stream:l.START_COMPLETE,streamId:d,success:!0})},function(D){S.postMessage({sourceName:g,targetName:y,stream:l.START_COMPLETE,streamId:d,reason:c(D)})})}_processStreamMessage(u){const d=u.streamId,g=this.sourceName,y=u.sourceName,S=this.comObj,E=this.streamControllers[d],x=this.streamSinks[d];switch(u.stream){case l.START_COMPLETE:u.success?E.startCall.resolve():E.startCall.reject(c(u.reason));break;case l.PULL_COMPLETE:u.success?E.pullCall.resolve():E.pullCall.reject(c(u.reason));break;case l.PULL:if(!x){S.postMessage({sourceName:g,targetName:y,stream:l.PULL_COMPLETE,streamId:d,success:!0});break}x.desiredSize<=0&&u.desiredSize>0&&x.sinkCapability.resolve(),x.desiredSize=u.desiredSize,new Promise(function(A){A(x.onPull&&x.onPull())}).then(function(){S.postMessage({sourceName:g,targetName:y,stream:l.PULL_COMPLETE,streamId:d,success:!0})},function(A){S.postMessage({sourceName:g,targetName:y,stream:l.PULL_COMPLETE,streamId:d,reason:c(A)})});break;case l.ENQUEUE:if((0,i.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(u.chunk);break;case l.CLOSE:if((0,i.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),this._deleteStreamController(E,d);break;case l.ERROR:(0,i.assert)(E,"error should have stream controller"),E.controller.error(c(u.reason)),this._deleteStreamController(E,d);break;case l.CANCEL_COMPLETE:u.success?E.cancelCall.resolve():E.cancelCall.reject(c(u.reason)),this._deleteStreamController(E,d);break;case l.CANCEL:if(!x)break;new Promise(function(A){A(x.onCancel&&x.onCancel(c(u.reason)))}).then(function(){S.postMessage({sourceName:g,targetName:y,stream:l.CANCEL_COMPLETE,streamId:d,success:!0})},function(A){S.postMessage({sourceName:g,targetName:y,stream:l.CANCEL_COMPLETE,streamId:d,reason:c(A)})}),x.sinkCapability.reject(c(u.reason)),x.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(u,d){await Promise.allSettled([u.startCall&&u.startCall.promise,u.pullCall&&u.pullCall.promise,u.cancelCall&&u.cancelCall.promise]),delete this.streamControllers[d]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=p}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=r(1);class o{#e;#t;constructor({parsedData:c,rawData:p}){this.#e=c,this.#t=p}getRaw(){return this.#t}get(c){return this.#e.get(c)??null}getAll(){return(0,i.objectFromMap)(this.#e)}has(c){return this.#e.has(c)}}e.Metadata=o}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=r(1);const o=Symbol("INTERNAL");class l{#e=!0;constructor(h,u){this.name=h,this.intent=u}get visible(){return this.#e}_setVisible(h,u){h!==o&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#e=u}}class c{#e=!0;#t=new Map;#s=null;#n=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#n=h.order;for(const u of h.groups)this.#t.set(u.id,new l(u.name,u.intent));if(h.baseState==="OFF")for(const u of this.#t.values())u._setVisible(o,!1);for(const u of h.on)this.#t.get(u)._setVisible(o,!0);for(const u of h.off)this.#t.get(u)._setVisible(o,!1);this.#s=new Map;for(const[u,d]of this.#t)this.#s.set(u,d.visible)}}#i(h){const u=h.length;if(u<2)return!0;const d=h[0];for(let g=1;g<u;g++){const y=h[g];let S;if(Array.isArray(y))S=this.#i(y);else if(this.#t.has(y))S=this.#t.get(y).visible;else return(0,i.warn)(`Optional content group not found: ${y}`),!0;switch(d){case"And":if(!S)return!1;break;case"Or":if(S)return!0;break;case"Not":return!S;default:return!0}}return d==="And"}isVisible(h){if(this.#t.size===0)return!0;if(!h)return(0,i.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#t.has(h.id)?this.#t.get(h.id).visible:((0,i.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#i(h.expression);if(!h.policy||h.policy==="AnyOn"){for(const u of h.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(this.#t.get(u).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const u of h.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(!this.#t.get(u).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const u of h.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(!this.#t.get(u).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const u of h.ids){if(!this.#t.has(u))return(0,i.warn)(`Optional content group not found: ${u}`),!0;if(this.#t.get(u).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,i.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,u=!0){if(!this.#t.has(h)){(0,i.warn)(`Optional content group not found: ${h}`);return}this.#t.get(h)._setVisible(o,!!u),this.#e=null}get hasInitialVisibility(){if(this.#e!==null)return this.#e;for(const[h,u]of this.#t){const d=this.#s.get(h);if(u.visible!==d)return this.#e=!1}return this.#e=!0}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,i.objectFromMap)(this.#t):null}getGroup(h){return this.#t.get(h)||null}}e.OptionalContentConfig=c}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=r(1),o=r(8);class l{constructor(u,d){(0,i.assert)(d,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=u.progressiveDone||!1,this._contentDispositionFilename=u.contentDispositionFilename||null;const g=u.initialData;if(g?.length>0){const y=new Uint8Array(g).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=d,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._contentLength=u.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((y,S)=>{this._onReceiveData({begin:y,chunk:S})}),this._pdfDataRangeTransport.addProgressListener((y,S)=>{this._onProgress({loaded:y,total:S})}),this._pdfDataRangeTransport.addProgressiveReadListener(y=>{this._onReceiveData({chunk:y})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(u){const d=new Uint8Array(u.chunk).buffer;if(u.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{const g=this._rangeReaders.some(function(y){return y._begin!==u.begin?!1:(y._enqueue(d),!0)});(0,i.assert)(g,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(u){if(u.total===void 0){const d=this._rangeReaders[0];d?.onProgress&&d.onProgress({loaded:u.loaded})}else{const d=this._fullRequestReader;d?.onProgress&&d.onProgress({loaded:u.loaded,total:u.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const d=this._rangeReaders.indexOf(u);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new c(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,d){if(d<=this._progressiveDataLength)return null;const g=new p(this,u,d);return this._pdfDataRangeTransport.requestDataRange(u,d),this._rangeReaders.push(g),g}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);for(const d of this._rangeReaders.slice(0))d.cancel(u);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=l;class c{constructor(u,d,g=!1,y=null){this._stream=u,this._done=g||!1,this._filename=(0,o.isPdfFile)(y)?y:null,this._queuedChunks=d||[],this._loaded=0;for(const S of this._queuedChunks)this._loaded+=S.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,i.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class p{constructor(u,d,g){this._stream=u,this._begin=d,this._end=g,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,i.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class r{static textContent(o){const l=[],c={items:l,styles:Object.create(null)};function p(h){if(!h)return;let u=null;const d=h.name;if(d==="#text")u=h.value;else if(r.shouldBuildText(d))h?.attributes?.textContent?u=h.attributes.textContent:h.value&&(u=h.value);else return;if(u!==null&&l.push({str:u}),!!h.children)for(const g of h.children)p(g)}return p(o),c}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}e.XfaText=r}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=r(9);const o=function(h){return new Promise((u,d)=>{require$$5.readFile(h,(y,S)=>{if(y||!S){d(new Error(y));return}u(new Uint8Array(S))})})};class l extends i.BaseCanvasFactory{_createCanvas(u,d){return require$$5.createCanvas(u,d)}}e.NodeCanvasFactory=l;class c extends i.BaseCMapReaderFactory{_fetchData(u,d){return o(u).then(g=>({cMapData:g,compressionType:d}))}}e.NodeCMapReaderFactory=c;class p extends i.BaseStandardFontDataFactory{_fetchData(u){return o(u)}}e.NodeStandardFontDataFactory=p}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=r(7),o=r(1),l=r(23),c=r(24);class p{#e;#t=!1;#s=this.pointerup.bind(this);#n=this.pointerdown.bind(this);#i=new Map;#c=!1;#a=!1;#r;static _initialized=!1;constructor(u){p._initialized||(p._initialized=!0,l.FreeTextEditor.initialize(u.l10n),c.InkEditor.initialize(u.l10n),u.uiManager.registerEditorTypes([l.FreeTextEditor,c.InkEditor])),this.#r=u.uiManager,this.annotationStorage=u.annotationStorage,this.pageIndex=u.pageIndex,this.div=u.div,this.#e=u.accessibilityManager,this.#r.addLayer(this)}updateToolbar(u){this.#r.updateToolbar(u)}updateMode(u=this.#r.getMode()){this.#o(),u===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#r.unselectAll()}addInkEditorIfNeeded(u){if(!u&&this.#r.getMode()!==o.AnnotationEditorType.INK)return;if(!u){for(const g of this.#i.values())if(g.isEmpty()){g.setInBackground();return}}this.#u({offsetX:0,offsetY:0}).setInBackground()}setEditingState(u){this.#r.setEditingState(u)}addCommands(u){this.#r.addCommands(u)}enable(){this.div.style.pointerEvents="auto";for(const u of this.#i.values())u.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const u of this.#i.values())u.disableEditing()}setActiveEditor(u){this.#r.getActive()!==u&&this.#r.setActiveEditor(u)}enableClick(){this.div.addEventListener("pointerdown",this.#n),this.div.addEventListener("pointerup",this.#s)}disableClick(){this.div.removeEventListener("pointerdown",this.#n),this.div.removeEventListener("pointerup",this.#s)}attach(u){this.#i.set(u.id,u)}detach(u){this.#i.delete(u.id),this.#e?.removePointerInTextLayer(u.contentDiv)}remove(u){this.#r.removeEditor(u),this.detach(u),this.annotationStorage.remove(u.id),u.div.style.display="none",setTimeout(()=>{u.div.style.display="",u.div.remove(),u.isAttachedToDOM=!1,document.activeElement===document.body&&this.#r.focusMainContainer()},0),this.#a||this.addInkEditorIfNeeded(!1)}#h(u){u.parent!==this&&(this.attach(u),u.pageIndex=this.pageIndex,u.parent?.detach(u),u.parent=this,u.div&&u.isAttachedToDOM&&(u.div.remove(),this.div.append(u.div)))}add(u){if(this.#h(u),this.#r.addEditor(u),this.attach(u),!u.isAttachedToDOM){const d=u.render();this.div.append(d),u.isAttachedToDOM=!0}this.moveEditorInDOM(u),u.onceAdded(),this.addToAnnotationStorage(u)}moveEditorInDOM(u){this.#e?.moveElementInDOM(this.div,u.div,u.contentDiv,!0)}addToAnnotationStorage(u){!u.isEmpty()&&!this.annotationStorage.has(u.id)&&this.annotationStorage.setValue(u.id,u)}addOrRebuild(u){u.needsToBeRebuilt()?u.rebuild():this.add(u)}addANewEditor(u){const d=()=>{this.addOrRebuild(u)},g=()=>{u.remove()};this.addCommands({cmd:d,undo:g,mustExec:!0})}addUndoableEditor(u){const d=()=>{this.addOrRebuild(u)},g=()=>{u.remove()};this.addCommands({cmd:d,undo:g,mustExec:!1})}getNextId(){return this.#r.getId()}#l(u){switch(this.#r.getMode()){case o.AnnotationEditorType.FREETEXT:return new l.FreeTextEditor(u);case o.AnnotationEditorType.INK:return new c.InkEditor(u)}return null}deserialize(u){switch(u.annotationType){case o.AnnotationEditorType.FREETEXT:return l.FreeTextEditor.deserialize(u,this);case o.AnnotationEditorType.INK:return c.InkEditor.deserialize(u,this)}return null}#u(u){const d=this.getNextId(),g=this.#l({parent:this,id:d,x:u.offsetX,y:u.offsetY});return g&&this.add(g),g}setSelected(u){this.#r.setSelected(u)}toggleSelected(u){this.#r.toggleSelected(u)}isSelected(u){return this.#r.isSelected(u)}unselect(u){this.#r.unselect(u)}pointerup(u){const d=i.KeyboardManager.platform.isMac;if(!(u.button!==0||u.ctrlKey&&d)&&u.target===this.div&&this.#c){if(this.#c=!1,!this.#t){this.#t=!0;return}this.#u(u)}}pointerdown(u){const d=i.KeyboardManager.platform.isMac;if(u.button!==0||u.ctrlKey&&d||u.target!==this.div)return;this.#c=!0;const g=this.#r.getActive();this.#t=!g||g.isEmpty()}drop(u){const d=u.dataTransfer.getData("text/plain"),g=this.#r.getEditor(d);if(!g)return;u.preventDefault(),u.dataTransfer.dropEffect="move",this.#h(g);const y=this.div.getBoundingClientRect(),S=u.clientX-y.x,E=u.clientY-y.y;g.translate(S-g.startX,E-g.startY),this.moveEditorInDOM(g),g.div.focus()}dragover(u){u.preventDefault()}destroy(){this.#r.getActive()?.parent===this&&this.#r.setActiveEditor(null);for(const u of this.#i.values())this.#e?.removePointerInTextLayer(u.contentDiv),u.isAttachedToDOM=!1,u.div.remove(),u.parent=null;this.div=null,this.#i.clear(),this.#r.removeLayer(this)}#o(){this.#a=!0;for(const u of this.#i.values())u.isEmpty()&&u.remove();this.#a=!1}render(u){this.viewport=u.viewport,(0,i.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const d of this.#r.getEditors(this.pageIndex))this.add(d);this.updateMode()}update(u){this.viewport=u.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[u,d,g,y]=this.viewport.viewBox,S=g-u,E=y-d;return[S,E]}get viewportBaseDimensions(){const{width:u,height:d,rotation:g}=this.viewport;return g%180===0?[u,d]:[d,u]}setDimensions(){const{width:u,height:d,rotation:g}=this.viewport,y=g%180!==0,S=Math.floor(u)+"px",E=Math.floor(d)+"px";this.div.style.width=y?E:S,this.div.style.height=y?S:E,this.div.setAttribute("data-main-rotation",g)}}e.AnnotationEditorLayer=p}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=r(1),o=r(7),l=r(6);class c extends l.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#s=this.editorDivKeydown.bind(this);#n;#i="";#c=!1;#a;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],c.prototype.commitOrRemove]]);static _type="freetext";constructor(h){super({...h,name:"freeTextEditor"}),this.#n=h.color||c._defaultColor||l.AnnotationEditor._defaultLineColor,this.#a=h.fontSize||c._defaultFontSize}static initialize(h){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(d=>[d,h.get(d)]));const u=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(u.getPropertyValue("--freetext-padding"))}static updateDefaultParams(h,u){switch(h){case i.AnnotationEditorParamsType.FREETEXT_SIZE:c._defaultFontSize=u;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:c._defaultColor=u;break}}updateParams(h,u){switch(h){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(u);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#h(u);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,c._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,c._defaultColor||l.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#a],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#n]]}#r(h){const u=g=>{this.editorDiv.style.fontSize=`calc(${g}px * var(--scale-factor))`,this.translate(0,-(g-this.#a)*this.parent.scaleFactor),this.#a=g,this.#u()},d=this.#a;this.parent.addCommands({cmd:()=>{u(h)},undo:()=>{u(d)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#h(h){const u=this.#n;this.parent.addCommands({cmd:()=>{this.#n=h,this.editorDiv.style.color=h},undo:()=>{this.#n=u,this.editorDiv.style.color=u},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){return[-c._internalPadding*this.parent.scaleFactor,-(c._internalPadding+this.#a)*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",this.#s),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#s),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.div.focus(),this.isEditing=!1)}focusin(h){super.focusin(h),h.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}#l(){const h=this.editorDiv.getElementsByTagName("div");if(h.length===0)return this.editorDiv.innerText;const u=[];for(let d=0,g=h.length;d<g;d++){const S=h[d].firstChild;S?.nodeName==="#text"?u.push(S.data):u.push("")}return u.join(`
`)}#u(){const[h,u]=this.parent.viewportBaseDimensions,d=this.div.getBoundingClientRect();this.width=d.width/h,this.height=d.height/u}commit(){super.commit(),this.#c||(this.#c=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#i=this.#l().trimEnd(),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(h){this.enableEditMode(),this.editorDiv.focus()}keydown(h){h.target===this.div&&h.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(h){c._keyboardManager.exec(this,h)}editorDivFocus(h){this.isEditing=!0}editorDivBlur(h){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let h,u;this.width&&(h=this.x,u=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),c._l10nPromise.get("editor_free_text_aria_label").then(g=>this.editorDiv?.setAttribute("aria-label",g)),c._l10nPromise.get("free_text_default_content").then(g=>this.editorDiv?.setAttribute("default-content",g)),this.editorDiv.contentEditable=!0;const{style:d}=this.editorDiv;if(d.fontSize=`calc(${this.#a}px * var(--scale-factor))`,d.color=this.#n,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[g,y]=this.parent.viewportBaseDimensions;this.setAt(h*g,u*y,this.width*g,this.height*y);for(const S of this.#i.split(`
`)){const E=document.createElement("div");E.append(S?document.createTextNode(S):document.createElement("br")),this.editorDiv.append(E)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(h,u){const d=super.deserialize(h,u);return d.#a=h.fontSize,d.#n=i.Util.makeHexColor(...h.color),d.#i=h.value,d}serialize(){if(this.isEmpty())return null;const h=c._internalPadding*this.parent.scaleFactor,u=this.getRect(h,h),d=l.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:i.AnnotationEditorType.FREETEXT,color:d,fontSize:this.#a,value:this.#i,pageIndex:this.parent.pageIndex,rect:u,rotation:this.rotation}}}e.FreeTextEditor=c}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return l.fitCurve}});var i=r(1),o=r(6),l=r(25),c=r(7);const p=16;class h extends o.AnnotationEditor{#e=0;#t=0;#s=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#c=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#r=!1;#h=!1;#l=null;#u=null;#o=0;#m=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(d){super({...d,name:"inkEditor"}),this.color=d.color||null,this.thickness=d.thickness||null,this.opacity=d.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(d){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(g=>[g,d.get(g)]))}static updateDefaultParams(d,g){switch(d){case i.AnnotationEditorParamsType.INK_THICKNESS:h._defaultThickness=g;break;case i.AnnotationEditorParamsType.INK_COLOR:h._defaultColor=g;break;case i.AnnotationEditorParamsType.INK_OPACITY:h._defaultOpacity=g/100;break}}updateParams(d,g){switch(d){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#C(g);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#T(g);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#P(g);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,h._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,h._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(h._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||h._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||h._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??h._defaultOpacity))]]}#C(d){const g=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=d,this.#x()},undo:()=>{this.thickness=g,this.#x()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#T(d){const g=this.color;this.parent.addCommands({cmd:()=>{this.color=d,this.#f()},undo:()=>{this.color=g,this.#f()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#P(d){d/=100;const g=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=d,this.#f()},undo:()=>{this.opacity=g,this.#f()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(this.#g(),this.#y()),this.isAttachedToDOM||(this.parent.add(this),this.#S()),this.#x())}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#u.disconnect(),this.#u=null,super.remove())}enableEditMode(){this.#r||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#a),this.canvas.addEventListener("pointerup",this.#c))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a),this.canvas.removeEventListener("pointerup",this.#c))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#A(){const{width:d,height:g,rotation:y}=this.parent.viewport;switch(y){case 90:return[0,d,d,g];case 180:return[d,g,d,g];case 270:return[g,0,d,g];default:return[0,0,d,g]}}#_(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,c.opacityToHex)(this.opacity)}`}#d(d,g){this.isEditing=!0,this.#h||(this.#h=!0,this.#S(),this.thickness||=h._defaultThickness,this.color||=h._defaultColor||o.AnnotationEditor._defaultLineColor,this.opacity??=h._defaultOpacity),this.currentPath.push([d,g]),this.#l=null,this.#_(),this.ctx.beginPath(),this.ctx.moveTo(d,g),this.#p=()=>{this.#p&&(this.#l&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#f(),this.ctx.lineTo(...this.#l),this.#l=null,this.ctx.stroke()),window.requestAnimationFrame(this.#p))},window.requestAnimationFrame(this.#p)}#v(d,g){const[y,S]=this.currentPath.at(-1);d===y&&g===S||(this.currentPath.push([d,g]),this.#l=[d,g])}#V(d,g){this.ctx.closePath(),this.#p=null,d=Math.min(Math.max(d,0),this.canvas.width),g=Math.min(Math.max(g,0),this.canvas.height);const[y,S]=this.currentPath.at(-1);(d!==y||g!==S)&&this.currentPath.push([d,g]);let E;if(this.currentPath.length!==1)E=(0,l.fitCurve)(this.currentPath,30,null);else{const b=[d,g];E=[[b,b.slice(),b.slice(),b]]}const x=h.#M(E);this.currentPath.length=0;const A=()=>{this.paths.push(E),this.bezierPath2D.push(x),this.rebuild()},D=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#g(),this.#y()),this.#x())};this.parent.addCommands({cmd:A,undo:D,mustExec:!0})}#f(){if(this.isEmpty()){this.#B();return}this.#_();const{canvas:d,ctx:g}=this;g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,d.width,d.height),this.#B();for(const y of this.bezierPath2D)g.stroke(y)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#x(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(d){super.focusin(d),this.enableEditMode()}canvasPointerdown(d){d.button!==0||!this.isInEditMode()||this.#r||(this.setInForeground(),d.type!=="mouse"&&this.div.focus(),d.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.#d(d.offsetX,d.offsetY))}canvasPointermove(d){d.stopPropagation(),this.#v(d.offsetX,d.offsetY)}canvasPointerup(d){d.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(d.stopPropagation(),this.#E(d),this.setInBackground())}canvasPointerleave(d){this.#E(d),this.setInBackground()}#E(d){this.#V(d.offsetX,d.offsetY),this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.parent.addToAnnotationStorage(this)}#g(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",h._l10nPromise.get("editor_ink_canvas_aria_label").then(d=>this.canvas?.setAttribute("aria-label",d)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#y(){this.#u=new ResizeObserver(d=>{const g=d[0].contentRect;g.width&&g.height&&this.setDimensions(g.width,g.height)}),this.#u.observe(this.div)}render(){if(this.div)return this.div;let d,g;this.width&&(d=this.x,g=this.y),super.render(),h._l10nPromise.get("editor_ink_aria_label").then(A=>this.div?.setAttribute("aria-label",A));const[y,S,E,x]=this.#A();if(this.setAt(y,S,0,0),this.setDims(E,x),this.#g(),this.width){const[A,D]=this.parent.viewportBaseDimensions;this.setAt(d*A,g*D,this.width*A,this.height*D),this.#h=!0,this.#S(),this.setDims(this.width*A,this.height*D),this.#f(),this.#k(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#y(),this.div}#S(){if(!this.#h)return;const[d,g]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*d),this.canvas.height=Math.ceil(this.height*g),this.#B()}setDimensions(d,g){const y=Math.round(d),S=Math.round(g);if(this.#o===y&&this.#m===S)return;this.#o=y,this.#m=S,this.canvas.style.visibility="hidden",this.#e&&Math.abs(this.#e-d/g)>.01&&(g=Math.ceil(d/this.#e),this.setDims(d,g));const[E,x]=this.parent.viewportBaseDimensions;this.width=d/E,this.height=g/x,this.#r&&this.#w(d,g),this.#S(),this.#f(),this.canvas.style.visibility="visible"}#w(d,g){const y=this.#R(),S=(d-y)/this.#s,E=(g-y)/this.#t;this.scaleFactor=Math.min(S,E)}#B(){const d=this.#R()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+d,this.translationY*this.scaleFactor+d)}static#M(d){const g=new Path2D;for(let y=0,S=d.length;y<S;y++){const[E,x,A,D]=d[y];y===0&&g.moveTo(...E),g.bezierCurveTo(x[0],x[1],A[0],A[1],D[0],D[1])}return g}#b(d,g,y,S){const x=[],A=this.thickness/2;let D,b;for(const I of this.paths){D=[],b=[];for(let R=0,q=I.length;R<q;R++){const[G,z,B,M]=I[R],O=d*(G[0]+g)+A,W=S-d*(G[1]+y)-A,K=d*(z[0]+g)+A,se=S-d*(z[1]+y)-A,$=d*(B[0]+g)+A,Q=S-d*(B[1]+y)-A,re=d*(M[0]+g)+A,te=S-d*(M[1]+y)-A;R===0&&(D.push(O,W),b.push(O,W)),D.push(K,se,$,Q,re,te),this.#N(O,W,K,se,$,Q,re,te,4,b)}x.push({bezier:D,points:b})}return x}#N(d,g,y,S,E,x,A,D,b,I){if(this.#F(d,g,y,S,E,x,A,D)){I.push(A,D);return}for(let R=1;R<b-1;R++){const q=R/b,G=1-q;let z=q*d+G*y,B=q*g+G*S,M=q*y+G*E,O=q*S+G*x;const W=q*E+G*A,K=q*x+G*D;z=q*z+G*M,B=q*B+G*O,M=q*M+G*W,O=q*O+G*K,z=q*z+G*M,B=q*B+G*O,I.push(z,B)}I.push(A,D)}#F(d,g,y,S,E,x,A,D){const I=(3*y-2*d-A)**2,R=(3*S-2*g-D)**2,q=(3*E-d-2*A)**2,G=(3*x-g-2*D)**2;return Math.max(I,q)+Math.max(R,G)<=10}#I(){let d=1/0,g=-1/0,y=1/0,S=-1/0;for(const E of this.paths)for(const[x,A,D,b]of E){const I=i.Util.bezierBoundingBox(...x,...A,...D,...b);d=Math.min(d,I[0]),y=Math.min(y,I[1]),g=Math.max(g,I[2]),S=Math.max(S,I[3])}return[d,y,g,S]}#R(){return this.#r?Math.ceil(this.thickness*this.parent.scaleFactor):0}#x(d=!1){if(this.isEmpty())return;if(!this.#r){this.#f();return}const g=this.#I(),y=this.#R();this.#s=Math.max(p,g[2]-g[0]),this.#t=Math.max(p,g[3]-g[1]);const S=Math.ceil(y+this.#s*this.scaleFactor),E=Math.ceil(y+this.#t*this.scaleFactor),[x,A]=this.parent.viewportBaseDimensions;this.width=S/x,this.height=E/A,this.#e=S/E,this.#k();const D=this.translationX,b=this.translationY;this.translationX=-g[0],this.translationY=-g[1],this.#S(),this.#f(),this.#o=S,this.#m=E,this.setDims(S,E);const I=d?y/this.scaleFactor/2:0;this.translate(D-this.translationX-I,b-this.translationY-I)}#k(){const{style:d}=this.div;this.#e>=1?(d.minHeight=`${p}px`,d.minWidth=`${Math.round(this.#e*p)}px`):(d.minWidth=`${p}px`,d.minHeight=`${Math.round(p/this.#e)}px`)}static deserialize(d,g){const y=super.deserialize(d,g);y.thickness=d.thickness,y.color=i.Util.makeHexColor(...d.color),y.opacity=d.opacity;const[S,E]=g.pageDimensions,x=y.width*S,A=y.height*E,D=g.scaleFactor,b=d.thickness/2;y.#e=x/A,y.#r=!0,y.#o=Math.round(x),y.#m=Math.round(A);for(const{bezier:R}of d.paths){const q=[];y.paths.push(q);let G=D*(R[0]-b),z=D*(A-R[1]-b);for(let M=2,O=R.length;M<O;M+=6){const W=D*(R[M]-b),K=D*(A-R[M+1]-b),se=D*(R[M+2]-b),$=D*(A-R[M+3]-b),Q=D*(R[M+4]-b),re=D*(A-R[M+5]-b);q.push([[G,z],[W,K],[se,$],[Q,re]]),G=Q,z=re}const B=this.#M(q);y.bezierPath2D.push(B)}const I=y.#I();return y.#s=Math.max(p,I[2]-I[0]),y.#t=Math.max(p,I[3]-I[1]),y.#w(x,A),y}serialize(){if(this.isEmpty())return null;const d=this.getRect(0,0),g=this.rotation%180===0?d[3]-d[1]:d[2]-d[0],y=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:y,thickness:this.thickness,opacity:this.opacity,paths:this.#b(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,g),pageIndex:this.parent.pageIndex,rect:d,rotation:this.rotation}}}e.InkEditor=h}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const i=r(26);e.fitCurve=i}),(t=>{function e(E,x,A){if(!Array.isArray(E))throw new TypeError("First argument should be an array");if(E.forEach(R=>{if(!Array.isArray(R)||R.some(q=>typeof q!="number")||R.length!==E[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),E=E.filter((R,q)=>q===0||!R.every((G,z)=>G===E[q-1][z])),E.length<2)return[];const D=E.length,b=g(E[1],E[0]),I=g(E[D-2],E[D-1]);return r(E,b,I,x,A)}function r(E,x,A,D,b){var R,q,G,z,B,M,O,W,K,se,$,Q,re;if(E.length===2)return Q=y.vectorLen(y.subtract(E[0],E[1]))/3,R=[E[0],y.addArrays(E[0],y.mulItems(x,Q)),y.addArrays(E[1],y.mulItems(A,Q)),E[1]],[R];if(q=p(E),[R,z,M]=i(E,q,q,x,A,b),z===0||z<D)return[R];if(z<D*D)for(G=q,B=z,O=M,re=0;re<20;re++){if(G=l(R,E,G),[R,z,M]=i(E,q,G,x,A,b),z<D)return[R];if(M===O){let te=z/B;if(te>.9999&&te<1.0001)break}B=z,O=M}return $=[],W=y.subtract(E[M-1],E[M+1]),W.every(te=>te===0)&&(W=y.subtract(E[M-1],E[M]),[W[0],W[1]]=[-W[1],W[0]]),K=y.normalize(W),se=y.mulItems(K,-1),$=$.concat(r(E.slice(0,M+1),x,K,D,b)),$=$.concat(r(E.slice(M),se,A,D,b)),$}function i(E,x,A,D,b,I){var R,q,G;return R=o(E,A,D,b),[q,G]=h(E,R,x),I&&I({bez:R,points:E,params:x,maxErr:q,maxPoint:G}),[R,q,G]}function o(E,x,A,D){var b,I,R,q,G,z,B,M,O,W,K,se,$,Q,re,te,X,L=E[0],C=E[E.length-1];for(b=[L,null,null,C],I=y.zeros_Xx2x2(x.length),$=0,Q=x.length;$<Q;$++)te=x[$],X=1-te,R=I[$],R[0]=y.mulItems(A,3*te*(X*X)),R[1]=y.mulItems(D,3*X*(te*te));for(q=[[0,0],[0,0]],G=[0,0],$=0,Q=E.length;$<Q;$++)te=x[$],R=I[$],q[0][0]+=y.dot(R[0],R[0]),q[0][1]+=y.dot(R[0],R[1]),q[1][0]+=y.dot(R[0],R[1]),q[1][1]+=y.dot(R[1],R[1]),re=y.subtract(E[$],S.q([L,L,C,C],te)),G[0]+=y.dot(R[0],re),G[1]+=y.dot(R[1],re);return z=q[0][0]*q[1][1]-q[1][0]*q[0][1],B=q[0][0]*G[1]-q[1][0]*G[0],M=G[0]*q[1][1]-G[1]*q[0][1],O=z===0?0:M/z,W=z===0?0:B/z,se=y.vectorLen(y.subtract(L,C)),K=1e-6*se,O<K||W<K?(b[1]=y.addArrays(L,y.mulItems(A,se/3)),b[2]=y.addArrays(C,y.mulItems(D,se/3))):(b[1]=y.addArrays(L,y.mulItems(A,O)),b[2]=y.addArrays(C,y.mulItems(D,W))),b}function l(E,x,A){return A.map((D,b)=>c(E,x[b],D))}function c(E,x,A){var D=y.subtract(S.q(E,A),x),b=S.qprime(E,A),I=y.mulMatrix(D,b),R=y.sum(y.squareItems(b))+2*y.mulMatrix(D,S.qprimeprime(E,A));return R===0?A:A-I/R}function p(E){var x=[],A,D,b;return E.forEach((I,R)=>{A=R?D+y.vectorLen(y.subtract(I,b)):0,x.push(A),D=A,b=I}),x=x.map(I=>I/D),x}function h(E,x,A){var D,b,I,R,q,G,z,B;b=0,I=Math.floor(E.length/2);const M=u(x,10);for(q=0,G=E.length;q<G;q++)z=E[q],B=d(x,A[q],M,10),R=y.subtract(S.q(x,B),z),D=R[0]*R[0]+R[1]*R[1],D>b&&(b=D,I=q);return[b,I]}var u=function(E,x){for(var A,D=[0],b=E[0],I=0,R=1;R<=x;R++)A=S.q(E,R/x),I+=y.vectorLen(y.subtract(A,b)),D.push(I),b=A;return D=D.map(q=>q/I),D};function d(E,x,A,D){if(x<0)return 0;if(x>1)return 1;for(var b,I,R,q,G,z=1;z<=D;z++)if(x<=A[z]){q=(z-1)/D,R=z/D,I=A[z-1],b=A[z],G=(x-I)/(b-I)*(R-q)+q;break}return G}function g(E,x){return y.normalize(y.subtract(E,x))}class y{static zeros_Xx2x2(x){for(var A=[];x--;)A.push([0,0]);return A}static mulItems(x,A){return x.map(D=>D*A)}static mulMatrix(x,A){return x.reduce((D,b,I)=>D+b*A[I],0)}static subtract(x,A){return x.map((D,b)=>D-A[b])}static addArrays(x,A){return x.map((D,b)=>D+A[b])}static addItems(x,A){return x.map(D=>D+A)}static sum(x){return x.reduce((A,D)=>A+D)}static dot(x,A){return y.mulMatrix(x,A)}static vectorLen(x){return Math.hypot(...x)}static divItems(x,A){return x.map(D=>D/A)}static squareItems(x){return x.map(A=>A*A)}static normalize(x){return this.divItems(x,this.vectorLen(x))}}class S{static q(x,A){var D=1-A,b=y.mulItems(x[0],D*D*D),I=y.mulItems(x[1],3*D*D*A),R=y.mulItems(x[2],3*D*A*A),q=y.mulItems(x[3],A*A*A);return y.addArrays(y.addArrays(b,I),y.addArrays(R,q))}static qprime(x,A){var D=1-A,b=y.mulItems(y.subtract(x[1],x[0]),3*D*D),I=y.mulItems(y.subtract(x[2],x[1]),6*D*A),R=y.mulItems(y.subtract(x[3],x[2]),3*A*A);return y.addArrays(y.addArrays(b,I),R)}static qprimeprime(x,A){return y.addArrays(y.mulItems(y.addArrays(y.subtract(x[2],y.mulItems(x[1],2)),x[0]),6*(1-A)),y.mulItems(y.addArrays(y.subtract(x[3],y.mulItems(x[2],2)),x[1]),6*A))}}t.exports=e,t.exports.fitCubic=r,t.exports.createTangent=g}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var i=r(1),o=r(8),l=r(5),c=r(28),p=r(29);const h=1e3,u=9,d=new WeakSet;function g(N){return{width:N[2]-N[0],height:N[3]-N[1]}}class y{static create(P){switch(P.data.annotationType){case i.AnnotationType.LINK:return new E(P);case i.AnnotationType.TEXT:return new x(P);case i.AnnotationType.WIDGET:switch(P.data.fieldType){case"Tx":return new D(P);case"Btn":return P.data.radioButton?new I(P):P.data.checkBox?new b(P):new R(P);case"Ch":return new q(P)}return new A(P);case i.AnnotationType.POPUP:return new G(P);case i.AnnotationType.FREETEXT:return new B(P);case i.AnnotationType.LINE:return new M(P);case i.AnnotationType.SQUARE:return new O(P);case i.AnnotationType.CIRCLE:return new W(P);case i.AnnotationType.POLYLINE:return new K(P);case i.AnnotationType.CARET:return new $(P);case i.AnnotationType.INK:return new Q(P);case i.AnnotationType.POLYGON:return new se(P);case i.AnnotationType.HIGHLIGHT:return new re(P);case i.AnnotationType.UNDERLINE:return new te(P);case i.AnnotationType.SQUIGGLY:return new X(P);case i.AnnotationType.STRIKEOUT:return new L(P);case i.AnnotationType.STAMP:return new C(P);case i.AnnotationType.FILEATTACHMENT:return new v(P);default:return new S(P)}}}class S{constructor(P,{isRenderable:T=!1,ignoreBorder:w=!1,createQuadrilaterals:F=!1}={}){this.isRenderable=T,this.data=P.data,this.layer=P.layer,this.page=P.page,this.viewport=P.viewport,this.linkService=P.linkService,this.downloadManager=P.downloadManager,this.imageResourcesPath=P.imageResourcesPath,this.renderForms=P.renderForms,this.svgFactory=P.svgFactory,this.annotationStorage=P.annotationStorage,this.enableScripting=P.enableScripting,this.hasJSActions=P.hasJSActions,this._fieldObjects=P.fieldObjects,this._mouseState=P.mouseState,T&&(this.container=this._createContainer(w)),F&&(this.quadrilaterals=this._createQuadrilaterals(w))}_createContainer(P=!1){const T=this.data,w=this.page,F=this.viewport,U=document.createElement("section"),{width:H,height:Y}=g(T.rect),[ne,ae,ee,ce]=F.viewBox,pe=ee-ne,he=ce-ae;U.setAttribute("data-annotation-id",T.id);const _e=i.Util.normalizeRect([T.rect[0],w.view[3]-T.rect[1]+w.view[1],T.rect[2],w.view[3]-T.rect[3]+w.view[1]]);if(!P&&T.borderStyle.width>0){U.style.borderWidth=`${T.borderStyle.width}px`;const Ce=T.borderStyle.horizontalCornerRadius,Re=T.borderStyle.verticalCornerRadius;if(Ce>0||Re>0){const He=`calc(${Ce}px * var(--scale-factor)) / calc(${Re}px * var(--scale-factor))`;U.style.borderRadius=He}else if(this instanceof I){const He=`calc(${H}px * var(--scale-factor)) / calc(${Y}px * var(--scale-factor))`;U.style.borderRadius=He}switch(T.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:U.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:U.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:U.style.borderBottomStyle="solid";break}const ve=T.borderColor||null;ve?U.style.borderColor=i.Util.makeHexColor(ve[0]|0,ve[1]|0,ve[2]|0):U.style.borderWidth=0}U.style.left=`${100*(_e[0]-ne)/pe}%`,U.style.top=`${100*(_e[1]-ae)/he}%`;const{rotation:Ee}=T;return T.hasOwnCanvas||Ee===0?(U.style.width=`${100*H/pe}%`,U.style.height=`${100*Y/he}%`):this.setRotation(Ee,U),U}setRotation(P,T=this.container){const[w,F,U,H]=this.viewport.viewBox,Y=U-w,ne=H-F,{width:ae,height:ee}=g(this.data.rect);let ce,pe;P%180===0?(ce=100*ae/Y,pe=100*ee/ne):(ce=100*ee/Y,pe=100*ae/ne),T.style.width=`${ce}%`,T.style.height=`${pe}%`,T.setAttribute("data-main-rotation",(360-P)%360)}get _commonActions(){const P=(T,w,F)=>{const U=F.detail[T];F.target.style[w]=c.ColorConverters[`${U[0]}_HTML`](U.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:T=>{const w=T.detail.display%2===1;this.container.style.visibility=w?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:w,print:T.detail.display===0||T.detail.display===3})},print:T=>{this.annotationStorage.setValue(this.data.id,{print:T.detail.print})},hidden:T=>{this.container.style.visibility=T.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:T.detail.hidden})},focus:T=>{setTimeout(()=>T.target.focus({preventScroll:!1}),0)},userName:T=>{T.target.title=T.detail.userName},readonly:T=>{T.detail.readonly?T.target.setAttribute("readonly",""):T.target.removeAttribute("readonly")},required:T=>{this._setRequired(T.target,T.detail.required)},bgColor:T=>{P("bgColor","backgroundColor",T)},fillColor:T=>{P("fillColor","backgroundColor",T)},fgColor:T=>{P("fgColor","color",T)},textColor:T=>{P("textColor","color",T)},borderColor:T=>{P("borderColor","borderColor",T)},strokeColor:T=>{P("strokeColor","borderColor",T)},rotation:T=>{const w=T.detail.rotation;this.setRotation(w),this.annotationStorage.setValue(this.data.id,{rotation:w})}})}_dispatchEventFromSandbox(P,T){const w=this._commonActions;for(const F of Object.keys(T.detail)){const U=P[F]||w[F];U&&U(T)}}_setDefaultPropertiesFromJS(P){if(!this.enableScripting)return;const T=this.annotationStorage.getRawValue(this.data.id);if(!T)return;const w=this._commonActions;for(const[F,U]of Object.entries(T)){const H=w[F];if(H){const Y={detail:{[F]:U},target:P};H(Y),delete T[F]}}}_createQuadrilaterals(P=!1){if(!this.data.quadPoints)return null;const T=[],w=this.data.rect;for(const F of this.data.quadPoints)this.data.rect=[F[2].x,F[2].y,F[1].x,F[1].y],T.push(this._createContainer(P));return this.data.rect=w,T}_createPopup(P,T){let w=this.container;this.quadrilaterals&&(P=P||this.quadrilaterals,w=this.quadrilaterals[0]),P||(P=document.createElement("div"),P.className="popupTriggerArea",w.append(P));const U=new z({container:w,trigger:P,color:T.color,titleObj:T.titleObj,modificationDate:T.modificationDate,contentsObj:T.contentsObj,richText:T.richText,hideWrapper:!0}).render();U.style.left="100%",w.append(U)}_renderQuadrilaterals(P){for(const T of this.quadrilaterals)T.className=P;return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(P,T=null){const w=[];if(this._fieldObjects){const F=this._fieldObjects[P];if(F)for(const{page:U,id:H,exportValues:Y}of F){if(U===-1||H===T)continue;const ne=typeof Y=="string"?Y:null,ae=document.querySelector(`[data-element-id="${H}"]`);if(ae&&!d.has(ae)){(0,i.warn)(`_getElementsByName - element not allowed: ${H}`);continue}w.push({id:H,exportValue:ne,domElement:ae})}return w}for(const F of document.getElementsByName(P)){const{id:U,exportValue:H}=F;U!==T&&d.has(F)&&w.push({id:U,exportValue:H,domElement:F})}return w}static get platform(){const P=typeof navigator<"u"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:P.includes("Win"),isMac:P.includes("Mac")})}}class E extends S{constructor(P,T=null){super(P,{isRenderable:!0,ignoreBorder:!!T?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=P.data.isTooltipOnly}render(){const{data:P,linkService:T}=this,w=document.createElement("a");w.setAttribute("data-element-id",P.id);let F=!1;return P.url?(T.addLinkAttributes(w,P.url,P.newWindow),F=!0):P.action?(this._bindNamedAction(w,P.action),F=!0):P.dest?(this._bindLink(w,P.dest),F=!0):(P.actions&&(P.actions.Action||P.actions["Mouse Up"]||P.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(w,P),F=!0),P.resetForm?(this._bindResetFormAction(w,P.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(w,""),F=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((U,H)=>{const Y=H===0?w:w.cloneNode();return U.append(Y),U}):(this.container.className="linkAnnotation",F&&this.container.append(w),this.container)}_bindLink(P,T){P.href=this.linkService.getDestinationHash(T),P.onclick=()=>(T&&this.linkService.goToDestination(T),!1),(T||T==="")&&(P.className="internalLink")}_bindNamedAction(P,T){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeNamedAction(T),!1),P.className="internalLink"}_bindJSAction(P,T){P.href=this.linkService.getAnchorUrl("");const w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(T.actions)){const U=w.get(F);U&&(P[U]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T.id,name:F}}),!1))}P.onclick||(P.onclick=()=>!1),P.className="internalLink"}_bindResetFormAction(P,T){const w=P.onclick;if(w||(P.href=this.linkService.getAnchorUrl("")),P.className="internalLink",!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),w||(P.onclick=()=>!1);return}P.onclick=()=>{w&&w();const{fields:F,refs:U,include:H}=T,Y=[];if(F.length!==0||U.length!==0){const ee=new Set(U);for(const ce of F){const pe=this._fieldObjects[ce]||[];for(const{id:he}of pe)ee.add(he)}for(const ce of Object.values(this._fieldObjects))for(const pe of ce)ee.has(pe.id)===H&&Y.push(pe)}else for(const ee of Object.values(this._fieldObjects))Y.push(...ee);const ne=this.annotationStorage,ae=[];for(const ee of Y){const{id:ce}=ee;switch(ae.push(ce),ee.type){case"text":{const he=ee.defaultValue||"";ne.setValue(ce,{value:he});break}case"checkbox":case"radiobutton":{const he=ee.defaultValue===ee.exportValues;ne.setValue(ce,{value:he});break}case"combobox":case"listbox":{const he=ee.defaultValue||"";ne.setValue(ce,{value:he});break}default:continue}const pe=document.querySelector(`[data-element-id="${ce}"]`);if(pe){if(!d.has(pe)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${ce}`);continue}}else continue;pe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ae,name:"ResetForm"}}),!1}}}class x extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T})}render(){this.container.className="textAnnotation";const P=document.createElement("img");return P.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",P.alt="[{{type}} Annotation]",P.dataset.l10nId="text_annotation_type",P.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(P,this.data),this.container.append(P),this.container}}class A extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(P){const{isWin:T,isMac:w}=S.platform;return T&&P.ctrlKey||w&&P.metaKey}_setEventListener(P,T,w,F){T.includes("mouse")?P.addEventListener(T,U=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:F(U),shift:U.shiftKey,modifier:this._getKeyModifier(U)}})}):P.addEventListener(T,U=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:F(U)}})})}_setEventListeners(P,T,w){for(const[F,U]of T)(U==="Action"||this.data.actions?.[U])&&this._setEventListener(P,F,U,w)}_setBackgroundColor(P){const T=this.data.backgroundColor||null;P.style.backgroundColor=T===null?"transparent":i.Util.makeHexColor(T[0],T[1],T[2])}_setTextStyle(P){const T=["left","center","right"],{fontColor:w}=this.data.defaultAppearanceData,F=this.data.defaultAppearanceData.fontSize||u,U=P.style;let H;if(this.data.multiLine){const Y=Math.abs(this.data.rect[3]-this.data.rect[1]),ne=Math.round(Y/(i.LINE_FACTOR*F))||1,ae=Y/ne;H=Math.min(F,Math.round(ae/i.LINE_FACTOR))}else{const Y=Math.abs(this.data.rect[3]-this.data.rect[1]);H=Math.min(F,Math.round(Y/i.LINE_FACTOR))}U.fontSize=`calc(${H}px * var(--scale-factor))`,U.color=i.Util.makeHexColor(w[0],w[1],w[2]),this.data.textAlignment!==null&&(U.textAlign=T[this.data.textAlignment])}_setRequired(P,T){T?P.setAttribute("required",!0):P.removeAttribute("required"),P.setAttribute("aria-required",T)}}class D extends A{constructor(P){const T=P.renderForms||!P.data.hasAppearance&&!!P.data.fieldValue;super(P,{isRenderable:T})}setPropertyOnSiblings(P,T,w,F){const U=this.annotationStorage;for(const H of this._getElementsByName(P.name,P.id))H.domElement&&(H.domElement[T]=w),U.setValue(H.id,{[F]:w})}render(){const P=this.annotationStorage,T=this.data.id;this.container.className="textWidgetAnnotation";let w=null;if(this.renderForms){const F=P.getValue(T,{value:this.data.fieldValue});let U=F.formattedValue||F.value||"";const H=P.getValue(T,{charLimit:this.data.maxLen}).charLimit;H&&U.length>H&&(U=U.slice(0,H));const Y={userValue:U,formattedValue:null,valueOnFocus:""};this.data.multiLine?(w=document.createElement("textarea"),w.textContent=U,this.data.doNotScroll&&(w.style.overflowY="hidden")):(w=document.createElement("input"),w.type="text",w.setAttribute("value",U),this.data.doNotScroll&&(w.style.overflowX="hidden")),d.add(w),w.setAttribute("data-element-id",T),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=h,this._setRequired(w,this.data.required),H&&(w.maxLength=H),w.addEventListener("input",ae=>{P.setValue(T,{value:ae.target.value}),this.setPropertyOnSiblings(w,"value",ae.target.value,"value")}),w.addEventListener("resetform",ae=>{const ee=this.data.defaultFieldValue??"";w.value=Y.userValue=ee,Y.formattedValue=null});let ne=ae=>{const{formattedValue:ee}=Y;ee!=null&&(ae.target.value=ee),ae.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){w.addEventListener("focus",ee=>{Y.userValue&&(ee.target.value=Y.userValue),Y.valueOnFocus=ee.target.value}),w.addEventListener("updatefromsandbox",ee=>{const ce={value(pe){Y.userValue=pe.detail.value??"",P.setValue(T,{value:Y.userValue.toString()}),pe.target.value=Y.userValue},formattedValue(pe){const{formattedValue:he}=pe.detail;Y.formattedValue=he,he!=null&&pe.target!==document.activeElement&&(pe.target.value=he),P.setValue(T,{formattedValue:he})},selRange(pe){pe.target.setSelectionRange(...pe.detail.selRange)},charLimit:pe=>{const{charLimit:he}=pe.detail,{target:_e}=pe;if(he===0){_e.removeAttribute("maxLength");return}_e.setAttribute("maxLength",he);let Ee=Y.userValue;!Ee||Ee.length<=he||(Ee=Ee.slice(0,he),_e.value=Y.userValue=Ee,P.setValue(T,{value:Ee}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:Ee,willCommit:!0,commitKey:1,selStart:_e.selectionStart,selEnd:_e.selectionEnd}}))}};this._dispatchEventFromSandbox(ce,ee)}),w.addEventListener("keydown",ee=>{let ce=-1;if(ee.key==="Escape"?ce=0:ee.key==="Enter"?ce=2:ee.key==="Tab"&&(ce=3),ce===-1)return;const{value:pe}=ee.target;Y.valueOnFocus!==pe&&(Y.userValue=pe,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:pe,willCommit:!0,commitKey:ce,selStart:ee.target.selectionStart,selEnd:ee.target.selectionEnd}}))});const ae=ne;ne=null,w.addEventListener("blur",ee=>{const{value:ce}=ee.target;Y.userValue=ce,this._mouseState.isDown&&Y.valueOnFocus!==ce&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:ce,willCommit:!0,commitKey:1,selStart:ee.target.selectionStart,selEnd:ee.target.selectionEnd}}),ae(ee)}),this.data.actions?.Keystroke&&w.addEventListener("beforeinput",ee=>{const{data:ce,target:pe}=ee,{value:he,selectionStart:_e,selectionEnd:Ee}=pe;let Ce=_e,Re=Ee;switch(ee.inputType){case"deleteWordBackward":{const ve=he.substring(0,_e).match(/\w*[^\w]*$/);ve&&(Ce-=ve[0].length);break}case"deleteWordForward":{const ve=he.substring(_e).match(/^[^\w]*\w*/);ve&&(Re+=ve[0].length);break}case"deleteContentBackward":_e===Ee&&(Ce-=1);break;case"deleteContentForward":_e===Ee&&(Re+=1);break}ee.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:he,change:ce||"",willCommit:!1,selStart:Ce,selEnd:Re}})}),this._setEventListeners(w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ee=>ee.target.value)}if(ne&&w.addEventListener("blur",ne),this.data.comb){const ee=(this.data.rect[2]-this.data.rect[0])/H;w.classList.add("comb"),w.style.letterSpacing=`calc(${ee}px * var(--scale-factor) - 1ch)`}}else w=document.createElement("div"),w.textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class b extends A{constructor(P){super(P,{isRenderable:P.renderForms})}render(){const P=this.annotationStorage,T=this.data,w=T.id;let F=P.getValue(w,{value:T.exportValue===T.fieldValue}).value;typeof F=="string"&&(F=F!=="Off",P.setValue(w,{value:F})),this.container.className="buttonWidgetAnnotation checkBox";const U=document.createElement("input");return d.add(U),U.setAttribute("data-element-id",w),U.disabled=T.readOnly,this._setRequired(U,this.data.required),U.type="checkbox",U.name=T.fieldName,F&&U.setAttribute("checked",!0),U.setAttribute("exportValue",T.exportValue),U.tabIndex=h,U.addEventListener("change",H=>{const{name:Y,checked:ne}=H.target;for(const ae of this._getElementsByName(Y,w)){const ee=ne&&ae.exportValue===T.exportValue;ae.domElement&&(ae.domElement.checked=ee),P.setValue(ae.id,{value:ee})}P.setValue(w,{value:ne})}),U.addEventListener("resetform",H=>{const Y=T.defaultFieldValue||"Off";H.target.checked=Y===T.exportValue}),this.enableScripting&&this.hasJSActions&&(U.addEventListener("updatefromsandbox",H=>{const Y={value(ne){ne.target.checked=ne.detail.value!=="Off",P.setValue(w,{value:ne.target.checked})}};this._dispatchEventFromSandbox(Y,H)}),this._setEventListeners(U,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class I extends A{constructor(P){super(P,{isRenderable:P.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const P=this.annotationStorage,T=this.data,w=T.id;let F=P.getValue(w,{value:T.fieldValue===T.buttonValue}).value;typeof F=="string"&&(F=F!==T.buttonValue,P.setValue(w,{value:F}));const U=document.createElement("input");if(d.add(U),U.setAttribute("data-element-id",w),U.disabled=T.readOnly,this._setRequired(U,this.data.required),U.type="radio",U.name=T.fieldName,F&&U.setAttribute("checked",!0),U.tabIndex=h,U.addEventListener("change",H=>{const{name:Y,checked:ne}=H.target;for(const ae of this._getElementsByName(Y,w))P.setValue(ae.id,{value:!1});P.setValue(w,{value:ne})}),U.addEventListener("resetform",H=>{const Y=T.defaultFieldValue;H.target.checked=Y!=null&&Y===T.buttonValue}),this.enableScripting&&this.hasJSActions){const H=T.buttonValue;U.addEventListener("updatefromsandbox",Y=>{const ne={value:ae=>{const ee=H===ae.detail.value;for(const ce of this._getElementsByName(ae.target.name)){const pe=ee&&ce.id===w;ce.domElement&&(ce.domElement.checked=pe),P.setValue(ce.id,{value:pe})}}};this._dispatchEventFromSandbox(ne,Y)}),this._setEventListeners(U,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class R extends E{constructor(P){super(P,{ignoreBorder:P.data.hasAppearance})}render(){const P=super.render();P.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(P.title=this.data.alternativeText);const T=P.lastChild;return this.enableScripting&&this.hasJSActions&&T&&(this._setDefaultPropertiesFromJS(T),T.addEventListener("updatefromsandbox",w=>{this._dispatchEventFromSandbox({},w)})),P}}class q extends A{constructor(P){super(P,{isRenderable:P.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const P=this.annotationStorage,T=this.data.id,w=P.getValue(T,{value:this.data.fieldValue}),F=document.createElement("select");d.add(F),F.setAttribute("data-element-id",T),F.disabled=this.data.readOnly,this._setRequired(F,this.data.required),F.name=this.data.fieldName,F.tabIndex=h;let U=this.data.combo&&this.data.options.length>0;this.data.combo||(F.size=this.data.options.length,this.data.multiSelect&&(F.multiple=!0)),F.addEventListener("resetform",ae=>{const ee=this.data.defaultFieldValue;for(const ce of F.options)ce.selected=ce.value===ee});for(const ae of this.data.options){const ee=document.createElement("option");ee.textContent=ae.displayValue,ee.value=ae.exportValue,w.value.includes(ae.exportValue)&&(ee.setAttribute("selected",!0),U=!1),F.append(ee)}let H=null;if(U){const ae=document.createElement("option");ae.value=" ",ae.setAttribute("hidden",!0),ae.setAttribute("selected",!0),F.prepend(ae),H=()=>{ae.remove(),F.removeEventListener("input",H),H=null},F.addEventListener("input",H)}const Y=(ae,ee)=>{const ce=ee?"value":"textContent",pe=ae.target.options;return ae.target.multiple?Array.prototype.filter.call(pe,he=>he.selected).map(he=>he[ce]):pe.selectedIndex===-1?null:pe[pe.selectedIndex][ce]},ne=ae=>{const ee=ae.target.options;return Array.prototype.map.call(ee,ce=>({displayValue:ce.textContent,exportValue:ce.value}))};return this.enableScripting&&this.hasJSActions?(F.addEventListener("updatefromsandbox",ae=>{const ee={value(ce){H?.();const pe=ce.detail.value,he=new Set(Array.isArray(pe)?pe:[pe]);for(const _e of F.options)_e.selected=he.has(_e.value);P.setValue(T,{value:Y(ce,!0)})},multipleSelection(ce){F.multiple=!0},remove(ce){const pe=F.options,he=ce.detail.remove;pe[he].selected=!1,F.remove(he),pe.length>0&&Array.prototype.findIndex.call(pe,Ee=>Ee.selected)===-1&&(pe[0].selected=!0),P.setValue(T,{value:Y(ce,!0),items:ne(ce)})},clear(ce){for(;F.length!==0;)F.remove(0);P.setValue(T,{value:null,items:[]})},insert(ce){const{index:pe,displayValue:he,exportValue:_e}=ce.detail.insert,Ee=F.children[pe],Ce=document.createElement("option");Ce.textContent=he,Ce.value=_e,Ee?Ee.before(Ce):F.append(Ce),P.setValue(T,{value:Y(ce,!0),items:ne(ce)})},items(ce){const{items:pe}=ce.detail;for(;F.length!==0;)F.remove(0);for(const he of pe){const{displayValue:_e,exportValue:Ee}=he,Ce=document.createElement("option");Ce.textContent=_e,Ce.value=Ee,F.append(Ce)}F.options.length>0&&(F.options[0].selected=!0),P.setValue(T,{value:Y(ce,!0),items:ne(ce)})},indices(ce){const pe=new Set(ce.detail.indices);for(const he of ce.target.options)he.selected=pe.has(he.index);P.setValue(T,{value:Y(ce,!0)})},editable(ce){ce.target.disabled=!ce.detail.editable}};this._dispatchEventFromSandbox(ee,ae)}),F.addEventListener("input",ae=>{const ee=Y(ae,!0),ce=Y(ae,!1);P.setValue(T,{value:ee}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:T,name:"Keystroke",value:ce,changeEx:ee,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ae=>ae.target.checked)):F.addEventListener("input",function(ae){P.setValue(T,{value:Y(ae,!0)})}),this.data.combo&&this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class G extends S{constructor(P){const T=!!(P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T})}render(){const P=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",P.includes(this.data.parentType))return this.container;const T=`[data-annotation-id="${this.data.parentId}"]`,w=this.layer.querySelectorAll(T);if(w.length===0)return this.container;const F=new z({container:this.container,trigger:Array.from(w),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),U=this.page,H=i.Util.normalizeRect([this.data.parentRect[0],U.view[3]-this.data.parentRect[1]+U.view[1],this.data.parentRect[2],U.view[3]-this.data.parentRect[3]+U.view[1]]),Y=H[0]+this.data.parentRect[2]-this.data.parentRect[0],ne=H[1],[ae,ee,ce,pe]=this.viewport.viewBox,he=ce-ae,_e=pe-ee;return this.container.style.left=`${100*(Y-ae)/he}%`,this.container.style.top=`${100*(ne-ee)/_e}%`,this.container.append(F.render()),this.container}}class z{constructor(P){this.container=P.container,this.trigger=P.trigger,this.color=P.color,this.titleObj=P.titleObj,this.modificationDate=P.modificationDate,this.contentsObj=P.contentsObj,this.richText=P.richText,this.hideWrapper=P.hideWrapper||!1,this.pinned=!1}render(){const T=document.createElement("div");T.className="popupWrapper",this.hideElement=this.hideWrapper?T:this.container,this.hideElement.hidden=!0;const w=document.createElement("div");w.className="popup";const F=this.color;if(F){const Y=.7*(255-F[0])+F[0],ne=.7*(255-F[1])+F[1],ae=.7*(255-F[2])+F[2];w.style.backgroundColor=i.Util.makeHexColor(Y|0,ne|0,ae|0)}const U=document.createElement("h1");U.dir=this.titleObj.dir,U.textContent=this.titleObj.str,w.append(U);const H=o.PDFDateString.toDateObject(this.modificationDate);if(H){const Y=document.createElement("span");Y.className="popupDate",Y.textContent="{{date}}, {{time}}",Y.dataset.l10nId="annotation_date_string",Y.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),w.append(Y)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))p.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:w}),w.lastChild.className="richText popupContent";else{const Y=this._formatContents(this.contentsObj);w.append(Y)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Y of this.trigger)Y.addEventListener("click",this._toggle.bind(this)),Y.addEventListener("mouseover",this._show.bind(this,!1)),Y.addEventListener("mouseout",this._hide.bind(this,!1));return w.addEventListener("click",this._hide.bind(this,!0)),T.append(w),T}_formatContents({str:P,dir:T}){const w=document.createElement("p");w.className="popupContent",w.dir=T;const F=P.split(/(?:\r\n?|\n)/);for(let U=0,H=F.length;U<H;++U){const Y=F[U];w.append(document.createTextNode(Y)),U<H-1&&w.append(document.createElement("br"))}return w}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(P=!1){P&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(P=!0){P&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class B extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0}),this.textContent=P.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const P=document.createElement("div");P.className="annotationTextContent",P.setAttribute("role","comment");for(const T of this.textContent){const w=document.createElement("span");w.textContent=T,P.append(w)}this.container.append(P)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const P=this.data,{width:T,height:w}=g(P.rect),F=this.svgFactory.create(T,w,!0),U=this.svgFactory.createElement("svg:line");return U.setAttribute("x1",P.rect[2]-P.lineCoordinates[0]),U.setAttribute("y1",P.rect[3]-P.lineCoordinates[1]),U.setAttribute("x2",P.rect[2]-P.lineCoordinates[2]),U.setAttribute("y2",P.rect[3]-P.lineCoordinates[3]),U.setAttribute("stroke-width",P.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),F.append(U),this.container.append(F),this._createPopup(U,P),this.container}}class O extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const P=this.data,{width:T,height:w}=g(P.rect),F=this.svgFactory.create(T,w,!0),U=P.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",U/2),H.setAttribute("y",U/2),H.setAttribute("width",T-U),H.setAttribute("height",w-U),H.setAttribute("stroke-width",U||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),this._createPopup(H,P),this.container}}class W extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const P=this.data,{width:T,height:w}=g(P.rect),F=this.svgFactory.create(T,w,!0),U=P.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",T/2),H.setAttribute("cy",w/2),H.setAttribute("rx",T/2-U/2),H.setAttribute("ry",w/2-U/2),H.setAttribute("stroke-width",U||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),this._createPopup(H,P),this.container}}class K extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const P=this.data,{width:T,height:w}=g(P.rect),F=this.svgFactory.create(T,w,!0);let U=[];for(const Y of P.vertices){const ne=Y.x-P.rect[0],ae=P.rect[3]-Y.y;U.push(ne+","+ae)}U=U.join(" ");const H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",U),H.setAttribute("stroke-width",P.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),this._createPopup(H,P),this.container}}class se extends K{constructor(P){super(P),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $ extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const P=this.data,{width:T,height:w}=g(P.rect),F=this.svgFactory.create(T,w,!0);for(const U of P.inkLists){let H=[];for(const ne of U){const ae=ne.x-P.rect[0],ee=P.rect[3]-ne.y;H.push(`${ae},${ee}`)}H=H.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);Y.setAttribute("points",H),Y.setAttribute("stroke-width",P.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),this._createPopup(Y,P),F.append(Y)}return this.container.append(F),this.container}}class re extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class te extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class X extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class L extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class C extends S{constructor(P){const T=!!(P.data.hasPopup||P.data.titleObj?.str||P.data.contentsObj?.str||P.data.richText?.str);super(P,{isRenderable:T,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class v extends S{constructor(P){super(P,{isRenderable:!0});const{filename:T,content:w}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(T),this.content=w,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:T,content:w})}render(){this.container.className="fileAttachmentAnnotation";const P=document.createElement("div");return P.className="popupTriggerArea",P.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(P,this.data),this.container.append(P),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class V{static#e(P,T,w,F){const U=P.firstChild||P;U.id=`${o.AnnotationPrefix}${T}`,w.append(P),F?.moveElementInDOM(w,P,U,!1)}static render(P){const{annotations:T,div:w,viewport:F,accessibilityManager:U}=P;this.#t(w,F);let H=0;for(const Y of T){if(Y.annotationType!==i.AnnotationType.POPUP){const{width:ae,height:ee}=g(Y.rect);if(ae<=0||ee<=0)continue}const ne=y.create({data:Y,layer:w,page:P.page,viewport:F,linkService:P.linkService,downloadManager:P.downloadManager,imageResourcesPath:P.imageResourcesPath||"",renderForms:P.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:P.annotationStorage||new l.AnnotationStorage,enableScripting:P.enableScripting,hasJSActions:P.hasJSActions,fieldObjects:P.fieldObjects,mouseState:P.mouseState||{isDown:!1}});if(ne.isRenderable){const ae=ne.render();if(Y.hidden&&(ae.style.visibility="hidden"),Array.isArray(ae))for(const ee of ae)ee.style.zIndex=H++,V.#e(ee,Y.id,w,U);else ae.style.zIndex=H++,ne instanceof G?w.prepend(ae):V.#e(ae,Y.id,w,U)}}this.#s(w,P.annotationCanvasMap)}static update(P){const{annotationCanvasMap:T,div:w,viewport:F}=P;this.#t(w,F),this.#s(w,T),w.hidden=!1}static#t(P,{width:T,height:w,rotation:F}){const{style:U}=P,H=F%180!==0,Y=Math.floor(T)+"px",ne=Math.floor(w)+"px";U.width=H?ne:Y,U.height=H?Y:ne,P.setAttribute("data-main-rotation",F)}static#s(P,T){if(T){for(const[w,F]of T){const U=P.querySelector(`[data-annotation-id="${w}"]`);if(!U)continue;const{firstChild:H}=U;H?H.nodeName==="CANVAS"?H.replaceWith(F):H.before(F):U.append(F)}T.clear()}}}e.AnnotationLayer=V}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function r(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([l,c,p,h]){return["G",1-Math.min(1,.3*l+.59*p+.11*c+h)]}static G_CMYK([l]){return["CMYK",0,0,0,1-l]}static G_RGB([l]){return["RGB",l,l,l]}static G_HTML([l]){const c=r(l);return`#${c}${c}${c}`}static RGB_G([l,c,p]){return["G",.3*l+.59*c+.11*p]}static RGB_HTML([l,c,p]){const h=r(l),u=r(c),d=r(p);return`#${h}${u}${d}`}static T_HTML(){return"#00000000"}static CMYK_RGB([l,c,p,h]){return["RGB",1-Math.min(1,l+h),1-Math.min(1,p+h),1-Math.min(1,c+h)]}static CMYK_HTML(l){const c=this.CMYK_RGB(l).slice(1);return this.RGB_HTML(c)}static RGB_CMYK([l,c,p]){const h=1-l,u=1-c,d=1-p,g=Math.min(h,u,d);return["CMYK",h,u,d,g]}}e.ColorConverters=i}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=r(20);class o{static setupStorage(c,p,h,u,d){const g=u.getValue(p,{value:null});switch(h.name){case"textarea":if(g.value!==null&&(c.textContent=g.value),d==="print")break;c.addEventListener("input",y=>{u.setValue(p,{value:y.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(g.value===h.attributes.xfaOn?c.setAttribute("checked",!0):g.value===h.attributes.xfaOff&&c.removeAttribute("checked"),d==="print")break;c.addEventListener("change",y=>{u.setValue(p,{value:y.target.checked?y.target.getAttribute("xfaOn"):y.target.getAttribute("xfaOff")})})}else{if(g.value!==null&&c.setAttribute("value",g.value),d==="print")break;c.addEventListener("input",y=>{u.setValue(p,{value:y.target.value})})}break;case"select":if(g.value!==null)for(const y of h.children)y.attributes.value===g.value&&(y.attributes.selected=!0);c.addEventListener("input",y=>{const S=y.target.options,E=S.selectedIndex===-1?"":S[S.selectedIndex].value;u.setValue(p,{value:E})});break}}static setAttributes({html:c,element:p,storage:h=null,intent:u,linkService:d}){const{attributes:g}=p,y=c instanceof HTMLAnchorElement;g.type==="radio"&&(g.name=`${g.name}-${u}`);for(const[S,E]of Object.entries(g))if(E!=null)switch(S){case"class":E.length&&c.setAttribute(S,E.join(" "));break;case"dataId":break;case"id":c.setAttribute("data-element-id",E);break;case"style":Object.assign(c.style,E);break;case"textContent":c.textContent=E;break;default:(!y||S!=="href"&&S!=="newWindow")&&c.setAttribute(S,E)}y&&d.addLinkAttributes(c,g.href,g.newWindow),h&&g.dataId&&this.setupStorage(c,g.dataId,p,h)}static render(c){const p=c.annotationStorage,h=c.linkService,u=c.xfaHtml,d=c.intent||"display",g=document.createElement(u.name);u.attributes&&this.setAttributes({html:g,element:u,intent:d,linkService:h});const y=[[u,-1,g]],S=c.div;if(S.append(g),c.viewport){const x=`matrix(${c.viewport.transform.join(",")})`;S.style.transform=x}d!=="richText"&&S.setAttribute("class","xfaLayer xfaFont");const E=[];for(;y.length>0;){const[x,A,D]=y.at(-1);if(A+1===x.children.length){y.pop();continue}const b=x.children[++y.at(-1)[1]];if(b===null)continue;const{name:I}=b;if(I==="#text"){const q=document.createTextNode(b.value);E.push(q),D.append(q);continue}let R;if(b?.attributes?.xmlns?R=document.createElementNS(b.attributes.xmlns,I):R=document.createElement(I),D.append(R),b.attributes&&this.setAttributes({html:R,element:b,storage:p,intent:d,linkService:h}),b.children&&b.children.length>0)y.push([b,-1,R]);else if(b.value){const q=document.createTextNode(b.value);i.XfaText.shouldBuildText(I)&&E.push(q),R.append(q)}}for(const x of S.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:E}}static update(c){const p=`matrix(${c.viewport.transform.join(",")})`;c.div.style.transform=p,c.div.hidden=!1}}e.XfaLayer=o}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=b;var i=r(1),o=r(8);const l=1e5,c=30,p=.8,h=new Map,u=/^\s+$/g;function d(I,R){const q=h.get(I);if(q)return q;R.save(),R.font=`${c}px ${I}`;const G=R.measureText("");let z=G.fontBoundingBoxAscent,B=Math.abs(G.fontBoundingBoxDescent);if(z){R.restore();const O=z/(z+B);return h.set(I,O),O}R.strokeStyle="red",R.clearRect(0,0,c,c),R.strokeText("g",0,0);let M=R.getImageData(0,0,c,c).data;B=0;for(let O=M.length-1-3;O>=0;O-=4)if(M[O]>0){B=Math.ceil(O/4/c);break}R.clearRect(0,0,c,c),R.strokeText("A",0,c),M=R.getImageData(0,0,c,c).data,z=0;for(let O=0,W=M.length;O<W;O+=4)if(M[O]>0){z=c-Math.floor(O/4/c);break}if(R.restore(),z){const O=z/(z+B);return h.set(I,O),O}return h.set(I,p),p}function g(I,R,q,G){const z=document.createElement("span"),B=I._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,fontSize:0};I._textDivs.push(z);const M=i.Util.transform(I._viewport.transform,R.transform);let O=Math.atan2(M[1],M[0]);const W=q[R.fontName];W.vertical&&(O+=Math.PI/2);const K=Math.hypot(M[2],M[3]),se=K*d(W.fontFamily,G);let $,Q;O===0?($=M[4],Q=M[5]-se):($=M[4]+se*Math.sin(O),Q=M[5]-se*Math.cos(O)),z.style.left=`${$}px`,z.style.top=`${Q}px`,z.style.fontSize=`${K}px`,z.style.fontFamily=W.fontFamily,B.fontSize=K,z.setAttribute("role","presentation"),z.textContent=R.str,z.dir=R.dir,I._fontInspectorEnabled&&(z.dataset.fontName=R.fontName),O!==0&&(B.angle=O*(180/Math.PI));let re=!1;if(R.str.length>1||I._enhanceTextSelection&&u.test(R.str))re=!0;else if(R.str!==" "&&R.transform[0]!==R.transform[3]){const te=Math.abs(R.transform[0]),X=Math.abs(R.transform[3]);te!==X&&Math.max(te,X)/Math.min(te,X)>1.5&&(re=!0)}if(re&&(W.vertical?B.canvasWidth=R.height*I._viewport.scale:B.canvasWidth=R.width*I._viewport.scale),I._textDivProperties.set(z,B),I._textContentStream&&I._layoutText(z),I._enhanceTextSelection&&B.hasText){let te=1,X=0;O!==0&&(te=Math.cos(O),X=Math.sin(O));const L=(W.vertical?R.height:R.width)*I._viewport.scale,C=K;let v,V;O!==0?(v=[te,X,-X,te,$,Q],V=i.Util.getAxialAlignedBoundingBox([0,0,L,C],v)):V=[$,Q,$+L,Q+C],I._bounds.push({left:V[0],top:V[1],right:V[2],bottom:V[3],div:z,size:[L,C],m:v})}}function y(I){if(I._canceled)return;const R=I._textDivs,q=I._capability,G=R.length;if(G>l){I._renderingDone=!0,q.resolve();return}if(!I._textContentStream)for(let z=0;z<G;z++)I._layoutText(R[z]);I._renderingDone=!0,q.resolve()}function S(I,R,q){let G=0;for(let z=0;z<q;z++){const B=I[R++];B>0&&(G=G?Math.min(B,G):B)}return G}function E(I){const R=I._bounds,q=I._viewport,G=x(q.width,q.height,R);for(let z=0;z<G.length;z++){const B=R[z].div,M=I._textDivProperties.get(B);if(M.angle===0){M.paddingLeft=R[z].left-G[z].left,M.paddingTop=R[z].top-G[z].top,M.paddingRight=G[z].right-R[z].right,M.paddingBottom=G[z].bottom-R[z].bottom,I._textDivProperties.set(B,M);continue}const O=G[z],W=R[z],K=W.m,se=K[0],$=K[1],Q=[[0,0],[0,W.size[1]],[W.size[0],0],W.size],re=new Float64Array(64);for(let X=0,L=Q.length;X<L;X++){const C=i.Util.applyTransform(Q[X],K);re[X+0]=se&&(O.left-C[0])/se,re[X+4]=$&&(O.top-C[1])/$,re[X+8]=se&&(O.right-C[0])/se,re[X+12]=$&&(O.bottom-C[1])/$,re[X+16]=$&&(O.left-C[0])/-$,re[X+20]=se&&(O.top-C[1])/se,re[X+24]=$&&(O.right-C[0])/-$,re[X+28]=se&&(O.bottom-C[1])/se,re[X+32]=se&&(O.left-C[0])/-se,re[X+36]=$&&(O.top-C[1])/-$,re[X+40]=se&&(O.right-C[0])/-se,re[X+44]=$&&(O.bottom-C[1])/-$,re[X+48]=$&&(O.left-C[0])/$,re[X+52]=se&&(O.top-C[1])/-se,re[X+56]=$&&(O.right-C[0])/$,re[X+60]=se&&(O.bottom-C[1])/-se}const te=1+Math.min(Math.abs(se),Math.abs($));M.paddingLeft=S(re,32,16)/te,M.paddingTop=S(re,48,16)/te,M.paddingRight=S(re,0,16)/te,M.paddingBottom=S(re,16,16)/te,I._textDivProperties.set(B,M)}}function x(I,R,q){const G=q.map(function(B,M){return{x1:B.left,y1:B.top,x2:B.right,y2:B.bottom,index:M,x1New:void 0,x2New:void 0}});A(I,G);const z=new Array(q.length);for(const B of G){const M=B.index;z[M]={left:B.x1New,top:0,right:B.x2New,bottom:0}}q.map(function(B,M){const O=z[M],W=G[M];W.x1=B.top,W.y1=I-O.right,W.x2=B.bottom,W.y2=I-O.left,W.index=M,W.x1New=void 0,W.x2New=void 0}),A(R,G);for(const B of G){const M=B.index;z[M].top=B.x1New,z[M].bottom=B.x2New}return z}function A(I,R){R.sort(function(z,B){return z.x1-B.x1||z.index-B.index});const G=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const z of R){let B=0;for(;B<G.length&&G[B].end<=z.y1;)B++;let M=G.length-1;for(;M>=0&&G[M].start>=z.y2;)M--;let O,W,K,se,$=-1/0;for(K=B;K<=M;K++){O=G[K],W=O.boundary;let te;W.x2>z.x1?te=W.index>z.index?W.x1New:z.x1:W.x2New===void 0?te=(W.x2+z.x1)/2:te=W.x2New,te>$&&($=te)}for(z.x1New=$,K=B;K<=M;K++)O=G[K],W=O.boundary,W.x2New===void 0?W.x2>z.x1?W.index>z.index&&(W.x2New=W.x2):W.x2New=$:W.x2New>$&&(W.x2New=Math.max($,W.x2));const Q=[];let re=null;for(K=B;K<=M;K++){O=G[K],W=O.boundary;const te=W.x2>z.x2?W:z;re===te?Q.at(-1).end=O.end:(Q.push({start:O.start,end:O.end,boundary:te}),re=te)}for(G[B].start<z.y1&&(Q[0].start=z.y1,Q.unshift({start:G[B].start,end:z.y1,boundary:G[B].boundary})),z.y2<G[M].end&&(Q.at(-1).end=z.y2,Q.push({start:z.y2,end:G[M].end,boundary:G[M].boundary})),K=B;K<=M;K++){if(O=G[K],W=O.boundary,W.x2New!==void 0)continue;let te=!1;for(se=B-1;!te&&se>=0&&G[se].start>=W.y1;se--)te=G[se].boundary===W;for(se=M+1;!te&&se<G.length&&G[se].end<=W.y2;se++)te=G[se].boundary===W;for(se=0;!te&&se<Q.length;se++)te=Q[se].boundary===W;te||(W.x2New=$)}Array.prototype.splice.apply(G,[B,M-B+1,...Q])}for(const z of G){const B=z.boundary;B.x2New===void 0&&(B.x2New=Math.max(I,B.x2))}}class D{constructor({textContent:R,textContentStream:q,container:G,viewport:z,textDivs:B,textContentItemsStr:M,enhanceTextSelection:O}){O&&(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=R,this._textContentStream=q,this._container=G,this._document=G.ownerDocument,this._viewport=z,this._textDivs=B||[],this._textContentItemsStr=M||[],this._enhanceTextSelection=!!O,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(R,q){for(let G=0,z=R.length;G<z;G++){if(R[G].str===void 0){if(R[G].type==="beginMarkedContentProps"||R[G].type==="beginMarkedContent"){const B=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),R[G].id!==null&&this._container.setAttribute("id",`${R[G].id}`),B.append(this._container)}else R[G].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(R[G].str),g(this,R[G],q,this._layoutTextCtx)}}_layoutText(R){const q=this._textDivProperties.get(R);let G="";if(q.canvasWidth!==0&&q.hasText){const{fontFamily:z}=R.style,{fontSize:B}=q;(B!==this._layoutTextLastFontSize||z!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${B*this._devicePixelRatio}px ${z}`,this._layoutTextLastFontSize=B,this._layoutTextLastFontFamily=z);const{width:M}=this._layoutTextCtx.measureText(R.textContent);if(M>0){const O=this._devicePixelRatio*q.canvasWidth/M;this._enhanceTextSelection&&(q.scale=O),G=`scaleX(${O})`}}if(q.angle!==0&&(G=`rotate(${q.angle}deg) ${G}`),G.length>0&&(this._enhanceTextSelection&&(q.originalTransform=G),R.style.transform=G),q.hasText&&this._container.append(R),q.hasEOL){const z=document.createElement("br");z.setAttribute("role","presentation"),this._container.append(z)}}_render(R=0){const q=(0,i.createPromiseCapability)();let G=Object.create(null);const z=this._document.createElement("canvas");if(z.height=z.width=c,this._layoutTextCtx=z.getContext("2d",{alpha:!1}),this._textContent){const B=this._textContent.items,M=this._textContent.styles;this._processItems(B,M),q.resolve()}else if(this._textContentStream){const B=()=>{this._reader.read().then(({value:M,done:O})=>{if(O){q.resolve();return}Object.assign(G,M.styles),this._processItems(M.items,G),B()},q.reject)};this._reader=this._textContentStream.getReader(),B()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');q.promise.then(()=>{G=null,R?this._renderTimer=setTimeout(()=>{y(this),this._renderTimer=null},R):y(this)},this._capability.reject)}expandTextDivs(R=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(E(this),this._bounds=null);const q=[],G=[];for(let z=0,B=this._textDivs.length;z<B;z++){const M=this._textDivs[z],O=this._textDivProperties.get(M);O.hasText&&(R?(q.length=0,G.length=0,O.originalTransform&&q.push(O.originalTransform),O.paddingTop>0?(G.push(`${O.paddingTop}px`),q.push(`translateY(${-O.paddingTop}px)`)):G.push(0),O.paddingRight>0?G.push(`${O.paddingRight/O.scale}px`):G.push(0),O.paddingBottom>0?G.push(`${O.paddingBottom}px`):G.push(0),O.paddingLeft>0?(G.push(`${O.paddingLeft/O.scale}px`),q.push(`translateX(${-O.paddingLeft/O.scale}px)`)):G.push(0),M.style.padding=G.join(" "),q.length&&(M.style.transform=q.join(" "))):(M.style.padding=null,M.style.transform=O.originalTransform))}}}e.TextLayerRenderTask=D;function b(I){const R=new D({textContent:I.textContent,textContentStream:I.textContentStream,container:I.container,viewport:I.viewport,textDivs:I.textDivs,textContentItemsStr:I.textContentItemsStr,enhanceTextSelection:I.enhanceTextSelection});return R._render(I.timeout),R}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=r(8),o=r(1),l=r(3);let c=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=c;{let b=function(B){let M=[];const O=[];for(const W of B){if(W.fn==="save"){M.push({fnId:92,fn:"group",items:[]}),O.push(M),M=M.at(-1).items;continue}W.fn==="restore"?M=O.pop():M.push(W)}return M},I=function(B){if(Number.isInteger(B))return B.toString();const M=B.toFixed(10);let O=M.length-1;if(M[O]!=="0")return M;do O--;while(M[O]==="0");return M.substring(0,M[O]==="."?O:O+1)},R=function(B){if(B[4]===0&&B[5]===0){if(B[1]===0&&B[2]===0)return B[0]===1&&B[3]===1?"":`scale(${I(B[0])} ${I(B[3])})`;if(B[0]===B[3]&&B[1]===-B[2]){const M=Math.acos(B[0])*180/Math.PI;return`rotate(${I(M)})`}}else if(B[0]===1&&B[1]===0&&B[2]===0&&B[3]===1)return`translate(${I(B[4])} ${I(B[5])})`;return`matrix(${I(B[0])} ${I(B[1])} ${I(B[2])} ${I(B[3])} ${I(B[4])} ${I(B[5])})`};var p=b,h=I,u=R;const d={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},g="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",S=["butt","round","square"],E=["miter","round","bevel"],x=function(B,M="",O=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!O)return URL.createObjectURL(new Blob([B],{type:M}));const W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let K=`data:${M};base64,`;for(let se=0,$=B.length;se<$;se+=3){const Q=B[se]&255,re=B[se+1]&255,te=B[se+2]&255,X=Q>>2,L=(Q&3)<<4|re>>4,C=se+1<$?(re&15)<<2|te>>6:64,v=se+2<$?te&63:64;K+=W[X]+W[L]+W[C]+W[v]}return K},A=(function(){const B=new Uint8Array([137,80,78,71,13,10,26,10]),M=12,O=new Int32Array(256);for(let te=0;te<256;te++){let X=te;for(let L=0;L<8;L++)X&1?X=3988292384^X>>1&2147483647:X=X>>1&2147483647;O[te]=X}function W(te,X,L){let C=-1;for(let v=X;v<L;v++){const V=(C^te[v])&255,N=O[V];C=C>>>8^N}return C^-1}function K(te,X,L,C){let v=C;const V=X.length;L[v]=V>>24&255,L[v+1]=V>>16&255,L[v+2]=V>>8&255,L[v+3]=V&255,v+=4,L[v]=te.charCodeAt(0)&255,L[v+1]=te.charCodeAt(1)&255,L[v+2]=te.charCodeAt(2)&255,L[v+3]=te.charCodeAt(3)&255,v+=4,L.set(X,v),v+=X.length;const N=W(L,C+4,v);L[v]=N>>24&255,L[v+1]=N>>16&255,L[v+2]=N>>8&255,L[v+3]=N&255}function se(te,X,L){let C=1,v=0;for(let V=X;V<L;++V)C=(C+(te[V]&255))%65521,v=(v+C)%65521;return v<<16|C}function $(te){if(!l.isNodeJS)return Q(te);try{let X;parseInt(process.versions.node)>=8?X=te:X=Buffer.from(te);const L=require$$5.deflateSync(X,{level:9});return L instanceof Uint8Array?L:new Uint8Array(L)}catch(X){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return Q(te)}function Q(te){let X=te.length;const L=65535,C=Math.ceil(X/L),v=new Uint8Array(2+X+C*5+4);let V=0;v[V++]=120,v[V++]=156;let N=0;for(;X>L;)v[V++]=0,v[V++]=255,v[V++]=255,v[V++]=0,v[V++]=0,v.set(te.subarray(N,N+L),V),V+=L,N+=L,X-=L;v[V++]=1,v[V++]=X&255,v[V++]=X>>8&255,v[V++]=~X&65535&255,v[V++]=(~X&65535)>>8&255,v.set(te.subarray(N),V),V+=te.length-N;const P=se(te,0,te.length);return v[V++]=P>>24&255,v[V++]=P>>16&255,v[V++]=P>>8&255,v[V++]=P&255,v}function re(te,X,L,C){const v=te.width,V=te.height;let N,P,T;const w=te.data;switch(X){case o.ImageKind.GRAYSCALE_1BPP:P=0,N=1,T=v+7>>3;break;case o.ImageKind.RGB_24BPP:P=2,N=8,T=v*3;break;case o.ImageKind.RGBA_32BPP:P=6,N=8,T=v*4;break;default:throw new Error("invalid format")}const F=new Uint8Array((1+T)*V);let U=0,H=0;for(let pe=0;pe<V;++pe)F[U++]=0,F.set(w.subarray(H,H+T),U),H+=T,U+=T;if(X===o.ImageKind.GRAYSCALE_1BPP&&C){U=0;for(let pe=0;pe<V;pe++){U++;for(let he=0;he<T;he++)F[U++]^=255}}const Y=new Uint8Array([v>>24&255,v>>16&255,v>>8&255,v&255,V>>24&255,V>>16&255,V>>8&255,V&255,N,P,0,0,0]),ne=$(F),ae=B.length+M*3+Y.length+ne.length,ee=new Uint8Array(ae);let ce=0;return ee.set(B,ce),ce+=B.length,K("IHDR",Y,ee,ce),ce+=M+Y.length,K("IDATA",ne,ee,ce),ce+=M+ne.length,K("IEND",new Uint8Array(0),ee,ce),x(ee,"image/png",L)}return function(X,L,C){const v=X.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:X.kind;return re(X,v,L,C)}})();class D{constructor(){this.fontSizeScale=1,this.fontWeight=d.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=d.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(M,O){this.x=M,this.y=O}}let q=0,G=0,z=0;e.SVGGraphics=c=class{constructor(B,M,O=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new D,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=B,this.objs=M,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!O,this._operatorIdMapping=[];for(const W in o.OPS)this._operatorIdMapping[o.OPS[W]]=W}save(){this.transformStack.push(this.transformMatrix);const B=this.current;this.extraStack.push(B),this.current=B.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(B){this.save(),this.executeOpTree(B),this.restore()}loadDependencies(B){const M=B.fnArray,O=B.argsArray;for(let W=0,K=M.length;W<K;W++)if(M[W]===o.OPS.dependency)for(const se of O[W]){const $=se.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(re=>{$.get(se,re)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(B,M,O,W,K,se){const $=[B,M,O,W,K,se];this.transformMatrix=o.Util.transform(this.transformMatrix,$),this.tgrp=null}getSVG(B,M){this.viewport=M;const O=this._initialize(M);return this.loadDependencies(B).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(B)),O))}convertOpList(B){const M=this._operatorIdMapping,O=B.argsArray,W=B.fnArray,K=[];for(let se=0,$=W.length;se<$;se++){const Q=W[se];K.push({fnId:Q,fn:M[Q],args:O[se]})}return b(K)}executeOpTree(B){for(const M of B){const O=M.fn,W=M.fnId,K=M.args;switch(W|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(K);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(K[0],K[1]);break;case o.OPS.setFont:this.setFont(K);break;case o.OPS.showText:this.showText(K[0]);break;case o.OPS.showSpacedText:this.showText(K[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(K[0],K[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(K[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(K[0]);break;case o.OPS.setHScale:this.setHScale(K[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(K[0],K[1],K[2],K[3],K[4],K[5]);break;case o.OPS.setTextRise:this.setTextRise(K[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(K[0]);break;case o.OPS.setLineWidth:this.setLineWidth(K[0]);break;case o.OPS.setLineJoin:this.setLineJoin(K[0]);break;case o.OPS.setLineCap:this.setLineCap(K[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(K[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(K[0],K[1],K[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(K[0],K[1],K[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(K);break;case o.OPS.setFillColorN:this.setFillColorN(K);break;case o.OPS.shadingFill:this.shadingFill(K[0]);break;case o.OPS.setDash:this.setDash(K[0],K[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(K[0]);break;case o.OPS.setFlatness:this.setFlatness(K[0]);break;case o.OPS.setGState:this.setGState(K[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(K[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(K[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(K[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(K[0],K[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(K[0],K[1],K[2],K[3],K[4],K[5]);break;case o.OPS.constructPath:this.constructPath(K[0],K[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(M.items);break;default:(0,o.warn)(`Unimplemented operator ${O}`);break}}}setWordSpacing(B){this.current.wordSpacing=B}setCharSpacing(B){this.current.charSpacing=B}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(B,M,O,W,K,se){const $=this.current;$.textMatrix=$.lineMatrix=[B,M,O,W,K,se],$.textMatrixScale=Math.hypot(B,M),$.x=$.lineX=0,$.y=$.lineY=0,$.xcoords=[],$.ycoords=[],$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${I($.fontSize)}px`),$.tspan.setAttributeNS(null,"y",I(-$.y)),$.txtElement=this.svgFactory.createElement("svg:text"),$.txtElement.append($.tspan)}beginText(){const B=this.current;B.x=B.lineX=0,B.y=B.lineY=0,B.textMatrix=o.IDENTITY_MATRIX,B.lineMatrix=o.IDENTITY_MATRIX,B.textMatrixScale=1,B.tspan=this.svgFactory.createElement("svg:tspan"),B.txtElement=this.svgFactory.createElement("svg:text"),B.txtgrp=this.svgFactory.createElement("svg:g"),B.xcoords=[],B.ycoords=[]}moveText(B,M){const O=this.current;O.x=O.lineX+=B,O.y=O.lineY+=M,O.xcoords=[],O.ycoords=[],O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${I(O.fontSize)}px`),O.tspan.setAttributeNS(null,"y",I(-O.y))}showText(B){const M=this.current,O=M.font,W=M.fontSize;if(W===0)return;const K=M.fontSizeScale,se=M.charSpacing,$=M.wordSpacing,Q=M.fontDirection,re=M.textHScale*Q,te=O.vertical,X=te?1:-1,L=O.defaultVMetrics,C=W*M.fontMatrix[0];let v=0;for(const P of B){if(P===null){v+=Q*$;continue}else if(typeof P=="number"){v+=X*P*W/1e3;continue}const T=(P.isSpace?$:0)+se,w=P.fontChar;let F,U,H=P.width;if(te){let ne;const ae=P.vmetric||L;ne=P.vmetric?ae[1]:H*.5,ne=-ne*C;const ee=ae[2]*C;H=ae?-ae[0]:H,F=ne/K,U=(v+ee)/K}else F=v/K,U=0;(P.isInFont||O.missingFile)&&(M.xcoords.push(M.x+F),te&&M.ycoords.push(-M.y+U),M.tspan.textContent+=w);let Y;te?Y=H*C-T*Q:Y=H*C+T*Q,v+=Y}M.tspan.setAttributeNS(null,"x",M.xcoords.map(I).join(" ")),te?M.tspan.setAttributeNS(null,"y",M.ycoords.map(I).join(" ")):M.tspan.setAttributeNS(null,"y",I(-M.y)),te?M.y-=v:M.x+=v*re,M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${I(M.fontSize)}px`),M.fontStyle!==d.fontStyle&&M.tspan.setAttributeNS(null,"font-style",M.fontStyle),M.fontWeight!==d.fontWeight&&M.tspan.setAttributeNS(null,"font-weight",M.fontWeight);const V=M.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(V===o.TextRenderingMode.FILL||V===o.TextRenderingMode.FILL_STROKE?(M.fillColor!==d.fillColor&&M.tspan.setAttributeNS(null,"fill",M.fillColor),M.fillAlpha<1&&M.tspan.setAttributeNS(null,"fill-opacity",M.fillAlpha)):M.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?M.tspan.setAttributeNS(null,"fill","transparent"):M.tspan.setAttributeNS(null,"fill","none"),V===o.TextRenderingMode.STROKE||V===o.TextRenderingMode.FILL_STROKE){const P=1/(M.textMatrixScale||1);this._setStrokeAttributes(M.tspan,P)}let N=M.textMatrix;M.textRise!==0&&(N=N.slice(),N[5]+=M.textRise),M.txtElement.setAttributeNS(null,"transform",`${R(N)} scale(${I(re)}, -1)`),M.txtElement.setAttributeNS(g,"xml:space","preserve"),M.txtElement.append(M.tspan),M.txtgrp.append(M.txtElement),this._ensureTransformGroup().append(M.txtElement)}setLeadingMoveText(B,M){this.setLeading(-M),this.moveText(B,M)}addFontStyle(B){if(!B.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const M=x(B.data,B.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${B.loadedName}"; src: url(${M}); }
`}setFont(B){const M=this.current,O=this.commonObjs.get(B[0]);let W=B[1];M.font=O,this.embedFonts&&!O.missingFile&&!this.embeddedFonts[O.loadedName]&&(this.addFontStyle(O),this.embeddedFonts[O.loadedName]=O),M.fontMatrix=O.fontMatrix||o.FONT_IDENTITY_MATRIX;let K="normal";O.black?K="900":O.bold&&(K="bold");const se=O.italic?"italic":"normal";W<0?(W=-W,M.fontDirection=-1):M.fontDirection=1,M.fontSize=W,M.fontFamily=O.loadedName,M.fontWeight=K,M.fontStyle=se,M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"y",I(-M.y)),M.xcoords=[],M.ycoords=[]}endText(){const B=this.current;B.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&B.txtElement?.hasChildNodes()&&(B.element=B.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(B){B>0&&(this.current.lineWidth=B)}setLineCap(B){this.current.lineCap=S[B]}setLineJoin(B){this.current.lineJoin=E[B]}setMiterLimit(B){this.current.miterLimit=B}setStrokeAlpha(B){this.current.strokeAlpha=B}setStrokeRGBColor(B,M,O){this.current.strokeColor=o.Util.makeHexColor(B,M,O)}setFillAlpha(B){this.current.fillAlpha=B}setFillRGBColor(B,M,O){this.current.fillColor=o.Util.makeHexColor(B,M,O),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(B){this.current.strokeColor=this._makeColorN_Pattern(B)}setFillColorN(B){this.current.fillColor=this._makeColorN_Pattern(B)}shadingFill(B){const M=this.viewport.width,O=this.viewport.height,W=o.Util.inverseTransform(this.transformMatrix),K=o.Util.applyTransform([0,0],W),se=o.Util.applyTransform([0,O],W),$=o.Util.applyTransform([M,0],W),Q=o.Util.applyTransform([M,O],W),re=Math.min(K[0],se[0],$[0],Q[0]),te=Math.min(K[1],se[1],$[1],Q[1]),X=Math.max(K[0],se[0],$[0],Q[0]),L=Math.max(K[1],se[1],$[1],Q[1]),C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",re),C.setAttributeNS(null,"y",te),C.setAttributeNS(null,"width",X-re),C.setAttributeNS(null,"height",L-te),C.setAttributeNS(null,"fill",this._makeShadingPattern(B)),this.current.fillAlpha<1&&C.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(C)}_makeColorN_Pattern(B){return B[0]==="TilingPattern"?this._makeTilingPattern(B):this._makeShadingPattern(B)}_makeTilingPattern(B){const M=B[1],O=B[2],W=B[3]||o.IDENTITY_MATRIX,[K,se,$,Q]=B[4],re=B[5],te=B[6],X=B[7],L=`shading${z++}`,[C,v,V,N]=o.Util.normalizeRect([...o.Util.applyTransform([K,se],W),...o.Util.applyTransform([$,Q],W)]),[P,T]=o.Util.singularValueDecompose2dScale(W),w=re*P,F=te*T,U=this.svgFactory.createElement("svg:pattern");U.setAttributeNS(null,"id",L),U.setAttributeNS(null,"patternUnits","userSpaceOnUse"),U.setAttributeNS(null,"width",w),U.setAttributeNS(null,"height",F),U.setAttributeNS(null,"x",`${C}`),U.setAttributeNS(null,"y",`${v}`);const H=this.svg,Y=this.transformMatrix,ne=this.current.fillColor,ae=this.current.strokeColor,ee=this.svgFactory.create(V-C,N-v);if(this.svg=ee,this.transformMatrix=W,X===2){const ce=o.Util.makeHexColor(...M);this.current.fillColor=ce,this.current.strokeColor=ce}return this.executeOpTree(this.convertOpList(O)),this.svg=H,this.transformMatrix=Y,this.current.fillColor=ne,this.current.strokeColor=ae,U.append(ee.childNodes[0]),this.defs.append(U),`url(#${L})`}_makeShadingPattern(B){switch(typeof B=="string"&&(B=this.objs.get(B)),B[0]){case"RadialAxial":const M=`shading${z++}`,O=B[3];let W;switch(B[1]){case"axial":const K=B[4],se=B[5];W=this.svgFactory.createElement("svg:linearGradient"),W.setAttributeNS(null,"id",M),W.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),W.setAttributeNS(null,"x1",K[0]),W.setAttributeNS(null,"y1",K[1]),W.setAttributeNS(null,"x2",se[0]),W.setAttributeNS(null,"y2",se[1]);break;case"radial":const $=B[4],Q=B[5],re=B[6],te=B[7];W=this.svgFactory.createElement("svg:radialGradient"),W.setAttributeNS(null,"id",M),W.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),W.setAttributeNS(null,"cx",Q[0]),W.setAttributeNS(null,"cy",Q[1]),W.setAttributeNS(null,"r",te),W.setAttributeNS(null,"fx",$[0]),W.setAttributeNS(null,"fy",$[1]),W.setAttributeNS(null,"fr",re);break;default:throw new Error(`Unknown RadialAxial type: ${B[1]}`)}for(const K of O){const se=this.svgFactory.createElement("svg:stop");se.setAttributeNS(null,"offset",K[0]),se.setAttributeNS(null,"stop-color",K[1]),W.append(se)}return this.defs.append(W),`url(#${M})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${B[0]}`)}}setDash(B,M){this.current.dashArray=B,this.current.dashPhase=M}constructPath(B,M){const O=this.current;let W=O.x,K=O.y,se=[],$=0;for(const Q of B)switch(Q|0){case o.OPS.rectangle:W=M[$++],K=M[$++];const re=M[$++],te=M[$++],X=W+re,L=K+te;se.push("M",I(W),I(K),"L",I(X),I(K),"L",I(X),I(L),"L",I(W),I(L),"Z");break;case o.OPS.moveTo:W=M[$++],K=M[$++],se.push("M",I(W),I(K));break;case o.OPS.lineTo:W=M[$++],K=M[$++],se.push("L",I(W),I(K));break;case o.OPS.curveTo:W=M[$+4],K=M[$+5],se.push("C",I(M[$]),I(M[$+1]),I(M[$+2]),I(M[$+3]),I(W),I(K)),$+=6;break;case o.OPS.curveTo2:se.push("C",I(W),I(K),I(M[$]),I(M[$+1]),I(M[$+2]),I(M[$+3])),W=M[$+2],K=M[$+3],$+=4;break;case o.OPS.curveTo3:W=M[$+2],K=M[$+3],se.push("C",I(M[$]),I(M[$+1]),I(W),I(K),I(W),I(K)),$+=4;break;case o.OPS.closePath:se.push("Z");break}se=se.join(" "),O.path&&B.length>0&&B[0]!==o.OPS.rectangle&&B[0]!==o.OPS.moveTo?se=O.path.getAttributeNS(null,"d")+se:(O.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(O.path)),O.path.setAttributeNS(null,"d",se),O.path.setAttributeNS(null,"fill","none"),O.element=O.path,O.setCurrentPoint(W,K)}endPath(){const B=this.current;if(B.path=null,!this.pendingClip)return;if(!B.element){this.pendingClip=null;return}const M=`clippath${q++}`,O=this.svgFactory.createElement("svg:clipPath");O.setAttributeNS(null,"id",M),O.setAttributeNS(null,"transform",R(this.transformMatrix));const W=B.element.cloneNode(!0);if(this.pendingClip==="evenodd"?W.setAttributeNS(null,"clip-rule","evenodd"):W.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,O.append(W),this.defs.append(O),B.activeClipUrl){B.clipGroup=null;for(const K of this.extraStack)K.clipGroup=null;O.setAttributeNS(null,"clip-path",B.activeClipUrl)}B.activeClipUrl=`url(#${M})`,this.tgrp=null}clip(B){this.pendingClip=B}closePath(){const B=this.current;if(B.path){const M=`${B.path.getAttributeNS(null,"d")}Z`;B.path.setAttributeNS(null,"d",M)}}setLeading(B){this.current.leading=-B}setTextRise(B){this.current.textRise=B}setTextRenderingMode(B){this.current.textRenderingMode=B}setHScale(B){this.current.textHScale=B/100}setRenderingIntent(B){}setFlatness(B){}setGState(B){for(const[M,O]of B)switch(M){case"LW":this.setLineWidth(O);break;case"LC":this.setLineCap(O);break;case"LJ":this.setLineJoin(O);break;case"ML":this.setMiterLimit(O);break;case"D":this.setDash(O[0],O[1]);break;case"RI":this.setRenderingIntent(O);break;case"FL":this.setFlatness(O);break;case"Font":this.setFont(O);break;case"CA":this.setStrokeAlpha(O);break;case"ca":this.setFillAlpha(O);break;default:(0,o.warn)(`Unimplemented graphic state operator ${M}`);break}}fill(){const B=this.current;B.element&&(B.element.setAttributeNS(null,"fill",B.fillColor),B.element.setAttributeNS(null,"fill-opacity",B.fillAlpha),this.endPath())}stroke(){const B=this.current;B.element&&(this._setStrokeAttributes(B.element),B.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(B,M=1){const O=this.current;let W=O.dashArray;M!==1&&W.length>0&&(W=W.map(function(K){return M*K})),B.setAttributeNS(null,"stroke",O.strokeColor),B.setAttributeNS(null,"stroke-opacity",O.strokeAlpha),B.setAttributeNS(null,"stroke-miterlimit",I(O.miterLimit)),B.setAttributeNS(null,"stroke-linecap",O.lineCap),B.setAttributeNS(null,"stroke-linejoin",O.lineJoin),B.setAttributeNS(null,"stroke-width",I(M*O.lineWidth)+"px"),B.setAttributeNS(null,"stroke-dasharray",W.map(I).join(" ")),B.setAttributeNS(null,"stroke-dashoffset",I(M*O.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width","1px"),B.setAttributeNS(null,"height","1px"),B.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(B)}paintImageXObject(B){const M=B.startsWith("g_")?this.commonObjs.get(B):this.objs.get(B);if(!M){(0,o.warn)(`Dependent image with object ID ${B} is not ready yet`);return}this.paintInlineImageXObject(M)}paintInlineImageXObject(B,M){const O=B.width,W=B.height,K=A(B,this.forceDataSchema,!!M),se=this.svgFactory.createElement("svg:rect");se.setAttributeNS(null,"x","0"),se.setAttributeNS(null,"y","0"),se.setAttributeNS(null,"width",I(O)),se.setAttributeNS(null,"height",I(W)),this.current.element=se,this.clip("nonzero");const $=this.svgFactory.createElement("svg:image");$.setAttributeNS(y,"xlink:href",K),$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y",I(-W)),$.setAttributeNS(null,"width",I(O)+"px"),$.setAttributeNS(null,"height",I(W)+"px"),$.setAttributeNS(null,"transform",`scale(${I(1/O)} ${I(-1/W)})`),M?M.append($):this._ensureTransformGroup().append($)}paintImageMaskXObject(B){const M=this.current,O=B.width,W=B.height,K=M.fillColor;M.maskId=`mask${G++}`;const se=this.svgFactory.createElement("svg:mask");se.setAttributeNS(null,"id",M.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",I(O)),$.setAttributeNS(null,"height",I(W)),$.setAttributeNS(null,"fill",K),$.setAttributeNS(null,"mask",`url(#${M.maskId})`),this.defs.append(se),this._ensureTransformGroup().append($),this.paintInlineImageXObject(B,se)}paintFormXObjectBegin(B,M){if(Array.isArray(B)&&B.length===6&&this.transform(B[0],B[1],B[2],B[3],B[4],B[5]),M){const O=M[2]-M[0],W=M[3]-M[1],K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x",M[0]),K.setAttributeNS(null,"y",M[1]),K.setAttributeNS(null,"width",I(O)),K.setAttributeNS(null,"height",I(W)),this.current.element=K,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(B){const M=this.svgFactory.create(B.width,B.height),O=this.svgFactory.createElement("svg:defs");M.append(O),this.defs=O;const W=this.svgFactory.createElement("svg:g");return W.setAttributeNS(null,"transform",R(B.transform)),M.append(W),this.svg=W,M}_ensureClipGroup(){if(!this.current.clipGroup){const B=this.svgFactory.createElement("svg:g");B.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(B),this.current.clipGroup=B}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",R(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=r(1),o=r(33);const l=require$$5,c=require$$5,p=require$$5,h=require$$5,u=/^file:\/\/\/[a-zA-Z]:\//;function d(I){const R=h.parse(I);return R.protocol==="file:"||R.host?R:/^[a-z]:[/\\]/i.test(I)?h.parse(`file:///${I}`):(R.host||(R.protocol="file:"),R)}class g{constructor(R){this.source=R,this.url=d(R.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&R.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new D(this):new x(this),this._fullRequestReader}getRangeReader(R,q){if(q<=this._progressiveDataLength)return null;const G=this.isFsUrl?new b(this,R,q):new A(this,R,q);return this._rangeRequestReaders.push(G),G}cancelAllRequests(R){this._fullRequestReader&&this._fullRequestReader.cancel(R);for(const q of this._rangeRequestReaders.slice(0))q.cancel(R)}}e.PDFNodeStream=g;class y{constructor(R){this._url=R.url,this._done=!1,this._storedError=null,this.onProgress=null;const q=R.source;this._contentLength=q.length,this._loaded=0,this._filename=null,this._disableRange=q.disableRange||!1,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!q.disableStream,this._isRangeSupported=!q.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const R=this._readableStream.read();return R===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=R.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){if(!this._readableStream){this._error(R);return}this._readableStream.destroy(R)}_error(R){this._storedError=R,this._readCapability.resolve()}_setReadableStream(R){this._readableStream=R,R.on("readable",()=>{this._readCapability.resolve()}),R.on("end",()=>{R.destroy(),this._done=!0,this._readCapability.resolve()}),R.on("error",q=>{this._error(q)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class S{constructor(R){this._url=R.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)();const q=R.source;this._isStreamingSupported=!q.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const R=this._readableStream.read();return R===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=R.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){if(!this._readableStream){this._error(R);return}this._readableStream.destroy(R)}_error(R){this._storedError=R,this._readCapability.resolve()}_setReadableStream(R){this._readableStream=R,R.on("readable",()=>{this._readCapability.resolve()}),R.on("end",()=>{R.destroy(),this._done=!0,this._readCapability.resolve()}),R.on("error",q=>{this._error(q)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function E(I,R){return{protocol:I.protocol,auth:I.auth,host:I.hostname,port:I.port,path:I.path,method:"GET",headers:R}}class x extends y{constructor(R){super(R);const q=G=>{if(G.statusCode===404){const O=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O,this._headersCapability.reject(O);return}this._headersCapability.resolve(),this._setReadableStream(G);const z=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:B,suggestedLength:M}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:z,isHttp:R.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=B,this._contentLength=M||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(z)};this._request=null,this._url.protocol==="http:"?this._request=c.request(E(this._url,R.httpHeaders),q):this._request=p.request(E(this._url,R.httpHeaders),q),this._request.on("error",G=>{this._storedError=G,this._headersCapability.reject(G)}),this._request.end()}}class A extends S{constructor(R,q,G){super(R),this._httpHeaders={};for(const B in R.httpHeaders){const M=R.httpHeaders[B];typeof M>"u"||(this._httpHeaders[B]=M)}this._httpHeaders.Range=`bytes=${q}-${G-1}`;const z=B=>{if(B.statusCode===404){const M=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=M;return}this._setReadableStream(B)};this._request=null,this._url.protocol==="http:"?this._request=c.request(E(this._url,this._httpHeaders),z):this._request=p.request(E(this._url,this._httpHeaders),z),this._request.on("error",B=>{this._storedError=B}),this._request.end()}}class D extends y{constructor(R){super(R);let q=decodeURIComponent(this._url.path);u.test(this._url.href)&&(q=q.replace(/^\//,"")),l.lstat(q,(G,z)=>{if(G){G.code==="ENOENT"&&(G=new i.MissingPDFException(`Missing PDF "${q}".`)),this._storedError=G,this._headersCapability.reject(G);return}this._contentLength=z.size,this._setReadableStream(l.createReadStream(q)),this._headersCapability.resolve()})}}class b extends S{constructor(R,q,G){super(R);let z=decodeURIComponent(this._url.path);u.test(this._url.href)&&(z=z.replace(/^\//,"")),this._setReadableStream(l.createReadStream(z,{start:q,end:G-1}))}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=h,e.extractFilenameFromHeader=p,e.validateRangeRequestCapabilities=c,e.validateResponseStatus=u;var i=r(1),o=r(34),l=r(8);function c({getResponseHeader:d,isHttp:g,rangeChunkSize:y,disableRange:S}){const E={allowRangeRequests:!1,suggestedLength:void 0},x=parseInt(d("Content-Length"),10);return!Number.isInteger(x)||(E.suggestedLength=x,x<=2*y)||S||!g||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(E.allowRangeRequests=!0),E}function p(d){const g=d("Content-Disposition");if(g){let y=(0,o.getFilenameFromContentDispositionHeader)(g);if(y.includes("%"))try{y=decodeURIComponent(y)}catch{}if((0,l.isPdfFile)(y))return y}return null}function h(d,g){return d===404||d===0&&g.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+g+'".'):new i.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${g}".`,d)}function u(d){return d===200||d===206}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o;var i=r(1);function o(l){let c=!0,p=h("filename\\*","i").exec(l);if(p){p=p[1];let x=y(p);return x=unescape(x),x=S(x),x=E(x),d(x)}if(p=g(l),p){const x=E(p);return d(x)}if(p=h("filename","i").exec(l),p){p=p[1];let x=y(p);return x=E(x),d(x)}function h(x,A){return new RegExp("(?:^|;)\\s*"+x+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function u(x,A){if(x){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const D=new TextDecoder(x,{fatal:!0}),b=(0,i.stringToBytes)(A);A=D.decode(b),c=!1}catch{}}return A}function d(x){return c&&/[\x80-\xff]/.test(x)&&(x=u("utf-8",x),c&&(x=u("iso-8859-1",x))),x}function g(x){const A=[];let D;const b=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(D=b.exec(x))!==null;){let[,R,q,G]=D;if(R=parseInt(R,10),R in A){if(R===0)break;continue}A[R]=[q,G]}const I=[];for(let R=0;R<A.length&&R in A;++R){let[q,G]=A[R];G=y(G),q&&(G=unescape(G),R===0&&(G=S(G))),I.push(G)}return I.join("")}function y(x){if(x.startsWith('"')){const A=x.slice(1).split('\\"');for(let D=0;D<A.length;++D){const b=A[D].indexOf('"');b!==-1&&(A[D]=A[D].slice(0,b),A.length=D+1),A[D]=A[D].replace(/\\(.)/g,"$1")}x=A.join('"')}return x}function S(x){const A=x.indexOf("'");if(A===-1)return x;const D=x.slice(0,A),I=x.slice(A+1).replace(/^[^']*'/,"");return u(D,I)}function E(x){return!x.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(x)?x:x.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,D,b,I){if(b==="q"||b==="Q")return I=I.replace(/_/g," "),I=I.replace(/=([0-9a-fA-F]{2})/g,function(R,q){return String.fromCharCode(parseInt(q,16))}),u(D,I);try{I=atob(I)}catch{}return u(D,I)})}return""}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=r(1),o=r(33);const l=200,c=206;function p(y){const S=y.response;return typeof S!="string"?S:(0,i.stringToBytes)(S).buffer}class h{constructor(S,E={}){this.url=S,this.isHttp=/^https?:/i.test(S),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.getXhr=E.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(S,E,x){const A={begin:S,end:E};for(const D in x)A[D]=x[D];return this.request(A)}requestFull(S){return this.request(S)}request(S){const E=this.getXhr(),x=this.currXhrId++,A=this.pendingRequests[x]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const D in this.httpHeaders){const b=this.httpHeaders[D];typeof b>"u"||E.setRequestHeader(D,b)}return this.isHttp&&"begin"in S&&"end"in S?(E.setRequestHeader("Range",`bytes=${S.begin}-${S.end-1}`),A.expectedStatus=c):A.expectedStatus=l,E.responseType="arraybuffer",S.onError&&(E.onerror=function(D){S.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,x),E.onprogress=this.onProgress.bind(this,x),A.onHeadersReceived=S.onHeadersReceived,A.onDone=S.onDone,A.onError=S.onError,A.onProgress=S.onProgress,E.send(null),x}onProgress(S,E){const x=this.pendingRequests[S];x&&x.onProgress?.(E)}onStateChange(S,E){const x=this.pendingRequests[S];if(!x)return;const A=x.xhr;if(A.readyState>=2&&x.onHeadersReceived&&(x.onHeadersReceived(),delete x.onHeadersReceived),A.readyState!==4||!(S in this.pendingRequests))return;if(delete this.pendingRequests[S],A.status===0&&this.isHttp){x.onError?.(A.status);return}const D=A.status||l;if(!(D===l&&x.expectedStatus===c)&&D!==x.expectedStatus){x.onError?.(A.status);return}const I=p(A);if(D===c){const R=A.getResponseHeader("Content-Range"),q=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);x.onDone({begin:parseInt(q[1],10),chunk:I})}else I?x.onDone({begin:0,chunk:I}):x.onError?.(A.status)}getRequestXhr(S){return this.pendingRequests[S].xhr}isPendingRequest(S){return S in this.pendingRequests}abortRequest(S){const E=this.pendingRequests[S].xhr;delete this.pendingRequests[S],E.abort()}}class u{constructor(S){this._source=S,this._manager=new h(S.url,{httpHeaders:S.httpHeaders,withCredentials:S.withCredentials}),this._rangeChunkSize=S.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(S){const E=this._rangeRequestReaders.indexOf(S);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(S,E){const x=new g(this._manager,S,E);return x.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(x),x}cancelAllRequests(S){this._fullRequestReader?.cancel(S);for(const E of this._rangeRequestReaders.slice(0))E.cancel(S)}}e.PDFNetworkStream=u;class d{constructor(S,E){this._manager=S;const x={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=S.requestFull(x),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const S=this._fullRequestId,E=this._manager.getRequestXhr(S),x=b=>E.getResponseHeader(b),{allowRangeRequests:A,suggestedLength:D}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});A&&(this._isRangeSupported=!0),this._contentLength=D||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(x),this._isRangeSupported&&this._manager.abortRequest(S),this._headersReceivedCapability.resolve()}_onDone(S){if(S&&(this._requests.length>0?this._requests.shift().resolve({value:S.chunk,done:!1}):this._cachedChunks.push(S.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(S){this._storedError=(0,o.createResponseStatusError)(S,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(S){this.onProgress?.({loaded:S.loaded,total:S.lengthComputable?S.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const S=(0,i.createPromiseCapability)();return this._requests.push(S),S.promise}cancel(S){this._done=!0,this._headersReceivedCapability.reject(S);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g{constructor(S,E,x){this._manager=S;const A={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._requestId=S.requestRange(E,x,A),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(S){const E=S.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(S){this._storedError=(0,o.createResponseStatusError)(S,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(S){this.isStreamingSupported||this.onProgress?.({loaded:S.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const S=(0,i.createPromiseCapability)();return this._requests.push(S),S.promise}cancel(S){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=r(1),o=r(33);function l(d,g,y){return{method:"GET",headers:d,signal:y.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function c(d){const g=new Headers;for(const y in d){const S=d[y];typeof S>"u"||g.append(y,S)}return g}class p{constructor(g){this.source=g,this.isHttp=/^https?:/i.test(g.url),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(g,y){if(y<=this._progressiveDataLength)return null;const S=new u(this,g,y);return this._rangeRequestReaders.push(S),S}cancelAllRequests(g){this._fullRequestReader&&this._fullRequestReader.cancel(g);for(const y of this._rangeRequestReaders.slice(0))y.cancel(g)}}e.PDFFetchStream=p;class h{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const y=g.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=c(this._stream.httpHeaders);const S=y.url;fetch(S,l(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,o.validateResponseStatus)(E.status))throw(0,o.createResponseStatusError)(E.status,S);this._reader=E.body.getReader(),this._headersCapability.resolve();const x=b=>E.headers.get(b),{allowRangeRequests:A,suggestedLength:D}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=D||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(x),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:g,done:y}=await this._reader.read();return y?{value:g,done:y}:(this._loaded+=g.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){this._reader&&this._reader.cancel(g),this._abortController.abort()}}class u{constructor(g,y,S){this._stream=g,this._reader=null,this._loaded=0;const E=g.source;this._withCredentials=E.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!E.disableStream,this._abortController=new AbortController,this._headers=c(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${S-1}`);const x=E.url;fetch(x,l(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,o.validateResponseStatus)(A.status))throw(0,o.createResponseStatusError)(A.status,x);this._readCapability.resolve(),this._reader=A.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:g,done:y}=await this._reader.read();return y?{value:g,done:y}:(this._loaded+=g.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){this._reader&&this._reader.cancel(g),this._abortController.abort()}}})],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return l.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return c.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return p.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return d.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return g.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r.version}});var e=__w_pdfjs_require__(1),r=__w_pdfjs_require__(4),i=__w_pdfjs_require__(8),o=__w_pdfjs_require__(22),l=__w_pdfjs_require__(7),c=__w_pdfjs_require__(27),p=__w_pdfjs_require__(15),h=__w_pdfjs_require__(3),u=__w_pdfjs_require__(30),d=__w_pdfjs_require__(31),g=__w_pdfjs_require__(29);if(h.isNodeJS){const{PDFNodeStream:y}=__w_pdfjs_require__(32);(0,r.setPDFNetworkStreamFactory)(S=>new y(S))}else{const{PDFNetworkStream:y}=__w_pdfjs_require__(35),{PDFFetchStream:S}=__w_pdfjs_require__(36);(0,r.setPDFNetworkStreamFactory)(E=>(0,i.isValidFetchUrl)(E.url)?new S(E):new y(E))}})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();const pdfWorker="/Schedule-Sculptor/assets/pdf.worker.min-ZbYrRmVo.js";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _defaultBaseGeminiUrl,_defaultBaseVertexUrl;function getDefaultBaseUrls(){return{geminiUrl:_defaultBaseGeminiUrl,vertexUrl:_defaultBaseVertexUrl}}function getBaseUrl(t,e,r,i){var o,l;if(!t?.baseUrl){const c=getDefaultBaseUrls();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:r:(l=c.geminiUrl)!==null&&l!==void 0?l:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseModule{}function formatMap(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function setValueByPath(t,e,r){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const p=c.slice(0,-2);if(!(p in t))if(Array.isArray(r))t[p]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[p])){const h=t[p];if(Array.isArray(r))for(let u=0;u<h.length;u++){const d=h[u];setValueByPath(d,e.slice(l+1),r[u])}else for(const u of h)setValueByPath(u,e.slice(l+1),r)}return}else if(c.endsWith("[0]")){const p=c.slice(0,-3);p in t||(t[p]=[{}]);const h=t[p];setValueByPath(h[0],e.slice(l+1),r);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===o)return;if(typeof o=="object"&&typeof r=="object"&&o!==null&&r!==null)Object.assign(o,r);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[i]=r}function getValueByPath(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return r;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(p=>getValueByPath(p,e.slice(i+1),r)):r}else return r}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return r;throw i}}function moveValueByPath(t,e){for(const[r,i]of Object.entries(e)){const o=r.split("."),l=i.split("."),c=new Set;let p=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){p=h;break}if(p!==-1&&l.length>p)for(let h=p;h<l.length;h++){const u=l[h];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&c.add(u)}_moveValueRecursive(t,o,l,0,c)}}function _moveValueRecursive(t,e,r,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const l=e[i];if(l.endsWith("[]")){const c=l.slice(0,-2),p=t;if(c in p&&Array.isArray(p[c]))for(const h of p[c])_moveValueRecursive(h,e,r,i+1,o)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,p=Object.keys(c).filter(u=>!u.startsWith("_")&&!o.has(u)),h={};for(const u of p)h[u]=c[u];for(const[u,d]of Object.entries(h)){const g=[];for(const y of r.slice(i))y==="*"?g.push(u):g.push(y);setValueByPath(c,g,d)}for(const u of p)delete c[u]}}else{const c=t;l in c&&_moveValueRecursive(c[l],e,r,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tBytes$1(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fetchPredictOperationParametersToVertex(t){const e={},r=getValueByPath(t,["operationName"]);r!=null&&setValueByPath(e,["operationName"],r);const i=getValueByPath(t,["resourceName"]);return i!=null&&setValueByPath(e,["_url","resourceName"],i),e}function generateVideosOperationFromMldev$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata"]);i!=null&&setValueByPath(e,["metadata"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["response","generateVideoResponse"]);return c!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev$1(c)),e}function generateVideosOperationFromVertex$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata"]);i!=null&&setValueByPath(e,["metadata"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["response"]);return c!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex$1(c)),e}function generateVideosResponseFromMldev$1(t){const e={},r=getValueByPath(t,["generatedSamples"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>generatedVideoFromMldev$1(c))),setValueByPath(e,["generatedVideos"],l)}const i=getValueByPath(t,["raiMediaFilteredCount"]);i!=null&&setValueByPath(e,["raiMediaFilteredCount"],i);const o=getValueByPath(t,["raiMediaFilteredReasons"]);return o!=null&&setValueByPath(e,["raiMediaFilteredReasons"],o),e}function generateVideosResponseFromVertex$1(t){const e={},r=getValueByPath(t,["videos"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>generatedVideoFromVertex$1(c))),setValueByPath(e,["generatedVideos"],l)}const i=getValueByPath(t,["raiMediaFilteredCount"]);i!=null&&setValueByPath(e,["raiMediaFilteredCount"],i);const o=getValueByPath(t,["raiMediaFilteredReasons"]);return o!=null&&setValueByPath(e,["raiMediaFilteredReasons"],o),e}function generatedVideoFromMldev$1(t){const e={},r=getValueByPath(t,["video"]);return r!=null&&setValueByPath(e,["video"],videoFromMldev$1(r)),e}function generatedVideoFromVertex$1(t){const e={},r=getValueByPath(t,["_self"]);return r!=null&&setValueByPath(e,["video"],videoFromVertex$1(r)),e}function getOperationParametersToMldev(t){const e={},r=getValueByPath(t,["operationName"]);return r!=null&&setValueByPath(e,["_url","operationName"],r),e}function getOperationParametersToVertex(t){const e={},r=getValueByPath(t,["operationName"]);return r!=null&&setValueByPath(e,["_url","operationName"],r),e}function importFileOperationFromMldev$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata"]);i!=null&&setValueByPath(e,["metadata"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["response"]);return c!=null&&setValueByPath(e,["response"],importFileResponseFromMldev$1(c)),e}function importFileResponseFromMldev$1(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["parent"]);i!=null&&setValueByPath(e,["parent"],i);const o=getValueByPath(t,["documentName"]);return o!=null&&setValueByPath(e,["documentName"],o),e}function uploadToFileSearchStoreOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata"]);i!=null&&setValueByPath(e,["metadata"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["response"]);return c!=null&&setValueByPath(e,["response"],uploadToFileSearchStoreResponseFromMldev(c)),e}function uploadToFileSearchStoreResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["parent"]);i!=null&&setValueByPath(e,["parent"],i);const o=getValueByPath(t,["documentName"]);return o!=null&&setValueByPath(e,["documentName"],o),e}function videoFromMldev$1(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const i=getValueByPath(t,["encodedVideo"]);i!=null&&setValueByPath(e,["videoBytes"],tBytes$1(i));const o=getValueByPath(t,["encoding"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function videoFromVertex$1(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["uri"],r);const i=getValueByPath(t,["bytesBase64Encoded"]);i!=null&&setValueByPath(e,["videoBytes"],tBytes$1(i));const o=getValueByPath(t,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Outcome;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Outcome||(Outcome={}));var Language;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Language||(Language={}));var FunctionResponseScheduling;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(FunctionResponseScheduling||(FunctionResponseScheduling={}));var Type;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Type||(Type={}));var Mode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mode||(Mode={}));var ApiSpec;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ApiSpec||(ApiSpec={}));var AuthType;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(AuthType||(AuthType={}));var HttpElementLocation;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(HttpElementLocation||(HttpElementLocation={}));var PhishBlockThreshold;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(PhishBlockThreshold||(PhishBlockThreshold={}));var HarmCategory;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(HarmCategory||(HarmCategory={}));var HarmBlockMethod;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(HarmBlockMethod||(HarmBlockMethod={}));var HarmBlockThreshold;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(HarmBlockThreshold||(HarmBlockThreshold={}));var FinishReason;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(FinishReason||(FinishReason={}));var HarmProbability;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var HarmSeverity;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HarmSeverity||(HarmSeverity={}));var UrlRetrievalStatus;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(UrlRetrievalStatus||(UrlRetrievalStatus={}));var BlockedReason;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(BlockedReason||(BlockedReason={}));var TrafficType;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(TrafficType||(TrafficType={}));var Modality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Modality||(Modality={}));var MediaResolution;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MediaResolution||(MediaResolution={}));var TuningMode;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TuningMode||(TuningMode={}));var AdapterSize;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AdapterSize||(AdapterSize={}));var JobState;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(JobState||(JobState={}));var TuningTask;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(TuningTask||(TuningTask={}));var FeatureSelectionPreference;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FeatureSelectionPreference||(FeatureSelectionPreference={}));var Behavior;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Behavior||(Behavior={}));var DynamicRetrievalConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalConfigMode||(DynamicRetrievalConfigMode={}));var Environment;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Environment||(Environment={}));var FunctionCallingConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(FunctionCallingConfigMode||(FunctionCallingConfigMode={}));var SafetyFilterLevel;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(SafetyFilterLevel||(SafetyFilterLevel={}));var PersonGeneration;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(PersonGeneration||(PersonGeneration={}));var ImagePromptLanguage;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ImagePromptLanguage||(ImagePromptLanguage={}));var MaskReferenceMode;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MaskReferenceMode||(MaskReferenceMode={}));var ControlReferenceType;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ControlReferenceType||(ControlReferenceType={}));var SubjectReferenceType;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SubjectReferenceType||(SubjectReferenceType={}));var EditMode;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EditMode||(EditMode={}));var SegmentMode;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(SegmentMode||(SegmentMode={}));var VideoGenerationReferenceType;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(VideoGenerationReferenceType||(VideoGenerationReferenceType={}));var VideoGenerationMaskMode;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(VideoGenerationMaskMode||(VideoGenerationMaskMode={}));var VideoCompressionQuality;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(VideoCompressionQuality||(VideoCompressionQuality={}));var TuningMethod;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(TuningMethod||(TuningMethod={}));var DocumentState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(DocumentState||(DocumentState={}));var FileState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(FileState||(FileState={}));var FileSource;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(FileSource||(FileSource={}));var TurnCompleteReason;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(TurnCompleteReason||(TurnCompleteReason={}));var MediaModality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MediaModality||(MediaModality={}));var StartSensitivity;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(StartSensitivity||(StartSensitivity={}));var EndSensitivity;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EndSensitivity||(EndSensitivity={}));var ActivityHandling;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ActivityHandling||(ActivityHandling={}));var TurnCoverage;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(TurnCoverage||(TurnCoverage={}));var Scale;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Scale||(Scale={}));var MusicGenerationMode;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(MusicGenerationMode||(MusicGenerationMode={}));var LiveMusicPlaybackControl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(LiveMusicPlaybackControl||(LiveMusicPlaybackControl={}));class HttpResponse{constructor(e){const r={};for(const i of e.headers.entries())r[i[0]]=i[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class GenerateContentResponse{get text(){var e,r,i,o,l,c,p,h;if(((o=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const g=[];for(const y of(h=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&h!==void 0?h:[]){for(const[S,E]of Object.entries(y))S!=="text"&&S!=="thought"&&(E!==null||E!==void 0)&&g.push(S);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;d=!0,u+=y.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,r,i,o,l,c,p,h;if(((o=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const g of(h=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&h!==void 0?h:[]){for(const[y,S]of Object.entries(g))y!=="inlineData"&&(S!==null||S!==void 0)&&d.push(y);g.inlineData&&typeof g.inlineData.data=="string"&&(u+=atob(g.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,r,i,o,l,c,p,h;if(((o=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(h=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||h===void 0?void 0:h.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(u?.length!==0)return u}get executableCode(){var e,r,i,o,l,c,p,h,u;if(((o=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(h=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||h===void 0?void 0:h.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,r,i,o,l,c,p,h,u;if(((o=(i=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(h=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||h===void 0?void 0:h.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.output}}class EmbedContentResponse{}class GenerateImagesResponse{}class EditImageResponse{}class UpscaleImageResponse{}class RecontextImageResponse{}class SegmentImageResponse{}class ListModelsResponse{}class DeleteModelResponse{}class CountTokensResponse{}class ComputeTokensResponse{}class GenerateVideosOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const i=new GenerateVideosOperation;let o;const l=e;return r?o=generateVideosOperationFromVertex$1(l):o=generateVideosOperationFromMldev$1(l),Object.assign(i,o),i}}class ListTuningJobsResponse{}class DeleteCachedContentResponse{}class ListCachedContentsResponse{}class ListDocumentsResponse{}class ListFileSearchStoresResponse{}class UploadToFileSearchStoreResumableResponse{}class ImportFileOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const i=new ImportFileOperation,l=importFileOperationFromMldev$1(e);return Object.assign(i,l),i}}class ListFilesResponse{}class CreateFileResponse{}class DeleteFileResponse{}class ListBatchJobsResponse{}class LiveServerMessage{get text(){var e,r,i;let o="",l=!1;const c=[];for(const p of(i=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&i!==void 0?i:[]){for(const[h,u]of Object.entries(p))h!=="text"&&h!=="thought"&&u!==null&&c.push(h);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;l=!0,o+=p.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,r,i;let o="";const l=[];for(const c of(i=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(c))p!=="inlineData"&&h!==null&&l.push(p);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class LiveMusicServerMessage{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class UploadToFileSearchStoreOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const i=new UploadToFileSearchStoreOperation,l=uploadToFileSearchStoreOperationFromMldev(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tModel(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tCachesModel(t,e){const r=tModel(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function tBlobs(t){return Array.isArray(t)?t.map(e=>tBlob(e)):[tBlob(t)]}function tBlob(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function tImageBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tAudioBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tPart(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function tParts(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>tPart(e)):[tPart(t)]}function _isContent(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function _isFunctionCallPart(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _isFunctionResponsePart(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tContent(t){if(t==null)throw new Error("ContentUnion is required");return _isContent(t)?t:{role:"user",parts:tParts(t)}}function tContentsForEmbed(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const i=tContent(r);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const r=tContent(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>tContent(r)):[tContent(e)]}function tContents(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(_isFunctionCallPart(t)||_isFunctionResponsePart(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tContent(t)]}const e=[],r=[],i=_isContent(t[0]);for(const o of t){const l=_isContent(o);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(_isFunctionCallPart(o)||_isFunctionResponsePart(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return i||e.push({role:"user",parts:tParts(r)}),e}function flattenTypeArrayToAnyOf(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(i=>i!=="null");if(r.length===1)e.type=Object.values(Type).includes(r[0].toUpperCase())?r[0].toUpperCase():Type.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of r)e.anyOf.push({type:Object.values(Type).includes(i.toUpperCase())?i.toUpperCase():Type.TYPE_UNSPECIFIED})}}function processJsonSchema(t){const e={},r=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&flattenTypeArrayToAnyOf(t.type,e);for(const[c,p]of Object.entries(t))if(p!=null)if(c=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(Type).includes(p.toUpperCase())?p.toUpperCase():Type.TYPE_UNSPECIFIED}else if(r.includes(c))e[c]=processJsonSchema(p);else if(i.includes(c)){const h=[];for(const u of p){if(u.type=="null"){e.nullable=!0;continue}h.push(processJsonSchema(u))}e[c]=h}else if(o.includes(c)){const h={};for(const[u,d]of Object.entries(p))h[u]=processJsonSchema(d);e[c]=h}else{if(c==="additionalProperties")continue;e[c]=p}return e}function tSchema(t){return processJsonSchema(t)}function tSpeechConfig(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function tLiveSpeechConfig(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function tTool(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=processJsonSchema(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=processJsonSchema(e.response));return t}function tTools(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function resourceName(t,e,r,i=1){const o=!e.startsWith(`${r}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:o?`${r}/${e}`:e}function tCachedContentName(t,e){if(typeof e!="string")throw new Error("name must be a string");return resourceName(t,e,"cachedContents")}function tTuningJobStatus(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function tBytes(t){return tBytes$1(t)}function _isFile(t){return t!=null&&typeof t=="object"&&"name"in t}function isGeneratedVideo(t){return t!=null&&typeof t=="object"&&"video"in t}function isVideo(t){return t!=null&&typeof t=="object"&&"uri"in t}function tFileName(t){var e;let r;if(_isFile(t)&&(r=t.name),!(isVideo(t)&&(r=t.uri,r===void 0))&&!(isGeneratedVideo(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const o=r.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${r}`);r=o[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function tModelsUrl(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function tExtractModels(t){for(const e of["models","tunedModels","publisherModels"])if(hasField(t,e))return t[e];return[]}function hasField(t,e){return t!==null&&typeof t=="object"&&e in t}function mcpToGeminiTool(t,e={}){const r=t,i={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(i.responseJsonSchema=r.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function mcpToolsToGeminiTool(t,e={}){const r=[],i=new Set;for(const o of t){const l=o.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const c=mcpToGeminiTool(o,e);c.functionDeclarations&&r.push(...c.functionDeclarations)}return{functionDeclarations:r}}function tBatchJobSource(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;const i=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,o=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function tBatchJobDestination(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tRecvBatchJobDestination(t){if(typeof t!="object"||t===null)return{};const e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;const o=r.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const h=c.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function tBatchJobName(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function tJobState(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function batchJobDestinationFromMldev(t){const e={},r=getValueByPath(t,["responsesFile"]);r!=null&&setValueByPath(e,["fileName"],r);const i=getValueByPath(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>inlinedResponseFromMldev(c))),setValueByPath(e,["inlinedResponses"],l)}const o=getValueByPath(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["inlinedEmbedContentResponses"],l)}return e}function batchJobDestinationFromVertex(t){const e={},r=getValueByPath(t,["predictionsFormat"]);r!=null&&setValueByPath(e,["format"],r);const i=getValueByPath(t,["gcsDestination","outputUriPrefix"]);i!=null&&setValueByPath(e,["gcsUri"],i);const o=getValueByPath(t,["bigqueryDestination","outputUri"]);return o!=null&&setValueByPath(e,["bigqueryUri"],o),e}function batchJobDestinationToVertex(t){const e={},r=getValueByPath(t,["format"]);r!=null&&setValueByPath(e,["predictionsFormat"],r);const i=getValueByPath(t,["gcsUri"]);i!=null&&setValueByPath(e,["gcsDestination","outputUriPrefix"],i);const o=getValueByPath(t,["bigqueryUri"]);if(o!=null&&setValueByPath(e,["bigqueryDestination","outputUri"],o),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function batchJobFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata","displayName"]);i!=null&&setValueByPath(e,["displayName"],i);const o=getValueByPath(t,["metadata","state"]);o!=null&&setValueByPath(e,["state"],tJobState(o));const l=getValueByPath(t,["metadata","createTime"]);l!=null&&setValueByPath(e,["createTime"],l);const c=getValueByPath(t,["metadata","endTime"]);c!=null&&setValueByPath(e,["endTime"],c);const p=getValueByPath(t,["metadata","updateTime"]);p!=null&&setValueByPath(e,["updateTime"],p);const h=getValueByPath(t,["metadata","model"]);h!=null&&setValueByPath(e,["model"],h);const u=getValueByPath(t,["metadata","output"]);return u!=null&&setValueByPath(e,["dest"],batchJobDestinationFromMldev(tRecvBatchJobDestination(u))),e}function batchJobFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["displayName"]);i!=null&&setValueByPath(e,["displayName"],i);const o=getValueByPath(t,["state"]);o!=null&&setValueByPath(e,["state"],tJobState(o));const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["createTime"]);c!=null&&setValueByPath(e,["createTime"],c);const p=getValueByPath(t,["startTime"]);p!=null&&setValueByPath(e,["startTime"],p);const h=getValueByPath(t,["endTime"]);h!=null&&setValueByPath(e,["endTime"],h);const u=getValueByPath(t,["updateTime"]);u!=null&&setValueByPath(e,["updateTime"],u);const d=getValueByPath(t,["model"]);d!=null&&setValueByPath(e,["model"],d);const g=getValueByPath(t,["inputConfig"]);g!=null&&setValueByPath(e,["src"],batchJobSourceFromVertex(g));const y=getValueByPath(t,["outputConfig"]);y!=null&&setValueByPath(e,["dest"],batchJobDestinationFromVertex(tRecvBatchJobDestination(y)));const S=getValueByPath(t,["completionStats"]);return S!=null&&setValueByPath(e,["completionStats"],S),e}function batchJobSourceFromVertex(t){const e={},r=getValueByPath(t,["instancesFormat"]);r!=null&&setValueByPath(e,["format"],r);const i=getValueByPath(t,["gcsSource","uris"]);i!=null&&setValueByPath(e,["gcsUri"],i);const o=getValueByPath(t,["bigquerySource","inputUri"]);return o!=null&&setValueByPath(e,["bigqueryUri"],o),e}function batchJobSourceToMldev(t,e){const r={};if(getValueByPath(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(getValueByPath(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=getValueByPath(e,["fileName"]);i!=null&&setValueByPath(r,["fileName"],i);const o=getValueByPath(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>inlinedRequestToMldev(t,c))),setValueByPath(r,["requests","requests"],l)}return r}function batchJobSourceToVertex(t){const e={},r=getValueByPath(t,["format"]);r!=null&&setValueByPath(e,["instancesFormat"],r);const i=getValueByPath(t,["gcsUri"]);i!=null&&setValueByPath(e,["gcsSource","uris"],i);const o=getValueByPath(t,["bigqueryUri"]);if(o!=null&&setValueByPath(e,["bigquerySource","inputUri"],o),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function blobToMldev$4(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function cancelBatchJobParametersToMldev(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,i)),r}function cancelBatchJobParametersToVertex(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,i)),r}function candidateFromMldev$1(t){const e={},r=getValueByPath(t,["content"]);r!=null&&setValueByPath(e,["content"],r);const i=getValueByPath(t,["citationMetadata"]);i!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev$1(i));const o=getValueByPath(t,["tokenCount"]);o!=null&&setValueByPath(e,["tokenCount"],o);const l=getValueByPath(t,["finishReason"]);l!=null&&setValueByPath(e,["finishReason"],l);const c=getValueByPath(t,["avgLogprobs"]);c!=null&&setValueByPath(e,["avgLogprobs"],c);const p=getValueByPath(t,["groundingMetadata"]);p!=null&&setValueByPath(e,["groundingMetadata"],p);const h=getValueByPath(t,["index"]);h!=null&&setValueByPath(e,["index"],h);const u=getValueByPath(t,["logprobsResult"]);u!=null&&setValueByPath(e,["logprobsResult"],u);const d=getValueByPath(t,["safetyRatings"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(S=>S)),setValueByPath(e,["safetyRatings"],y)}const g=getValueByPath(t,["urlContextMetadata"]);return g!=null&&setValueByPath(e,["urlContextMetadata"],g),e}function citationMetadataFromMldev$1(t){const e={},r=getValueByPath(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),setValueByPath(e,["citations"],i)}return e}function contentToMldev$4(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>partToMldev$4(l))),setValueByPath(e,["parts"],o)}const i=getValueByPath(t,["role"]);return i!=null&&setValueByPath(e,["role"],i),e}function createBatchJobConfigToMldev(t,e){const r={},i=getValueByPath(t,["displayName"]);if(e!==void 0&&i!=null&&setValueByPath(e,["batch","displayName"],i),getValueByPath(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function createBatchJobConfigToVertex(t,e){const r={},i=getValueByPath(t,["displayName"]);e!==void 0&&i!=null&&setValueByPath(e,["displayName"],i);const o=getValueByPath(t,["dest"]);return e!==void 0&&o!=null&&setValueByPath(e,["outputConfig"],batchJobDestinationToVertex(tBatchJobDestination(o))),r}function createBatchJobParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["src"]);o!=null&&setValueByPath(r,["batch","inputConfig"],batchJobSourceToMldev(t,tBatchJobSource(t,o)));const l=getValueByPath(e,["config"]);return l!=null&&createBatchJobConfigToMldev(l,r),r}function createBatchJobParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["model"],tModel(t,i));const o=getValueByPath(e,["src"]);o!=null&&setValueByPath(r,["inputConfig"],batchJobSourceToVertex(tBatchJobSource(t,o)));const l=getValueByPath(e,["config"]);return l!=null&&createBatchJobConfigToVertex(l,r),r}function createEmbeddingsBatchJobConfigToMldev(t,e){const r={},i=getValueByPath(t,["displayName"]);return e!==void 0&&i!=null&&setValueByPath(e,["batch","displayName"],i),r}function createEmbeddingsBatchJobParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["src"]);o!=null&&setValueByPath(r,["batch","inputConfig"],embeddingsBatchJobSourceToMldev(t,o));const l=getValueByPath(e,["config"]);return l!=null&&createEmbeddingsBatchJobConfigToMldev(l,r),r}function deleteBatchJobParametersToMldev(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,i)),r}function deleteBatchJobParametersToVertex(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,i)),r}function deleteResourceJobFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["name"]);i!=null&&setValueByPath(e,["name"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);return l!=null&&setValueByPath(e,["error"],l),e}function deleteResourceJobFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["name"]);i!=null&&setValueByPath(e,["name"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);return l!=null&&setValueByPath(e,["error"],l),e}function embedContentBatchToMldev(t,e){const r={},i=getValueByPath(e,["contents"]);if(i!=null){let l=tContentsForEmbed(t,i);Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(r,["requests[]","request","content"],l)}const o=getValueByPath(e,["config"]);return o!=null&&(setValueByPath(r,["_self"],embedContentConfigToMldev$1(o,r)),moveValueByPath(r,{"requests[].*":"requests[].request.*"})),r}function embedContentConfigToMldev$1(t,e){const r={},i=getValueByPath(t,["taskType"]);e!==void 0&&i!=null&&setValueByPath(e,["requests[]","taskType"],i);const o=getValueByPath(t,["title"]);e!==void 0&&o!=null&&setValueByPath(e,["requests[]","title"],o);const l=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&setValueByPath(e,["requests[]","outputDimensionality"],l),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function embeddingsBatchJobSourceToMldev(t,e){const r={},i=getValueByPath(e,["fileName"]);i!=null&&setValueByPath(r,["file_name"],i);const o=getValueByPath(e,["inlinedRequests"]);return o!=null&&setValueByPath(r,["requests"],embedContentBatchToMldev(t,o)),r}function fileDataToMldev$4(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function generateContentConfigToMldev$1(t,e,r){const i={},o=getValueByPath(e,["systemInstruction"]);r!==void 0&&o!=null&&setValueByPath(r,["systemInstruction"],contentToMldev$4(tContent(o)));const l=getValueByPath(e,["temperature"]);l!=null&&setValueByPath(i,["temperature"],l);const c=getValueByPath(e,["topP"]);c!=null&&setValueByPath(i,["topP"],c);const p=getValueByPath(e,["topK"]);p!=null&&setValueByPath(i,["topK"],p);const h=getValueByPath(e,["candidateCount"]);h!=null&&setValueByPath(i,["candidateCount"],h);const u=getValueByPath(e,["maxOutputTokens"]);u!=null&&setValueByPath(i,["maxOutputTokens"],u);const d=getValueByPath(e,["stopSequences"]);d!=null&&setValueByPath(i,["stopSequences"],d);const g=getValueByPath(e,["responseLogprobs"]);g!=null&&setValueByPath(i,["responseLogprobs"],g);const y=getValueByPath(e,["logprobs"]);y!=null&&setValueByPath(i,["logprobs"],y);const S=getValueByPath(e,["presencePenalty"]);S!=null&&setValueByPath(i,["presencePenalty"],S);const E=getValueByPath(e,["frequencyPenalty"]);E!=null&&setValueByPath(i,["frequencyPenalty"],E);const x=getValueByPath(e,["seed"]);x!=null&&setValueByPath(i,["seed"],x);const A=getValueByPath(e,["responseMimeType"]);A!=null&&setValueByPath(i,["responseMimeType"],A);const D=getValueByPath(e,["responseSchema"]);D!=null&&setValueByPath(i,["responseSchema"],tSchema(D));const b=getValueByPath(e,["responseJsonSchema"]);if(b!=null&&setValueByPath(i,["responseJsonSchema"],b),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=getValueByPath(e,["safetySettings"]);if(r!==void 0&&I!=null){let K=I;Array.isArray(K)&&(K=K.map(se=>safetySettingToMldev$1(se))),setValueByPath(r,["safetySettings"],K)}const R=getValueByPath(e,["tools"]);if(r!==void 0&&R!=null){let K=tTools(R);Array.isArray(K)&&(K=K.map(se=>toolToMldev$4(tTool(se)))),setValueByPath(r,["tools"],K)}const q=getValueByPath(e,["toolConfig"]);if(r!==void 0&&q!=null&&setValueByPath(r,["toolConfig"],q),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=getValueByPath(e,["cachedContent"]);r!==void 0&&G!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,G));const z=getValueByPath(e,["responseModalities"]);z!=null&&setValueByPath(i,["responseModalities"],z);const B=getValueByPath(e,["mediaResolution"]);B!=null&&setValueByPath(i,["mediaResolution"],B);const M=getValueByPath(e,["speechConfig"]);if(M!=null&&setValueByPath(i,["speechConfig"],tSpeechConfig(M)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=getValueByPath(e,["thinkingConfig"]);O!=null&&setValueByPath(i,["thinkingConfig"],O);const W=getValueByPath(e,["imageConfig"]);return W!=null&&setValueByPath(i,["imageConfig"],W),i}function generateContentResponseFromMldev$1(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(u=>candidateFromMldev$1(u))),setValueByPath(e,["candidates"],h)}const o=getValueByPath(t,["modelVersion"]);o!=null&&setValueByPath(e,["modelVersion"],o);const l=getValueByPath(t,["promptFeedback"]);l!=null&&setValueByPath(e,["promptFeedback"],l);const c=getValueByPath(t,["responseId"]);c!=null&&setValueByPath(e,["responseId"],c);const p=getValueByPath(t,["usageMetadata"]);return p!=null&&setValueByPath(e,["usageMetadata"],p),e}function getBatchJobParametersToMldev(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,i)),r}function getBatchJobParametersToVertex(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,i)),r}function googleMapsToMldev$4(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$4(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function inlinedRequestToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["request","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let p=tContents(o);Array.isArray(p)&&(p=p.map(h=>contentToMldev$4(h))),setValueByPath(r,["request","contents"],p)}const l=getValueByPath(e,["metadata"]);l!=null&&setValueByPath(r,["metadata"],l);const c=getValueByPath(e,["config"]);return c!=null&&setValueByPath(r,["request","generationConfig"],generateContentConfigToMldev$1(t,c,getValueByPath(r,["request"],{}))),r}function inlinedResponseFromMldev(t){const e={},r=getValueByPath(t,["response"]);r!=null&&setValueByPath(e,["response"],generateContentResponseFromMldev$1(r));const i=getValueByPath(t,["error"]);return i!=null&&setValueByPath(e,["error"],i),e}function listBatchJobsConfigToMldev(t,e){const r={},i=getValueByPath(t,["pageSize"]);e!==void 0&&i!=null&&setValueByPath(e,["_query","pageSize"],i);const o=getValueByPath(t,["pageToken"]);if(e!==void 0&&o!=null&&setValueByPath(e,["_query","pageToken"],o),getValueByPath(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function listBatchJobsConfigToVertex(t,e){const r={},i=getValueByPath(t,["pageSize"]);e!==void 0&&i!=null&&setValueByPath(e,["_query","pageSize"],i);const o=getValueByPath(t,["pageToken"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageToken"],o);const l=getValueByPath(t,["filter"]);return e!==void 0&&l!=null&&setValueByPath(e,["_query","filter"],l),r}function listBatchJobsParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listBatchJobsConfigToMldev(r,e),e}function listBatchJobsParametersToVertex(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listBatchJobsConfigToVertex(r,e),e}function listBatchJobsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>batchJobFromMldev(c))),setValueByPath(e,["batchJobs"],l)}return e}function listBatchJobsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>batchJobFromVertex(c))),setValueByPath(e,["batchJobs"],l)}return e}function partToMldev$4(t){const e={},r=getValueByPath(t,["functionCall"]);r!=null&&setValueByPath(e,["functionCall"],r);const i=getValueByPath(t,["codeExecutionResult"]);i!=null&&setValueByPath(e,["codeExecutionResult"],i);const o=getValueByPath(t,["executableCode"]);o!=null&&setValueByPath(e,["executableCode"],o);const l=getValueByPath(t,["fileData"]);l!=null&&setValueByPath(e,["fileData"],fileDataToMldev$4(l));const c=getValueByPath(t,["functionResponse"]);c!=null&&setValueByPath(e,["functionResponse"],c);const p=getValueByPath(t,["inlineData"]);p!=null&&setValueByPath(e,["inlineData"],blobToMldev$4(p));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const d=getValueByPath(t,["thoughtSignature"]);d!=null&&setValueByPath(e,["thoughtSignature"],d);const g=getValueByPath(t,["videoMetadata"]);return g!=null&&setValueByPath(e,["videoMetadata"],g),e}function safetySettingToMldev$1(t){const e={},r=getValueByPath(t,["category"]);if(r!=null&&setValueByPath(e,["category"],r),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=getValueByPath(t,["threshold"]);return i!=null&&setValueByPath(e,["threshold"],i),e}function toolToMldev$4(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>g)),setValueByPath(e,["functionDeclarations"],d)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=getValueByPath(t,["googleSearchRetrieval"]);i!=null&&setValueByPath(e,["googleSearchRetrieval"],i);const o=getValueByPath(t,["computerUse"]);o!=null&&setValueByPath(e,["computerUse"],o);const l=getValueByPath(t,["fileSearch"]);l!=null&&setValueByPath(e,["fileSearch"],l);const c=getValueByPath(t,["codeExecution"]);if(c!=null&&setValueByPath(e,["codeExecution"],c),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=getValueByPath(t,["googleMaps"]);p!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$4(p));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$4(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PagedItem;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(PagedItem||(PagedItem={}));class Pager{constructor(e,r,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,i,o)}init(e,r,i){var o,l;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=r.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Batches extends BaseModule{constructor(e){super(),this.apiClient=e,this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)},this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(r),r)}createInlinedGenerateContentRequest(e){const r=createBatchJobParametersToMldev(this.apiClient,e),i=r._url,o=formatMap("{model}:batchGenerateContent",i),p=r.batch.inputConfig.requests,h=p.requests,u=[];for(const d of h){const g=Object.assign({},d);if(g.systemInstruction){const y=g.systemInstruction;delete g.systemInstruction;const S=g.request;S.systemInstruction=y,g.request=S}u.push(g)}return p.requests=u,delete r.config,delete r._url,delete r._query,{path:o,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){const i=r?Object.assign({},r):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${o}`;else if(c)i.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=createBatchJobParametersToVertex(this.apiClient,e);return p=formatMap("batchPredictionJobs",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>batchJobFromVertex(d))}else{const u=createBatchJobParametersToMldev(this.apiClient,e);return p=formatMap("{model}:batchGenerateContent",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>batchJobFromMldev(d))}}async createEmbeddingsInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=createEmbeddingsBatchJobParametersToMldev(this.apiClient,e);return l=formatMap("{model}:asyncBatchEmbedContent",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>batchJobFromMldev(h))}}async get(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=getBatchJobParametersToVertex(this.apiClient,e);return p=formatMap("batchPredictionJobs/{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>batchJobFromVertex(d))}else{const u=getBatchJobParametersToMldev(this.apiClient,e);return p=formatMap("batches/{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>batchJobFromMldev(d))}}async cancel(e){var r,i,o,l;let c="",p={};if(this.apiClient.isVertexAI()){const h=cancelBatchJobParametersToVertex(this.apiClient,e);c=formatMap("batchPredictionJobs/{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=cancelBatchJobParametersToMldev(this.apiClient,e);c=formatMap("batches/{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=listBatchJobsParametersToVertex(e);return p=formatMap("batchPredictionJobs",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listBatchJobsResponseFromVertex(d),y=new ListBatchJobsResponse;return Object.assign(y,g),y})}else{const u=listBatchJobsParametersToMldev(e);return p=formatMap("batches",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listBatchJobsResponseFromMldev(d),y=new ListBatchJobsResponse;return Object.assign(y,g),y})}}async delete(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=deleteBatchJobParametersToVertex(this.apiClient,e);return p=formatMap("batchPredictionJobs/{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>deleteResourceJobFromVertex(d))}else{const u=deleteBatchJobParametersToMldev(this.apiClient,e);return p=formatMap("batches/{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>deleteResourceJobFromMldev(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$3(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function contentToMldev$3(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>partToMldev$3(l))),setValueByPath(e,["parts"],o)}const i=getValueByPath(t,["role"]);return i!=null&&setValueByPath(e,["role"],i),e}function createCachedContentConfigToMldev(t,e){const r={},i=getValueByPath(t,["ttl"]);e!==void 0&&i!=null&&setValueByPath(e,["ttl"],i);const o=getValueByPath(t,["expireTime"]);e!==void 0&&o!=null&&setValueByPath(e,["expireTime"],o);const l=getValueByPath(t,["displayName"]);e!==void 0&&l!=null&&setValueByPath(e,["displayName"],l);const c=getValueByPath(t,["contents"]);if(e!==void 0&&c!=null){let d=tContents(c);Array.isArray(d)&&(d=d.map(g=>contentToMldev$3(g))),setValueByPath(e,["contents"],d)}const p=getValueByPath(t,["systemInstruction"]);e!==void 0&&p!=null&&setValueByPath(e,["systemInstruction"],contentToMldev$3(tContent(p)));const h=getValueByPath(t,["tools"]);if(e!==void 0&&h!=null){let d=h;Array.isArray(d)&&(d=d.map(g=>toolToMldev$3(g))),setValueByPath(e,["tools"],d)}const u=getValueByPath(t,["toolConfig"]);if(e!==void 0&&u!=null&&setValueByPath(e,["toolConfig"],u),getValueByPath(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function createCachedContentConfigToVertex(t,e){const r={},i=getValueByPath(t,["ttl"]);e!==void 0&&i!=null&&setValueByPath(e,["ttl"],i);const o=getValueByPath(t,["expireTime"]);e!==void 0&&o!=null&&setValueByPath(e,["expireTime"],o);const l=getValueByPath(t,["displayName"]);e!==void 0&&l!=null&&setValueByPath(e,["displayName"],l);const c=getValueByPath(t,["contents"]);if(e!==void 0&&c!=null){let g=tContents(c);Array.isArray(g)&&(g=g.map(y=>y)),setValueByPath(e,["contents"],g)}const p=getValueByPath(t,["systemInstruction"]);e!==void 0&&p!=null&&setValueByPath(e,["systemInstruction"],tContent(p));const h=getValueByPath(t,["tools"]);if(e!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>toolToVertex$2(y))),setValueByPath(e,["tools"],g)}const u=getValueByPath(t,["toolConfig"]);e!==void 0&&u!=null&&setValueByPath(e,["toolConfig"],u);const d=getValueByPath(t,["kmsKeyName"]);return e!==void 0&&d!=null&&setValueByPath(e,["encryption_spec","kmsKeyName"],d),r}function createCachedContentParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["model"],tCachesModel(t,i));const o=getValueByPath(e,["config"]);return o!=null&&createCachedContentConfigToMldev(o,r),r}function createCachedContentParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["model"],tCachesModel(t,i));const o=getValueByPath(e,["config"]);return o!=null&&createCachedContentConfigToVertex(o,r),r}function deleteCachedContentParametersToMldev(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,i)),r}function deleteCachedContentParametersToVertex(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,i)),r}function deleteCachedContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteCachedContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function fileDataToMldev$3(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function functionDeclarationToVertex$2(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const i=getValueByPath(t,["name"]);i!=null&&setValueByPath(e,["name"],i);const o=getValueByPath(t,["parameters"]);o!=null&&setValueByPath(e,["parameters"],o);const l=getValueByPath(t,["parametersJsonSchema"]);l!=null&&setValueByPath(e,["parametersJsonSchema"],l);const c=getValueByPath(t,["response"]);c!=null&&setValueByPath(e,["response"],c);const p=getValueByPath(t,["responseJsonSchema"]);return p!=null&&setValueByPath(e,["responseJsonSchema"],p),e}function getCachedContentParametersToMldev(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,i)),r}function getCachedContentParametersToVertex(t,e){const r={},i=getValueByPath(e,["name"]);return i!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,i)),r}function googleMapsToMldev$3(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$3(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function listCachedContentsConfigToMldev(t,e){const r={},i=getValueByPath(t,["pageSize"]);e!==void 0&&i!=null&&setValueByPath(e,["_query","pageSize"],i);const o=getValueByPath(t,["pageToken"]);return e!==void 0&&o!=null&&setValueByPath(e,["_query","pageToken"],o),r}function listCachedContentsConfigToVertex(t,e){const r={},i=getValueByPath(t,["pageSize"]);e!==void 0&&i!=null&&setValueByPath(e,["_query","pageSize"],i);const o=getValueByPath(t,["pageToken"]);return e!==void 0&&o!=null&&setValueByPath(e,["_query","pageToken"],o),r}function listCachedContentsParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listCachedContentsConfigToMldev(r,e),e}function listCachedContentsParametersToVertex(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listCachedContentsConfigToVertex(r,e),e}function listCachedContentsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["cachedContents"],l)}return e}function listCachedContentsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["cachedContents"],l)}return e}function partToMldev$3(t){const e={},r=getValueByPath(t,["functionCall"]);r!=null&&setValueByPath(e,["functionCall"],r);const i=getValueByPath(t,["codeExecutionResult"]);i!=null&&setValueByPath(e,["codeExecutionResult"],i);const o=getValueByPath(t,["executableCode"]);o!=null&&setValueByPath(e,["executableCode"],o);const l=getValueByPath(t,["fileData"]);l!=null&&setValueByPath(e,["fileData"],fileDataToMldev$3(l));const c=getValueByPath(t,["functionResponse"]);c!=null&&setValueByPath(e,["functionResponse"],c);const p=getValueByPath(t,["inlineData"]);p!=null&&setValueByPath(e,["inlineData"],blobToMldev$3(p));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const d=getValueByPath(t,["thoughtSignature"]);d!=null&&setValueByPath(e,["thoughtSignature"],d);const g=getValueByPath(t,["videoMetadata"]);return g!=null&&setValueByPath(e,["videoMetadata"],g),e}function toolToMldev$3(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>g)),setValueByPath(e,["functionDeclarations"],d)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=getValueByPath(t,["googleSearchRetrieval"]);i!=null&&setValueByPath(e,["googleSearchRetrieval"],i);const o=getValueByPath(t,["computerUse"]);o!=null&&setValueByPath(e,["computerUse"],o);const l=getValueByPath(t,["fileSearch"]);l!=null&&setValueByPath(e,["fileSearch"],l);const c=getValueByPath(t,["codeExecution"]);if(c!=null&&setValueByPath(e,["codeExecution"],c),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=getValueByPath(t,["googleMaps"]);p!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$3(p));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$3(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}function toolToVertex$2(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(y=>functionDeclarationToVertex$2(y))),setValueByPath(e,["functionDeclarations"],g)}const i=getValueByPath(t,["retrieval"]);i!=null&&setValueByPath(e,["retrieval"],i);const o=getValueByPath(t,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const l=getValueByPath(t,["computerUse"]);if(l!=null&&setValueByPath(e,["computerUse"],l),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=getValueByPath(t,["codeExecution"]);c!=null&&setValueByPath(e,["codeExecution"],c);const p=getValueByPath(t,["enterpriseWebSearch"]);p!=null&&setValueByPath(e,["enterpriseWebSearch"],p);const h=getValueByPath(t,["googleMaps"]);h!=null&&setValueByPath(e,["googleMaps"],h);const u=getValueByPath(t,["googleSearch"]);u!=null&&setValueByPath(e,["googleSearch"],u);const d=getValueByPath(t,["urlContext"]);return d!=null&&setValueByPath(e,["urlContext"],d),e}function updateCachedContentConfigToMldev(t,e){const r={},i=getValueByPath(t,["ttl"]);e!==void 0&&i!=null&&setValueByPath(e,["ttl"],i);const o=getValueByPath(t,["expireTime"]);return e!==void 0&&o!=null&&setValueByPath(e,["expireTime"],o),r}function updateCachedContentConfigToVertex(t,e){const r={},i=getValueByPath(t,["ttl"]);e!==void 0&&i!=null&&setValueByPath(e,["ttl"],i);const o=getValueByPath(t,["expireTime"]);return e!==void 0&&o!=null&&setValueByPath(e,["expireTime"],o),r}function updateCachedContentParametersToMldev(t,e){const r={},i=getValueByPath(e,["name"]);i!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,i));const o=getValueByPath(e,["config"]);return o!=null&&updateCachedContentConfigToMldev(o,r),r}function updateCachedContentParametersToVertex(t,e){const r={},i=getValueByPath(e,["name"]);i!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,i));const o=getValueByPath(e,["config"]);return o!=null&&updateCachedContentConfigToVertex(o,r),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Caches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(r),r)}async create(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=createCachedContentParametersToVertex(this.apiClient,e);return p=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>d)}else{const u=createCachedContentParametersToMldev(this.apiClient,e);return p=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>d)}}async get(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=getCachedContentParametersToVertex(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>d)}else{const u=getCachedContentParametersToMldev(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>d)}}async delete(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=deleteCachedContentParametersToVertex(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=deleteCachedContentResponseFromVertex(d),y=new DeleteCachedContentResponse;return Object.assign(y,g),y})}else{const u=deleteCachedContentParametersToMldev(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=deleteCachedContentResponseFromMldev(d),y=new DeleteCachedContentResponse;return Object.assign(y,g),y})}}async update(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=updateCachedContentParametersToVertex(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>d)}else{const u=updateCachedContentParametersToMldev(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>d)}}async listInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=listCachedContentsParametersToVertex(e);return p=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listCachedContentsResponseFromVertex(d),y=new ListCachedContentsResponse;return Object.assign(y,g),y})}else{const u=listCachedContentsParametersToMldev(e);return p=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listCachedContentsResponseFromMldev(d),y=new ListCachedContentsResponse;return Object.assign(y,g),y})}}}function __values(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(S){return function(E){return Promise.resolve(E).then(S,g)}}function p(S,E){i[S]&&(o[S]=function(x){return new Promise(function(A,D){l.push([S,x,A,D])>1||h(S,x)})},E&&(o[S]=E(o[S])))}function h(S,E){try{u(i[S](E))}catch(x){y(l[0][3],x)}}function u(S){S.value instanceof __await?Promise.resolve(S.value.v).then(d,g):y(l[0][2],S)}function d(S){h("next",S)}function g(S){h("throw",S)}function y(S,E){S(E),l.shift(),l.length&&h(l[0][0],l[0][1])}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(l){r[l]=t[l]&&function(c){return new Promise(function(p,h){c=t[l](c),o(p,h,c.done,c.value)})}}function o(l,c,p,h){Promise.resolve(h).then(function(u){l({value:u,done:p})},c)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isValidResponse(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:isValidContent(r)}function isValidContent(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function validateHistory(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function extractCuratedHistory(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let i=0;for(;i<r;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let l=!0;for(;i<r&&t[i].role==="model";)o.push(t[i]),l&&!isValidContent(t[i])&&(l=!1),i++;l?e.push(...o):e.pop()}return e}class Chats{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new Chat(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Chat{constructor(e,r,i,o={},l=[]){this.apiClient=e,this.modelsModule=r,this.model=i,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),validateHistory(l)}async sendMessage(e){var r;await this.sendPromise;const i=tContent(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var l,c,p;const h=await o,u=(c=(l=h.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,d=h.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let y=[];d!=null&&(y=(p=d.slice(g))!==null&&p!==void 0?p:[]);const S=u?[u]:[];this.recordHistory(i,S,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var r;await this.sendPromise;const i=tContent(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,i)}getHistory(e=!1){const r=e?extractCuratedHistory(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var i,o;return __asyncGenerator(this,arguments,function*(){var c,p,h,u;const d=[];try{for(var g=!0,y=__asyncValues(e),S;S=yield __await(y.next()),c=S.done,!c;g=!0){u=S.value,g=!1;const E=u;if(isValidResponse(E)){const x=(o=(i=E.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;x!==void 0&&d.push(x)}yield yield __await(E)}}catch(E){p={error:E}}finally{try{!g&&!c&&(h=y.return)&&(yield __await(h.call(y)))}finally{if(p)throw p.error}}this.recordHistory(r,d)})}recordHistory(e,r,i){let o=[];r.length>0&&r.every(l=>l.role!==void 0)?o=r:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...extractCuratedHistory(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ApiError extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ApiError.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileParametersToMldev(t){const e={},r=getValueByPath(t,["file"]);return r!=null&&setValueByPath(e,["file"],r),e}function createFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteFileParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","file"],tFileName(r)),e}function deleteFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function getFileParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","file"],tFileName(r)),e}function listFilesConfigToMldev(t,e){const r={},i=getValueByPath(t,["pageSize"]);e!==void 0&&i!=null&&setValueByPath(e,["_query","pageSize"],i);const o=getValueByPath(t,["pageToken"]);return e!==void 0&&o!=null&&setValueByPath(e,["_query","pageToken"],o),r}function listFilesParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listFilesConfigToMldev(r,e),e}function listFilesResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Files extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=listFilesParametersToMldev(e);return l=formatMap("files",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:h.headers},d})),o.then(h=>{const u=listFilesResponseFromMldev(h),d=new ListFilesResponse;return Object.assign(d,u),d})}}async createInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=createFileParametersToMldev(e);return l=formatMap("upload/v1beta/files",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const u=createFileResponseFromMldev(h),d=new CreateFileResponse;return Object.assign(d,u),d})}}async get(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=getFileParametersToMldev(e);return l=formatMap("files/{file}",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=deleteFileParametersToMldev(e);return l=formatMap("files/{file}",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:h.headers},d})),o.then(h=>{const u=deleteFileResponseFromMldev(h),d=new DeleteFileResponse;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$2(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function contentToMldev$2(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>partToMldev$2(l))),setValueByPath(e,["parts"],o)}const i=getValueByPath(t,["role"]);return i!=null&&setValueByPath(e,["role"],i),e}function fileDataToMldev$2(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function functionDeclarationToVertex$1(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const i=getValueByPath(t,["name"]);i!=null&&setValueByPath(e,["name"],i);const o=getValueByPath(t,["parameters"]);o!=null&&setValueByPath(e,["parameters"],o);const l=getValueByPath(t,["parametersJsonSchema"]);l!=null&&setValueByPath(e,["parametersJsonSchema"],l);const c=getValueByPath(t,["response"]);c!=null&&setValueByPath(e,["response"],c);const p=getValueByPath(t,["responseJsonSchema"]);return p!=null&&setValueByPath(e,["responseJsonSchema"],p),e}function generationConfigToVertex$1(t){const e={},r=getValueByPath(t,["modelSelectionConfig"]);r!=null&&setValueByPath(e,["modelConfig"],r);const i=getValueByPath(t,["responseJsonSchema"]);i!=null&&setValueByPath(e,["responseJsonSchema"],i);const o=getValueByPath(t,["audioTimestamp"]);o!=null&&setValueByPath(e,["audioTimestamp"],o);const l=getValueByPath(t,["candidateCount"]);l!=null&&setValueByPath(e,["candidateCount"],l);const c=getValueByPath(t,["enableAffectiveDialog"]);c!=null&&setValueByPath(e,["enableAffectiveDialog"],c);const p=getValueByPath(t,["frequencyPenalty"]);p!=null&&setValueByPath(e,["frequencyPenalty"],p);const h=getValueByPath(t,["logprobs"]);h!=null&&setValueByPath(e,["logprobs"],h);const u=getValueByPath(t,["maxOutputTokens"]);u!=null&&setValueByPath(e,["maxOutputTokens"],u);const d=getValueByPath(t,["mediaResolution"]);d!=null&&setValueByPath(e,["mediaResolution"],d);const g=getValueByPath(t,["presencePenalty"]);g!=null&&setValueByPath(e,["presencePenalty"],g);const y=getValueByPath(t,["responseLogprobs"]);y!=null&&setValueByPath(e,["responseLogprobs"],y);const S=getValueByPath(t,["responseMimeType"]);S!=null&&setValueByPath(e,["responseMimeType"],S);const E=getValueByPath(t,["responseModalities"]);E!=null&&setValueByPath(e,["responseModalities"],E);const x=getValueByPath(t,["responseSchema"]);x!=null&&setValueByPath(e,["responseSchema"],x);const A=getValueByPath(t,["routingConfig"]);A!=null&&setValueByPath(e,["routingConfig"],A);const D=getValueByPath(t,["seed"]);D!=null&&setValueByPath(e,["seed"],D);const b=getValueByPath(t,["speechConfig"]);b!=null&&setValueByPath(e,["speechConfig"],speechConfigToVertex$1(b));const I=getValueByPath(t,["stopSequences"]);I!=null&&setValueByPath(e,["stopSequences"],I);const R=getValueByPath(t,["temperature"]);R!=null&&setValueByPath(e,["temperature"],R);const q=getValueByPath(t,["thinkingConfig"]);q!=null&&setValueByPath(e,["thinkingConfig"],q);const G=getValueByPath(t,["topK"]);G!=null&&setValueByPath(e,["topK"],G);const z=getValueByPath(t,["topP"]);if(z!=null&&setValueByPath(e,["topP"],z),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function googleMapsToMldev$2(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$2(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function liveConnectConfigToMldev$1(t,e){const r={},i=getValueByPath(t,["generationConfig"]);e!==void 0&&i!=null&&setValueByPath(e,["setup","generationConfig"],i);const o=getValueByPath(t,["responseModalities"]);e!==void 0&&o!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],o);const l=getValueByPath(t,["temperature"]);e!==void 0&&l!=null&&setValueByPath(e,["setup","generationConfig","temperature"],l);const c=getValueByPath(t,["topP"]);e!==void 0&&c!=null&&setValueByPath(e,["setup","generationConfig","topP"],c);const p=getValueByPath(t,["topK"]);e!==void 0&&p!=null&&setValueByPath(e,["setup","generationConfig","topK"],p);const h=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],h);const u=getValueByPath(t,["mediaResolution"]);e!==void 0&&u!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],u);const d=getValueByPath(t,["seed"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","seed"],d);const g=getValueByPath(t,["speechConfig"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(g));const y=getValueByPath(t,["thinkingConfig"]);e!==void 0&&y!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],y);const S=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=getValueByPath(t,["systemInstruction"]);e!==void 0&&E!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev$2(tContent(E)));const x=getValueByPath(t,["tools"]);if(e!==void 0&&x!=null){let G=tTools(x);Array.isArray(G)&&(G=G.map(z=>toolToMldev$2(tTool(z)))),setValueByPath(e,["setup","tools"],G)}const A=getValueByPath(t,["sessionResumption"]);e!==void 0&&A!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev$1(A));const D=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&setValueByPath(e,["setup","inputAudioTranscription"],D);const b=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&setValueByPath(e,["setup","outputAudioTranscription"],b);const I=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&setValueByPath(e,["setup","realtimeInputConfig"],I);const R=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&R!=null&&setValueByPath(e,["setup","contextWindowCompression"],R);const q=getValueByPath(t,["proactivity"]);return e!==void 0&&q!=null&&setValueByPath(e,["setup","proactivity"],q),r}function liveConnectConfigToVertex(t,e){const r={},i=getValueByPath(t,["generationConfig"]);e!==void 0&&i!=null&&setValueByPath(e,["setup","generationConfig"],generationConfigToVertex$1(i));const o=getValueByPath(t,["responseModalities"]);e!==void 0&&o!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],o);const l=getValueByPath(t,["temperature"]);e!==void 0&&l!=null&&setValueByPath(e,["setup","generationConfig","temperature"],l);const c=getValueByPath(t,["topP"]);e!==void 0&&c!=null&&setValueByPath(e,["setup","generationConfig","topP"],c);const p=getValueByPath(t,["topK"]);e!==void 0&&p!=null&&setValueByPath(e,["setup","generationConfig","topK"],p);const h=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],h);const u=getValueByPath(t,["mediaResolution"]);e!==void 0&&u!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],u);const d=getValueByPath(t,["seed"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","seed"],d);const g=getValueByPath(t,["speechConfig"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],speechConfigToVertex$1(tLiveSpeechConfig(g)));const y=getValueByPath(t,["thinkingConfig"]);e!==void 0&&y!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],y);const S=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=getValueByPath(t,["systemInstruction"]);e!==void 0&&E!=null&&setValueByPath(e,["setup","systemInstruction"],tContent(E));const x=getValueByPath(t,["tools"]);if(e!==void 0&&x!=null){let G=tTools(x);Array.isArray(G)&&(G=G.map(z=>toolToVertex$1(tTool(z)))),setValueByPath(e,["setup","tools"],G)}const A=getValueByPath(t,["sessionResumption"]);e!==void 0&&A!=null&&setValueByPath(e,["setup","sessionResumption"],A);const D=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&setValueByPath(e,["setup","inputAudioTranscription"],D);const b=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&setValueByPath(e,["setup","outputAudioTranscription"],b);const I=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&setValueByPath(e,["setup","realtimeInputConfig"],I);const R=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&R!=null&&setValueByPath(e,["setup","contextWindowCompression"],R);const q=getValueByPath(t,["proactivity"]);return e!==void 0&&q!=null&&setValueByPath(e,["setup","proactivity"],q),r}function liveConnectParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["setup","model"],tModel(t,i));const o=getValueByPath(e,["config"]);return o!=null&&setValueByPath(r,["config"],liveConnectConfigToMldev$1(o,r)),r}function liveConnectParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["setup","model"],tModel(t,i));const o=getValueByPath(e,["config"]);return o!=null&&setValueByPath(r,["config"],liveConnectConfigToVertex(o,r)),r}function liveMusicSetConfigParametersToMldev(t){const e={},r=getValueByPath(t,["musicGenerationConfig"]);return r!=null&&setValueByPath(e,["musicGenerationConfig"],r),e}function liveMusicSetWeightedPromptsParametersToMldev(t){const e={},r=getValueByPath(t,["weightedPrompts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),setValueByPath(e,["weightedPrompts"],i)}return e}function liveSendRealtimeInputParametersToMldev(t){const e={},r=getValueByPath(t,["media"]);if(r!=null){let u=tBlobs(r);Array.isArray(u)&&(u=u.map(d=>blobToMldev$2(d))),setValueByPath(e,["mediaChunks"],u)}const i=getValueByPath(t,["audio"]);i!=null&&setValueByPath(e,["audio"],blobToMldev$2(tAudioBlob(i)));const o=getValueByPath(t,["audioStreamEnd"]);o!=null&&setValueByPath(e,["audioStreamEnd"],o);const l=getValueByPath(t,["video"]);l!=null&&setValueByPath(e,["video"],blobToMldev$2(tImageBlob(l)));const c=getValueByPath(t,["text"]);c!=null&&setValueByPath(e,["text"],c);const p=getValueByPath(t,["activityStart"]);p!=null&&setValueByPath(e,["activityStart"],p);const h=getValueByPath(t,["activityEnd"]);return h!=null&&setValueByPath(e,["activityEnd"],h),e}function liveSendRealtimeInputParametersToVertex(t){const e={},r=getValueByPath(t,["media"]);if(r!=null){let u=tBlobs(r);Array.isArray(u)&&(u=u.map(d=>d)),setValueByPath(e,["mediaChunks"],u)}const i=getValueByPath(t,["audio"]);i!=null&&setValueByPath(e,["audio"],tAudioBlob(i));const o=getValueByPath(t,["audioStreamEnd"]);o!=null&&setValueByPath(e,["audioStreamEnd"],o);const l=getValueByPath(t,["video"]);l!=null&&setValueByPath(e,["video"],tImageBlob(l));const c=getValueByPath(t,["text"]);c!=null&&setValueByPath(e,["text"],c);const p=getValueByPath(t,["activityStart"]);p!=null&&setValueByPath(e,["activityStart"],p);const h=getValueByPath(t,["activityEnd"]);return h!=null&&setValueByPath(e,["activityEnd"],h),e}function liveServerMessageFromVertex(t){const e={},r=getValueByPath(t,["setupComplete"]);r!=null&&setValueByPath(e,["setupComplete"],r);const i=getValueByPath(t,["serverContent"]);i!=null&&setValueByPath(e,["serverContent"],i);const o=getValueByPath(t,["toolCall"]);o!=null&&setValueByPath(e,["toolCall"],o);const l=getValueByPath(t,["toolCallCancellation"]);l!=null&&setValueByPath(e,["toolCallCancellation"],l);const c=getValueByPath(t,["usageMetadata"]);c!=null&&setValueByPath(e,["usageMetadata"],usageMetadataFromVertex(c));const p=getValueByPath(t,["goAway"]);p!=null&&setValueByPath(e,["goAway"],p);const h=getValueByPath(t,["sessionResumptionUpdate"]);return h!=null&&setValueByPath(e,["sessionResumptionUpdate"],h),e}function partToMldev$2(t){const e={},r=getValueByPath(t,["functionCall"]);r!=null&&setValueByPath(e,["functionCall"],r);const i=getValueByPath(t,["codeExecutionResult"]);i!=null&&setValueByPath(e,["codeExecutionResult"],i);const o=getValueByPath(t,["executableCode"]);o!=null&&setValueByPath(e,["executableCode"],o);const l=getValueByPath(t,["fileData"]);l!=null&&setValueByPath(e,["fileData"],fileDataToMldev$2(l));const c=getValueByPath(t,["functionResponse"]);c!=null&&setValueByPath(e,["functionResponse"],c);const p=getValueByPath(t,["inlineData"]);p!=null&&setValueByPath(e,["inlineData"],blobToMldev$2(p));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const d=getValueByPath(t,["thoughtSignature"]);d!=null&&setValueByPath(e,["thoughtSignature"],d);const g=getValueByPath(t,["videoMetadata"]);return g!=null&&setValueByPath(e,["videoMetadata"],g),e}function sessionResumptionConfigToMldev$1(t){const e={},r=getValueByPath(t,["handle"]);if(r!=null&&setValueByPath(e,["handle"],r),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function speechConfigToVertex$1(t){const e={},r=getValueByPath(t,["languageCode"]);r!=null&&setValueByPath(e,["languageCode"],r);const i=getValueByPath(t,["voiceConfig"]);if(i!=null&&setValueByPath(e,["voiceConfig"],i),getValueByPath(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function toolToMldev$2(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>g)),setValueByPath(e,["functionDeclarations"],d)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=getValueByPath(t,["googleSearchRetrieval"]);i!=null&&setValueByPath(e,["googleSearchRetrieval"],i);const o=getValueByPath(t,["computerUse"]);o!=null&&setValueByPath(e,["computerUse"],o);const l=getValueByPath(t,["fileSearch"]);l!=null&&setValueByPath(e,["fileSearch"],l);const c=getValueByPath(t,["codeExecution"]);if(c!=null&&setValueByPath(e,["codeExecution"],c),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=getValueByPath(t,["googleMaps"]);p!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$2(p));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$2(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}function toolToVertex$1(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(y=>functionDeclarationToVertex$1(y))),setValueByPath(e,["functionDeclarations"],g)}const i=getValueByPath(t,["retrieval"]);i!=null&&setValueByPath(e,["retrieval"],i);const o=getValueByPath(t,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const l=getValueByPath(t,["computerUse"]);if(l!=null&&setValueByPath(e,["computerUse"],l),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=getValueByPath(t,["codeExecution"]);c!=null&&setValueByPath(e,["codeExecution"],c);const p=getValueByPath(t,["enterpriseWebSearch"]);p!=null&&setValueByPath(e,["enterpriseWebSearch"],p);const h=getValueByPath(t,["googleMaps"]);h!=null&&setValueByPath(e,["googleMaps"],h);const u=getValueByPath(t,["googleSearch"]);u!=null&&setValueByPath(e,["googleSearch"],u);const d=getValueByPath(t,["urlContext"]);return d!=null&&setValueByPath(e,["urlContext"],d),e}function usageMetadataFromVertex(t){const e={},r=getValueByPath(t,["promptTokenCount"]);r!=null&&setValueByPath(e,["promptTokenCount"],r);const i=getValueByPath(t,["cachedContentTokenCount"]);i!=null&&setValueByPath(e,["cachedContentTokenCount"],i);const o=getValueByPath(t,["candidatesTokenCount"]);o!=null&&setValueByPath(e,["responseTokenCount"],o);const l=getValueByPath(t,["toolUsePromptTokenCount"]);l!=null&&setValueByPath(e,["toolUsePromptTokenCount"],l);const c=getValueByPath(t,["thoughtsTokenCount"]);c!=null&&setValueByPath(e,["thoughtsTokenCount"],c);const p=getValueByPath(t,["totalTokenCount"]);p!=null&&setValueByPath(e,["totalTokenCount"],p);const h=getValueByPath(t,["promptTokensDetails"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(E=>E)),setValueByPath(e,["promptTokensDetails"],S)}const u=getValueByPath(t,["cacheTokensDetails"]);if(u!=null){let S=u;Array.isArray(S)&&(S=S.map(E=>E)),setValueByPath(e,["cacheTokensDetails"],S)}const d=getValueByPath(t,["candidatesTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(E=>E)),setValueByPath(e,["responseTokensDetails"],S)}const g=getValueByPath(t,["toolUsePromptTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(E=>E)),setValueByPath(e,["toolUsePromptTokensDetails"],S)}const y=getValueByPath(t,["trafficType"]);return y!=null&&setValueByPath(e,["trafficType"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$1(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function candidateFromMldev(t){const e={},r=getValueByPath(t,["content"]);r!=null&&setValueByPath(e,["content"],r);const i=getValueByPath(t,["citationMetadata"]);i!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev(i));const o=getValueByPath(t,["tokenCount"]);o!=null&&setValueByPath(e,["tokenCount"],o);const l=getValueByPath(t,["finishReason"]);l!=null&&setValueByPath(e,["finishReason"],l);const c=getValueByPath(t,["avgLogprobs"]);c!=null&&setValueByPath(e,["avgLogprobs"],c);const p=getValueByPath(t,["groundingMetadata"]);p!=null&&setValueByPath(e,["groundingMetadata"],p);const h=getValueByPath(t,["index"]);h!=null&&setValueByPath(e,["index"],h);const u=getValueByPath(t,["logprobsResult"]);u!=null&&setValueByPath(e,["logprobsResult"],u);const d=getValueByPath(t,["safetyRatings"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(S=>S)),setValueByPath(e,["safetyRatings"],y)}const g=getValueByPath(t,["urlContextMetadata"]);return g!=null&&setValueByPath(e,["urlContextMetadata"],g),e}function citationMetadataFromMldev(t){const e={},r=getValueByPath(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),setValueByPath(e,["citations"],i)}return e}function computeTokensParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let l=tContents(o);Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(r,["contents"],l)}return r}function computeTokensResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),setValueByPath(e,["tokensInfo"],o)}return e}function contentEmbeddingFromVertex(t){const e={},r=getValueByPath(t,["values"]);r!=null&&setValueByPath(e,["values"],r);const i=getValueByPath(t,["statistics"]);return i!=null&&setValueByPath(e,["statistics"],contentEmbeddingStatisticsFromVertex(i)),e}function contentEmbeddingStatisticsFromVertex(t){const e={},r=getValueByPath(t,["truncated"]);r!=null&&setValueByPath(e,["truncated"],r);const i=getValueByPath(t,["token_count"]);return i!=null&&setValueByPath(e,["tokenCount"],i),e}function contentToMldev$1(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>partToMldev$1(l))),setValueByPath(e,["parts"],o)}const i=getValueByPath(t,["role"]);return i!=null&&setValueByPath(e,["role"],i),e}function controlReferenceConfigToVertex(t){const e={},r=getValueByPath(t,["controlType"]);r!=null&&setValueByPath(e,["controlType"],r);const i=getValueByPath(t,["enableControlImageComputation"]);return i!=null&&setValueByPath(e,["computeControl"],i),e}function countTokensConfigToMldev(t){const e={};if(getValueByPath(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(getValueByPath(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(getValueByPath(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function countTokensConfigToVertex(t,e){const r={},i=getValueByPath(t,["systemInstruction"]);e!==void 0&&i!=null&&setValueByPath(e,["systemInstruction"],tContent(i));const o=getValueByPath(t,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(p=>toolToVertex(p))),setValueByPath(e,["tools"],c)}const l=getValueByPath(t,["generationConfig"]);return e!==void 0&&l!=null&&setValueByPath(e,["generationConfig"],generationConfigToVertex(l)),r}function countTokensParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let c=tContents(o);Array.isArray(c)&&(c=c.map(p=>contentToMldev$1(p))),setValueByPath(r,["contents"],c)}const l=getValueByPath(e,["config"]);return l!=null&&countTokensConfigToMldev(l),r}function countTokensParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let c=tContents(o);Array.isArray(c)&&(c=c.map(p=>p)),setValueByPath(r,["contents"],c)}const l=getValueByPath(e,["config"]);return l!=null&&countTokensConfigToVertex(l,r),r}function countTokensResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["totalTokens"]);i!=null&&setValueByPath(e,["totalTokens"],i);const o=getValueByPath(t,["cachedContentTokenCount"]);return o!=null&&setValueByPath(e,["cachedContentTokenCount"],o),e}function countTokensResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["totalTokens"]);return i!=null&&setValueByPath(e,["totalTokens"],i),e}function deleteModelParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);return i!=null&&setValueByPath(r,["_url","name"],tModel(t,i)),r}function deleteModelParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);return i!=null&&setValueByPath(r,["_url","name"],tModel(t,i)),r}function deleteModelResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteModelResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function editImageConfigToVertex(t,e){const r={},i=getValueByPath(t,["outputGcsUri"]);e!==void 0&&i!=null&&setValueByPath(e,["parameters","storageUri"],i);const o=getValueByPath(t,["negativePrompt"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","negativePrompt"],o);const l=getValueByPath(t,["numberOfImages"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","sampleCount"],l);const c=getValueByPath(t,["aspectRatio"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","aspectRatio"],c);const p=getValueByPath(t,["guidanceScale"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","guidanceScale"],p);const h=getValueByPath(t,["seed"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","seed"],h);const u=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","safetySetting"],u);const d=getValueByPath(t,["personGeneration"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","personGeneration"],d);const g=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],g);const y=getValueByPath(t,["includeRaiReason"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","includeRaiReason"],y);const S=getValueByPath(t,["language"]);e!==void 0&&S!=null&&setValueByPath(e,["parameters","language"],S);const E=getValueByPath(t,["outputMimeType"]);e!==void 0&&E!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],E);const x=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],x);const A=getValueByPath(t,["addWatermark"]);e!==void 0&&A!=null&&setValueByPath(e,["parameters","addWatermark"],A);const D=getValueByPath(t,["labels"]);e!==void 0&&D!=null&&setValueByPath(e,["labels"],D);const b=getValueByPath(t,["editMode"]);e!==void 0&&b!=null&&setValueByPath(e,["parameters","editMode"],b);const I=getValueByPath(t,["baseSteps"]);return e!==void 0&&I!=null&&setValueByPath(e,["parameters","editConfig","baseSteps"],I),r}function editImageParametersInternalToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["prompt"]);o!=null&&setValueByPath(r,["instances[0]","prompt"],o);const l=getValueByPath(e,["referenceImages"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>referenceImageAPIInternalToVertex(h))),setValueByPath(r,["instances[0]","referenceImages"],p)}const c=getValueByPath(e,["config"]);return c!=null&&editImageConfigToVertex(c,r),r}function editImageResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>generatedImageFromVertex(l))),setValueByPath(e,["generatedImages"],o)}return e}function embedContentConfigToMldev(t,e){const r={},i=getValueByPath(t,["taskType"]);e!==void 0&&i!=null&&setValueByPath(e,["requests[]","taskType"],i);const o=getValueByPath(t,["title"]);e!==void 0&&o!=null&&setValueByPath(e,["requests[]","title"],o);const l=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&setValueByPath(e,["requests[]","outputDimensionality"],l),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function embedContentConfigToVertex(t,e){const r={},i=getValueByPath(t,["taskType"]);e!==void 0&&i!=null&&setValueByPath(e,["instances[]","task_type"],i);const o=getValueByPath(t,["title"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[]","title"],o);const l=getValueByPath(t,["outputDimensionality"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","outputDimensionality"],l);const c=getValueByPath(t,["mimeType"]);e!==void 0&&c!=null&&setValueByPath(e,["instances[]","mimeType"],c);const p=getValueByPath(t,["autoTruncate"]);return e!==void 0&&p!=null&&setValueByPath(e,["parameters","autoTruncate"],p),r}function embedContentParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let p=tContentsForEmbed(t,o);Array.isArray(p)&&(p=p.map(h=>h)),setValueByPath(r,["requests[]","content"],p)}const l=getValueByPath(e,["config"]);l!=null&&embedContentConfigToMldev(l,r);const c=getValueByPath(e,["model"]);return c!==void 0&&setValueByPath(r,["requests[]","model"],tModel(t,c)),r}function embedContentParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let c=tContentsForEmbed(t,o);Array.isArray(c)&&(c=c.map(p=>p)),setValueByPath(r,["instances[]","content"],c)}const l=getValueByPath(e,["config"]);return l!=null&&embedContentConfigToVertex(l,r),r}function embedContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["embeddings"],l)}const o=getValueByPath(t,["metadata"]);return o!=null&&setValueByPath(e,["metadata"],o),e}function embedContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>contentEmbeddingFromVertex(c))),setValueByPath(e,["embeddings"],l)}const o=getValueByPath(t,["metadata"]);return o!=null&&setValueByPath(e,["metadata"],o),e}function endpointFromVertex(t){const e={},r=getValueByPath(t,["endpoint"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["deployedModelId"]);return i!=null&&setValueByPath(e,["deployedModelId"],i),e}function fileDataToMldev$1(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function functionDeclarationToVertex(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const i=getValueByPath(t,["name"]);i!=null&&setValueByPath(e,["name"],i);const o=getValueByPath(t,["parameters"]);o!=null&&setValueByPath(e,["parameters"],o);const l=getValueByPath(t,["parametersJsonSchema"]);l!=null&&setValueByPath(e,["parametersJsonSchema"],l);const c=getValueByPath(t,["response"]);c!=null&&setValueByPath(e,["response"],c);const p=getValueByPath(t,["responseJsonSchema"]);return p!=null&&setValueByPath(e,["responseJsonSchema"],p),e}function generateContentConfigToMldev(t,e,r){const i={},o=getValueByPath(e,["systemInstruction"]);r!==void 0&&o!=null&&setValueByPath(r,["systemInstruction"],contentToMldev$1(tContent(o)));const l=getValueByPath(e,["temperature"]);l!=null&&setValueByPath(i,["temperature"],l);const c=getValueByPath(e,["topP"]);c!=null&&setValueByPath(i,["topP"],c);const p=getValueByPath(e,["topK"]);p!=null&&setValueByPath(i,["topK"],p);const h=getValueByPath(e,["candidateCount"]);h!=null&&setValueByPath(i,["candidateCount"],h);const u=getValueByPath(e,["maxOutputTokens"]);u!=null&&setValueByPath(i,["maxOutputTokens"],u);const d=getValueByPath(e,["stopSequences"]);d!=null&&setValueByPath(i,["stopSequences"],d);const g=getValueByPath(e,["responseLogprobs"]);g!=null&&setValueByPath(i,["responseLogprobs"],g);const y=getValueByPath(e,["logprobs"]);y!=null&&setValueByPath(i,["logprobs"],y);const S=getValueByPath(e,["presencePenalty"]);S!=null&&setValueByPath(i,["presencePenalty"],S);const E=getValueByPath(e,["frequencyPenalty"]);E!=null&&setValueByPath(i,["frequencyPenalty"],E);const x=getValueByPath(e,["seed"]);x!=null&&setValueByPath(i,["seed"],x);const A=getValueByPath(e,["responseMimeType"]);A!=null&&setValueByPath(i,["responseMimeType"],A);const D=getValueByPath(e,["responseSchema"]);D!=null&&setValueByPath(i,["responseSchema"],tSchema(D));const b=getValueByPath(e,["responseJsonSchema"]);if(b!=null&&setValueByPath(i,["responseJsonSchema"],b),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=getValueByPath(e,["safetySettings"]);if(r!==void 0&&I!=null){let K=I;Array.isArray(K)&&(K=K.map(se=>safetySettingToMldev(se))),setValueByPath(r,["safetySettings"],K)}const R=getValueByPath(e,["tools"]);if(r!==void 0&&R!=null){let K=tTools(R);Array.isArray(K)&&(K=K.map(se=>toolToMldev$1(tTool(se)))),setValueByPath(r,["tools"],K)}const q=getValueByPath(e,["toolConfig"]);if(r!==void 0&&q!=null&&setValueByPath(r,["toolConfig"],q),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=getValueByPath(e,["cachedContent"]);r!==void 0&&G!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,G));const z=getValueByPath(e,["responseModalities"]);z!=null&&setValueByPath(i,["responseModalities"],z);const B=getValueByPath(e,["mediaResolution"]);B!=null&&setValueByPath(i,["mediaResolution"],B);const M=getValueByPath(e,["speechConfig"]);if(M!=null&&setValueByPath(i,["speechConfig"],tSpeechConfig(M)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=getValueByPath(e,["thinkingConfig"]);O!=null&&setValueByPath(i,["thinkingConfig"],O);const W=getValueByPath(e,["imageConfig"]);return W!=null&&setValueByPath(i,["imageConfig"],W),i}function generateContentConfigToVertex(t,e,r){const i={},o=getValueByPath(e,["systemInstruction"]);r!==void 0&&o!=null&&setValueByPath(r,["systemInstruction"],tContent(o));const l=getValueByPath(e,["temperature"]);l!=null&&setValueByPath(i,["temperature"],l);const c=getValueByPath(e,["topP"]);c!=null&&setValueByPath(i,["topP"],c);const p=getValueByPath(e,["topK"]);p!=null&&setValueByPath(i,["topK"],p);const h=getValueByPath(e,["candidateCount"]);h!=null&&setValueByPath(i,["candidateCount"],h);const u=getValueByPath(e,["maxOutputTokens"]);u!=null&&setValueByPath(i,["maxOutputTokens"],u);const d=getValueByPath(e,["stopSequences"]);d!=null&&setValueByPath(i,["stopSequences"],d);const g=getValueByPath(e,["responseLogprobs"]);g!=null&&setValueByPath(i,["responseLogprobs"],g);const y=getValueByPath(e,["logprobs"]);y!=null&&setValueByPath(i,["logprobs"],y);const S=getValueByPath(e,["presencePenalty"]);S!=null&&setValueByPath(i,["presencePenalty"],S);const E=getValueByPath(e,["frequencyPenalty"]);E!=null&&setValueByPath(i,["frequencyPenalty"],E);const x=getValueByPath(e,["seed"]);x!=null&&setValueByPath(i,["seed"],x);const A=getValueByPath(e,["responseMimeType"]);A!=null&&setValueByPath(i,["responseMimeType"],A);const D=getValueByPath(e,["responseSchema"]);D!=null&&setValueByPath(i,["responseSchema"],tSchema(D));const b=getValueByPath(e,["responseJsonSchema"]);b!=null&&setValueByPath(i,["responseJsonSchema"],b);const I=getValueByPath(e,["routingConfig"]);I!=null&&setValueByPath(i,["routingConfig"],I);const R=getValueByPath(e,["modelSelectionConfig"]);R!=null&&setValueByPath(i,["modelConfig"],R);const q=getValueByPath(e,["safetySettings"]);if(r!==void 0&&q!=null){let re=q;Array.isArray(re)&&(re=re.map(te=>te)),setValueByPath(r,["safetySettings"],re)}const G=getValueByPath(e,["tools"]);if(r!==void 0&&G!=null){let re=tTools(G);Array.isArray(re)&&(re=re.map(te=>toolToVertex(tTool(te)))),setValueByPath(r,["tools"],re)}const z=getValueByPath(e,["toolConfig"]);r!==void 0&&z!=null&&setValueByPath(r,["toolConfig"],z);const B=getValueByPath(e,["labels"]);r!==void 0&&B!=null&&setValueByPath(r,["labels"],B);const M=getValueByPath(e,["cachedContent"]);r!==void 0&&M!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,M));const O=getValueByPath(e,["responseModalities"]);O!=null&&setValueByPath(i,["responseModalities"],O);const W=getValueByPath(e,["mediaResolution"]);W!=null&&setValueByPath(i,["mediaResolution"],W);const K=getValueByPath(e,["speechConfig"]);K!=null&&setValueByPath(i,["speechConfig"],speechConfigToVertex(tSpeechConfig(K)));const se=getValueByPath(e,["audioTimestamp"]);se!=null&&setValueByPath(i,["audioTimestamp"],se);const $=getValueByPath(e,["thinkingConfig"]);$!=null&&setValueByPath(i,["thinkingConfig"],$);const Q=getValueByPath(e,["imageConfig"]);return Q!=null&&setValueByPath(i,["imageConfig"],Q),i}function generateContentParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let c=tContents(o);Array.isArray(c)&&(c=c.map(p=>contentToMldev$1(p))),setValueByPath(r,["contents"],c)}const l=getValueByPath(e,["config"]);return l!=null&&setValueByPath(r,["generationConfig"],generateContentConfigToMldev(t,l,r)),r}function generateContentParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["contents"]);if(o!=null){let c=tContents(o);Array.isArray(c)&&(c=c.map(p=>p)),setValueByPath(r,["contents"],c)}const l=getValueByPath(e,["config"]);return l!=null&&setValueByPath(r,["generationConfig"],generateContentConfigToVertex(t,l,r)),r}function generateContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(u=>candidateFromMldev(u))),setValueByPath(e,["candidates"],h)}const o=getValueByPath(t,["modelVersion"]);o!=null&&setValueByPath(e,["modelVersion"],o);const l=getValueByPath(t,["promptFeedback"]);l!=null&&setValueByPath(e,["promptFeedback"],l);const c=getValueByPath(t,["responseId"]);c!=null&&setValueByPath(e,["responseId"],c);const p=getValueByPath(t,["usageMetadata"]);return p!=null&&setValueByPath(e,["usageMetadata"],p),e}function generateContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),setValueByPath(e,["candidates"],u)}const o=getValueByPath(t,["createTime"]);o!=null&&setValueByPath(e,["createTime"],o);const l=getValueByPath(t,["modelVersion"]);l!=null&&setValueByPath(e,["modelVersion"],l);const c=getValueByPath(t,["promptFeedback"]);c!=null&&setValueByPath(e,["promptFeedback"],c);const p=getValueByPath(t,["responseId"]);p!=null&&setValueByPath(e,["responseId"],p);const h=getValueByPath(t,["usageMetadata"]);return h!=null&&setValueByPath(e,["usageMetadata"],h),e}function generateImagesConfigToMldev(t,e){const r={};if(getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=getValueByPath(t,["numberOfImages"]);e!==void 0&&i!=null&&setValueByPath(e,["parameters","sampleCount"],i);const o=getValueByPath(t,["aspectRatio"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","aspectRatio"],o);const l=getValueByPath(t,["guidanceScale"]);if(e!==void 0&&l!=null&&setValueByPath(e,["parameters","guidanceScale"],l),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","safetySetting"],c);const p=getValueByPath(t,["personGeneration"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","personGeneration"],p);const h=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],h);const u=getValueByPath(t,["includeRaiReason"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","includeRaiReason"],u);const d=getValueByPath(t,["language"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","language"],d);const g=getValueByPath(t,["outputMimeType"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],g);const y=getValueByPath(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],y),getValueByPath(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=getValueByPath(t,["imageSize"]);if(e!==void 0&&S!=null&&setValueByPath(e,["parameters","sampleImageSize"],S),getValueByPath(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function generateImagesConfigToVertex(t,e){const r={},i=getValueByPath(t,["outputGcsUri"]);e!==void 0&&i!=null&&setValueByPath(e,["parameters","storageUri"],i);const o=getValueByPath(t,["negativePrompt"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","negativePrompt"],o);const l=getValueByPath(t,["numberOfImages"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","sampleCount"],l);const c=getValueByPath(t,["aspectRatio"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","aspectRatio"],c);const p=getValueByPath(t,["guidanceScale"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","guidanceScale"],p);const h=getValueByPath(t,["seed"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","seed"],h);const u=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","safetySetting"],u);const d=getValueByPath(t,["personGeneration"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","personGeneration"],d);const g=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],g);const y=getValueByPath(t,["includeRaiReason"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","includeRaiReason"],y);const S=getValueByPath(t,["language"]);e!==void 0&&S!=null&&setValueByPath(e,["parameters","language"],S);const E=getValueByPath(t,["outputMimeType"]);e!==void 0&&E!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],E);const x=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],x);const A=getValueByPath(t,["addWatermark"]);e!==void 0&&A!=null&&setValueByPath(e,["parameters","addWatermark"],A);const D=getValueByPath(t,["labels"]);e!==void 0&&D!=null&&setValueByPath(e,["labels"],D);const b=getValueByPath(t,["imageSize"]);e!==void 0&&b!=null&&setValueByPath(e,["parameters","sampleImageSize"],b);const I=getValueByPath(t,["enhancePrompt"]);return e!==void 0&&I!=null&&setValueByPath(e,["parameters","enhancePrompt"],I),r}function generateImagesParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["prompt"]);o!=null&&setValueByPath(r,["instances[0]","prompt"],o);const l=getValueByPath(e,["config"]);return l!=null&&generateImagesConfigToMldev(l,r),r}function generateImagesParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["prompt"]);o!=null&&setValueByPath(r,["instances[0]","prompt"],o);const l=getValueByPath(e,["config"]);return l!=null&&generateImagesConfigToVertex(l,r),r}function generateImagesResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>generatedImageFromMldev(c))),setValueByPath(e,["generatedImages"],l)}const o=getValueByPath(t,["positivePromptSafetyAttributes"]);return o!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromMldev(o)),e}function generateImagesResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>generatedImageFromVertex(c))),setValueByPath(e,["generatedImages"],l)}const o=getValueByPath(t,["positivePromptSafetyAttributes"]);return o!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromVertex(o)),e}function generateVideosConfigToMldev(t,e){const r={},i=getValueByPath(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&setValueByPath(e,["parameters","sampleCount"],i),getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=getValueByPath(t,["durationSeconds"]);if(e!==void 0&&o!=null&&setValueByPath(e,["parameters","durationSeconds"],o),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=getValueByPath(t,["aspectRatio"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","aspectRatio"],l);const c=getValueByPath(t,["resolution"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","resolution"],c);const p=getValueByPath(t,["personGeneration"]);if(e!==void 0&&p!=null&&setValueByPath(e,["parameters","personGeneration"],p),getValueByPath(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=getValueByPath(t,["negativePrompt"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","negativePrompt"],h);const u=getValueByPath(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&setValueByPath(e,["parameters","enhancePrompt"],u),getValueByPath(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=getValueByPath(t,["lastFrame"]);e!==void 0&&d!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToMldev(d));const g=getValueByPath(t,["referenceImages"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(S=>videoGenerationReferenceImageToMldev(S))),setValueByPath(e,["instances[0]","referenceImages"],y)}if(getValueByPath(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(getValueByPath(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function generateVideosConfigToVertex(t,e){const r={},i=getValueByPath(t,["numberOfVideos"]);e!==void 0&&i!=null&&setValueByPath(e,["parameters","sampleCount"],i);const o=getValueByPath(t,["outputGcsUri"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","storageUri"],o);const l=getValueByPath(t,["fps"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","fps"],l);const c=getValueByPath(t,["durationSeconds"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","durationSeconds"],c);const p=getValueByPath(t,["seed"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","seed"],p);const h=getValueByPath(t,["aspectRatio"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","aspectRatio"],h);const u=getValueByPath(t,["resolution"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","resolution"],u);const d=getValueByPath(t,["personGeneration"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","personGeneration"],d);const g=getValueByPath(t,["pubsubTopic"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","pubsubTopic"],g);const y=getValueByPath(t,["negativePrompt"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","negativePrompt"],y);const S=getValueByPath(t,["enhancePrompt"]);e!==void 0&&S!=null&&setValueByPath(e,["parameters","enhancePrompt"],S);const E=getValueByPath(t,["generateAudio"]);e!==void 0&&E!=null&&setValueByPath(e,["parameters","generateAudio"],E);const x=getValueByPath(t,["lastFrame"]);e!==void 0&&x!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToVertex(x));const A=getValueByPath(t,["referenceImages"]);if(e!==void 0&&A!=null){let I=A;Array.isArray(I)&&(I=I.map(R=>videoGenerationReferenceImageToVertex(R))),setValueByPath(e,["instances[0]","referenceImages"],I)}const D=getValueByPath(t,["mask"]);e!==void 0&&D!=null&&setValueByPath(e,["instances[0]","mask"],videoGenerationMaskToVertex(D));const b=getValueByPath(t,["compressionQuality"]);return e!==void 0&&b!=null&&setValueByPath(e,["parameters","compressionQuality"],b),r}function generateVideosOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata"]);i!=null&&setValueByPath(e,["metadata"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["response","generateVideoResponse"]);return c!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev(c)),e}function generateVideosOperationFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata"]);i!=null&&setValueByPath(e,["metadata"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["response"]);return c!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex(c)),e}function generateVideosParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["prompt"]);o!=null&&setValueByPath(r,["instances[0]","prompt"],o);const l=getValueByPath(e,["image"]);l!=null&&setValueByPath(r,["instances[0]","image"],imageToMldev(l));const c=getValueByPath(e,["video"]);c!=null&&setValueByPath(r,["instances[0]","video"],videoToMldev(c));const p=getValueByPath(e,["source"]);p!=null&&generateVideosSourceToMldev(p,r);const h=getValueByPath(e,["config"]);return h!=null&&generateVideosConfigToMldev(h,r),r}function generateVideosParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["prompt"]);o!=null&&setValueByPath(r,["instances[0]","prompt"],o);const l=getValueByPath(e,["image"]);l!=null&&setValueByPath(r,["instances[0]","image"],imageToVertex(l));const c=getValueByPath(e,["video"]);c!=null&&setValueByPath(r,["instances[0]","video"],videoToVertex(c));const p=getValueByPath(e,["source"]);p!=null&&generateVideosSourceToVertex(p,r);const h=getValueByPath(e,["config"]);return h!=null&&generateVideosConfigToVertex(h,r),r}function generateVideosResponseFromMldev(t){const e={},r=getValueByPath(t,["generatedSamples"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>generatedVideoFromMldev(c))),setValueByPath(e,["generatedVideos"],l)}const i=getValueByPath(t,["raiMediaFilteredCount"]);i!=null&&setValueByPath(e,["raiMediaFilteredCount"],i);const o=getValueByPath(t,["raiMediaFilteredReasons"]);return o!=null&&setValueByPath(e,["raiMediaFilteredReasons"],o),e}function generateVideosResponseFromVertex(t){const e={},r=getValueByPath(t,["videos"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>generatedVideoFromVertex(c))),setValueByPath(e,["generatedVideos"],l)}const i=getValueByPath(t,["raiMediaFilteredCount"]);i!=null&&setValueByPath(e,["raiMediaFilteredCount"],i);const o=getValueByPath(t,["raiMediaFilteredReasons"]);return o!=null&&setValueByPath(e,["raiMediaFilteredReasons"],o),e}function generateVideosSourceToMldev(t,e){const r={},i=getValueByPath(t,["prompt"]);e!==void 0&&i!=null&&setValueByPath(e,["instances[0]","prompt"],i);const o=getValueByPath(t,["image"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","image"],imageToMldev(o));const l=getValueByPath(t,["video"]);return e!==void 0&&l!=null&&setValueByPath(e,["instances[0]","video"],videoToMldev(l)),r}function generateVideosSourceToVertex(t,e){const r={},i=getValueByPath(t,["prompt"]);e!==void 0&&i!=null&&setValueByPath(e,["instances[0]","prompt"],i);const o=getValueByPath(t,["image"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(o));const l=getValueByPath(t,["video"]);return e!==void 0&&l!=null&&setValueByPath(e,["instances[0]","video"],videoToVertex(l)),r}function generatedImageFromMldev(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["image"],imageFromMldev(r));const i=getValueByPath(t,["raiFilteredReason"]);i!=null&&setValueByPath(e,["raiFilteredReason"],i);const o=getValueByPath(t,["_self"]);return o!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromMldev(o)),e}function generatedImageFromVertex(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["image"],imageFromVertex(r));const i=getValueByPath(t,["raiFilteredReason"]);i!=null&&setValueByPath(e,["raiFilteredReason"],i);const o=getValueByPath(t,["_self"]);o!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromVertex(o));const l=getValueByPath(t,["prompt"]);return l!=null&&setValueByPath(e,["enhancedPrompt"],l),e}function generatedImageMaskFromVertex(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["mask"],imageFromVertex(r));const i=getValueByPath(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),setValueByPath(e,["labels"],o)}return e}function generatedVideoFromMldev(t){const e={},r=getValueByPath(t,["video"]);return r!=null&&setValueByPath(e,["video"],videoFromMldev(r)),e}function generatedVideoFromVertex(t){const e={},r=getValueByPath(t,["_self"]);return r!=null&&setValueByPath(e,["video"],videoFromVertex(r)),e}function generationConfigToVertex(t){const e={},r=getValueByPath(t,["modelSelectionConfig"]);r!=null&&setValueByPath(e,["modelConfig"],r);const i=getValueByPath(t,["responseJsonSchema"]);i!=null&&setValueByPath(e,["responseJsonSchema"],i);const o=getValueByPath(t,["audioTimestamp"]);o!=null&&setValueByPath(e,["audioTimestamp"],o);const l=getValueByPath(t,["candidateCount"]);l!=null&&setValueByPath(e,["candidateCount"],l);const c=getValueByPath(t,["enableAffectiveDialog"]);c!=null&&setValueByPath(e,["enableAffectiveDialog"],c);const p=getValueByPath(t,["frequencyPenalty"]);p!=null&&setValueByPath(e,["frequencyPenalty"],p);const h=getValueByPath(t,["logprobs"]);h!=null&&setValueByPath(e,["logprobs"],h);const u=getValueByPath(t,["maxOutputTokens"]);u!=null&&setValueByPath(e,["maxOutputTokens"],u);const d=getValueByPath(t,["mediaResolution"]);d!=null&&setValueByPath(e,["mediaResolution"],d);const g=getValueByPath(t,["presencePenalty"]);g!=null&&setValueByPath(e,["presencePenalty"],g);const y=getValueByPath(t,["responseLogprobs"]);y!=null&&setValueByPath(e,["responseLogprobs"],y);const S=getValueByPath(t,["responseMimeType"]);S!=null&&setValueByPath(e,["responseMimeType"],S);const E=getValueByPath(t,["responseModalities"]);E!=null&&setValueByPath(e,["responseModalities"],E);const x=getValueByPath(t,["responseSchema"]);x!=null&&setValueByPath(e,["responseSchema"],x);const A=getValueByPath(t,["routingConfig"]);A!=null&&setValueByPath(e,["routingConfig"],A);const D=getValueByPath(t,["seed"]);D!=null&&setValueByPath(e,["seed"],D);const b=getValueByPath(t,["speechConfig"]);b!=null&&setValueByPath(e,["speechConfig"],speechConfigToVertex(b));const I=getValueByPath(t,["stopSequences"]);I!=null&&setValueByPath(e,["stopSequences"],I);const R=getValueByPath(t,["temperature"]);R!=null&&setValueByPath(e,["temperature"],R);const q=getValueByPath(t,["thinkingConfig"]);q!=null&&setValueByPath(e,["thinkingConfig"],q);const G=getValueByPath(t,["topK"]);G!=null&&setValueByPath(e,["topK"],G);const z=getValueByPath(t,["topP"]);if(z!=null&&setValueByPath(e,["topP"],z),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function getModelParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);return i!=null&&setValueByPath(r,["_url","name"],tModel(t,i)),r}function getModelParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);return i!=null&&setValueByPath(r,["_url","name"],tModel(t,i)),r}function googleMapsToMldev$1(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$1(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function imageFromMldev(t){const e={},r=getValueByPath(t,["bytesBase64Encoded"]);r!=null&&setValueByPath(e,["imageBytes"],tBytes(r));const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function imageFromVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const i=getValueByPath(t,["bytesBase64Encoded"]);i!=null&&setValueByPath(e,["imageBytes"],tBytes(i));const o=getValueByPath(t,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function imageToMldev(t){const e={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=getValueByPath(t,["imageBytes"]);r!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(r));const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function imageToVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const i=getValueByPath(t,["imageBytes"]);i!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(i));const o=getValueByPath(t,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function listModelsConfigToMldev(t,e,r){const i={},o=getValueByPath(e,["pageSize"]);r!==void 0&&o!=null&&setValueByPath(r,["_query","pageSize"],o);const l=getValueByPath(e,["pageToken"]);r!==void 0&&l!=null&&setValueByPath(r,["_query","pageToken"],l);const c=getValueByPath(e,["filter"]);r!==void 0&&c!=null&&setValueByPath(r,["_query","filter"],c);const p=getValueByPath(e,["queryBase"]);return r!==void 0&&p!=null&&setValueByPath(r,["_url","models_url"],tModelsUrl(t,p)),i}function listModelsConfigToVertex(t,e,r){const i={},o=getValueByPath(e,["pageSize"]);r!==void 0&&o!=null&&setValueByPath(r,["_query","pageSize"],o);const l=getValueByPath(e,["pageToken"]);r!==void 0&&l!=null&&setValueByPath(r,["_query","pageToken"],l);const c=getValueByPath(e,["filter"]);r!==void 0&&c!=null&&setValueByPath(r,["_query","filter"],c);const p=getValueByPath(e,["queryBase"]);return r!==void 0&&p!=null&&setValueByPath(r,["_url","models_url"],tModelsUrl(t,p)),i}function listModelsParametersToMldev(t,e){const r={},i=getValueByPath(e,["config"]);return i!=null&&listModelsConfigToMldev(t,i,r),r}function listModelsParametersToVertex(t,e){const r={},i=getValueByPath(e,["config"]);return i!=null&&listModelsConfigToVertex(t,i,r),r}function listModelsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["_self"]);if(o!=null){let l=tExtractModels(o);Array.isArray(l)&&(l=l.map(c=>modelFromMldev(c))),setValueByPath(e,["models"],l)}return e}function listModelsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["_self"]);if(o!=null){let l=tExtractModels(o);Array.isArray(l)&&(l=l.map(c=>modelFromVertex(c))),setValueByPath(e,["models"],l)}return e}function maskReferenceConfigToVertex(t){const e={},r=getValueByPath(t,["maskMode"]);r!=null&&setValueByPath(e,["maskMode"],r);const i=getValueByPath(t,["segmentationClasses"]);i!=null&&setValueByPath(e,["maskClasses"],i);const o=getValueByPath(t,["maskDilation"]);return o!=null&&setValueByPath(e,["dilation"],o),e}function modelFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["displayName"]);i!=null&&setValueByPath(e,["displayName"],i);const o=getValueByPath(t,["description"]);o!=null&&setValueByPath(e,["description"],o);const l=getValueByPath(t,["version"]);l!=null&&setValueByPath(e,["version"],l);const c=getValueByPath(t,["_self"]);c!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromMldev(c));const p=getValueByPath(t,["inputTokenLimit"]);p!=null&&setValueByPath(e,["inputTokenLimit"],p);const h=getValueByPath(t,["outputTokenLimit"]);h!=null&&setValueByPath(e,["outputTokenLimit"],h);const u=getValueByPath(t,["supportedGenerationMethods"]);return u!=null&&setValueByPath(e,["supportedActions"],u),e}function modelFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["displayName"]);i!=null&&setValueByPath(e,["displayName"],i);const o=getValueByPath(t,["description"]);o!=null&&setValueByPath(e,["description"],o);const l=getValueByPath(t,["versionId"]);l!=null&&setValueByPath(e,["version"],l);const c=getValueByPath(t,["deployedModels"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>endpointFromVertex(y))),setValueByPath(e,["endpoints"],g)}const p=getValueByPath(t,["labels"]);p!=null&&setValueByPath(e,["labels"],p);const h=getValueByPath(t,["_self"]);h!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromVertex(h));const u=getValueByPath(t,["defaultCheckpointId"]);u!=null&&setValueByPath(e,["defaultCheckpointId"],u);const d=getValueByPath(t,["checkpoints"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),setValueByPath(e,["checkpoints"],g)}return e}function partToMldev$1(t){const e={},r=getValueByPath(t,["functionCall"]);r!=null&&setValueByPath(e,["functionCall"],r);const i=getValueByPath(t,["codeExecutionResult"]);i!=null&&setValueByPath(e,["codeExecutionResult"],i);const o=getValueByPath(t,["executableCode"]);o!=null&&setValueByPath(e,["executableCode"],o);const l=getValueByPath(t,["fileData"]);l!=null&&setValueByPath(e,["fileData"],fileDataToMldev$1(l));const c=getValueByPath(t,["functionResponse"]);c!=null&&setValueByPath(e,["functionResponse"],c);const p=getValueByPath(t,["inlineData"]);p!=null&&setValueByPath(e,["inlineData"],blobToMldev$1(p));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const d=getValueByPath(t,["thoughtSignature"]);d!=null&&setValueByPath(e,["thoughtSignature"],d);const g=getValueByPath(t,["videoMetadata"]);return g!=null&&setValueByPath(e,["videoMetadata"],g),e}function productImageToVertex(t){const e={},r=getValueByPath(t,["productImage"]);return r!=null&&setValueByPath(e,["image"],imageToVertex(r)),e}function recontextImageConfigToVertex(t,e){const r={},i=getValueByPath(t,["numberOfImages"]);e!==void 0&&i!=null&&setValueByPath(e,["parameters","sampleCount"],i);const o=getValueByPath(t,["baseSteps"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","editConfig","baseSteps"],o);const l=getValueByPath(t,["outputGcsUri"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","storageUri"],l);const c=getValueByPath(t,["seed"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","seed"],c);const p=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","safetySetting"],p);const h=getValueByPath(t,["personGeneration"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","personGeneration"],h);const u=getValueByPath(t,["addWatermark"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","addWatermark"],u);const d=getValueByPath(t,["outputMimeType"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],d);const g=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],g);const y=getValueByPath(t,["enhancePrompt"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","enhancePrompt"],y);const S=getValueByPath(t,["labels"]);return e!==void 0&&S!=null&&setValueByPath(e,["labels"],S),r}function recontextImageParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["source"]);o!=null&&recontextImageSourceToVertex(o,r);const l=getValueByPath(e,["config"]);return l!=null&&recontextImageConfigToVertex(l,r),r}function recontextImageResponseFromVertex(t){const e={},r=getValueByPath(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>generatedImageFromVertex(o))),setValueByPath(e,["generatedImages"],i)}return e}function recontextImageSourceToVertex(t,e){const r={},i=getValueByPath(t,["prompt"]);e!==void 0&&i!=null&&setValueByPath(e,["instances[0]","prompt"],i);const o=getValueByPath(t,["personImage"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","personImage","image"],imageToVertex(o));const l=getValueByPath(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(p=>productImageToVertex(p))),setValueByPath(e,["instances[0]","productImages"],c)}return r}function referenceImageAPIInternalToVertex(t){const e={},r=getValueByPath(t,["referenceImage"]);r!=null&&setValueByPath(e,["referenceImage"],imageToVertex(r));const i=getValueByPath(t,["referenceId"]);i!=null&&setValueByPath(e,["referenceId"],i);const o=getValueByPath(t,["referenceType"]);o!=null&&setValueByPath(e,["referenceType"],o);const l=getValueByPath(t,["maskImageConfig"]);l!=null&&setValueByPath(e,["maskImageConfig"],maskReferenceConfigToVertex(l));const c=getValueByPath(t,["controlImageConfig"]);c!=null&&setValueByPath(e,["controlImageConfig"],controlReferenceConfigToVertex(c));const p=getValueByPath(t,["styleImageConfig"]);p!=null&&setValueByPath(e,["styleImageConfig"],p);const h=getValueByPath(t,["subjectImageConfig"]);return h!=null&&setValueByPath(e,["subjectImageConfig"],h),e}function safetyAttributesFromMldev(t){const e={},r=getValueByPath(t,["safetyAttributes","categories"]);r!=null&&setValueByPath(e,["categories"],r);const i=getValueByPath(t,["safetyAttributes","scores"]);i!=null&&setValueByPath(e,["scores"],i);const o=getValueByPath(t,["contentType"]);return o!=null&&setValueByPath(e,["contentType"],o),e}function safetyAttributesFromVertex(t){const e={},r=getValueByPath(t,["safetyAttributes","categories"]);r!=null&&setValueByPath(e,["categories"],r);const i=getValueByPath(t,["safetyAttributes","scores"]);i!=null&&setValueByPath(e,["scores"],i);const o=getValueByPath(t,["contentType"]);return o!=null&&setValueByPath(e,["contentType"],o),e}function safetySettingToMldev(t){const e={},r=getValueByPath(t,["category"]);if(r!=null&&setValueByPath(e,["category"],r),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=getValueByPath(t,["threshold"]);return i!=null&&setValueByPath(e,["threshold"],i),e}function scribbleImageToVertex(t){const e={},r=getValueByPath(t,["image"]);return r!=null&&setValueByPath(e,["image"],imageToVertex(r)),e}function segmentImageConfigToVertex(t,e){const r={},i=getValueByPath(t,["mode"]);e!==void 0&&i!=null&&setValueByPath(e,["parameters","mode"],i);const o=getValueByPath(t,["maxPredictions"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","maxPredictions"],o);const l=getValueByPath(t,["confidenceThreshold"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","confidenceThreshold"],l);const c=getValueByPath(t,["maskDilation"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","maskDilation"],c);const p=getValueByPath(t,["binaryColorThreshold"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","binaryColorThreshold"],p);const h=getValueByPath(t,["labels"]);return e!==void 0&&h!=null&&setValueByPath(e,["labels"],h),r}function segmentImageParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["source"]);o!=null&&segmentImageSourceToVertex(o,r);const l=getValueByPath(e,["config"]);return l!=null&&segmentImageConfigToVertex(l,r),r}function segmentImageResponseFromVertex(t){const e={},r=getValueByPath(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>generatedImageMaskFromVertex(o))),setValueByPath(e,["generatedMasks"],i)}return e}function segmentImageSourceToVertex(t,e){const r={},i=getValueByPath(t,["prompt"]);e!==void 0&&i!=null&&setValueByPath(e,["instances[0]","prompt"],i);const o=getValueByPath(t,["image"]);e!==void 0&&o!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(o));const l=getValueByPath(t,["scribbleImage"]);return e!==void 0&&l!=null&&setValueByPath(e,["instances[0]","scribble"],scribbleImageToVertex(l)),r}function speechConfigToVertex(t){const e={},r=getValueByPath(t,["languageCode"]);r!=null&&setValueByPath(e,["languageCode"],r);const i=getValueByPath(t,["voiceConfig"]);if(i!=null&&setValueByPath(e,["voiceConfig"],i),getValueByPath(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function toolToMldev$1(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>g)),setValueByPath(e,["functionDeclarations"],d)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=getValueByPath(t,["googleSearchRetrieval"]);i!=null&&setValueByPath(e,["googleSearchRetrieval"],i);const o=getValueByPath(t,["computerUse"]);o!=null&&setValueByPath(e,["computerUse"],o);const l=getValueByPath(t,["fileSearch"]);l!=null&&setValueByPath(e,["fileSearch"],l);const c=getValueByPath(t,["codeExecution"]);if(c!=null&&setValueByPath(e,["codeExecution"],c),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=getValueByPath(t,["googleMaps"]);p!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$1(p));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$1(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}function toolToVertex(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(y=>functionDeclarationToVertex(y))),setValueByPath(e,["functionDeclarations"],g)}const i=getValueByPath(t,["retrieval"]);i!=null&&setValueByPath(e,["retrieval"],i);const o=getValueByPath(t,["googleSearchRetrieval"]);o!=null&&setValueByPath(e,["googleSearchRetrieval"],o);const l=getValueByPath(t,["computerUse"]);if(l!=null&&setValueByPath(e,["computerUse"],l),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=getValueByPath(t,["codeExecution"]);c!=null&&setValueByPath(e,["codeExecution"],c);const p=getValueByPath(t,["enterpriseWebSearch"]);p!=null&&setValueByPath(e,["enterpriseWebSearch"],p);const h=getValueByPath(t,["googleMaps"]);h!=null&&setValueByPath(e,["googleMaps"],h);const u=getValueByPath(t,["googleSearch"]);u!=null&&setValueByPath(e,["googleSearch"],u);const d=getValueByPath(t,["urlContext"]);return d!=null&&setValueByPath(e,["urlContext"],d),e}function tunedModelInfoFromMldev(t){const e={},r=getValueByPath(t,["baseModel"]);r!=null&&setValueByPath(e,["baseModel"],r);const i=getValueByPath(t,["createTime"]);i!=null&&setValueByPath(e,["createTime"],i);const o=getValueByPath(t,["updateTime"]);return o!=null&&setValueByPath(e,["updateTime"],o),e}function tunedModelInfoFromVertex(t){const e={},r=getValueByPath(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&setValueByPath(e,["baseModel"],r);const i=getValueByPath(t,["createTime"]);i!=null&&setValueByPath(e,["createTime"],i);const o=getValueByPath(t,["updateTime"]);return o!=null&&setValueByPath(e,["updateTime"],o),e}function updateModelConfigToMldev(t,e){const r={},i=getValueByPath(t,["displayName"]);e!==void 0&&i!=null&&setValueByPath(e,["displayName"],i);const o=getValueByPath(t,["description"]);e!==void 0&&o!=null&&setValueByPath(e,["description"],o);const l=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&setValueByPath(e,["defaultCheckpointId"],l),r}function updateModelConfigToVertex(t,e){const r={},i=getValueByPath(t,["displayName"]);e!==void 0&&i!=null&&setValueByPath(e,["displayName"],i);const o=getValueByPath(t,["description"]);e!==void 0&&o!=null&&setValueByPath(e,["description"],o);const l=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&setValueByPath(e,["defaultCheckpointId"],l),r}function updateModelParametersToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","name"],tModel(t,i));const o=getValueByPath(e,["config"]);return o!=null&&updateModelConfigToMldev(o,r),r}function updateModelParametersToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["config"]);return o!=null&&updateModelConfigToVertex(o,r),r}function upscaleImageAPIConfigInternalToVertex(t,e){const r={},i=getValueByPath(t,["outputGcsUri"]);e!==void 0&&i!=null&&setValueByPath(e,["parameters","storageUri"],i);const o=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&setValueByPath(e,["parameters","safetySetting"],o);const l=getValueByPath(t,["personGeneration"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","personGeneration"],l);const c=getValueByPath(t,["includeRaiReason"]);e!==void 0&&c!=null&&setValueByPath(e,["parameters","includeRaiReason"],c);const p=getValueByPath(t,["outputMimeType"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],p);const h=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],h);const u=getValueByPath(t,["enhanceInputImage"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=getValueByPath(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const g=getValueByPath(t,["labels"]);e!==void 0&&g!=null&&setValueByPath(e,["labels"],g);const y=getValueByPath(t,["numberOfImages"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","sampleCount"],y);const S=getValueByPath(t,["mode"]);return e!==void 0&&S!=null&&setValueByPath(e,["parameters","mode"],S),r}function upscaleImageAPIParametersInternalToVertex(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["_url","model"],tModel(t,i));const o=getValueByPath(e,["image"]);o!=null&&setValueByPath(r,["instances[0]","image"],imageToVertex(o));const l=getValueByPath(e,["upscaleFactor"]);l!=null&&setValueByPath(r,["parameters","upscaleConfig","upscaleFactor"],l);const c=getValueByPath(e,["config"]);return c!=null&&upscaleImageAPIConfigInternalToVertex(c,r),r}function upscaleImageResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>generatedImageFromVertex(l))),setValueByPath(e,["generatedImages"],o)}return e}function videoFromMldev(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const i=getValueByPath(t,["encodedVideo"]);i!=null&&setValueByPath(e,["videoBytes"],tBytes(i));const o=getValueByPath(t,["encoding"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function videoFromVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["uri"],r);const i=getValueByPath(t,["bytesBase64Encoded"]);i!=null&&setValueByPath(e,["videoBytes"],tBytes(i));const o=getValueByPath(t,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}function videoGenerationMaskToVertex(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["_self"],imageToVertex(r));const i=getValueByPath(t,["maskMode"]);return i!=null&&setValueByPath(e,["maskMode"],i),e}function videoGenerationReferenceImageToMldev(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["image"],imageToMldev(r));const i=getValueByPath(t,["referenceType"]);return i!=null&&setValueByPath(e,["referenceType"],i),e}function videoGenerationReferenceImageToVertex(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["image"],imageToVertex(r));const i=getValueByPath(t,["referenceType"]);return i!=null&&setValueByPath(e,["referenceType"],i),e}function videoToMldev(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const i=getValueByPath(t,["videoBytes"]);i!=null&&setValueByPath(e,["encodedVideo"],tBytes(i));const o=getValueByPath(t,["mimeType"]);return o!=null&&setValueByPath(e,["encoding"],o),e}function videoToVertex(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const i=getValueByPath(t,["videoBytes"]);i!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(i));const o=getValueByPath(t,["mimeType"]);return o!=null&&setValueByPath(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CONTENT_TYPE_HEADER="Content-Type",SERVER_TIMEOUT_HEADER="X-Server-Timeout",USER_AGENT_HEADER="User-Agent",GOOGLE_API_CLIENT_HEADER="x-goog-api-client",SDK_VERSION="1.29.0",LIBRARY_LABEL=`google-genai-sdk/${SDK_VERSION}`,VERTEX_AI_API_DEFAULT_VERSION="v1beta1",GOOGLE_AI_API_DEFAULT_VERSION="v1beta",responseLineRE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ApiClient{constructor(e){var r,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:VERTEX_AI_API_DEFAULT_VERSION,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:GOOGLE_AI_API_DEFAULT_VERSION,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,i){const o=[this.getRequestUrlInternal(r)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,r,i);if(e.queryParams)for(const[c,p]of Object.entries(e.queryParams))o.searchParams.append(c,String(p));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,r,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,r){const i=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(r))typeof l=="object"?i[o]=Object.assign(Object.assign({},i[o]),l):l!==void 0&&(i[o]=l);return i}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,r,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,r,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,i,o){if(r&&r.timeout||o){const l=new AbortController,c=l.signal;if(r.timeout&&r?.timeout>0){const p=setTimeout(()=>l.abort(),r.timeout);p&&typeof p.unref=="function"&&p.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=c}return r&&r.extraBody!==null&&includeExtraBodyToRequestInit(e,r.extraBody),e.headers=await this.getHeadersInternal(r,i),e}async unaryApiCall(e,r,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:i})).then(async o=>(await throwErrorIfNotOK(o),new HttpResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,r,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:i})).then(async o=>(await throwErrorIfNotOK(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var r;return __asyncGenerator(this,arguments,function*(){const o=(r=e?.body)===null||r===void 0?void 0:r.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:p,value:h}=yield __await(o.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=l.decode(h,{stream:!0});try{const g=JSON.parse(u);if("error"in g){const y=JSON.parse(JSON.stringify(g.error)),S=y.status,E=y.code,x=`got status: ${S}. ${JSON.stringify(g)}`;if(E>=400&&E<600)throw new ApiError({message:x,status:E})}}catch(g){if(g.name==="ApiError")throw g}c+=u;let d=c.match(responseLineRE);for(;d;){const g=d[1];try{const y=new Response(g,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield __await(new HttpResponse(y)),c=c.slice(d[0].length),d=c.match(responseLineRE)}catch(y){throw new Error(`exception parsing stream chunk ${g}. ${y}`)}}}}finally{o.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},r=LIBRARY_LABEL+" "+this.clientOptions.userAgentExtra;return e[USER_AGENT_HEADER]=r,e[GOOGLE_API_CLIENT_HEADER]=r,e[CONTENT_TYPE_HEADER]="application/json",e}async getHeadersInternal(e,r){const i=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))i.append(o,l);e.timeout&&e.timeout>0&&i.append(SERVER_TIMEOUT_HEADER,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,r),i}getFileName(e){var r;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(r=i.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),i}async uploadFile(e,r){var i;const o={};r!=null&&(o.mimeType=r.mimeType,o.name=r.name,o.displayName=r.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const p=(i=r?.mimeType)!==null&&i!==void 0?i:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=p;const h={file:o},u=this.getFileName(e),d=formatMap("upload/v1beta/files",h._url),g=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,u,h,r?.httpOptions);return l.upload(e,g,this)}async uploadFileToFileSearchStore(e,r,i){var o;const l=this.clientOptions.uploader,c=await l.stat(r),p=String(c.size),h=(o=i?.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(r),g={};i?.customMetadata&&(g.customMetadata=i.customMetadata),i?.chunkingConfig&&(g.chunkingConfig=i.chunkingConfig);const y=await this.fetchUploadUrl(u,p,h,d,g,i?.httpOptions);return l.uploadToFileSearchStore(r,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,i,o,l,c){var p;let h={};c?h=c:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const u=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:h});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(p=u?.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function throwErrorIfNotOK(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw r>=400&&r<600?new ApiError({message:o,status:r}):new Error(o)}}function includeExtraBodyToRequestInit(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))r=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,c){const p=Object.assign({},l);for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h)){const u=c[h],d=p[h];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?p[h]=i(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),p[h]=u)}return p}const o=i(r,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MCP_LABEL="mcp_used/unknown";let hasMcpToolUsageFromMcpToTool=!1;function hasMcpToolUsage(t){for(const e of t)if(isMcpCallableTool(e)||typeof e=="object"&&"inputSchema"in e)return!0;return hasMcpToolUsageFromMcpToTool}function setMcpUsageHeader(t){var e;const r=(e=t[GOOGLE_API_CLIENT_HEADER])!==null&&e!==void 0?e:"";t[GOOGLE_API_CLIENT_HEADER]=(r+` ${MCP_LABEL}`).trimStart()}function isMcpCallableTool(t){return t!==null&&typeof t=="object"&&t instanceof McpCallableTool}function listAllTools(t,e=100){return __asyncGenerator(this,arguments,function*(){let i,o=0;for(;o<e;){const l=yield __await(t.listTools({cursor:i}));for(const c of l.tools)yield yield __await(c),o++;if(!l.nextCursor)break;i=l.nextCursor}})}class McpCallableTool{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new McpCallableTool(e,r)}async initialize(){var e,r,i,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const d of this.mcpClients)try{for(var p=!0,h=(r=void 0,__asyncValues(listAllTools(d))),u;u=await h.next(),e=u.done,!e;p=!0){o=u.value,p=!1;const g=o;c.push(g);const y=g.name;if(l[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);l[y]=d}}catch(g){r={error:g}}finally{try{!p&&!e&&(i=h.return)&&await i.call(h)}finally{if(r)throw r.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),mcpToolsToGeminiTool(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:i.name,arguments:i.args},void 0,l);r.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function handleWebSocketMessage$1(t,e,r){const i=new LiveMusicServerMessage;let o;r.data instanceof Blob?o=JSON.parse(await r.data.text()):o=JSON.parse(r.data),Object.assign(i,o),e(i)}class LiveMusic{constructor(e,r,i){this.apiClient=e,this.auth=r,this.webSocketFactory=i}async connect(e){var r,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=mapToHeaders$1(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${p}`;let u=()=>{};const d=new Promise(I=>{u=I}),g=e.callbacks,y=function(){u({})},S=this.apiClient,E={onopen:y,onmessage:I=>{handleWebSocketMessage$1(S,g.onmessage,I)},onerror:(r=g?.onerror)!==null&&r!==void 0?r:function(I){},onclose:(i=g?.onclose)!==null&&i!==void 0?i:function(I){}},x=this.webSocketFactory.create(h,headersToMap$1(c),E);x.connect(),await d;const b={setup:{model:tModel(this.apiClient,e.model)}};return x.send(JSON.stringify(b)),new LiveMusicSession(x,this.apiClient)}}class LiveMusicSession{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=liveMusicSetWeightedPromptsParametersToMldev(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=liveMusicSetConfigParametersToMldev(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(LiveMusicPlaybackControl.PLAY)}pause(){this.sendPlaybackControl(LiveMusicPlaybackControl.PAUSE)}stop(){this.sendPlaybackControl(LiveMusicPlaybackControl.STOP)}resetContext(){this.sendPlaybackControl(LiveMusicPlaybackControl.RESET_CONTEXT)}close(){this.conn.close()}}function headersToMap$1(t){const e={};return t.forEach((r,i)=>{e[i]=r}),e}function mapToHeaders$1(t){const e=new Headers;for(const[r,i]of Object.entries(t))e.append(r,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FUNCTION_RESPONSE_REQUIRES_ID="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function handleWebSocketMessage(t,e,r){const i=new LiveServerMessage;let o;r.data instanceof Blob?o=await r.data.text():r.data instanceof ArrayBuffer?o=new TextDecoder().decode(r.data):o=r.data;const l=JSON.parse(o);if(t.isVertexAI()){const c=liveServerMessageFromVertex(l);Object.assign(i,c)}else Object.assign(i,l);e(i)}class Live{constructor(e,r,i){this.apiClient=e,this.auth=r,this.webSocketFactory=i,this.music=new LiveMusic(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,i,o,l,c,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)&&setMcpUsageHeader(g);const y=mapToHeaders(g);if(this.apiClient.isVertexAI())d=`${h}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,d);else{const M=this.apiClient.getApiKey();let O="BidiGenerateContent",W="key";M?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",W="access_token"),d=`${h}/ws/google.ai.generativelanguage.${u}.GenerativeService.${O}?${W}=${M}`}let S=()=>{};const E=new Promise(M=>{S=M}),x=e.callbacks,A=function(){var M;(M=x?.onopen)===null||M===void 0||M.call(x),S({})},D=this.apiClient,b={onopen:A,onmessage:M=>{handleWebSocketMessage(D,x.onmessage,M)},onerror:(r=x?.onerror)!==null&&r!==void 0?r:function(M){},onclose:(i=x?.onclose)!==null&&i!==void 0?i:function(M){}},I=this.webSocketFactory.create(d,headersToMap(y),b);I.connect(),await E;let R=tModel(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const M=this.apiClient.getProject(),O=this.apiClient.getLocation();R=`projects/${M}/locations/${O}/`+R}let q={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Modality.AUDIO]}:e.config.responseModalities=[Modality.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(p=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[],z=[];for(const M of G)if(this.isCallableTool(M)){const O=M;z.push(await O.tool())}else z.push(M);z.length>0&&(e.config.tools=z);const B={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=liveConnectParametersToVertex(this.apiClient,B):q=liveConnectParametersToMldev(this.apiClient,B),delete q.config,I.send(JSON.stringify(q)),new Session(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const defaultLiveSendClientContentParamerters={turnComplete:!0};class Session{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let i=[];try{i=tContents(r.turns),e.isVertexAI()||(i=i.map(o=>contentToMldev$1(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:i,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let i=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?i=r.functionResponses:i=[r.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(FUNCTION_RESPONSE_REQUIRES_ID)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},defaultLiveSendClientContentParamerters),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:liveSendRealtimeInputParametersToVertex(e)}:r={realtimeInput:liveSendRealtimeInputParametersToMldev(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function headersToMap(t){const e={};return t.forEach((r,i)=>{e[i]=r}),e}function mapToHeaders(t){const e=new Headers;for(const[r,i]of Object.entries(t))e.append(r,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DEFAULT_MAX_REMOTE_CALLS=10;function shouldDisableAfc(t){var e,r,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(r=t?.tools)!==null&&r!==void 0?r:[])if(isCallableTool(c)){o=!0;break}if(!o)return!0;const l=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}function hasCallableTools(t){var e,r,i;return(i=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(o=>isCallableTool(o)))!==null&&i!==void 0?i:!1}function findAfcIncompatibleToolIndexes(t){var e;const r=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(isCallableTool(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&r.push(o)}),r}function shouldAppendAfcHistory(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Models extends BaseModule{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var i,o,l,c,p;const h=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!hasCallableTools(r)||shouldDisableAfc(r.config))return await this.generateContentInternal(h);const u=findAfcIncompatibleToolIndexes(r);if(u.length>0){const x=u.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,g;const y=tContents(h.contents),S=(l=(o=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:DEFAULT_MAX_REMOTE_CALLS;let E=0;for(;E<S&&(d=await this.generateContentInternal(h),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,A=[];for(const D of(p=(c=r.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[])if(isCallableTool(D)){const I=await D.callTool(d.functionCalls);A.push(...I)}E++,g={role:"user",parts:A},h.contents=tContents(h.contents),h.contents.push(x),h.contents.push(g),shouldAppendAfcHistory(h.config)&&(y.push(x),y.push(g))}return shouldAppendAfcHistory(h.config)&&(d.automaticFunctionCallingHistory=y),d},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),shouldDisableAfc(r.config)){const o=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(o)}const i=findAfcIncompatibleToolIndexes(r);if(i.length>0){const o=i.map(l=>`tools[${l}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(i=>{var o;let l;const c=[];if(i?.generatedImages)for(const h of i.generatedImages)h&&h?.safetyAttributes&&((o=h?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=h?.safetyAttributes:c.push(h);let p;return l?p={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:p={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},p}),this.list=async r=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),r?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Pager(PagedItem.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(c),c)},this.editImage=async r=>{const i={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(i.referenceImages=r.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async r=>{let i={numberOfImages:1,mode:"upscale"};r.config&&(i=Object.assign(Object.assign({},i),r.config));const o={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async r=>{var i,o,l,c,p,h;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=r.video)===null||i===void 0)&&i.uri&&(!((o=r.video)===null||o===void 0)&&o.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((c=(l=r.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((h=(p=r.source)===null||p===void 0?void 0:p.video)===null||h===void 0)&&h.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,i,o;const l=(r=e.config)===null||r===void 0?void 0:r.tools;if(!l)return e;const c=await Promise.all(l.map(async h=>isCallableTool(h)?await h.tool():h)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(p.config.tools=c,e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)){const h=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let u=Object.assign({},h);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),setMcpUsageHeader(u),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return p}async initAfcToolsMap(e){var r,i,o;const l=new Map;for(const c of(i=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&i!==void 0?i:[])if(isCallableTool(c)){const p=c,h=await p.tool();for(const u of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!u.name)throw new Error("Function declaration name is required.");if(l.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);l.set(u.name,p)}}return l}async processAfcStream(e){var r,i,o;const l=(o=(i=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:DEFAULT_MAX_REMOTE_CALLS;let c=!1,p=0;const h=await this.initAfcToolsMap(e);return(function(u,d,g){var y,S;return __asyncGenerator(this,arguments,function*(){for(var E,x,A,D;p<l;){c&&(p++,c=!1);const q=yield __await(u.processParamsMaybeAddMcpUsage(g)),G=yield __await(u.generateContentStreamInternal(q)),z=[],B=[];try{for(var b=!0,I=(x=void 0,__asyncValues(G)),R;R=yield __await(I.next()),E=R.done,!E;b=!0){D=R.value,b=!1;const M=D;if(yield yield __await(M),M.candidates&&(!((y=M.candidates[0])===null||y===void 0)&&y.content)){B.push(M.candidates[0].content);for(const O of(S=M.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(p<l&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(O.functionCall.name)){const W=yield __await(d.get(O.functionCall.name).callTool([O.functionCall]));z.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(M){x={error:M}}finally{try{!b&&!E&&(A=I.return)&&(yield __await(A.call(I)))}finally{if(x)throw x.error}}if(z.length>0){c=!0;const M=new GenerateContentResponse;M.candidates=[{content:{role:"user",parts:z}}],yield yield __await(M);const O=[];O.push(...B),O.push({role:"user",parts:z});const W=tContents(g.contents).concat(O);g.contents=W}else break}})})(this,h,e)}async generateContentInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=generateContentParametersToVertex(this.apiClient,e);return p=formatMap("{model}:generateContent",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=generateContentResponseFromVertex(d),y=new GenerateContentResponse;return Object.assign(y,g),y})}else{const u=generateContentParametersToMldev(this.apiClient,e);return p=formatMap("{model}:generateContent",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=generateContentResponseFromMldev(d),y=new GenerateContentResponse;return Object.assign(y,g),y})}}async generateContentStreamInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=generateContentParametersToVertex(this.apiClient,e);return p=formatMap("{model}:streamGenerateContent?alt=sse",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.requestStream({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(g){return __asyncGenerator(this,arguments,function*(){var y,S,E,x;try{for(var A=!0,D=__asyncValues(g),b;b=yield __await(D.next()),y=b.done,!y;A=!0){x=b.value,A=!1;const I=x,R=generateContentResponseFromVertex(yield __await(I.json()));R.sdkHttpResponse={headers:I.headers};const q=new GenerateContentResponse;Object.assign(q,R),yield yield __await(q)}}catch(I){S={error:I}}finally{try{!A&&!y&&(E=D.return)&&(yield __await(E.call(D)))}finally{if(S)throw S.error}}})})}else{const u=generateContentParametersToMldev(this.apiClient,e);return p=formatMap("{model}:streamGenerateContent?alt=sse",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.requestStream({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(g){return __asyncGenerator(this,arguments,function*(){var y,S,E,x;try{for(var A=!0,D=__asyncValues(g),b;b=yield __await(D.next()),y=b.done,!y;A=!0){x=b.value,A=!1;const I=x,R=generateContentResponseFromMldev(yield __await(I.json()));R.sdkHttpResponse={headers:I.headers};const q=new GenerateContentResponse;Object.assign(q,R),yield yield __await(q)}}catch(I){S={error:I}}finally{try{!A&&!y&&(E=D.return)&&(yield __await(E.call(D)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=embedContentParametersToVertex(this.apiClient,e);return p=formatMap("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=embedContentResponseFromVertex(d),y=new EmbedContentResponse;return Object.assign(y,g),y})}else{const u=embedContentParametersToMldev(this.apiClient,e);return p=formatMap("{model}:batchEmbedContents",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=embedContentResponseFromMldev(d),y=new EmbedContentResponse;return Object.assign(y,g),y})}}async generateImagesInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=generateImagesParametersToVertex(this.apiClient,e);return p=formatMap("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=generateImagesResponseFromVertex(d),y=new GenerateImagesResponse;return Object.assign(y,g),y})}else{const u=generateImagesParametersToMldev(this.apiClient,e);return p=formatMap("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=generateImagesResponseFromMldev(d),y=new GenerateImagesResponse;return Object.assign(y,g),y})}}async editImageInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const p=editImageParametersInternalToVertex(this.apiClient,e);return l=formatMap("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:h.headers},d})),o.then(h=>{const u=editImageResponseFromVertex(h),d=new EditImageResponse;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const p=upscaleImageAPIParametersInternalToVertex(this.apiClient,e);return l=formatMap("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:h.headers},d})),o.then(h=>{const u=upscaleImageResponseFromVertex(h),d=new UpscaleImageResponse;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const p=recontextImageParametersToVertex(this.apiClient,e);return l=formatMap("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const u=recontextImageResponseFromVertex(h),d=new RecontextImageResponse;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const p=segmentImageParametersToVertex(this.apiClient,e);return l=formatMap("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const u=segmentImageResponseFromVertex(h),d=new SegmentImageResponse;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=getModelParametersToVertex(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>modelFromVertex(d))}else{const u=getModelParametersToMldev(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>modelFromMldev(d))}}async listInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=listModelsParametersToVertex(this.apiClient,e);return p=formatMap("{models_url}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listModelsResponseFromVertex(d),y=new ListModelsResponse;return Object.assign(y,g),y})}else{const u=listModelsParametersToMldev(this.apiClient,e);return p=formatMap("{models_url}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listModelsResponseFromMldev(d),y=new ListModelsResponse;return Object.assign(y,g),y})}}async update(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=updateModelParametersToVertex(this.apiClient,e);return p=formatMap("{model}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>modelFromVertex(d))}else{const u=updateModelParametersToMldev(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>modelFromMldev(d))}}async delete(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=deleteModelParametersToVertex(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=deleteModelResponseFromVertex(d),y=new DeleteModelResponse;return Object.assign(y,g),y})}else{const u=deleteModelParametersToMldev(this.apiClient,e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=deleteModelResponseFromMldev(d),y=new DeleteModelResponse;return Object.assign(y,g),y})}}async countTokens(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=countTokensParametersToVertex(this.apiClient,e);return p=formatMap("{model}:countTokens",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=countTokensResponseFromVertex(d),y=new CountTokensResponse;return Object.assign(y,g),y})}else{const u=countTokensParametersToMldev(this.apiClient,e);return p=formatMap("{model}:countTokens",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=countTokensResponseFromMldev(d),y=new CountTokensResponse;return Object.assign(y,g),y})}}async computeTokens(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const p=computeTokensParametersToVertex(this.apiClient,e);return l=formatMap("{model}:computeTokens",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:h.headers},d})),o.then(h=>{const u=computeTokensResponseFromVertex(h),d=new ComputeTokensResponse;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=generateVideosParametersToVertex(this.apiClient,e);return p=formatMap("{model}:predictLongRunning",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c.then(d=>{const g=generateVideosOperationFromVertex(d),y=new GenerateVideosOperation;return Object.assign(y,g),y})}else{const u=generateVideosParametersToMldev(this.apiClient,e);return p=formatMap("{model}:predictLongRunning",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c.then(d=>{const g=generateVideosOperationFromMldev(d),y=new GenerateVideosOperation;return Object.assign(y,g),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Operations extends BaseModule{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,i=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=r.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:o,config:{httpOptions:l}});return r._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:r.name,config:i});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const r=e.operation,i=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=r.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:o,config:{httpOptions:l}});return r._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:r.name,config:i});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=getOperationParametersToVertex(e);return p=formatMap("{operationName}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),c}else{const u=getOperationParametersToMldev(e);return p=formatMap("{operationName}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),c}}async fetchPredictVideosOperationInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const p=fetchPredictOperationParametersToVertex(e);return l=formatMap("{resourceName}:fetchPredictOperation",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function contentToMldev(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>partToMldev(l))),setValueByPath(e,["parts"],o)}const i=getValueByPath(t,["role"]);return i!=null&&setValueByPath(e,["role"],i),e}function createAuthTokenConfigToMldev(t,e,r){const i={},o=getValueByPath(e,["expireTime"]);r!==void 0&&o!=null&&setValueByPath(r,["expireTime"],o);const l=getValueByPath(e,["newSessionExpireTime"]);r!==void 0&&l!=null&&setValueByPath(r,["newSessionExpireTime"],l);const c=getValueByPath(e,["uses"]);r!==void 0&&c!=null&&setValueByPath(r,["uses"],c);const p=getValueByPath(e,["liveConnectConstraints"]);r!==void 0&&p!=null&&setValueByPath(r,["bidiGenerateContentSetup"],liveConnectConstraintsToMldev(t,p));const h=getValueByPath(e,["lockAdditionalFields"]);return r!==void 0&&h!=null&&setValueByPath(r,["fieldMask"],h),i}function createAuthTokenParametersToMldev(t,e){const r={},i=getValueByPath(e,["config"]);return i!=null&&setValueByPath(r,["config"],createAuthTokenConfigToMldev(t,i,r)),r}function fileDataToMldev(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const i=getValueByPath(t,["mimeType"]);return i!=null&&setValueByPath(e,["mimeType"],i),e}function googleMapsToMldev(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function liveConnectConfigToMldev(t,e){const r={},i=getValueByPath(t,["generationConfig"]);e!==void 0&&i!=null&&setValueByPath(e,["setup","generationConfig"],i);const o=getValueByPath(t,["responseModalities"]);e!==void 0&&o!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],o);const l=getValueByPath(t,["temperature"]);e!==void 0&&l!=null&&setValueByPath(e,["setup","generationConfig","temperature"],l);const c=getValueByPath(t,["topP"]);e!==void 0&&c!=null&&setValueByPath(e,["setup","generationConfig","topP"],c);const p=getValueByPath(t,["topK"]);e!==void 0&&p!=null&&setValueByPath(e,["setup","generationConfig","topK"],p);const h=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],h);const u=getValueByPath(t,["mediaResolution"]);e!==void 0&&u!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],u);const d=getValueByPath(t,["seed"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","seed"],d);const g=getValueByPath(t,["speechConfig"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(g));const y=getValueByPath(t,["thinkingConfig"]);e!==void 0&&y!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],y);const S=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],S);const E=getValueByPath(t,["systemInstruction"]);e!==void 0&&E!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev(tContent(E)));const x=getValueByPath(t,["tools"]);if(e!==void 0&&x!=null){let G=tTools(x);Array.isArray(G)&&(G=G.map(z=>toolToMldev(tTool(z)))),setValueByPath(e,["setup","tools"],G)}const A=getValueByPath(t,["sessionResumption"]);e!==void 0&&A!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev(A));const D=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&setValueByPath(e,["setup","inputAudioTranscription"],D);const b=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&setValueByPath(e,["setup","outputAudioTranscription"],b);const I=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&setValueByPath(e,["setup","realtimeInputConfig"],I);const R=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&R!=null&&setValueByPath(e,["setup","contextWindowCompression"],R);const q=getValueByPath(t,["proactivity"]);return e!==void 0&&q!=null&&setValueByPath(e,["setup","proactivity"],q),r}function liveConnectConstraintsToMldev(t,e){const r={},i=getValueByPath(e,["model"]);i!=null&&setValueByPath(r,["setup","model"],tModel(t,i));const o=getValueByPath(e,["config"]);return o!=null&&setValueByPath(r,["config"],liveConnectConfigToMldev(o,r)),r}function partToMldev(t){const e={},r=getValueByPath(t,["functionCall"]);r!=null&&setValueByPath(e,["functionCall"],r);const i=getValueByPath(t,["codeExecutionResult"]);i!=null&&setValueByPath(e,["codeExecutionResult"],i);const o=getValueByPath(t,["executableCode"]);o!=null&&setValueByPath(e,["executableCode"],o);const l=getValueByPath(t,["fileData"]);l!=null&&setValueByPath(e,["fileData"],fileDataToMldev(l));const c=getValueByPath(t,["functionResponse"]);c!=null&&setValueByPath(e,["functionResponse"],c);const p=getValueByPath(t,["inlineData"]);p!=null&&setValueByPath(e,["inlineData"],blobToMldev(p));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const d=getValueByPath(t,["thoughtSignature"]);d!=null&&setValueByPath(e,["thoughtSignature"],d);const g=getValueByPath(t,["videoMetadata"]);return g!=null&&setValueByPath(e,["videoMetadata"],g),e}function sessionResumptionConfigToMldev(t){const e={},r=getValueByPath(t,["handle"]);if(r!=null&&setValueByPath(e,["handle"],r),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function toolToMldev(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(g=>g)),setValueByPath(e,["functionDeclarations"],d)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=getValueByPath(t,["googleSearchRetrieval"]);i!=null&&setValueByPath(e,["googleSearchRetrieval"],i);const o=getValueByPath(t,["computerUse"]);o!=null&&setValueByPath(e,["computerUse"],o);const l=getValueByPath(t,["fileSearch"]);l!=null&&setValueByPath(e,["fileSearch"],l);const c=getValueByPath(t,["codeExecution"]);if(c!=null&&setValueByPath(e,["codeExecution"],c),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=getValueByPath(t,["googleMaps"]);p!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev(p));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getFieldMasks(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(l=>`${r}.${l}`);e.push(...o)}else e.push(r)}return e.join(",")}function convertBidiSetupToTokenSetup(t,e){let r=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,r=l):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(r){const l=getFieldMasks(r);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];o.length>0&&(p=o.map(u=>c.includes(u)?`generationConfig.${u}`:u));const h=[];l&&h.push(l),p.length>0&&h.push(...p),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class Tokens extends BaseModule{constructor(e){super(),this.apiClient=e}async create(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=createAuthTokenParametersToMldev(this.apiClient,e);l=formatMap("auth_tokens",p._url),c=p._query,delete p.config,delete p._url,delete p._query;const h=convertBidiSetupToTokenSetup(p,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileSearchStoreConfigToMldev(t,e){const r={},i=getValueByPath(t,["displayName"]);return e!==void 0&&i!=null&&setValueByPath(e,["displayName"],i),r}function createFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&createFileSearchStoreConfigToMldev(r,e),e}function deleteFileSearchStoreConfigToMldev(t,e){const r={},i=getValueByPath(t,["force"]);return e!==void 0&&i!=null&&setValueByPath(e,["_query","force"],i),r}function deleteFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["_url","name"],r);const i=getValueByPath(t,["config"]);return i!=null&&deleteFileSearchStoreConfigToMldev(i,e),e}function getFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","name"],r),e}function importFileConfigToMldev(t,e){const r={},i=getValueByPath(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["customMetadata"],l)}const o=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&o!=null&&setValueByPath(e,["chunkingConfig"],o),r}function importFileOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const i=getValueByPath(t,["metadata"]);i!=null&&setValueByPath(e,["metadata"],i);const o=getValueByPath(t,["done"]);o!=null&&setValueByPath(e,["done"],o);const l=getValueByPath(t,["error"]);l!=null&&setValueByPath(e,["error"],l);const c=getValueByPath(t,["response"]);return c!=null&&setValueByPath(e,["response"],importFileResponseFromMldev(c)),e}function importFileParametersToMldev(t){const e={},r=getValueByPath(t,["fileSearchStoreName"]);r!=null&&setValueByPath(e,["_url","file_search_store_name"],r);const i=getValueByPath(t,["fileName"]);i!=null&&setValueByPath(e,["fileName"],i);const o=getValueByPath(t,["config"]);return o!=null&&importFileConfigToMldev(o,e),e}function importFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["parent"]);i!=null&&setValueByPath(e,["parent"],i);const o=getValueByPath(t,["documentName"]);return o!=null&&setValueByPath(e,["documentName"],o),e}function listFileSearchStoresConfigToMldev(t,e){const r={},i=getValueByPath(t,["pageSize"]);e!==void 0&&i!=null&&setValueByPath(e,["_query","pageSize"],i);const o=getValueByPath(t,["pageToken"]);return e!==void 0&&o!=null&&setValueByPath(e,["_query","pageToken"],o),r}function listFileSearchStoresParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listFileSearchStoresConfigToMldev(r,e),e}function listFileSearchStoresResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["fileSearchStores"],l)}return e}function uploadToFileSearchStoreConfigToMldev(t,e){const r={},i=getValueByPath(t,["mimeType"]);e!==void 0&&i!=null&&setValueByPath(e,["mimeType"],i);const o=getValueByPath(t,["displayName"]);e!==void 0&&o!=null&&setValueByPath(e,["displayName"],o);const l=getValueByPath(t,["customMetadata"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>h)),setValueByPath(e,["customMetadata"],p)}const c=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&c!=null&&setValueByPath(e,["chunkingConfig"],c),r}function uploadToFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["fileSearchStoreName"]);r!=null&&setValueByPath(e,["_url","file_search_store_name"],r);const i=getValueByPath(t,["config"]);return i!=null&&uploadToFileSearchStoreConfigToMldev(i,e),e}function uploadToFileSearchStoreResumableResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function deleteDocumentConfigToMldev(t,e){const r={},i=getValueByPath(t,["force"]);return e!==void 0&&i!=null&&setValueByPath(e,["_query","force"],i),r}function deleteDocumentParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["_url","name"],r);const i=getValueByPath(t,["config"]);return i!=null&&deleteDocumentConfigToMldev(i,e),e}function getDocumentParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","name"],r),e}function listDocumentsConfigToMldev(t,e){const r={},i=getValueByPath(t,["pageSize"]);e!==void 0&&i!=null&&setValueByPath(e,["_query","pageSize"],i);const o=getValueByPath(t,["pageToken"]);return e!==void 0&&o!=null&&setValueByPath(e,["_query","pageToken"],o),r}function listDocumentsParametersToMldev(t){const e={},r=getValueByPath(t,["parent"]);r!=null&&setValueByPath(e,["_url","parent"],r);const i=getValueByPath(t,["config"]);return i!=null&&listDocumentsConfigToMldev(i,e),e}function listDocumentsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const i=getValueByPath(t,["nextPageToken"]);i!=null&&setValueByPath(e,["nextPageToken"],i);const o=getValueByPath(t,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),setValueByPath(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Documents extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async r=>new Pager(PagedItem.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:r.parent,config:i.config}),await this.listInternal(r),r)}async get(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=getDocumentParametersToMldev(e);return l=formatMap("{name}",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var r,i;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=deleteDocumentParametersToMldev(e);o=formatMap("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=listDocumentsParametersToMldev(e);return l=formatMap("{parent}/documents",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const u=listDocumentsResponseFromMldev(h),d=new ListDocumentsResponse;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FileSearchStores extends BaseModule{constructor(e,r=new Documents(e)){super(),this.apiClient=e,this.documents=r,this.list=async(i={})=>new Pager(PagedItem.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=createFileSearchStoreParametersToMldev(e);return l=formatMap("fileSearchStores",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=getFileSearchStoreParametersToMldev(e);return l=formatMap("{name}",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var r,i;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=deleteFileSearchStoreParametersToMldev(e);o=formatMap("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=listFileSearchStoresParametersToMldev(e);return l=formatMap("fileSearchStores",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const u=listFileSearchStoresResponseFromMldev(h),d=new ListFileSearchStoresResponse;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uploadToFileSearchStoreParametersToMldev(e);return l=formatMap("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const u=uploadToFileSearchStoreResumableResponseFromMldev(h),d=new UploadToFileSearchStoreResumableResponse;return Object.assign(d,u),d})}}async importFile(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=importFileParametersToMldev(e);return l=formatMap("{file_search_store_name}:importFile",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const u=importFileOperationFromMldev(h),d=new ImportFileOperation;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cancelTuningJobParametersToMldev(t,e){const r={},i=getValueByPath(t,["name"]);return i!=null&&setValueByPath(r,["_url","name"],i),r}function cancelTuningJobParametersToVertex(t,e){const r={},i=getValueByPath(t,["name"]);return i!=null&&setValueByPath(r,["_url","name"],i),r}function createTuningJobConfigToMldev(t,e,r){const i={};if(getValueByPath(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=getValueByPath(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&setValueByPath(e,["displayName"],o),getValueByPath(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=getValueByPath(t,["epochCount"]);e!==void 0&&l!=null&&setValueByPath(e,["tuningTask","hyperparameters","epochCount"],l);const c=getValueByPath(t,["learningRateMultiplier"]);if(c!=null&&setValueByPath(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),getValueByPath(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(getValueByPath(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(getValueByPath(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=getValueByPath(t,["batchSize"]);e!==void 0&&p!=null&&setValueByPath(e,["tuningTask","hyperparameters","batchSize"],p);const h=getValueByPath(t,["learningRate"]);if(e!==void 0&&h!=null&&setValueByPath(e,["tuningTask","hyperparameters","learningRate"],h),getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(getValueByPath(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function createTuningJobConfigToVertex(t,e,r){const i={};let o=getValueByPath(r,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const S=getValueByPath(t,["validationDataset"]);e!==void 0&&S!=null&&setValueByPath(e,["supervisedTuningSpec"],tuningValidationDatasetToVertex(S))}else if(o==="PREFERENCE_TUNING"){const S=getValueByPath(t,["validationDataset"]);e!==void 0&&S!=null&&setValueByPath(e,["preferenceOptimizationSpec"],tuningValidationDatasetToVertex(S))}const l=getValueByPath(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&setValueByPath(e,["tunedModelDisplayName"],l);const c=getValueByPath(t,["description"]);e!==void 0&&c!=null&&setValueByPath(e,["description"],c);let p=getValueByPath(r,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=getValueByPath(t,["epochCount"]);e!==void 0&&S!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(p==="PREFERENCE_TUNING"){const S=getValueByPath(t,["epochCount"]);e!==void 0&&S!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let h=getValueByPath(r,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const S=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(h==="PREFERENCE_TUNING"){const S=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let u=getValueByPath(r,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const S=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&setValueByPath(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(u==="PREFERENCE_TUNING"){const S=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&setValueByPath(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let d=getValueByPath(r,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=getValueByPath(t,["adapterSize"]);e!==void 0&&S!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(d==="PREFERENCE_TUNING"){const S=getValueByPath(t,["adapterSize"]);e!==void 0&&S!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(getValueByPath(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(getValueByPath(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=getValueByPath(t,["labels"]);e!==void 0&&g!=null&&setValueByPath(e,["labels"],g);const y=getValueByPath(t,["beta"]);return e!==void 0&&y!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","beta"],y),i}function createTuningJobParametersPrivateToMldev(t,e){const r={},i=getValueByPath(t,["baseModel"]);i!=null&&setValueByPath(r,["baseModel"],i);const o=getValueByPath(t,["preTunedModel"]);o!=null&&setValueByPath(r,["preTunedModel"],o);const l=getValueByPath(t,["trainingDataset"]);l!=null&&tuningDatasetToMldev(l);const c=getValueByPath(t,["config"]);return c!=null&&createTuningJobConfigToMldev(c,r),r}function createTuningJobParametersPrivateToVertex(t,e){const r={},i=getValueByPath(t,["baseModel"]);i!=null&&setValueByPath(r,["baseModel"],i);const o=getValueByPath(t,["preTunedModel"]);o!=null&&setValueByPath(r,["preTunedModel"],o);const l=getValueByPath(t,["trainingDataset"]);l!=null&&tuningDatasetToVertex(l,r,e);const c=getValueByPath(t,["config"]);return c!=null&&createTuningJobConfigToVertex(c,r,e),r}function getTuningJobParametersToMldev(t,e){const r={},i=getValueByPath(t,["name"]);return i!=null&&setValueByPath(r,["_url","name"],i),r}function getTuningJobParametersToVertex(t,e){const r={},i=getValueByPath(t,["name"]);return i!=null&&setValueByPath(r,["_url","name"],i),r}function listTuningJobsConfigToMldev(t,e,r){const i={},o=getValueByPath(t,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const l=getValueByPath(t,["pageToken"]);e!==void 0&&l!=null&&setValueByPath(e,["_query","pageToken"],l);const c=getValueByPath(t,["filter"]);return e!==void 0&&c!=null&&setValueByPath(e,["_query","filter"],c),i}function listTuningJobsConfigToVertex(t,e,r){const i={},o=getValueByPath(t,["pageSize"]);e!==void 0&&o!=null&&setValueByPath(e,["_query","pageSize"],o);const l=getValueByPath(t,["pageToken"]);e!==void 0&&l!=null&&setValueByPath(e,["_query","pageToken"],l);const c=getValueByPath(t,["filter"]);return e!==void 0&&c!=null&&setValueByPath(e,["_query","filter"],c),i}function listTuningJobsParametersToMldev(t,e){const r={},i=getValueByPath(t,["config"]);return i!=null&&listTuningJobsConfigToMldev(i,r),r}function listTuningJobsParametersToVertex(t,e){const r={},i=getValueByPath(t,["config"]);return i!=null&&listTuningJobsConfigToVertex(i,r),r}function listTuningJobsResponseFromMldev(t,e){const r={},i=getValueByPath(t,["sdkHttpResponse"]);i!=null&&setValueByPath(r,["sdkHttpResponse"],i);const o=getValueByPath(t,["nextPageToken"]);o!=null&&setValueByPath(r,["nextPageToken"],o);const l=getValueByPath(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(p=>tuningJobFromMldev(p))),setValueByPath(r,["tuningJobs"],c)}return r}function listTuningJobsResponseFromVertex(t,e){const r={},i=getValueByPath(t,["sdkHttpResponse"]);i!=null&&setValueByPath(r,["sdkHttpResponse"],i);const o=getValueByPath(t,["nextPageToken"]);o!=null&&setValueByPath(r,["nextPageToken"],o);const l=getValueByPath(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(p=>tuningJobFromVertex(p))),setValueByPath(r,["tuningJobs"],c)}return r}function tunedModelFromMldev(t,e){const r={},i=getValueByPath(t,["name"]);i!=null&&setValueByPath(r,["model"],i);const o=getValueByPath(t,["name"]);return o!=null&&setValueByPath(r,["endpoint"],o),r}function tuningDatasetToMldev(t,e){const r={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=getValueByPath(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),setValueByPath(r,["examples","examples"],o)}return r}function tuningDatasetToVertex(t,e,r){const i={};let o=getValueByPath(r,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=getValueByPath(t,["gcsUri"]);e!==void 0&&c!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=getValueByPath(t,["gcsUri"]);e!==void 0&&c!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=getValueByPath(r,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(getValueByPath(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function tuningJobFromMldev(t,e){const r={},i=getValueByPath(t,["sdkHttpResponse"]);i!=null&&setValueByPath(r,["sdkHttpResponse"],i);const o=getValueByPath(t,["name"]);o!=null&&setValueByPath(r,["name"],o);const l=getValueByPath(t,["state"]);l!=null&&setValueByPath(r,["state"],tTuningJobStatus(l));const c=getValueByPath(t,["createTime"]);c!=null&&setValueByPath(r,["createTime"],c);const p=getValueByPath(t,["tuningTask","startTime"]);p!=null&&setValueByPath(r,["startTime"],p);const h=getValueByPath(t,["tuningTask","completeTime"]);h!=null&&setValueByPath(r,["endTime"],h);const u=getValueByPath(t,["updateTime"]);u!=null&&setValueByPath(r,["updateTime"],u);const d=getValueByPath(t,["description"]);d!=null&&setValueByPath(r,["description"],d);const g=getValueByPath(t,["baseModel"]);g!=null&&setValueByPath(r,["baseModel"],g);const y=getValueByPath(t,["_self"]);return y!=null&&setValueByPath(r,["tunedModel"],tunedModelFromMldev(y)),r}function tuningJobFromVertex(t,e){const r={},i=getValueByPath(t,["sdkHttpResponse"]);i!=null&&setValueByPath(r,["sdkHttpResponse"],i);const o=getValueByPath(t,["name"]);o!=null&&setValueByPath(r,["name"],o);const l=getValueByPath(t,["state"]);l!=null&&setValueByPath(r,["state"],tTuningJobStatus(l));const c=getValueByPath(t,["createTime"]);c!=null&&setValueByPath(r,["createTime"],c);const p=getValueByPath(t,["startTime"]);p!=null&&setValueByPath(r,["startTime"],p);const h=getValueByPath(t,["endTime"]);h!=null&&setValueByPath(r,["endTime"],h);const u=getValueByPath(t,["updateTime"]);u!=null&&setValueByPath(r,["updateTime"],u);const d=getValueByPath(t,["error"]);d!=null&&setValueByPath(r,["error"],d);const g=getValueByPath(t,["description"]);g!=null&&setValueByPath(r,["description"],g);const y=getValueByPath(t,["baseModel"]);y!=null&&setValueByPath(r,["baseModel"],y);const S=getValueByPath(t,["tunedModel"]);S!=null&&setValueByPath(r,["tunedModel"],S);const E=getValueByPath(t,["preTunedModel"]);E!=null&&setValueByPath(r,["preTunedModel"],E);const x=getValueByPath(t,["supervisedTuningSpec"]);x!=null&&setValueByPath(r,["supervisedTuningSpec"],x);const A=getValueByPath(t,["preferenceOptimizationSpec"]);A!=null&&setValueByPath(r,["preferenceOptimizationSpec"],A);const D=getValueByPath(t,["tuningDataStats"]);D!=null&&setValueByPath(r,["tuningDataStats"],D);const b=getValueByPath(t,["encryptionSpec"]);b!=null&&setValueByPath(r,["encryptionSpec"],b);const I=getValueByPath(t,["partnerModelTuningSpec"]);I!=null&&setValueByPath(r,["partnerModelTuningSpec"],I);const R=getValueByPath(t,["customBaseModel"]);R!=null&&setValueByPath(r,["customBaseModel"],R);const q=getValueByPath(t,["experiment"]);q!=null&&setValueByPath(r,["experiment"],q);const G=getValueByPath(t,["labels"]);G!=null&&setValueByPath(r,["labels"],G);const z=getValueByPath(t,["outputUri"]);z!=null&&setValueByPath(r,["outputUri"],z);const B=getValueByPath(t,["pipelineJob"]);B!=null&&setValueByPath(r,["pipelineJob"],B);const M=getValueByPath(t,["serviceAccount"]);M!=null&&setValueByPath(r,["serviceAccount"],M);const O=getValueByPath(t,["tunedModelDisplayName"]);O!=null&&setValueByPath(r,["tunedModelDisplayName"],O);const W=getValueByPath(t,["veoTuningSpec"]);return W!=null&&setValueByPath(r,["veoTuningSpec"],W),r}function tuningOperationFromMldev(t,e){const r={},i=getValueByPath(t,["sdkHttpResponse"]);i!=null&&setValueByPath(r,["sdkHttpResponse"],i);const o=getValueByPath(t,["name"]);o!=null&&setValueByPath(r,["name"],o);const l=getValueByPath(t,["metadata"]);l!=null&&setValueByPath(r,["metadata"],l);const c=getValueByPath(t,["done"]);c!=null&&setValueByPath(r,["done"],c);const p=getValueByPath(t,["error"]);return p!=null&&setValueByPath(r,["error"],p),r}function tuningValidationDatasetToVertex(t,e){const r={},i=getValueByPath(t,["gcsUri"]);i!=null&&setValueByPath(r,["validationDatasetUri"],i);const o=getValueByPath(t,["vertexDatasetResource"]);return o!=null&&setValueByPath(r,["validationDatasetUri"],o),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tunings extends BaseModule{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(r),r),this.tune=async r=>{var i;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){const o={tunedModelName:r.baseModel};!((i=r.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=r.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},r),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},r);return await this.tuneInternal(o)}else{const o=Object.assign({},r),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:JobState.JOB_STATE_QUEUED}}}}async getInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=getTuningJobParametersToVertex(e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>tuningJobFromVertex(d))}else{const u=getTuningJobParametersToMldev(e);return p=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>tuningJobFromMldev(d))}}async listInternal(e){var r,i,o,l;let c,p="",h={};if(this.apiClient.isVertexAI()){const u=listTuningJobsParametersToVertex(e);return p=formatMap("tuningJobs",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listTuningJobsResponseFromVertex(d),y=new ListTuningJobsResponse;return Object.assign(y,g),y})}else{const u=listTuningJobsParametersToMldev(e);return p=formatMap("tunedModels",u._url),h=u._query,delete u._url,delete u._query,c=this.apiClient.request({path:p,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:d.headers},y})),c.then(d=>{const g=listTuningJobsResponseFromMldev(d),y=new ListTuningJobsResponse;return Object.assign(y,g),y})}}async cancel(e){var r,i,o,l;let c="",p={};if(this.apiClient.isVertexAI()){const h=cancelTuningJobParametersToVertex(e);c=formatMap("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=cancelTuningJobParametersToMldev(e);c=formatMap("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const p=createTuningJobParametersPrivateToVertex(e,e);return l=formatMap("tuningJobs",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:h.headers},d})),o.then(h=>tuningJobFromVertex(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,i;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=createTuningJobParametersPrivateToMldev(e);return l=formatMap("tunedModels",p._url),c=p._query,delete p._url,delete p._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:h.headers},d})),o.then(h=>tuningOperationFromMldev(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserDownloader{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const MAX_CHUNK_SIZE=1024*1024*8,MAX_RETRY_COUNT=3,INITIAL_RETRY_DELAY_MS=1e3,DELAY_MULTIPLIER=2,X_GOOG_UPLOAD_STATUS_HEADER_FIELD="x-goog-upload-status";async function uploadBlob(t,e,r){var i;const o=await uploadBlobInternal(t,e,r),l=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function uploadBlobToFileSearchStore(t,e,r){var i;const o=await uploadBlobInternal(t,e,r),l=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=uploadToFileSearchStoreOperationFromMldev(l),p=new UploadToFileSearchStoreOperation;return Object.assign(p,c),p}async function uploadBlobInternal(t,e,r){var i,o;let l=0,c=0,p=new HttpResponse(new Response),h="upload";for(l=t.size;c<l;){const u=Math.min(MAX_CHUNK_SIZE,l-c),d=t.slice(c,c+u);c+u>=l&&(h+=", finalize");let g=0,y=INITIAL_RETRY_DELAY_MS;for(;g<MAX_RETRY_COUNT&&(p=await r.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(c),"Content-Length":String(u)}}}),!(!((i=p?.headers)===null||i===void 0)&&i[X_GOOG_UPLOAD_STATUS_HEADER_FIELD]));)g++,await sleep(y),y=y*DELAY_MULTIPLIER;if(c+=u,((o=p?.headers)===null||o===void 0?void 0:o[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function getBlobStat(t){return{size:t.size,type:t.type}}function sleep(t){return new Promise(e=>setTimeout(e,t))}class BrowserUploader{async upload(e,r,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlob(e,r,i)}async uploadToFileSearchStore(e,r,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlobToFileSearchStore(e,r,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await getBlobStat(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserWebSocketFactory{create(e,r,i){return new BrowserWebSocket(e,r,i)}}class BrowserWebSocket{constructor(e,r,i){this.url=e,this.headers=r,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GOOGLE_API_KEY_HEADER="x-goog-api-key";class WebAuth{constructor(e){this.apiKey=e}async addAuthHeaders(e,r){if(e.get(GOOGLE_API_KEY_HEADER)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GOOGLE_API_KEY_HEADER,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LANGUAGE_LABEL_PREFIX="gl-node/";class GoogleGenAI{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const i=getBaseUrl(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new WebAuth(this.apiKey);this.apiClient=new ApiClient({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:LANGUAGE_LABEL_PREFIX+"web",uploader:new BrowserUploader,downloader:new BrowserDownloader}),this.models=new Models(this.apiClient),this.live=new Live(this.apiClient,o,new BrowserWebSocketFactory),this.batches=new Batches(this.apiClient),this.chats=new Chats(this.models,this.apiClient),this.caches=new Caches(this.apiClient),this.files=new Files(this.apiClient),this.operations=new Operations(this.apiClient),this.authTokens=new Tokens(this.apiClient),this.tunings=new Tunings(this.apiClient),this.fileSearchStores=new FileSearchStores(this.apiClient)}}const GEMINI_API_KEY=void 0;pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;async function callGeminiApi(t){const r=`
    You are an expert university registrar's assistant. Your task is to parse a raw text dump
    from a degree audit PDF and convert it into a structured JSON object.

    Strictly adhere to the following JSON schema:
    ${JSON.stringify({studentInfo:{name:"string",uin:"string",degreeProgram:"string",major:"string",minor:"string"},progress:{totalCreditsRequired:"number",creditsCompleted:"number",creditsInProgress:"number",creditsRemaining:"number"},categories:[{name:"string",hoursRequired:"number or null",hoursEarned:"number",note:"string or null",completed:"boolean",courses:[{semester:"string",code:"string",title:"string",credits:"number",grade:"string"}]}],completedCourses:[{category:"string",semester:"string",code:"string",title:"string",credits:"number",grade:"string"}],inProgressCourses:[{category:"string",semester:"string",code:"string",title:"string",credits:"number"}],remainingRequirements:[{category:"string",coursesNeeded:"string or number",courses:[{code:"string",title:"string",credits:"number"}]}]},null,2)}

    RULES:
    1.  **studentInfo**: 
        - Extract the Name, UIN, and the full Program string for 'degreeProgram'.
        - From the 'degreeProgram' string, extract the 'major' (e.g., "Computer Science") and 'minor' (e.g., "Finance"). 
        - If no minor is listed, set 'minor' to "None".

    2.  **progress**: 
        - Find the "Total Degree Hours" section.
        - Extract "required" for 'totalCreditsRequired'.
        - Extract "EARNED" for 'creditsCompleted'.
        - Extract "In-Prog" for 'creditsInProgress'.
        - Calculate 'creditsRemaining' (required - completed - inProgress).

    3.  **categories**: 
    - For EACH requirement section in the degree audit (e.g., "University Writing Requirement", "Math Requirement - CS Major", "Analyzing the Natural World", "Free Electives - CS Major", etc.), create a category object.
    - Extract the category 'name' exactly as it appears in the audit.
    - Extract 'hoursRequired' from text like "Six hours required" or "11 hours required".
    - Extract 'hoursEarned' from text like "EARNED: 6.00 HOURS" or "EARNED: 12.00 HOURS".
    - Set 'completed' to **true** if the audit explicitly marks the category as complete (e.g., a green checkmark, "Requirement Complete", or "OK") **or** if hoursEarned  hoursRequired.
    
    -  **Special case  Conditional credit hours:**
    - If the section uses wording such as **may be needed to reach 128 Degree Hours**, do **not** treat the number (e.g., 9) as a fixed 'hoursRequired' value.
    - Instead, set:
        "hoursRequired": null
        "note": "Conditional hours may be required to reach total degree hours."
    - In this case, mark "completed": true if all other program requirements are satisfied, even if this category alone shows fewer earned hours.
    
    - List ALL courses under this category in the 'courses' array, including:
        - 'semester' (e.g., FA21, WS22, FA22, SP23)
        - 'code' (e.g., ENGL 160, MATH 180)
        - 'title' (e.g., Composition I, Calculus I)
        - 'credits' (as a number)
        - 'grade' (A, B, C, D, F, S, CR, or IP for in-progress)

    4.  **completedCourses**: 
        - Find all courses that have a letter grade (A, B, C, D, F) or a status (S, CR). 
        - Each course object MUST include 'category', 'semester', 'code', 'title', 'credits' (as a number), and 'grade'.
        - The 'category' should match the requirement section name (e.g., "University Writing Requirement").
        - Do NOT include courses with grade 'U' or 'IP' or 'W'.

    5.  **inProgressCourses**: 
        - Find all courses marked with "IP" (In Progress).
        - Each course object MUST include 'category', 'semester', 'code', 'title', and 'credits' (as a number).

    6.  **remainingRequirements**: 
        - Find all requirement sections that are NOT yet met (hoursEarned < hoursRequired or explicitly stated as not complete). 
        - For each, extract its 'category' (title), 'coursesNeeded' (e.g., "Two courses" or 2), and the list of available 'courses' that can fulfill this requirement (with 'code', 'title', and 'credits').
        - If a list of acceptable courses is provided (e.g., "Any of the following math and science courses apply..."), include those in the 'courses' array.

    7.  Return ONLY the raw JSON object. Do not include "\`\`\`json" or any other text.


    Here is the degree audit text:
    ---
    ${t}
    ---
    `;try{if(!GEMINI_API_KEY)throw new Error("GEMINI_API_KEY environment variable is not set.");const o=await new GoogleGenAI({vertexai:!1,apiKey:GEMINI_API_KEY}).models.generateContent({model:"gemini-2.5-flash",contents:[{role:"user",parts:[{text:r}]}],generationConfig:{responseMimeType:"application/json",temperature:.1}});let l=o.response?.candidates?.[0]?.content?.parts?.[0]?.text||o.text;if(!l)throw new Error("No structured text returned from Gemini API.");return l=l.trim(),l.startsWith("```json")?l=l.slice(7):l.startsWith("```")&&(l=l.slice(3)),l.endsWith("```")&&(l=l.slice(0,-3)),l=l.trim(),JSON.parse(l)}catch(i){throw console.error("Error calling Gemini API:",i),new Error("Failed to parse audit text with Gemini API.")}}async function extractTextFromPdf(t){const e=await t.arrayBuffer(),r=await pdfExports.getDocument({data:e}).promise;let i="";console.log(`Extracting ${r.numPages} pages...`);for(let o=1;o<=r.numPages;o++){const p=(await(await r.getPage(o)).getTextContent()).items.map(h=>h.str).join(" ");console.log(`Page ${o} text length:`,p.length),i+=p+`
`}return i}async function parseAuditPDF(t){try{const e=await extractTextFromPdf(t);if(!e||e.trim()==="")throw new Error("No text extracted from PDF.");const r=await callGeminiApi(e);if(!r)throw new Error("Received no data from Gemini API.");return r}catch(e){throw console.error("Error parsing audit PDF:",e),e}}function Audit(){const[t,e]=reactExports.useState("idle"),[r,i]=reactExports.useState(""),[o,l]=reactExports.useState(""),[c,p]=reactExports.useState(null);reactExports.useEffect(()=>{const x=localStorage.getItem("auditFileName"),A=localStorage.getItem("parsedAuditData");x&&A&&(l(x),p(JSON.parse(A)),console.log("Audit: ",A),e("success"))},[]);const h=async x=>{if(!x||x.type!=="application/pdf"){i("Please upload a valid PDF file."),e("error");return}try{e("processing"),i(""),l(x.name),localStorage.setItem("auditFileName",x.name);const A=await parseAuditPDF(x);console.log(" Audit parsed successfully:",A),p(A),localStorage.setItem("parsedAuditData",JSON.stringify(A)),e("success")}catch(A){console.error(" Audit parsing failed:",A),i("An error occurred while processing the file."),e("error")}},u=x=>x.preventDefault(),d=x=>{x.preventDefault(),x.dataTransfer.files&&x.dataTransfer.files.length>0&&(h(x.dataTransfer.files[0]),x.dataTransfer.clearData())},g=()=>{(t==="idle"||t==="error")&&document.getElementById("fileInput").click()},y=x=>{x.target.files&&x.target.files.length>0&&h(x.target.files[0])},S=()=>{localStorage.removeItem("auditFileName"),e("idle"),l(""),i("")},E=()=>{switch(t){case"processing":return jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-500",children:"Processing..."});case"success":return jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-green-600",children:"Upload Successful!"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1 truncate",children:o}),jsxRuntimeExports.jsx("button",{onClick:S,className:"mt-4 text-sm font-semibold text-red-600 hover:underline z-20 relative",children:"Upload a different file"})]});case"error":return jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-red-600",children:"Error"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r}),jsxRuntimeExports.jsx("button",{onClick:S,className:"mt-4 text-sm font-semibold text-blue-600 hover:underline z-20 relative",children:"Try Again"})]});default:return jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("svg",{className:"mx-auto h-12 w-12 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-lg",children:"Drag and drop file here"}),jsxRuntimeExports.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["or ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-purple-700",children:"Browse"})]})]})}};return jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"serif-title text-5xl lg:text-7xl font-bold brand-purple leading-tight mb-4",children:["Start sculpting ",jsxRuntimeExports.jsx("br",{})," your path"]}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl text-gray-500 mb-10",children:"Upload your UIC Degree Audit PDF"}),jsxRuntimeExports.jsx("div",{className:"drop-zone rounded-xl p-10 md:p-16 flex flex-col items-center justify-center cursor-pointer",onClick:g,onDragOver:u,onDrop:d,children:E()}),jsxRuntimeExports.jsx("input",{type:"file",id:"fileInput",className:"hidden",accept:".pdf",onChange:y})]})})})}const CourseItem=React.memo(({term:t,code:e,credits:r,grade:i,title:o})=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-center border-b border-gray-200 py-3 text-gray-800 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-8 items-center",children:[jsxRuntimeExports.jsx("span",{className:"w-16 font-medium",children:t}),jsxRuntimeExports.jsx("span",{className:"w-20 font-medium",children:e}),jsxRuntimeExports.jsx("span",{className:"w-12",children:r.toFixed(2)}),jsxRuntimeExports.jsx("span",{className:`w-8 font-semibold ${i==="IP"?"text-blue-500":"text-gray-700"}`,children:i})]}),jsxRuntimeExports.jsx("span",{className:"flex-1 italic truncate ml-4",children:o})]})),CourseListHeader=()=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-center border-b-2 border-gray-400 pb-2 text-gray-500 text-xs font-bold uppercase tracking-wider",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-8 items-center",children:[jsxRuntimeExports.jsx("span",{className:"w-16",children:"Term"}),jsxRuntimeExports.jsx("span",{className:"w-20",children:"Code"}),jsxRuntimeExports.jsx("span",{className:"w-12",children:"Credits"}),jsxRuntimeExports.jsx("span",{className:"w-8",children:"Grade"})]}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-center italic truncate ml-4",children:"Title"})]}),sortByTerm=(t,e)=>{const r={WS:0,SP:1,SU:2,FA:3},i=o=>{if(!o)return 0;const l=o.match(/(WS|SP|SU|FA)(\d+)/i);if(!l)return 0;const[,c,p]=l;return parseInt(`20${p}`)*10+r[c.toUpperCase()]};return i(t.semester)-i(e.semester)};function CompletedView({data:t}){const e=reactExports.useMemo(()=>{const c={};return(t&&t.completedCourses?t.completedCourses:[]).forEach(p=>{const h=p.category||"Uncategorized";c[h]||(c[h]=[]),c[h].push(p)}),Object.entries(c).map(([p,h])=>({category:p,courses:h.sort(sortByTerm)}))},[t]),[r,i]=reactExports.useState(0),o=e.length,l=e[r];return e.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No completed courses available."}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#4C3B6F]",children:"Completed"}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("h3",{className:"font-semibold text-[#4C3B6F] mb-4",children:l.category})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow p-4 max-h-[350px] overflow-y-auto",children:[jsxRuntimeExports.jsx(CourseListHeader,{}),l.courses.map((c,p)=>jsxRuntimeExports.jsx(CourseItem,{term:c.semester||"N/A",code:c.code||"N/A",credits:parseFloat(c.credits)||0,grade:c.grade||"-",title:c.title||""},p))]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i(c=>Math.max(0,c-1)),disabled:r===0,className:`px-4 py-2 rounded-md ${r===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#4C3B6F] text-white hover:bg-[#392d57]"}`,children:""}),jsxRuntimeExports.jsxs("span",{className:"text-gray-600 font-medium",children:[r+1," / ",o]}),jsxRuntimeExports.jsx("button",{onClick:()=>i(c=>Math.min(o-1,c+1)),disabled:r===o-1,className:`px-4 py-2 rounded-md ${r===o-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#4C3B6F] text-white hover:bg-[#392d57]"}`,children:""})]})]})}function InProgressView({data:t}){const e=t?.inProgressCourses||[];return e.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center",children:"No courses in progress."}):jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#9A8FB8]",children:"In Progress"}),jsxRuntimeExports.jsx(CourseListHeader,{}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-2",children:e.map((r,i)=>jsxRuntimeExports.jsx(CourseItem,{term:r.semester||"N/A",code:r.code||"N/A",credits:parseFloat(r.credits)||0,grade:"IP",title:r.title||""},i))})]})}function RemainingView({data:t}){const e=t?.remainingRequirements||[];return e.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center",children:"All requirements complete  great job!"}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-600",children:"Remaining Requirements"}),jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:e.map((r,i)=>jsxRuntimeExports.jsxs("li",{className:"border p-3 rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:r.category}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Courses needed: ",r.coursesNeeded]}),r.courses?.length>0&&jsxRuntimeExports.jsx("ul",{className:"ml-4 mt-2 list-disc text-gray-700 text-sm",children:r.courses.map((o,l)=>jsxRuntimeExports.jsxs("li",{children:[o.code,"  ",o.title," (",o.credits," cr)"]},l))})]},i))})]})}function Dashboard(){const[t,e]=reactExports.useState(null),[r,i]=reactExports.useState(null),o=useNavigate();if(reactExports.useEffect(()=>{const d=localStorage.getItem("parsedAuditData");d?i(JSON.parse(d)):o("/audit")},[o]),!r)return jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("div",{children:"Loading..."})});const l=r.progress,c=l.totalCreditsRequired,p=l.creditsCompleted/c*100,h=l.creditsInProgress/c*100,u=d=>{e(g=>g===d?null:d)};return jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-2xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"serif-title text-4xl font-bold brand-purple mb-10",children:"Your Progress Toward Graduation"}),jsxRuntimeExports.jsx("span",{children:"Click on each section to  get more information"}),jsxRuntimeExports.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-8 flex overflow-hidden cursor-pointer shadow-inner mb-4 mt-4 relative text-white font-semibold text-sm",children:[jsxRuntimeExports.jsx("div",{className:`h-full flex items-center justify-center transition ${t==="completed"?"ring-4 ring-[#4C3B6F]/50":""} bg-[#4C3B6F] hover:brightness-110`,style:{flexBasis:`${p}%`},onClick:()=>u("completed"),children:l.creditsCompleted}),jsxRuntimeExports.jsx("div",{className:`h-full flex items-center justify-center transition ${t==="inProgress"?"ring-4 ring-[#9A8FB8]/50":""} bg-[#9A8FB8] hover:brightness-110`,style:{flexBasis:`${h}%`},onClick:()=>u("inProgress"),children:l.creditsInProgress}),jsxRuntimeExports.jsx("div",{className:`flex-grow h-full flex items-center justify-center transition ${t==="remaining"?"ring-4 ring-gray-400/50":""} bg-gray-300 text-gray-700 hover:brightness-110`,onClick:()=>u("remaining"),children:l.creditsRemaining})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-6 mb-8 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center cursor-pointer hover:font-bold transition ${t==="completed"?"scale-105 font-semibold":""}`,onClick:()=>u("completed"),children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-[#4C3B6F]"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Completed"})]}),jsxRuntimeExports.jsxs("div",{className:`flex items-center cursor-pointer hover:font-bold transition ${t==="inProgress"?"scale-105 font-semibold":""}`,onClick:()=>u("inProgress"),children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-[#9A8FB8]"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"In Progress"})]}),jsxRuntimeExports.jsxs("div",{className:`flex items-center cursor-pointer hover:font-bold transition ${t==="remaining"?"scale-105 font-semibold":""}`,onClick:()=>u("remaining"),children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-gray-300"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Remaining"})]})]}),!t&&jsxRuntimeExports.jsxs("div",{className:"mt-10 space-y-4 text-gray-600",children:[jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl leading-relaxed",children:"Click each category to get more information."}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl leading-relaxed",children:"Sculpt your semester, or ask your AI assistant what you can do next!"})]}),t&&jsxRuntimeExports.jsxs("div",{className:"text-left bg-white p-6 rounded-xl shadow transition-all duration-300",children:[t==="completed"&&jsxRuntimeExports.jsx(CompletedView,{data:r}),t==="inProgress"&&jsxRuntimeExports.jsx(InProgressView,{data:r}),t==="remaining"&&jsxRuntimeExports.jsx(RemainingView,{data:r})]})]})})})}function AIAssistant(){const[t,e]=reactExports.useState(""),[r,i]=reactExports.useState([]),[o,l]=reactExports.useState(!1),[c,p]=reactExports.useState(""),[h,u]=reactExports.useState(!1),d=async S=>{if(S.preventDefault(),!t.trim()){p("Please enter a question");return}l(!0),p(""),u(!0);try{const E=await fetch("http://localhost:5000/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,top_courses:8})});if(!E.ok)throw new Error("Failed to fetch results");const x=await E.json();i(x.results||[])}catch(E){p("Unable to connect to the AI Assistant. Make sure the backend is running on port 5000."),console.error("Search error:",E)}finally{l(!1)}},g=["Courses about machine learning","Classes with no prerequisites","Natural language processing courses","Data visualization electives","Intro to computer science"],y=S=>{e(S)};return jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsxs("div",{className:"py-8 md:py-12",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-10",children:[jsxRuntimeExports.jsx("h1",{className:"serif-title text-4xl md:text-5xl font-bold brand-purple mb-4",children:"AI Course Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Ask me anything about courses. I'll help you find the perfect classes based on your interests."})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto mb-8",children:[jsxRuntimeExports.jsxs("form",{onSubmit:d,className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",value:t,onChange:S=>e(S.target.value),placeholder:"e.g., 'Courses about data science' or 'Classes with no prerequisites'",className:"w-full px-6 py-4 text-lg border-2 border-purple-200 rounded-lg focus:outline-none focus:border-purple-500 transition-colors bg-white",disabled:o}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:o,className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-6 py-2 bg-purple-700 text-white rounded-lg hover:bg-purple-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:o?jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):"Search"})]}),!h&&jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Try asking:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((S,E)=>jsxRuntimeExports.jsx("button",{onClick:()=>y(S),className:"px-3 py-1 text-sm bg-purple-50 text-purple-700 rounded-full hover:bg-purple-100 transition-colors",children:S},E))})]})]}),c&&jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-red-700",children:c})}),h&&!o&&r.length>0&&jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"serif-title text-2xl font-semibold brand-purple mb-2",children:["Found ",r.length," ",r.length===1?"course":"courses"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Here are the most relevant courses based on your query."})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:r.map((S,E)=>jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow animate-fade-in",style:{animationDelay:`${E*.1}s`},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold brand-purple",children:[S.course_code," ",S.course_code&&""," ",S.class_name]}),S.subject&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1",children:S.subject})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center bg-purple-50 px-3 py-1 rounded-full",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-purple-600 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-purple-700 font-medium",children:[(S.score*100).toFixed(0),"%"]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 leading-relaxed",children:S.description})]},E))})]}),h&&!o&&r.length===0&&!c&&jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl font-semibold brand-purple mb-2",children:"No courses found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Try rephrasing your question or using different keywords."}),jsxRuntimeExports.jsx("button",{onClick:()=>{e(""),u(!1),i([])},className:"px-6 py-2 bg-purple-700 text-white rounded-lg hover:bg-purple-800 transition-colors",children:"Try Another Search"})]}),!h&&!o&&jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-xl font-semibold brand-purple mb-2",children:"Smart Search"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Ask questions in natural language and get relevant course recommendations instantly."})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-xl font-semibold brand-purple mb-2",children:"Detailed Info"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Get comprehensive course descriptions, prerequisites, and requirements."})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-xl font-semibold brand-purple mb-2",children:"AI-Powered"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Powered by advanced retrieval technology to find the best matches for you."})]})]})})]})})}function parseCSV(t){const e=t.trim().split(`
`),r=e[0].split(",").map(o=>o.trim().replace(/"/g,"")),i=[];for(let o=1;o<e.length;o++){const l={},c=e[o].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(c.length!==r.length){console.warn("Skipping malformed CSV line:",e[o]);continue}for(let p=0;p<r.length;p++){const h=r[p],u=(c[p]||"").trim().replace(/"/g,"");l[h]=u}i.push(l)}return i}const DataContext=reactExports.createContext(null);function DataProvider({children:t}){const[e,r]=reactExports.useState(null),[i,o]=reactExports.useState(null),[l,c]=reactExports.useState(!0);reactExports.useEffect(()=>{async function h(){try{const u=localStorage.getItem("parsedAuditData");u&&r(JSON.parse(u));const d=await fetch("/chunks.csv");if(!d.ok)throw new Error("Failed to fetch course catalog (chunks.csv)");const g=await d.text(),S=parseCSV(g).map(E=>{const x=E.text.match(/Description: (.*)/),A=x?x[1]:E.text,D="metadata.prereq_codes",b=E[D]&&E[D]!=="[]"?E[D].replace(/[\[\]']/g,"").split(" ").filter(Boolean):[];return{code:E["metadata.course_code"],title:E["metadata.class_name"],subject:E["metadata.subject_code"],credits:parseFloat(E["metadata.credits_max"])||3,prereqs:b,description:A}});o(S)}catch(u){console.error("Error loading app data:",u)}finally{c(!1)}}h()},[]);const p={parsedAudit:e,courseCatalog:i,isLoading:l};return jsxRuntimeExports.jsx(DataContext.Provider,{value:p,children:l?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#FAF8F5]",children:jsxRuntimeExports.jsx("p",{className:"text-lg serif-title",children:"Loading application data..."})}):t})}const useData=()=>{const t=reactExports.useContext(DataContext);if(t===null)throw new Error("useData must be used within a DataProvider");return t};function generatePlan(t,e,r){const{requirements:i,creditLoad:o,difficulty:l}=t,c=(e?.completedCourses||[]).map(x=>x.code),p=(e?.inProgressCourses||[]).map(x=>x.code),h=new Set([...c,...p]),u=new Set;(e?.remainingRequirements||[]).forEach(x=>{i.includes(x.category)&&(x.courses||[]).forEach(A=>{u.add(A.code)})});const g=(r||[]).filter(x=>{const A=u.has(x.code),D=h.has(x.code),b=checkPrerequisites(x.prereqs,c);return A&&!D&&b}).sort(()=>.5-Math.random()),y=[];let S=0;const E=Math.max(...o);for(const x of g)if(S+x.credits<=E&&(y.push(x),S+=x.credits),y.length>=5||S>=E)break;return{plan:y,totalCredits:S,criteria:{selectedRequirements:i,creditLoad:E,excludedCourses:[...h]}}}function checkPrerequisites(t,e){return!t||t.length===0?!0:t.every(r=>e.includes(r))}const RequirementCheckbox=({id:t,label:e,isChecked:r,onChange:i,disabled:o})=>jsxRuntimeExports.jsxs("label",{htmlFor:t,className:`flex items-center space-x-3 ${o?"cursor-not-allowed":"cursor-pointer"}`,children:[jsxRuntimeExports.jsx("input",{id:t,type:"checkbox",className:"h-5 w-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500",checked:r,onChange:i,disabled:o}),jsxRuntimeExports.jsx("span",{className:`text-sm ${o?"text-gray-400":"text-gray-700"}`,children:e})]}),StarRating=({selected:t,onChange:e})=>{const r=[{label:"Very Easy",value:"Very Easy"},{label:"Easy",value:"Easy"},{label:"Moderate",value:"Moderate"},{label:"Challenging",value:"Challenging"},{label:"Intensive",value:"Intensive"}];return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center space-x-4",children:r.map(i=>jsxRuntimeExports.jsxs("label",{className:"flex flex-col items-center cursor-pointer",children:[jsxRuntimeExports.jsx("svg",{className:`w-8 h-8 ${t===i.value?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",onClick:()=>e(i.value),children:jsxRuntimeExports.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),jsxRuntimeExports.jsx("span",{className:`text-xs font-medium mt-1 ${t===i.value?"text-[#4C3B6F]":"text-gray-500"}`,children:i.label})]},i.value))})};function SculptForm({remainingRequirements:t,initialPrefs:e,onSubmit:r,isGenerating:i,hasAuditData:o}){const[l,c]=reactExports.useState(e.requirements),[p,h]=reactExports.useState(e.creditLoad),[u,d]=reactExports.useState(e.difficulty),g=x=>{c(A=>A.includes(x)?A.filter(D=>D!==x):[...A,x])},y=x=>{h(A=>A.includes(x)?A.filter(D=>D!==x):[...A,x])},S=x=>{x.preventDefault(),r({requirements:l,creditLoad:p,difficulty:u})},E=React.useMemo(()=>{const x=t.map(D=>D.category),A=["General Education","Major Core","Technical Electives","Free Electives","Concentration Courses"];return[...new Set([...x,...A])]},[t]);return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-3xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"serif-title text-2xl lg:text-5xl font-bold brand-purple leading-tight mb-4",children:"Sculpt your Semester"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-500 mb-6",children:"Let's plan your next semester based off of your needs."}),jsxRuntimeExports.jsxs("form",{onSubmit:S,className:"space-y-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-around",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl brand-purple mb-4",children:"Step 1: Requirements to fulfill"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start space-y-4 max-w-xs mx-auto",children:[!o&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm",children:"Upload your audit to see remaining requirements."}),E.map((x,A)=>jsxRuntimeExports.jsx(RequirementCheckbox,{id:`req-${A}`,label:x,isChecked:l.includes(x),onChange:()=>g(x),disabled:!o},A))]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 md:mt-0",children:[jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl brand-purple mb-4",children:"Step 2: Your Preferences"}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Credit Load:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-start space-y-3 max-w-xs mx-auto",children:[{label:"12 Credits",value:12},{label:"13 Credits",value:13},{label:"14 Credits",value:14},{label:"15 Credits",value:15},{label:"16 Credits",value:16},{label:"17 Credits",value:17},{label:"< 18 Credits (Overload)",value:18}].map((x,A)=>jsxRuntimeExports.jsx(RequirementCheckbox,{id:`credit-${A}`,label:x.label,isChecked:p.includes(x.value),onChange:()=>y(x.value)},x.value))}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-700 mt-8 mb-3",children:"Course Difficulty:"}),jsxRuntimeExports.jsx(StarRating,{selected:u,onChange:d})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl brand-purple mb-4",children:"Step 3: Generate your Schedule!"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:i||!o||l.length===0||p.length===0,className:"px-8 py-3 bg-[#4C3B6F] text-white font-bold rounded-full hover:bg-[#392d57] disabled:bg-gray-300 transition-all transform hover:scale-105",children:i?"Generating...":"Generate My Semester Plan"})]})]})]})}const SuggestedCourseItem=({term:t,code:e,credits:r,title:i,category:o})=>{const c={"Tech Elective":"bg-gray-800","Gen Ed":"bg-green-500",Major:"bg-red-500",Minor:"bg-purple-500",Concentration:"bg-yellow-500","Free Elective":"bg-blue-500"}[o]||"bg-gray-400";return jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 py-3 border-b border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:`${c} w-2 h-2 rounded-full`}),jsxRuntimeExports.jsx("span",{className:"w-16 font-medium text-gray-500",children:t}),jsxRuntimeExports.jsx("span",{className:"w-20 font-bold text-gray-800",children:e}),jsxRuntimeExports.jsx("span",{className:"w-16 text-gray-600",children:r.toFixed(2)}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-gray-800",children:i})]})};function SculptResults({plan:t,preferences:e,onGenerateNew:r}){if(!t)return jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Generating your plan..."})});const i=o=>e.requirements.includes("Technical Electives")&&o.subject==="CS"?"Tech Elective":e.requirements.includes("General Education")?"Gen Ed":e.requirements.includes("Major Core")?"Major":"Free Elective";return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-3xl",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"serif-title text-5xl lg:text-7xl font-bold brand-purple leading-tight mb-3",children:"Suggested Courses"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-500",children:"Based off of your requirements and priorities"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:t.plan.length>0?t.plan.map(o=>jsxRuntimeExports.jsx(SuggestedCourseItem,{term:"SP26",code:o.code,credits:o.credits,title:o.title,category:i(o)},o.code)):jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No courses found matching all your criteria. Try adjusting your preferences."})}),jsxRuntimeExports.jsx("div",{className:"text-center mb-6",children:jsxRuntimeExports.jsx("button",{className:"bg-white text-[#4C3B6F] font-semibold py-2 px-5 rounded-full border-2 border-[#4C3B6F] hover:bg-gray-50",children:"Why Were These Courses Chosen?"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Credit Load: ",jsxRuntimeExports.jsxs("span",{className:"font-normal text-gray-600",children:[t.totalCredits," Credit Hours"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Semester Difficulty: ",jsxRuntimeExports.jsx("span",{className:"font-normal text-gray-600",children:e.difficulty})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3",children:[jsxRuntimeExports.jsx("button",{className:"px-6 py-3 bg-[#4C3B6F] text-white font-bold rounded-full hover:bg-[#392d57] transition-all",children:"Confirm Semester Plan"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-full hover:bg-gray-300 transition-all",children:"Generate New Plan"})]})]})]})}function SculptSemester(){const{parsedAudit:t,courseCatalog:e,isLoading:r}=useData(),i=useNavigate();reactExports.useEffect(()=>{!r&&!t&&i("/audit")},[r,t,i]);const[o,l]=reactExports.useState("form"),[c,p]=reactExports.useState({requirements:[],creditLoad:[],difficulty:"Moderate"}),[h,u]=reactExports.useState(null),[d,g]=reactExports.useState(!1),y=reactExports.useMemo(()=>(t?.remainingRequirements||[]).filter(x=>x.courses&&x.courses.length>0),[t]),S=x=>{g(!0),p(x),u(null),setTimeout(()=>{const A=generatePlan(x,t,e);u(A),g(!1),l("results")},1500)},E=()=>{l("form"),u(null)};return r?jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("p",{className:"text-center",children:"Loading data..."})}):jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center animate-fade-in",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-3xl",children:o==="form"?jsxRuntimeExports.jsx(SculptForm,{remainingRequirements:y,initialPrefs:c,onSubmit:S,isGenerating:d,hasAuditData:!!t}):jsxRuntimeExports.jsx(SculptResults,{plan:h,preferences:c,onGenerateNew:E})})})})}function App(){return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Welcome,{})}),jsxRuntimeExports.jsx(Route,{path:"/audit",element:jsxRuntimeExports.jsx(Audit,{})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/ai-assistant",element:jsxRuntimeExports.jsx(AIAssistant,{})}),jsxRuntimeExports.jsx(Route,{path:"/sculpt",element:jsxRuntimeExports.jsx(SculptSemester,{})})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(DataProvider,{children:jsxRuntimeExports.jsx(App,{})})}));
