function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(E){return E===null||typeof E!="object"?null:(E=p&&E[p]||E["@@iterator"],typeof E=="function"?E:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(E,I,T){this.props=E,this.context=I,this.refs=S,this.updater=T||y}w.prototype.isReactComponent={},w.prototype.setState=function(E,I){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,I,"setState")},w.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function k(){}k.prototype=w.prototype;function N(E,I,T){this.props=E,this.context=I,this.refs=S,this.updater=T||y}var R=N.prototype=new k;R.constructor=N,x(R,w.prototype),R.isPureReactComponent=!0;var B=Array.isArray,q=Object.prototype.hasOwnProperty,F={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function V(E,I,T){var _,A={},M=null,L=null;if(I!=null)for(_ in I.ref!==void 0&&(L=I.ref),I.key!==void 0&&(M=""+I.key),I)q.call(I,_)&&!z.hasOwnProperty(_)&&(A[_]=I[_]);var G=arguments.length-2;if(G===1)A.children=T;else if(1<G){for(var W=Array(G),Y=0;Y<G;Y++)W[Y]=arguments[Y+2];A.children=W}if(E&&E.defaultProps)for(_ in G=E.defaultProps,G)A[_]===void 0&&(A[_]=G[_]);return{$$typeof:t,type:E,key:M,ref:L,props:A,_owner:F.current}}function b(E,I){return{$$typeof:t,type:E.type,key:I,ref:E.ref,props:E.props,_owner:E._owner}}function U(E){return typeof E=="object"&&E!==null&&E.$$typeof===t}function H(E){var I={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(T){return I[T]})}var j=/\/+/g;function ee(E,I){return typeof E=="object"&&E!==null&&E.key!=null?H(""+E.key):I.toString(36)}function $(E,I,T,_,A){var M=typeof E;(M==="undefined"||M==="boolean")&&(E=null);var L=!1;if(E===null)L=!0;else switch(M){case"string":case"number":L=!0;break;case"object":switch(E.$$typeof){case t:case e:L=!0}}if(L)return L=E,A=A(L),E=_===""?"."+ee(L,0):_,B(A)?(T="",E!=null&&(T=E.replace(j,"$&/")+"/"),$(A,I,T,"",function(Y){return Y})):A!=null&&(U(A)&&(A=b(A,T+(!A.key||L&&L.key===A.key?"":(""+A.key).replace(j,"$&/")+"/")+E)),I.push(A)),1;if(L=0,_=_===""?".":_+":",B(E))for(var G=0;G<E.length;G++){M=E[G];var W=_+ee(M,G);L+=$(M,I,T,W,A)}else if(W=g(E),typeof W=="function")for(E=W.call(E),G=0;!(M=E.next()).done;)M=M.value,W=_+ee(M,G++),L+=$(M,I,T,W,A);else if(M==="object")throw I=String(E),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return L}function J(E,I,T){if(E==null)return E;var _=[],A=0;return $(E,_,"","",function(M){return I.call(T,M,A++)}),_}function Q(E){if(E._status===-1){var I=E._result;I=I(),I.then(function(T){(E._status===0||E._status===-1)&&(E._status=1,E._result=T)},function(T){(E._status===0||E._status===-1)&&(E._status=2,E._result=T)}),E._status===-1&&(E._status=0,E._result=I)}if(E._status===1)return E._result.default;throw E._result}var Z={current:null},X={transition:null},O={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:X,ReactCurrentOwner:F};function v(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:J,forEach:function(E,I,T){J(E,function(){I.apply(this,arguments)},T)},count:function(E){var I=0;return J(E,function(){I++}),I},toArray:function(E){return J(E,function(I){return I})||[]},only:function(E){if(!U(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},react_production_min.Component=w,react_production_min.Fragment=n,react_production_min.Profiler=s,react_production_min.PureComponent=N,react_production_min.StrictMode=r,react_production_min.Suspense=h,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,react_production_min.act=v,react_production_min.cloneElement=function(E,I,T){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var _=x({},E.props),A=E.key,M=E.ref,L=E._owner;if(I!=null){if(I.ref!==void 0&&(M=I.ref,L=F.current),I.key!==void 0&&(A=""+I.key),E.type&&E.type.defaultProps)var G=E.type.defaultProps;for(W in I)q.call(I,W)&&!z.hasOwnProperty(W)&&(_[W]=I[W]===void 0&&G!==void 0?G[W]:I[W])}var W=arguments.length-2;if(W===1)_.children=T;else if(1<W){G=Array(W);for(var Y=0;Y<W;Y++)G[Y]=arguments[Y+2];_.children=G}return{$$typeof:t,type:E.type,key:A,ref:M,props:_,_owner:L}},react_production_min.createContext=function(E){return E={$$typeof:l,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:a,_context:E},E.Consumer=E},react_production_min.createElement=V,react_production_min.createFactory=function(E){var I=V.bind(null,E);return I.type=E,I},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(E){return{$$typeof:d,render:E}},react_production_min.isValidElement=U,react_production_min.lazy=function(E){return{$$typeof:f,_payload:{_status:-1,_result:E},_init:Q}},react_production_min.memo=function(E,I){return{$$typeof:u,type:E,compare:I===void 0?null:I}},react_production_min.startTransition=function(E){var I=X.transition;X.transition={};try{E()}finally{X.transition=I}},react_production_min.unstable_act=v,react_production_min.useCallback=function(E,I){return Z.current.useCallback(E,I)},react_production_min.useContext=function(E){return Z.current.useContext(E)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(E){return Z.current.useDeferredValue(E)},react_production_min.useEffect=function(E,I){return Z.current.useEffect(E,I)},react_production_min.useId=function(){return Z.current.useId()},react_production_min.useImperativeHandle=function(E,I,T){return Z.current.useImperativeHandle(E,I,T)},react_production_min.useInsertionEffect=function(E,I){return Z.current.useInsertionEffect(E,I)},react_production_min.useLayoutEffect=function(E,I){return Z.current.useLayoutEffect(E,I)},react_production_min.useMemo=function(E,I){return Z.current.useMemo(E,I)},react_production_min.useReducer=function(E,I,T){return Z.current.useReducer(E,I,T)},react_production_min.useRef=function(E){return Z.current.useRef(E)},react_production_min.useState=function(E){return Z.current.useState(E)},react_production_min.useSyncExternalStore=function(E,I,T){return Z.current.useSyncExternalStore(E,I,T)},react_production_min.useTransition=function(){return Z.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,h,u){var f,p={},g=null,y=null;u!==void 0&&(g=""+u),h.key!==void 0&&(g=""+h.key),h.ref!==void 0&&(y=h.ref);for(f in h)r.call(h,f)&&!a.hasOwnProperty(f)&&(p[f]=h[f]);if(d&&d.defaultProps)for(f in h=d.defaultProps,h)p[f]===void 0&&(p[f]=h[f]);return{$$typeof:e,type:d,key:g,ref:y,props:p,_owner:s.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=l,reactJsxRuntime_production_min.jsxs=l,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(t){function e(X,O){var v=X.length;X.push(O);e:for(;0<v;){var E=v-1>>>1,I=X[E];if(0<s(I,O))X[E]=O,X[v]=I,v=E;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var O=X[0],v=X.pop();if(v!==O){X[0]=v;e:for(var E=0,I=X.length,T=I>>>1;E<T;){var _=2*(E+1)-1,A=X[_],M=_+1,L=X[M];if(0>s(A,v))M<I&&0>s(L,A)?(X[E]=L,X[M]=v,E=M):(X[E]=A,X[_]=v,E=_);else if(M<I&&0>s(L,v))X[E]=L,X[M]=v,E=M;else break e}}return O}function s(X,O){var v=X.sortIndex-O.sortIndex;return v!==0?v:X.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],u=[],f=1,p=null,g=3,y=!1,x=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(X){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=X)r(u),O.sortIndex=O.expirationTime,e(h,O);else break;O=n(u)}}function B(X){if(S=!1,R(X),!x)if(n(h)!==null)x=!0,Q(q);else{var O=n(u);O!==null&&Z(B,O.startTime-X)}}function q(X,O){x=!1,S&&(S=!1,k(V),V=-1),y=!0;var v=g;try{for(R(O),p=n(h);p!==null&&(!(p.expirationTime>O)||X&&!H());){var E=p.callback;if(typeof E=="function"){p.callback=null,g=p.priorityLevel;var I=E(p.expirationTime<=O);O=t.unstable_now(),typeof I=="function"?p.callback=I:p===n(h)&&r(h),R(O)}else r(h);p=n(h)}if(p!==null)var T=!0;else{var _=n(u);_!==null&&Z(B,_.startTime-O),T=!1}return T}finally{p=null,g=v,y=!1}}var F=!1,z=null,V=-1,b=5,U=-1;function H(){return!(t.unstable_now()-U<b)}function j(){if(z!==null){var X=t.unstable_now();U=X;var O=!0;try{O=z(!0,X)}finally{O?ee():(F=!1,z=null)}}else F=!1}var ee;if(typeof N=="function")ee=function(){N(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,J=$.port2;$.port1.onmessage=j,ee=function(){J.postMessage(null)}}else ee=function(){w(j,0)};function Q(X){z=X,F||(F=!0,ee())}function Z(X,O){V=w(function(){X(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Q(q))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var O=3;break;default:O=g}var v=g;g=O;try{return X()}finally{g=v}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,O){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var v=g;g=X;try{return O()}finally{g=v}},t.unstable_scheduleCallback=function(X,O,v){var E=t.unstable_now();switch(typeof v=="object"&&v!==null?(v=v.delay,v=typeof v=="number"&&0<v?E+v:E):v=E,X){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=v+I,X={id:f++,callback:O,priorityLevel:X,startTime:v,expirationTime:I,sortIndex:-1},v>E?(X.sortIndex=v,e(u,X),n(h)===null&&X===n(u)&&(S?(k(V),V=-1):S=!0,Z(B,v-E))):(X.sortIndex=I,e(h,X),x||y||(x=!0,Q(q))),X},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(X){var O=g;return function(){var v=g;g=O;try{return X.apply(this,arguments)}finally{g=v}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),e=requireScheduler();function n(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(i){return h.call(p,i)?!0:h.call(f,i)?!1:u.test(i)?p[i]=!0:(f[i]=!0,!1)}function y(i,o,c,m){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function x(i,o,c,m){if(o===null||typeof o>"u"||y(i,o,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,c,m,P,C,D){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=P,this.mustUseProperty=c,this.propertyName=i,this.type=o,this.sanitizeURL=C,this.removeEmptyString=D}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){w[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];w[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){w[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){w[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){w[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){w[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){w[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){w[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){w[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function N(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(k,N);w[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(k,N);w[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(k,N);w[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){w[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),w.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){w[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function R(i,o,c,m){var P=w.hasOwnProperty(o)?w[o]:null;(P!==null?P.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,c,P,m)&&(c=null),m||P===null?g(o)&&(c===null?i.removeAttribute(o):i.setAttribute(o,""+c)):P.mustUseProperty?i[P.propertyName]=c===null?P.type===3?!1:"":c:(o=P.attributeName,m=P.attributeNamespace,c===null?i.removeAttribute(o):(P=P.type,c=P===3||P===4&&c===!0?"":""+c,m?i.setAttributeNS(m,o,c):i.setAttribute(o,c))))}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),F=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),H=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),X=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var v=Object.assign,E;function I(i){if(E===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);E=o&&o[1]||""}return`
`+E+i}var T=!1;function _(i,o){if(!i||T)return"";T=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(he){var m=he}Reflect.construct(i,[],o)}else{try{o.call()}catch(he){m=he}i.call(o.prototype)}else{try{throw Error()}catch(he){m=he}i()}}catch(he){if(he&&m&&typeof he.stack=="string"){for(var P=he.stack.split(`
`),C=m.stack.split(`
`),D=P.length-1,K=C.length-1;1<=D&&0<=K&&P[D]!==C[K];)K--;for(;1<=D&&0<=K;D--,K--)if(P[D]!==C[K]){if(D!==1||K!==1)do if(D--,K--,0>K||P[D]!==C[K]){var te=`
`+P[D].replace(" at new "," at ");return i.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",i.displayName)),te}while(1<=D&&0<=K);break}}}finally{T=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?I(i):""}function A(i){switch(i.tag){case 5:return I(i.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return i=_(i.type,!1),i;case 11:return i=_(i.type.render,!1),i;case 1:return i=_(i.type,!0),i;default:return""}}function M(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case F:return"Portal";case b:return"Profiler";case V:return"StrictMode";case ee:return"Suspense";case $:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case H:return(i.displayName||"Context")+".Consumer";case U:return(i._context.displayName||"Context")+".Provider";case j:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case J:return o=i.displayName||null,o!==null?o:M(i.type)||"Memo";case Q:o=i._payload,i=i._init;try{return M(i(o))}catch{}}return null}function L(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(o);case 8:return o===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function G(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function W(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Y(i){var o=W(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),m=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var P=c.get,C=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return P.call(this)},set:function(D){m=""+D,C.call(this,D)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function se(i){i._valueTracker||(i._valueTracker=Y(i))}function le(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),m="";return i&&(m=W(i)?i.checked?"true":"false":i.value),i=m,i!==c?(o.setValue(i),!0):!1}function ne(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function de(i,o){var c=o.checked;return v({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function ge(i,o){var c=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;c=G(o.value!=null?o.value:c),i._wrapperState={initialChecked:m,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function me(i,o){o=o.checked,o!=null&&R(i,"checked",o,!1)}function Se(i,o){me(i,o);var c=G(o.value),m=o.type;if(c!=null)m==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ae(i,o.type,c):o.hasOwnProperty("defaultValue")&&Ae(i,o.type,G(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Ce(i,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,c||o===i.value||(i.value=o),i.defaultValue=o}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Ae(i,o,c){(o!=="number"||ne(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var Ie=Array.isArray;function _e(i,o,c,m){if(i=i.options,o){o={};for(var P=0;P<c.length;P++)o["$"+c[P]]=!0;for(c=0;c<i.length;c++)P=o.hasOwnProperty("$"+i[c].value),i[c].selected!==P&&(i[c].selected=P),P&&m&&(i[c].defaultSelected=!0)}else{for(c=""+G(c),o=null,P=0;P<i.length;P++){if(i[P].value===c){i[P].selected=!0,m&&(i[P].defaultSelected=!0);return}o!==null||i[P].disabled||(o=i[P])}o!==null&&(o.selected=!0)}}function Je(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return v({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function et(i,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(Ie(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}i._wrapperState={initialValue:G(c)}}function De(i,o){var c=G(o.value),m=G(o.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),o.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),m!=null&&(i.defaultValue=""+m)}function We(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function fe(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ve(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?fe(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Be,Ue=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,m,P){MSApp.execUnsafeLocalFunction(function(){return i(o,c,m,P)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Be=Be||document.createElement("div"),Be.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Be.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Me(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},St=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(i){St.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),qe[o]=qe[i]})});function Ct(i,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||qe.hasOwnProperty(i)&&qe[i]?(""+o).trim():o+"px"}function Kt(i,o){i=i.style;for(var c in o)if(o.hasOwnProperty(c)){var m=c.indexOf("--")===0,P=Ct(c,o[c],m);c==="float"&&(c="cssFloat"),m?i.setProperty(c,P):i[c]=P}}var sn=v({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function at(i,o){if(o){if(sn[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function Nt(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pe=null;function oe(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ae=null,Te=null,Le=null;function je(i){if(i=qr(i)){if(typeof ae!="function")throw Error(n(280));var o=i.stateNode;o&&(o=Ei(o),ae(i.stateNode,i.type,o))}}function ze(i){Te?Le?Le.push(i):Le=[i]:Te=i}function Gt(){if(Te){var i=Te,o=Le;if(Le=Te=null,je(i),o)for(i=0;i<o.length;i++)je(o[i])}}function on(i,o){return i(o)}function Xt(){}var ct=!1;function an(i,o,c){if(ct)return i(o,c);ct=!0;try{return on(i,o,c)}finally{ct=!1,(Te!==null||Le!==null)&&(Xt(),Gt())}}function Tt(i,o){var c=i.stateNode;if(c===null)return null;var m=Ei(c);if(m===null)return null;c=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var yn=!1;if(d)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){yn=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{yn=!1}function Zn(i,o,c,m,P,C,D,K,te){var he=Array.prototype.slice.call(arguments,3);try{o.apply(c,he)}catch(Pe){this.onError(Pe)}}var Qt=!1,Pn=null,vn=!1,ln=null,xt={onError:function(i){Qt=!0,Pn=i}};function On(i,o,c,m,P,C,D,K,te){Qt=!1,Pn=null,Zn.apply(xt,arguments)}function Er(i,o,c,m,P,C,D,K,te){if(On.apply(this,arguments),Qt){if(Qt){var he=Pn;Qt=!1,Pn=null}else throw Error(n(198));vn||(vn=!0,ln=he)}}function Un(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function Go(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Ho(i){if(Un(i)!==i)throw Error(n(188))}function vu(i){var o=i.alternate;if(!o){if(o=Un(i),o===null)throw Error(n(188));return o!==i?null:i}for(var c=i,m=o;;){var P=c.return;if(P===null)break;var C=P.alternate;if(C===null){if(m=P.return,m!==null){c=m;continue}break}if(P.child===C.child){for(C=P.child;C;){if(C===c)return Ho(P),i;if(C===m)return Ho(P),o;C=C.sibling}throw Error(n(188))}if(c.return!==m.return)c=P,m=C;else{for(var D=!1,K=P.child;K;){if(K===c){D=!0,c=P,m=C;break}if(K===m){D=!0,m=P,c=C;break}K=K.sibling}if(!D){for(K=C.child;K;){if(K===c){D=!0,c=C,m=P;break}if(K===m){D=!0,m=C,c=P;break}K=K.sibling}if(!D)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:o}function zo(i){return i=vu(i),i!==null?$o(i):null}function $o(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=$o(i);if(o!==null)return o;i=i.sibling}return null}var Wo=e.unstable_scheduleCallback,jo=e.unstable_cancelCallback,xu=e.unstable_shouldYield,_u=e.unstable_requestPaint,it=e.unstable_now,Eu=e.unstable_getCurrentPriorityLevel,as=e.unstable_ImmediatePriority,Jo=e.unstable_UserBlockingPriority,ni=e.unstable_NormalPriority,Su=e.unstable_LowPriority,Yo=e.unstable_IdlePriority,ri=null,Zt=null;function Cu(i){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(ri,i,void 0,(i.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:wu,Tu=Math.log,Au=Math.LN2;function wu(i){return i>>>=0,i===0?32:31-(Tu(i)/Au|0)|0}var ii=64,si=4194304;function Sr(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function oi(i,o){var c=i.pendingLanes;if(c===0)return 0;var m=0,P=i.suspendedLanes,C=i.pingedLanes,D=c&268435455;if(D!==0){var K=D&~P;K!==0?m=Sr(K):(C&=D,C!==0&&(m=Sr(C)))}else D=c&~P,D!==0?m=Sr(D):C!==0&&(m=Sr(C));if(m===0)return 0;if(o!==0&&o!==m&&(o&P)===0&&(P=m&-m,C=o&-o,P>=C||P===16&&(C&4194240)!==0))return o;if((m&4)!==0&&(m|=c&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=m;0<o;)c=31-Ht(o),P=1<<c,m|=i[c],o&=~P;return m}function Ru(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bu(i,o){for(var c=i.suspendedLanes,m=i.pingedLanes,P=i.expirationTimes,C=i.pendingLanes;0<C;){var D=31-Ht(C),K=1<<D,te=P[D];te===-1?((K&c)===0||(K&m)!==0)&&(P[D]=Ru(K,o)):te<=o&&(i.expiredLanes|=K),C&=~K}}function ls(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ko(){var i=ii;return ii<<=1,(ii&4194240)===0&&(ii=64),i}function us(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Cr(i,o,c){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Ht(o),i[o]=c}function Vu(i,o){var c=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<c;){var P=31-Ht(c),C=1<<P;o[P]=0,m[P]=-1,i[P]=-1,c&=~C}}function cs(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var m=31-Ht(c),P=1<<m;P&o|i[m]&o&&(i[m]|=o),c&=~P}}var $e=0;function Xo(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Qo,ds,Zo,ea,ta,hs=!1,ai=[],xn=null,_n=null,En=null,Tr=new Map,Ar=new Map,Sn=[],ku="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function na(i,o){switch(i){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Tr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(o.pointerId)}}function wr(i,o,c,m,P,C){return i===null||i.nativeEvent!==C?(i={blockedOn:o,domEventName:c,eventSystemFlags:m,nativeEvent:C,targetContainers:[P]},o!==null&&(o=qr(o),o!==null&&ds(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,P!==null&&o.indexOf(P)===-1&&o.push(P),i)}function Iu(i,o,c,m,P){switch(o){case"focusin":return xn=wr(xn,i,o,c,m,P),!0;case"dragenter":return _n=wr(_n,i,o,c,m,P),!0;case"mouseover":return En=wr(En,i,o,c,m,P),!0;case"pointerover":var C=P.pointerId;return Tr.set(C,wr(Tr.get(C)||null,i,o,c,m,P)),!0;case"gotpointercapture":return C=P.pointerId,Ar.set(C,wr(Ar.get(C)||null,i,o,c,m,P)),!0}return!1}function ra(i){var o=qn(i.target);if(o!==null){var c=Un(o);if(c!==null){if(o=c.tag,o===13){if(o=Go(c),o!==null){i.blockedOn=o,ta(i.priority,function(){Zo(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function li(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=ps(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var m=new c.constructor(c.type,c);pe=m,c.target.dispatchEvent(m),pe=null}else return o=qr(c),o!==null&&ds(o),i.blockedOn=c,!1;o.shift()}return!0}function ia(i,o,c){li(i)&&c.delete(o)}function bu(){hs=!1,xn!==null&&li(xn)&&(xn=null),_n!==null&&li(_n)&&(_n=null),En!==null&&li(En)&&(En=null),Tr.forEach(ia),Ar.forEach(ia)}function Rr(i,o){i.blockedOn===o&&(i.blockedOn=null,hs||(hs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bu)))}function Br(i){function o(P){return Rr(P,i)}if(0<ai.length){Rr(ai[0],i);for(var c=1;c<ai.length;c++){var m=ai[c];m.blockedOn===i&&(m.blockedOn=null)}}for(xn!==null&&Rr(xn,i),_n!==null&&Rr(_n,i),En!==null&&Rr(En,i),Tr.forEach(o),Ar.forEach(o),c=0;c<Sn.length;c++)m=Sn[c],m.blockedOn===i&&(m.blockedOn=null);for(;0<Sn.length&&(c=Sn[0],c.blockedOn===null);)ra(c),c.blockedOn===null&&Sn.shift()}var er=B.ReactCurrentBatchConfig,ui=!0;function Mu(i,o,c,m){var P=$e,C=er.transition;er.transition=null;try{$e=1,fs(i,o,c,m)}finally{$e=P,er.transition=C}}function Nu(i,o,c,m){var P=$e,C=er.transition;er.transition=null;try{$e=4,fs(i,o,c,m)}finally{$e=P,er.transition=C}}function fs(i,o,c,m){if(ui){var P=ps(i,o,c,m);if(P===null)ks(i,o,m,ci,c),na(i,m);else if(Iu(P,i,o,c,m))m.stopPropagation();else if(na(i,m),o&4&&-1<ku.indexOf(i)){for(;P!==null;){var C=qr(P);if(C!==null&&Qo(C),C=ps(i,o,c,m),C===null&&ks(i,o,m,ci,c),C===P)break;P=C}P!==null&&m.stopPropagation()}else ks(i,o,m,null,c)}}var ci=null;function ps(i,o,c,m){if(ci=null,i=oe(m),i=qn(i),i!==null)if(o=Un(i),o===null)i=null;else if(c=o.tag,c===13){if(i=Go(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ci=i,null}function sa(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eu()){case as:return 1;case Jo:return 4;case ni:case Su:return 16;case Yo:return 536870912;default:return 16}default:return 16}}var Cn=null,ms=null,di=null;function oa(){if(di)return di;var i,o=ms,c=o.length,m,P="value"in Cn?Cn.value:Cn.textContent,C=P.length;for(i=0;i<c&&o[i]===P[i];i++);var D=c-i;for(m=1;m<=D&&o[c-m]===P[C-m];m++);return di=P.slice(i,1<m?1-m:void 0)}function hi(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function fi(){return!0}function aa(){return!1}function kt(i){function o(c,m,P,C,D){this._reactName=c,this._targetInst=P,this.type=m,this.nativeEvent=C,this.target=D,this.currentTarget=null;for(var K in i)i.hasOwnProperty(K)&&(c=i[K],this[K]=c?c(C):C[K]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?fi:aa,this.isPropagationStopped=aa,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),o}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=kt(tr),Vr=v({},tr,{view:0,detail:0}),Fu=kt(Vr),ys,Ps,kr,pi=v({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==kr&&(kr&&i.type==="mousemove"?(ys=i.screenX-kr.screenX,Ps=i.screenY-kr.screenY):Ps=ys=0,kr=i),ys)},movementY:function(i){return"movementY"in i?i.movementY:Ps}}),la=kt(pi),Du=v({},pi,{dataTransfer:0}),Lu=kt(Du),Ou=v({},Vr,{relatedTarget:0}),vs=kt(Ou),Uu=v({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=kt(Uu),Gu=v({},tr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Hu=kt(Gu),zu=v({},tr,{data:0}),ua=kt(zu),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ju[i])?!!o[i]:!1}function xs(){return Ju}var Yu=v({},Vr,{key:function(i){if(i.key){var o=$u[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=hi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(i){return i.type==="keypress"?hi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?hi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ku=kt(Yu),Xu=v({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ca=kt(Xu),Qu=v({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),Zu=kt(Qu),ec=v({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),tc=kt(ec),nc=v({},pi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rc=kt(nc),ic=[9,13,27,32],_s=d&&"CompositionEvent"in window,Ir=null;d&&"documentMode"in document&&(Ir=document.documentMode);var sc=d&&"TextEvent"in window&&!Ir,da=d&&(!_s||Ir&&8<Ir&&11>=Ir),ha=" ",fa=!1;function pa(i,o){switch(i){case"keyup":return ic.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ma(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nr=!1;function oc(i,o){switch(i){case"compositionend":return ma(o);case"keypress":return o.which!==32?null:(fa=!0,ha);case"textInput":return i=o.data,i===ha&&fa?null:i;default:return null}}function ac(i,o){if(nr)return i==="compositionend"||!_s&&pa(i,o)?(i=oa(),di=ms=Cn=null,nr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return da&&o.locale!=="ko"?null:o.data;default:return null}}var lc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ga(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!lc[i.type]:o==="textarea"}function ya(i,o,c,m){ze(m),o=vi(o,"onChange"),0<o.length&&(c=new gs("onChange","change",null,c,m),i.push({event:c,listeners:o}))}var br=null,Mr=null;function uc(i){Na(i,0)}function mi(i){var o=ar(i);if(le(o))return i}function cc(i,o){if(i==="change")return o}var Pa=!1;if(d){var Es;if(d){var Ss="oninput"in document;if(!Ss){var va=document.createElement("div");va.setAttribute("oninput","return;"),Ss=typeof va.oninput=="function"}Es=Ss}else Es=!1;Pa=Es&&(!document.documentMode||9<document.documentMode)}function xa(){br&&(br.detachEvent("onpropertychange",_a),Mr=br=null)}function _a(i){if(i.propertyName==="value"&&mi(Mr)){var o=[];ya(o,Mr,i,oe(i)),an(uc,o)}}function dc(i,o,c){i==="focusin"?(xa(),br=o,Mr=c,br.attachEvent("onpropertychange",_a)):i==="focusout"&&xa()}function hc(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mi(Mr)}function fc(i,o){if(i==="click")return mi(o)}function pc(i,o){if(i==="input"||i==="change")return mi(o)}function mc(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var zt=typeof Object.is=="function"?Object.is:mc;function Nr(i,o){if(zt(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),m=Object.keys(o);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var P=c[m];if(!h.call(o,P)||!zt(i[P],o[P]))return!1}return!0}function Ea(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sa(i,o){var c=Ea(i);i=0;for(var m;c;){if(c.nodeType===3){if(m=i+c.textContent.length,i<=o&&m>=o)return{node:c,offset:o-i};i=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ea(c)}}function Ca(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ca(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ta(){for(var i=window,o=ne();o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=ne(i.document)}return o}function Cs(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function gc(i){var o=Ta(),c=i.focusedElem,m=i.selectionRange;if(o!==c&&c&&c.ownerDocument&&Ca(c.ownerDocument.documentElement,c)){if(m!==null&&Cs(c)){if(o=m.start,i=m.end,i===void 0&&(i=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(i,c.value.length);else if(i=(o=c.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var P=c.textContent.length,C=Math.min(m.start,P);m=m.end===void 0?C:Math.min(m.end,P),!i.extend&&C>m&&(P=m,m=C,C=P),P=Sa(c,C);var D=Sa(c,m);P&&D&&(i.rangeCount!==1||i.anchorNode!==P.node||i.anchorOffset!==P.offset||i.focusNode!==D.node||i.focusOffset!==D.offset)&&(o=o.createRange(),o.setStart(P.node,P.offset),i.removeAllRanges(),C>m?(i.addRange(o),i.extend(D.node,D.offset)):(o.setEnd(D.node,D.offset),i.addRange(o)))}}for(o=[],i=c;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)i=o[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var yc=d&&"documentMode"in document&&11>=document.documentMode,rr=null,Ts=null,Fr=null,As=!1;function Aa(i,o,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;As||rr==null||rr!==ne(m)||(m=rr,"selectionStart"in m&&Cs(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Fr&&Nr(Fr,m)||(Fr=m,m=vi(Ts,"onSelect"),0<m.length&&(o=new gs("onSelect","select",null,o,c),i.push({event:o,listeners:m}),o.target=rr)))}function gi(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var ir={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionend:gi("Transition","TransitionEnd")},ws={},wa={};d&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function yi(i){if(ws[i])return ws[i];if(!ir[i])return i;var o=ir[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in wa)return ws[i]=o[c];return i}var Ra=yi("animationend"),Ba=yi("animationiteration"),Va=yi("animationstart"),ka=yi("transitionend"),Ia=new Map,ba="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(i,o){Ia.set(i,o),a(o,[i])}for(var Rs=0;Rs<ba.length;Rs++){var Bs=ba[Rs],Pc=Bs.toLowerCase(),vc=Bs[0].toUpperCase()+Bs.slice(1);Tn(Pc,"on"+vc)}Tn(Ra,"onAnimationEnd"),Tn(Ba,"onAnimationIteration"),Tn(Va,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(ka,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ma(i,o,c){var m=i.type||"unknown-event";i.currentTarget=c,Er(m,o,void 0,i),i.currentTarget=null}function Na(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var m=i[c],P=m.event;m=m.listeners;e:{var C=void 0;if(o)for(var D=m.length-1;0<=D;D--){var K=m[D],te=K.instance,he=K.currentTarget;if(K=K.listener,te!==C&&P.isPropagationStopped())break e;Ma(P,K,he),C=te}else for(D=0;D<m.length;D++){if(K=m[D],te=K.instance,he=K.currentTarget,K=K.listener,te!==C&&P.isPropagationStopped())break e;Ma(P,K,he),C=te}}}if(vn)throw i=ln,vn=!1,ln=null,i}function Ke(i,o){var c=o[Ds];c===void 0&&(c=o[Ds]=new Set);var m=i+"__bubble";c.has(m)||(Fa(o,i,2,!1),c.add(m))}function Vs(i,o,c){var m=0;o&&(m|=4),Fa(c,i,m,o)}var Pi="_reactListening"+Math.random().toString(36).slice(2);function Lr(i){if(!i[Pi]){i[Pi]=!0,r.forEach(function(c){c!=="selectionchange"&&(xc.has(c)||Vs(c,!1,i),Vs(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Pi]||(o[Pi]=!0,Vs("selectionchange",!1,o))}}function Fa(i,o,c,m){switch(sa(o)){case 1:var P=Mu;break;case 4:P=Nu;break;default:P=fs}c=P.bind(null,o,c,i),P=void 0,!yn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(P=!0),m?P!==void 0?i.addEventListener(o,c,{capture:!0,passive:P}):i.addEventListener(o,c,!0):P!==void 0?i.addEventListener(o,c,{passive:P}):i.addEventListener(o,c,!1)}function ks(i,o,c,m,P){var C=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var K=m.stateNode.containerInfo;if(K===P||K.nodeType===8&&K.parentNode===P)break;if(D===4)for(D=m.return;D!==null;){var te=D.tag;if((te===3||te===4)&&(te=D.stateNode.containerInfo,te===P||te.nodeType===8&&te.parentNode===P))return;D=D.return}for(;K!==null;){if(D=qn(K),D===null)return;if(te=D.tag,te===5||te===6){m=C=D;continue e}K=K.parentNode}}m=m.return}an(function(){var he=C,Pe=oe(c),xe=[];e:{var ye=Ia.get(i);if(ye!==void 0){var we=gs,Ve=i;switch(i){case"keypress":if(hi(c)===0)break e;case"keydown":case"keyup":we=Ku;break;case"focusin":Ve="focus",we=vs;break;case"focusout":Ve="blur",we=vs;break;case"beforeblur":case"afterblur":we=vs;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Zu;break;case Ra:case Ba:case Va:we=qu;break;case ka:we=tc;break;case"scroll":we=Fu;break;case"wheel":we=rc;break;case"copy":case"cut":case"paste":we=Hu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=ca}var ke=(o&4)!==0,st=!ke&&i==="scroll",ue=ke?ye!==null?ye+"Capture":null:ye;ke=[];for(var ie=he,ce;ie!==null;){ce=ie;var Ee=ce.stateNode;if(ce.tag===5&&Ee!==null&&(ce=Ee,ue!==null&&(Ee=Tt(ie,ue),Ee!=null&&ke.push(Or(ie,Ee,ce)))),st)break;ie=ie.return}0<ke.length&&(ye=new we(ye,Ve,null,c,Pe),xe.push({event:ye,listeners:ke}))}}if((o&7)===0){e:{if(ye=i==="mouseover"||i==="pointerover",we=i==="mouseout"||i==="pointerout",ye&&c!==pe&&(Ve=c.relatedTarget||c.fromElement)&&(qn(Ve)||Ve[un]))break e;if((we||ye)&&(ye=Pe.window===Pe?Pe:(ye=Pe.ownerDocument)?ye.defaultView||ye.parentWindow:window,we?(Ve=c.relatedTarget||c.toElement,we=he,Ve=Ve?qn(Ve):null,Ve!==null&&(st=Un(Ve),Ve!==st||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(we=null,Ve=he),we!==Ve)){if(ke=la,Ee="onMouseLeave",ue="onMouseEnter",ie="mouse",(i==="pointerout"||i==="pointerover")&&(ke=ca,Ee="onPointerLeave",ue="onPointerEnter",ie="pointer"),st=we==null?ye:ar(we),ce=Ve==null?ye:ar(Ve),ye=new ke(Ee,ie+"leave",we,c,Pe),ye.target=st,ye.relatedTarget=ce,Ee=null,qn(Pe)===he&&(ke=new ke(ue,ie+"enter",Ve,c,Pe),ke.target=ce,ke.relatedTarget=st,Ee=ke),st=Ee,we&&Ve)t:{for(ke=we,ue=Ve,ie=0,ce=ke;ce;ce=sr(ce))ie++;for(ce=0,Ee=ue;Ee;Ee=sr(Ee))ce++;for(;0<ie-ce;)ke=sr(ke),ie--;for(;0<ce-ie;)ue=sr(ue),ce--;for(;ie--;){if(ke===ue||ue!==null&&ke===ue.alternate)break t;ke=sr(ke),ue=sr(ue)}ke=null}else ke=null;we!==null&&Da(xe,ye,we,ke,!1),Ve!==null&&st!==null&&Da(xe,st,Ve,ke,!0)}}e:{if(ye=he?ar(he):window,we=ye.nodeName&&ye.nodeName.toLowerCase(),we==="select"||we==="input"&&ye.type==="file")var be=cc;else if(ga(ye))if(Pa)be=pc;else{be=hc;var Ne=dc}else(we=ye.nodeName)&&we.toLowerCase()==="input"&&(ye.type==="checkbox"||ye.type==="radio")&&(be=fc);if(be&&(be=be(i,he))){ya(xe,be,c,Pe);break e}Ne&&Ne(i,ye,he),i==="focusout"&&(Ne=ye._wrapperState)&&Ne.controlled&&ye.type==="number"&&Ae(ye,"number",ye.value)}switch(Ne=he?ar(he):window,i){case"focusin":(ga(Ne)||Ne.contentEditable==="true")&&(rr=Ne,Ts=he,Fr=null);break;case"focusout":Fr=Ts=rr=null;break;case"mousedown":As=!0;break;case"contextmenu":case"mouseup":case"dragend":As=!1,Aa(xe,c,Pe);break;case"selectionchange":if(yc)break;case"keydown":case"keyup":Aa(xe,c,Pe)}var Fe;if(_s)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else nr?pa(i,c)&&(Oe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(da&&c.locale!=="ko"&&(nr||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&nr&&(Fe=oa()):(Cn=Pe,ms="value"in Cn?Cn.value:Cn.textContent,nr=!0)),Ne=vi(he,Oe),0<Ne.length&&(Oe=new ua(Oe,i,null,c,Pe),xe.push({event:Oe,listeners:Ne}),Fe?Oe.data=Fe:(Fe=ma(c),Fe!==null&&(Oe.data=Fe)))),(Fe=sc?oc(i,c):ac(i,c))&&(he=vi(he,"onBeforeInput"),0<he.length&&(Pe=new ua("onBeforeInput","beforeinput",null,c,Pe),xe.push({event:Pe,listeners:he}),Pe.data=Fe))}Na(xe,o)})}function Or(i,o,c){return{instance:i,listener:o,currentTarget:c}}function vi(i,o){for(var c=o+"Capture",m=[];i!==null;){var P=i,C=P.stateNode;P.tag===5&&C!==null&&(P=C,C=Tt(i,c),C!=null&&m.unshift(Or(i,C,P)),C=Tt(i,o),C!=null&&m.push(Or(i,C,P))),i=i.return}return m}function sr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Da(i,o,c,m,P){for(var C=o._reactName,D=[];c!==null&&c!==m;){var K=c,te=K.alternate,he=K.stateNode;if(te!==null&&te===m)break;K.tag===5&&he!==null&&(K=he,P?(te=Tt(c,C),te!=null&&D.unshift(Or(c,te,K))):P||(te=Tt(c,C),te!=null&&D.push(Or(c,te,K)))),c=c.return}D.length!==0&&i.push({event:o,listeners:D})}var _c=/\r\n?/g,Ec=/\u0000|\uFFFD/g;function La(i){return(typeof i=="string"?i:""+i).replace(_c,`
`).replace(Ec,"")}function xi(i,o,c){if(o=La(o),La(i)!==o&&c)throw Error(n(425))}function _i(){}var Is=null,bs=null;function Ms(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ns=typeof setTimeout=="function"?setTimeout:void 0,Sc=typeof clearTimeout=="function"?clearTimeout:void 0,Oa=typeof Promise=="function"?Promise:void 0,Cc=typeof queueMicrotask=="function"?queueMicrotask:typeof Oa<"u"?function(i){return Oa.resolve(null).then(i).catch(Tc)}:Ns;function Tc(i){setTimeout(function(){throw i})}function Fs(i,o){var c=o,m=0;do{var P=c.nextSibling;if(i.removeChild(c),P&&P.nodeType===8)if(c=P.data,c==="/$"){if(m===0){i.removeChild(P),Br(o);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=P}while(c);Br(o)}function An(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Ua(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}var or=Math.random().toString(36).slice(2),en="__reactFiber$"+or,Ur="__reactProps$"+or,un="__reactContainer$"+or,Ds="__reactEvents$"+or,Ac="__reactListeners$"+or,wc="__reactHandles$"+or;function qn(i){var o=i[en];if(o)return o;for(var c=i.parentNode;c;){if(o=c[un]||c[en]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=Ua(i);i!==null;){if(c=i[en])return c;i=Ua(i)}return o}i=c,c=i.parentNode}return null}function qr(i){return i=i[en]||i[un],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ar(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Ei(i){return i[Ur]||null}var Ls=[],lr=-1;function wn(i){return{current:i}}function Xe(i){0>lr||(i.current=Ls[lr],Ls[lr]=null,lr--)}function Ye(i,o){lr++,Ls[lr]=i.current,i.current=o}var Rn={},gt=wn(Rn),At=wn(!1),Gn=Rn;function ur(i,o){var c=i.type.contextTypes;if(!c)return Rn;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var P={},C;for(C in c)P[C]=o[C];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=P),P}function wt(i){return i=i.childContextTypes,i!=null}function Si(){Xe(At),Xe(gt)}function qa(i,o,c){if(gt.current!==Rn)throw Error(n(168));Ye(gt,o),Ye(At,c)}function Ga(i,o,c){var m=i.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var P in m)if(!(P in o))throw Error(n(108,L(i)||"Unknown",P));return v({},c,m)}function Ci(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Rn,Gn=gt.current,Ye(gt,i),Ye(At,At.current),!0}function Ha(i,o,c){var m=i.stateNode;if(!m)throw Error(n(169));c?(i=Ga(i,o,Gn),m.__reactInternalMemoizedMergedChildContext=i,Xe(At),Xe(gt),Ye(gt,i)):Xe(At),Ye(At,c)}var cn=null,Ti=!1,Os=!1;function za(i){cn===null?cn=[i]:cn.push(i)}function Rc(i){Ti=!0,za(i)}function Bn(){if(!Os&&cn!==null){Os=!0;var i=0,o=$e;try{var c=cn;for($e=1;i<c.length;i++){var m=c[i];do m=m(!0);while(m!==null)}cn=null,Ti=!1}catch(P){throw cn!==null&&(cn=cn.slice(i+1)),Wo(as,Bn),P}finally{$e=o,Os=!1}}return null}var cr=[],dr=0,Ai=null,wi=0,Ft=[],Dt=0,Hn=null,dn=1,hn="";function zn(i,o){cr[dr++]=wi,cr[dr++]=Ai,Ai=i,wi=o}function $a(i,o,c){Ft[Dt++]=dn,Ft[Dt++]=hn,Ft[Dt++]=Hn,Hn=i;var m=dn;i=hn;var P=32-Ht(m)-1;m&=~(1<<P),c+=1;var C=32-Ht(o)+P;if(30<C){var D=P-P%5;C=(m&(1<<D)-1).toString(32),m>>=D,P-=D,dn=1<<32-Ht(o)+P|c<<P|m,hn=C+i}else dn=1<<C|c<<P|m,hn=i}function Us(i){i.return!==null&&(zn(i,1),$a(i,1,0))}function qs(i){for(;i===Ai;)Ai=cr[--dr],cr[dr]=null,wi=cr[--dr],cr[dr]=null;for(;i===Hn;)Hn=Ft[--Dt],Ft[Dt]=null,hn=Ft[--Dt],Ft[Dt]=null,dn=Ft[--Dt],Ft[Dt]=null}var It=null,bt=null,Ze=!1,$t=null;function Wa(i,o){var c=qt(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=i,o=i.deletions,o===null?(i.deletions=[c],i.flags|=16):o.push(c)}function ja(i,o){switch(i.tag){case 5:var c=i.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,It=i,bt=An(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,It=i,bt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Hn!==null?{id:dn,overflow:hn}:null,i.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=qt(18,null,null,0),c.stateNode=o,c.return=i,i.child=c,It=i,bt=null,!0):!1;default:return!1}}function Gs(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Hs(i){if(Ze){var o=bt;if(o){var c=o;if(!ja(i,o)){if(Gs(i))throw Error(n(418));o=An(c.nextSibling);var m=It;o&&ja(i,o)?Wa(m,c):(i.flags=i.flags&-4097|2,Ze=!1,It=i)}}else{if(Gs(i))throw Error(n(418));i.flags=i.flags&-4097|2,Ze=!1,It=i}}}function Ja(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;It=i}function Ri(i){if(i!==It)return!1;if(!Ze)return Ja(i),Ze=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ms(i.type,i.memoizedProps)),o&&(o=bt)){if(Gs(i))throw Ya(),Error(n(418));for(;o;)Wa(i,o),o=An(o.nextSibling)}if(Ja(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(o===0){bt=An(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}i=i.nextSibling}bt=null}}else bt=It?An(i.stateNode.nextSibling):null;return!0}function Ya(){for(var i=bt;i;)i=An(i.nextSibling)}function hr(){bt=It=null,Ze=!1}function zs(i){$t===null?$t=[i]:$t.push(i)}var Bc=B.ReactCurrentBatchConfig;function Gr(i,o,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var m=c.stateNode}if(!m)throw Error(n(147,i));var P=m,C=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===C?o.ref:(o=function(D){var K=P.refs;D===null?delete K[C]:K[C]=D},o._stringRef=C,o)}if(typeof i!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,i))}return i}function Bi(i,o){throw i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Ka(i){var o=i._init;return o(i._payload)}function Xa(i){function o(ue,ie){if(i){var ce=ue.deletions;ce===null?(ue.deletions=[ie],ue.flags|=16):ce.push(ie)}}function c(ue,ie){if(!i)return null;for(;ie!==null;)o(ue,ie),ie=ie.sibling;return null}function m(ue,ie){for(ue=new Map;ie!==null;)ie.key!==null?ue.set(ie.key,ie):ue.set(ie.index,ie),ie=ie.sibling;return ue}function P(ue,ie){return ue=Dn(ue,ie),ue.index=0,ue.sibling=null,ue}function C(ue,ie,ce){return ue.index=ce,i?(ce=ue.alternate,ce!==null?(ce=ce.index,ce<ie?(ue.flags|=2,ie):ce):(ue.flags|=2,ie)):(ue.flags|=1048576,ie)}function D(ue){return i&&ue.alternate===null&&(ue.flags|=2),ue}function K(ue,ie,ce,Ee){return ie===null||ie.tag!==6?(ie=Fo(ce,ue.mode,Ee),ie.return=ue,ie):(ie=P(ie,ce),ie.return=ue,ie)}function te(ue,ie,ce,Ee){var be=ce.type;return be===z?Pe(ue,ie,ce.props.children,Ee,ce.key):ie!==null&&(ie.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Q&&Ka(be)===ie.type)?(Ee=P(ie,ce.props),Ee.ref=Gr(ue,ie,ce),Ee.return=ue,Ee):(Ee=Zi(ce.type,ce.key,ce.props,null,ue.mode,Ee),Ee.ref=Gr(ue,ie,ce),Ee.return=ue,Ee)}function he(ue,ie,ce,Ee){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ce.containerInfo||ie.stateNode.implementation!==ce.implementation?(ie=Do(ce,ue.mode,Ee),ie.return=ue,ie):(ie=P(ie,ce.children||[]),ie.return=ue,ie)}function Pe(ue,ie,ce,Ee,be){return ie===null||ie.tag!==7?(ie=Qn(ce,ue.mode,Ee,be),ie.return=ue,ie):(ie=P(ie,ce),ie.return=ue,ie)}function xe(ue,ie,ce){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Fo(""+ie,ue.mode,ce),ie.return=ue,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case q:return ce=Zi(ie.type,ie.key,ie.props,null,ue.mode,ce),ce.ref=Gr(ue,null,ie),ce.return=ue,ce;case F:return ie=Do(ie,ue.mode,ce),ie.return=ue,ie;case Q:var Ee=ie._init;return xe(ue,Ee(ie._payload),ce)}if(Ie(ie)||O(ie))return ie=Qn(ie,ue.mode,ce,null),ie.return=ue,ie;Bi(ue,ie)}return null}function ye(ue,ie,ce,Ee){var be=ie!==null?ie.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return be!==null?null:K(ue,ie,""+ce,Ee);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case q:return ce.key===be?te(ue,ie,ce,Ee):null;case F:return ce.key===be?he(ue,ie,ce,Ee):null;case Q:return be=ce._init,ye(ue,ie,be(ce._payload),Ee)}if(Ie(ce)||O(ce))return be!==null?null:Pe(ue,ie,ce,Ee,null);Bi(ue,ce)}return null}function we(ue,ie,ce,Ee,be){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ue=ue.get(ce)||null,K(ie,ue,""+Ee,be);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case q:return ue=ue.get(Ee.key===null?ce:Ee.key)||null,te(ie,ue,Ee,be);case F:return ue=ue.get(Ee.key===null?ce:Ee.key)||null,he(ie,ue,Ee,be);case Q:var Ne=Ee._init;return we(ue,ie,ce,Ne(Ee._payload),be)}if(Ie(Ee)||O(Ee))return ue=ue.get(ce)||null,Pe(ie,ue,Ee,be,null);Bi(ie,Ee)}return null}function Ve(ue,ie,ce,Ee){for(var be=null,Ne=null,Fe=ie,Oe=ie=0,ft=null;Fe!==null&&Oe<ce.length;Oe++){Fe.index>Oe?(ft=Fe,Fe=null):ft=Fe.sibling;var He=ye(ue,Fe,ce[Oe],Ee);if(He===null){Fe===null&&(Fe=ft);break}i&&Fe&&He.alternate===null&&o(ue,Fe),ie=C(He,ie,Oe),Ne===null?be=He:Ne.sibling=He,Ne=He,Fe=ft}if(Oe===ce.length)return c(ue,Fe),Ze&&zn(ue,Oe),be;if(Fe===null){for(;Oe<ce.length;Oe++)Fe=xe(ue,ce[Oe],Ee),Fe!==null&&(ie=C(Fe,ie,Oe),Ne===null?be=Fe:Ne.sibling=Fe,Ne=Fe);return Ze&&zn(ue,Oe),be}for(Fe=m(ue,Fe);Oe<ce.length;Oe++)ft=we(Fe,ue,Oe,ce[Oe],Ee),ft!==null&&(i&&ft.alternate!==null&&Fe.delete(ft.key===null?Oe:ft.key),ie=C(ft,ie,Oe),Ne===null?be=ft:Ne.sibling=ft,Ne=ft);return i&&Fe.forEach(function(Ln){return o(ue,Ln)}),Ze&&zn(ue,Oe),be}function ke(ue,ie,ce,Ee){var be=O(ce);if(typeof be!="function")throw Error(n(150));if(ce=be.call(ce),ce==null)throw Error(n(151));for(var Ne=be=null,Fe=ie,Oe=ie=0,ft=null,He=ce.next();Fe!==null&&!He.done;Oe++,He=ce.next()){Fe.index>Oe?(ft=Fe,Fe=null):ft=Fe.sibling;var Ln=ye(ue,Fe,He.value,Ee);if(Ln===null){Fe===null&&(Fe=ft);break}i&&Fe&&Ln.alternate===null&&o(ue,Fe),ie=C(Ln,ie,Oe),Ne===null?be=Ln:Ne.sibling=Ln,Ne=Ln,Fe=ft}if(He.done)return c(ue,Fe),Ze&&zn(ue,Oe),be;if(Fe===null){for(;!He.done;Oe++,He=ce.next())He=xe(ue,He.value,Ee),He!==null&&(ie=C(He,ie,Oe),Ne===null?be=He:Ne.sibling=He,Ne=He);return Ze&&zn(ue,Oe),be}for(Fe=m(ue,Fe);!He.done;Oe++,He=ce.next())He=we(Fe,ue,Oe,He.value,Ee),He!==null&&(i&&He.alternate!==null&&Fe.delete(He.key===null?Oe:He.key),ie=C(He,ie,Oe),Ne===null?be=He:Ne.sibling=He,Ne=He);return i&&Fe.forEach(function(ld){return o(ue,ld)}),Ze&&zn(ue,Oe),be}function st(ue,ie,ce,Ee){if(typeof ce=="object"&&ce!==null&&ce.type===z&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case q:e:{for(var be=ce.key,Ne=ie;Ne!==null;){if(Ne.key===be){if(be=ce.type,be===z){if(Ne.tag===7){c(ue,Ne.sibling),ie=P(Ne,ce.props.children),ie.return=ue,ue=ie;break e}}else if(Ne.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Q&&Ka(be)===Ne.type){c(ue,Ne.sibling),ie=P(Ne,ce.props),ie.ref=Gr(ue,Ne,ce),ie.return=ue,ue=ie;break e}c(ue,Ne);break}else o(ue,Ne);Ne=Ne.sibling}ce.type===z?(ie=Qn(ce.props.children,ue.mode,Ee,ce.key),ie.return=ue,ue=ie):(Ee=Zi(ce.type,ce.key,ce.props,null,ue.mode,Ee),Ee.ref=Gr(ue,ie,ce),Ee.return=ue,ue=Ee)}return D(ue);case F:e:{for(Ne=ce.key;ie!==null;){if(ie.key===Ne)if(ie.tag===4&&ie.stateNode.containerInfo===ce.containerInfo&&ie.stateNode.implementation===ce.implementation){c(ue,ie.sibling),ie=P(ie,ce.children||[]),ie.return=ue,ue=ie;break e}else{c(ue,ie);break}else o(ue,ie);ie=ie.sibling}ie=Do(ce,ue.mode,Ee),ie.return=ue,ue=ie}return D(ue);case Q:return Ne=ce._init,st(ue,ie,Ne(ce._payload),Ee)}if(Ie(ce))return Ve(ue,ie,ce,Ee);if(O(ce))return ke(ue,ie,ce,Ee);Bi(ue,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ie!==null&&ie.tag===6?(c(ue,ie.sibling),ie=P(ie,ce),ie.return=ue,ue=ie):(c(ue,ie),ie=Fo(ce,ue.mode,Ee),ie.return=ue,ue=ie),D(ue)):c(ue,ie)}return st}var fr=Xa(!0),Qa=Xa(!1),Vi=wn(null),ki=null,pr=null,$s=null;function Ws(){$s=pr=ki=null}function js(i){var o=Vi.current;Xe(Vi),i._currentValue=o}function Js(i,o,c){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===c)break;i=i.return}}function mr(i,o){ki=i,$s=pr=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Rt=!0),i.firstContext=null)}function Lt(i){var o=i._currentValue;if($s!==i)if(i={context:i,memoizedValue:o,next:null},pr===null){if(ki===null)throw Error(n(308));pr=i,ki.dependencies={lanes:0,firstContext:i}}else pr=pr.next=i;return o}var $n=null;function Ys(i){$n===null?$n=[i]:$n.push(i)}function Za(i,o,c,m){var P=o.interleaved;return P===null?(c.next=c,Ys(o)):(c.next=P.next,P.next=c),o.interleaved=c,fn(i,m)}function fn(i,o){i.lanes|=o;var c=i.alternate;for(c!==null&&(c.lanes|=o),c=i,i=i.return;i!==null;)i.childLanes|=o,c=i.alternate,c!==null&&(c.childLanes|=o),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Vn=!1;function Ks(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function el(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function pn(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function kn(i,o,c){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Ge&2)!==0){var P=m.pending;return P===null?o.next=o:(o.next=P.next,P.next=o),m.pending=o,fn(i,c)}return P=m.interleaved,P===null?(o.next=o,Ys(m)):(o.next=P.next,P.next=o),m.interleaved=o,fn(i,c)}function Ii(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var m=o.lanes;m&=i.pendingLanes,c|=m,o.lanes=c,cs(i,c)}}function tl(i,o){var c=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var P=null,C=null;if(c=c.firstBaseUpdate,c!==null){do{var D={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};C===null?P=C=D:C=C.next=D,c=c.next}while(c!==null);C===null?P=C=o:C=C.next=o}else P=C=o;c={baseState:m.baseState,firstBaseUpdate:P,lastBaseUpdate:C,shared:m.shared,effects:m.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}function bi(i,o,c,m){var P=i.updateQueue;Vn=!1;var C=P.firstBaseUpdate,D=P.lastBaseUpdate,K=P.shared.pending;if(K!==null){P.shared.pending=null;var te=K,he=te.next;te.next=null,D===null?C=he:D.next=he,D=te;var Pe=i.alternate;Pe!==null&&(Pe=Pe.updateQueue,K=Pe.lastBaseUpdate,K!==D&&(K===null?Pe.firstBaseUpdate=he:K.next=he,Pe.lastBaseUpdate=te))}if(C!==null){var xe=P.baseState;D=0,Pe=he=te=null,K=C;do{var ye=K.lane,we=K.eventTime;if((m&ye)===ye){Pe!==null&&(Pe=Pe.next={eventTime:we,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Ve=i,ke=K;switch(ye=o,we=c,ke.tag){case 1:if(Ve=ke.payload,typeof Ve=="function"){xe=Ve.call(we,xe,ye);break e}xe=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=ke.payload,ye=typeof Ve=="function"?Ve.call(we,xe,ye):Ve,ye==null)break e;xe=v({},xe,ye);break e;case 2:Vn=!0}}K.callback!==null&&K.lane!==0&&(i.flags|=64,ye=P.effects,ye===null?P.effects=[K]:ye.push(K))}else we={eventTime:we,lane:ye,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Pe===null?(he=Pe=we,te=xe):Pe=Pe.next=we,D|=ye;if(K=K.next,K===null){if(K=P.shared.pending,K===null)break;ye=K,K=ye.next,ye.next=null,P.lastBaseUpdate=ye,P.shared.pending=null}}while(!0);if(Pe===null&&(te=xe),P.baseState=te,P.firstBaseUpdate=he,P.lastBaseUpdate=Pe,o=P.shared.interleaved,o!==null){P=o;do D|=P.lane,P=P.next;while(P!==o)}else C===null&&(P.shared.lanes=0);Jn|=D,i.lanes=D,i.memoizedState=xe}}function nl(i,o,c){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var m=i[o],P=m.callback;if(P!==null){if(m.callback=null,m=c,typeof P!="function")throw Error(n(191,P));P.call(m)}}}var Hr={},tn=wn(Hr),zr=wn(Hr),$r=wn(Hr);function Wn(i){if(i===Hr)throw Error(n(174));return i}function Xs(i,o){switch(Ye($r,o),Ye(zr,i),Ye(tn,Hr),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ve(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=ve(o,i)}Xe(tn),Ye(tn,o)}function gr(){Xe(tn),Xe(zr),Xe($r)}function rl(i){Wn($r.current);var o=Wn(tn.current),c=ve(o,i.type);o!==c&&(Ye(zr,i),Ye(tn,c))}function Qs(i){zr.current===i&&(Xe(tn),Xe(zr))}var tt=wn(0);function Mi(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Zs=[];function eo(){for(var i=0;i<Zs.length;i++)Zs[i]._workInProgressVersionPrimary=null;Zs.length=0}var Ni=B.ReactCurrentDispatcher,to=B.ReactCurrentBatchConfig,jn=0,nt=null,lt=null,dt=null,Fi=!1,Wr=!1,jr=0,Vc=0;function yt(){throw Error(n(321))}function no(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!zt(i[c],o[c]))return!1;return!0}function ro(i,o,c,m,P,C){if(jn=C,nt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ni.current=i===null||i.memoizedState===null?Mc:Nc,i=c(m,P),Wr){C=0;do{if(Wr=!1,jr=0,25<=C)throw Error(n(301));C+=1,dt=lt=null,o.updateQueue=null,Ni.current=Fc,i=c(m,P)}while(Wr)}if(Ni.current=Oi,o=lt!==null&&lt.next!==null,jn=0,dt=lt=nt=null,Fi=!1,o)throw Error(n(300));return i}function io(){var i=jr!==0;return jr=0,i}function nn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?nt.memoizedState=dt=i:dt=dt.next=i,dt}function Ot(){if(lt===null){var i=nt.alternate;i=i!==null?i.memoizedState:null}else i=lt.next;var o=dt===null?nt.memoizedState:dt.next;if(o!==null)dt=o,lt=i;else{if(i===null)throw Error(n(310));lt=i,i={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},dt===null?nt.memoizedState=dt=i:dt=dt.next=i}return dt}function Jr(i,o){return typeof o=="function"?o(i):o}function so(i){var o=Ot(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var m=lt,P=m.baseQueue,C=c.pending;if(C!==null){if(P!==null){var D=P.next;P.next=C.next,C.next=D}m.baseQueue=P=C,c.pending=null}if(P!==null){C=P.next,m=m.baseState;var K=D=null,te=null,he=C;do{var Pe=he.lane;if((jn&Pe)===Pe)te!==null&&(te=te.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),m=he.hasEagerState?he.eagerState:i(m,he.action);else{var xe={lane:Pe,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};te===null?(K=te=xe,D=m):te=te.next=xe,nt.lanes|=Pe,Jn|=Pe}he=he.next}while(he!==null&&he!==C);te===null?D=m:te.next=K,zt(m,o.memoizedState)||(Rt=!0),o.memoizedState=m,o.baseState=D,o.baseQueue=te,c.lastRenderedState=m}if(i=c.interleaved,i!==null){P=i;do C=P.lane,nt.lanes|=C,Jn|=C,P=P.next;while(P!==i)}else P===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function oo(i){var o=Ot(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var m=c.dispatch,P=c.pending,C=o.memoizedState;if(P!==null){c.pending=null;var D=P=P.next;do C=i(C,D.action),D=D.next;while(D!==P);zt(C,o.memoizedState)||(Rt=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),c.lastRenderedState=C}return[C,m]}function il(){}function sl(i,o){var c=nt,m=Ot(),P=o(),C=!zt(m.memoizedState,P);if(C&&(m.memoizedState=P,Rt=!0),m=m.queue,ao(ll.bind(null,c,m,i),[i]),m.getSnapshot!==o||C||dt!==null&&dt.memoizedState.tag&1){if(c.flags|=2048,Yr(9,al.bind(null,c,m,P,o),void 0,null),ht===null)throw Error(n(349));(jn&30)!==0||ol(c,o,P)}return P}function ol(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=nt.updateQueue,o===null?(o={lastEffect:null,stores:null},nt.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function al(i,o,c,m){o.value=c,o.getSnapshot=m,ul(o)&&cl(i)}function ll(i,o,c){return c(function(){ul(o)&&cl(i)})}function ul(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!zt(i,c)}catch{return!0}}function cl(i){var o=fn(i,1);o!==null&&Yt(o,i,1,-1)}function dl(i){var o=nn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:i},o.queue=i,i=i.dispatch=bc.bind(null,nt,i),[o.memoizedState,i]}function Yr(i,o,c,m){return i={tag:i,create:o,destroy:c,deps:m,next:null},o=nt.updateQueue,o===null?(o={lastEffect:null,stores:null},nt.updateQueue=o,o.lastEffect=i.next=i):(c=o.lastEffect,c===null?o.lastEffect=i.next=i:(m=c.next,c.next=i,i.next=m,o.lastEffect=i)),i}function hl(){return Ot().memoizedState}function Di(i,o,c,m){var P=nn();nt.flags|=i,P.memoizedState=Yr(1|o,c,void 0,m===void 0?null:m)}function Li(i,o,c,m){var P=Ot();m=m===void 0?null:m;var C=void 0;if(lt!==null){var D=lt.memoizedState;if(C=D.destroy,m!==null&&no(m,D.deps)){P.memoizedState=Yr(o,c,C,m);return}}nt.flags|=i,P.memoizedState=Yr(1|o,c,C,m)}function fl(i,o){return Di(8390656,8,i,o)}function ao(i,o){return Li(2048,8,i,o)}function pl(i,o){return Li(4,2,i,o)}function ml(i,o){return Li(4,4,i,o)}function gl(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function yl(i,o,c){return c=c!=null?c.concat([i]):null,Li(4,4,gl.bind(null,o,i),c)}function lo(){}function Pl(i,o){var c=Ot();o=o===void 0?null:o;var m=c.memoizedState;return m!==null&&o!==null&&no(o,m[1])?m[0]:(c.memoizedState=[i,o],i)}function vl(i,o){var c=Ot();o=o===void 0?null:o;var m=c.memoizedState;return m!==null&&o!==null&&no(o,m[1])?m[0]:(i=i(),c.memoizedState=[i,o],i)}function xl(i,o,c){return(jn&21)===0?(i.baseState&&(i.baseState=!1,Rt=!0),i.memoizedState=c):(zt(c,o)||(c=Ko(),nt.lanes|=c,Jn|=c,i.baseState=!0),o)}function kc(i,o){var c=$e;$e=c!==0&&4>c?c:4,i(!0);var m=to.transition;to.transition={};try{i(!1),o()}finally{$e=c,to.transition=m}}function _l(){return Ot().memoizedState}function Ic(i,o,c){var m=Nn(i);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},El(i))Sl(o,c);else if(c=Za(i,o,c,m),c!==null){var P=Et();Yt(c,i,m,P),Cl(c,o,m)}}function bc(i,o,c){var m=Nn(i),P={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(El(i))Sl(o,P);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var D=o.lastRenderedState,K=C(D,c);if(P.hasEagerState=!0,P.eagerState=K,zt(K,D)){var te=o.interleaved;te===null?(P.next=P,Ys(o)):(P.next=te.next,te.next=P),o.interleaved=P;return}}catch{}finally{}c=Za(i,o,P,m),c!==null&&(P=Et(),Yt(c,i,m,P),Cl(c,o,m))}}function El(i){var o=i.alternate;return i===nt||o!==null&&o===nt}function Sl(i,o){Wr=Fi=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Cl(i,o,c){if((c&4194240)!==0){var m=o.lanes;m&=i.pendingLanes,c|=m,o.lanes=c,cs(i,c)}}var Oi={readContext:Lt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Mc={readContext:Lt,useCallback:function(i,o){return nn().memoizedState=[i,o===void 0?null:o],i},useContext:Lt,useEffect:fl,useImperativeHandle:function(i,o,c){return c=c!=null?c.concat([i]):null,Di(4194308,4,gl.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Di(4194308,4,i,o)},useInsertionEffect:function(i,o){return Di(4,2,i,o)},useMemo:function(i,o){var c=nn();return o=o===void 0?null:o,i=i(),c.memoizedState=[i,o],i},useReducer:function(i,o,c){var m=nn();return o=c!==void 0?c(o):o,m.memoizedState=m.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},m.queue=i,i=i.dispatch=Ic.bind(null,nt,i),[m.memoizedState,i]},useRef:function(i){var o=nn();return i={current:i},o.memoizedState=i},useState:dl,useDebugValue:lo,useDeferredValue:function(i){return nn().memoizedState=i},useTransition:function(){var i=dl(!1),o=i[0];return i=kc.bind(null,i[1]),nn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,c){var m=nt,P=nn();if(Ze){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),ht===null)throw Error(n(349));(jn&30)!==0||ol(m,o,c)}P.memoizedState=c;var C={value:c,getSnapshot:o};return P.queue=C,fl(ll.bind(null,m,C,i),[i]),m.flags|=2048,Yr(9,al.bind(null,m,C,c,o),void 0,null),c},useId:function(){var i=nn(),o=ht.identifierPrefix;if(Ze){var c=hn,m=dn;c=(m&~(1<<32-Ht(m)-1)).toString(32)+c,o=":"+o+"R"+c,c=jr++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=Vc++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Nc={readContext:Lt,useCallback:Pl,useContext:Lt,useEffect:ao,useImperativeHandle:yl,useInsertionEffect:pl,useLayoutEffect:ml,useMemo:vl,useReducer:so,useRef:hl,useState:function(){return so(Jr)},useDebugValue:lo,useDeferredValue:function(i){var o=Ot();return xl(o,lt.memoizedState,i)},useTransition:function(){var i=so(Jr)[0],o=Ot().memoizedState;return[i,o]},useMutableSource:il,useSyncExternalStore:sl,useId:_l,unstable_isNewReconciler:!1},Fc={readContext:Lt,useCallback:Pl,useContext:Lt,useEffect:ao,useImperativeHandle:yl,useInsertionEffect:pl,useLayoutEffect:ml,useMemo:vl,useReducer:oo,useRef:hl,useState:function(){return oo(Jr)},useDebugValue:lo,useDeferredValue:function(i){var o=Ot();return lt===null?o.memoizedState=i:xl(o,lt.memoizedState,i)},useTransition:function(){var i=oo(Jr)[0],o=Ot().memoizedState;return[i,o]},useMutableSource:il,useSyncExternalStore:sl,useId:_l,unstable_isNewReconciler:!1};function Wt(i,o){if(i&&i.defaultProps){o=v({},o),i=i.defaultProps;for(var c in i)o[c]===void 0&&(o[c]=i[c]);return o}return o}function uo(i,o,c,m){o=i.memoizedState,c=c(m,o),c=c==null?o:v({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ui={isMounted:function(i){return(i=i._reactInternals)?Un(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var m=Et(),P=Nn(i),C=pn(m,P);C.payload=o,c!=null&&(C.callback=c),o=kn(i,C,P),o!==null&&(Yt(o,i,P,m),Ii(o,i,P))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var m=Et(),P=Nn(i),C=pn(m,P);C.tag=1,C.payload=o,c!=null&&(C.callback=c),o=kn(i,C,P),o!==null&&(Yt(o,i,P,m),Ii(o,i,P))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Et(),m=Nn(i),P=pn(c,m);P.tag=2,o!=null&&(P.callback=o),o=kn(i,P,m),o!==null&&(Yt(o,i,m,c),Ii(o,i,m))}};function Tl(i,o,c,m,P,C,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,C,D):o.prototype&&o.prototype.isPureReactComponent?!Nr(c,m)||!Nr(P,C):!0}function Al(i,o,c){var m=!1,P=Rn,C=o.contextType;return typeof C=="object"&&C!==null?C=Lt(C):(P=wt(o)?Gn:gt.current,m=o.contextTypes,C=(m=m!=null)?ur(i,P):Rn),o=new o(c,C),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ui,i.stateNode=o,o._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=P,i.__reactInternalMemoizedMaskedChildContext=C),o}function wl(i,o,c,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,m),o.state!==i&&Ui.enqueueReplaceState(o,o.state,null)}function co(i,o,c,m){var P=i.stateNode;P.props=c,P.state=i.memoizedState,P.refs={},Ks(i);var C=o.contextType;typeof C=="object"&&C!==null?P.context=Lt(C):(C=wt(o)?Gn:gt.current,P.context=ur(i,C)),P.state=i.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(uo(i,o,C,c),P.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(o=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),o!==P.state&&Ui.enqueueReplaceState(P,P.state,null),bi(i,c,P,m),P.state=i.memoizedState),typeof P.componentDidMount=="function"&&(i.flags|=4194308)}function yr(i,o){try{var c="",m=o;do c+=A(m),m=m.return;while(m);var P=c}catch(C){P=`
Error generating stack: `+C.message+`
`+C.stack}return{value:i,source:o,stack:P,digest:null}}function ho(i,o,c){return{value:i,source:null,stack:c??null,digest:o??null}}function fo(i,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var Dc=typeof WeakMap=="function"?WeakMap:Map;function Rl(i,o,c){c=pn(-1,c),c.tag=3,c.payload={element:null};var m=o.value;return c.callback=function(){ji||(ji=!0,Ro=m),fo(i,o)},c}function Bl(i,o,c){c=pn(-1,c),c.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var P=o.value;c.payload=function(){return m(P)},c.callback=function(){fo(i,o)}}var C=i.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(c.callback=function(){fo(i,o),typeof m!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var D=o.stack;this.componentDidCatch(o.value,{componentStack:D!==null?D:""})}),c}function Vl(i,o,c){var m=i.pingCache;if(m===null){m=i.pingCache=new Dc;var P=new Set;m.set(o,P)}else P=m.get(o),P===void 0&&(P=new Set,m.set(o,P));P.has(c)||(P.add(c),i=Xc.bind(null,i,o,c),o.then(i,i))}function kl(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Il(i,o,c,m,P){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=pn(-1,1),o.tag=2,kn(c,o,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=P,i)}var Lc=B.ReactCurrentOwner,Rt=!1;function _t(i,o,c,m){o.child=i===null?Qa(o,null,c,m):fr(o,i.child,c,m)}function bl(i,o,c,m,P){c=c.render;var C=o.ref;return mr(o,P),m=ro(i,o,c,m,C,P),c=io(),i!==null&&!Rt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~P,mn(i,o,P)):(Ze&&c&&Us(o),o.flags|=1,_t(i,o,m,P),o.child)}function Ml(i,o,c,m,P){if(i===null){var C=c.type;return typeof C=="function"&&!No(C)&&C.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=C,Nl(i,o,C,m,P)):(i=Zi(c.type,null,m,o,o.mode,P),i.ref=o.ref,i.return=o,o.child=i)}if(C=i.child,(i.lanes&P)===0){var D=C.memoizedProps;if(c=c.compare,c=c!==null?c:Nr,c(D,m)&&i.ref===o.ref)return mn(i,o,P)}return o.flags|=1,i=Dn(C,m),i.ref=o.ref,i.return=o,o.child=i}function Nl(i,o,c,m,P){if(i!==null){var C=i.memoizedProps;if(Nr(C,m)&&i.ref===o.ref)if(Rt=!1,o.pendingProps=m=C,(i.lanes&P)!==0)(i.flags&131072)!==0&&(Rt=!0);else return o.lanes=i.lanes,mn(i,o,P)}return po(i,o,c,m,P)}function Fl(i,o,c){var m=o.pendingProps,P=m.children,C=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(vr,Mt),Mt|=c;else{if((c&1073741824)===0)return i=C!==null?C.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ye(vr,Mt),Mt|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=C!==null?C.baseLanes:c,Ye(vr,Mt),Mt|=m}else C!==null?(m=C.baseLanes|c,o.memoizedState=null):m=c,Ye(vr,Mt),Mt|=m;return _t(i,o,P,c),o.child}function Dl(i,o){var c=o.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function po(i,o,c,m,P){var C=wt(c)?Gn:gt.current;return C=ur(o,C),mr(o,P),c=ro(i,o,c,m,C,P),m=io(),i!==null&&!Rt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~P,mn(i,o,P)):(Ze&&m&&Us(o),o.flags|=1,_t(i,o,c,P),o.child)}function Ll(i,o,c,m,P){if(wt(c)){var C=!0;Ci(o)}else C=!1;if(mr(o,P),o.stateNode===null)Gi(i,o),Al(o,c,m),co(o,c,m,P),m=!0;else if(i===null){var D=o.stateNode,K=o.memoizedProps;D.props=K;var te=D.context,he=c.contextType;typeof he=="object"&&he!==null?he=Lt(he):(he=wt(c)?Gn:gt.current,he=ur(o,he));var Pe=c.getDerivedStateFromProps,xe=typeof Pe=="function"||typeof D.getSnapshotBeforeUpdate=="function";xe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(K!==m||te!==he)&&wl(o,D,m,he),Vn=!1;var ye=o.memoizedState;D.state=ye,bi(o,m,D,P),te=o.memoizedState,K!==m||ye!==te||At.current||Vn?(typeof Pe=="function"&&(uo(o,c,Pe,m),te=o.memoizedState),(K=Vn||Tl(o,c,K,m,ye,te,he))?(xe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(o.flags|=4194308)):(typeof D.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=te),D.props=m,D.state=te,D.context=he,m=K):(typeof D.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{D=o.stateNode,el(i,o),K=o.memoizedProps,he=o.type===o.elementType?K:Wt(o.type,K),D.props=he,xe=o.pendingProps,ye=D.context,te=c.contextType,typeof te=="object"&&te!==null?te=Lt(te):(te=wt(c)?Gn:gt.current,te=ur(o,te));var we=c.getDerivedStateFromProps;(Pe=typeof we=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(K!==xe||ye!==te)&&wl(o,D,m,te),Vn=!1,ye=o.memoizedState,D.state=ye,bi(o,m,D,P);var Ve=o.memoizedState;K!==xe||ye!==Ve||At.current||Vn?(typeof we=="function"&&(uo(o,c,we,m),Ve=o.memoizedState),(he=Vn||Tl(o,c,he,m,ye,Ve,te)||!1)?(Pe||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(m,Ve,te),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(m,Ve,te)),typeof D.componentDidUpdate=="function"&&(o.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof D.componentDidUpdate!="function"||K===i.memoizedProps&&ye===i.memoizedState||(o.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||K===i.memoizedProps&&ye===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Ve),D.props=m,D.state=Ve,D.context=te,m=he):(typeof D.componentDidUpdate!="function"||K===i.memoizedProps&&ye===i.memoizedState||(o.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||K===i.memoizedProps&&ye===i.memoizedState||(o.flags|=1024),m=!1)}return mo(i,o,c,m,C,P)}function mo(i,o,c,m,P,C){Dl(i,o);var D=(o.flags&128)!==0;if(!m&&!D)return P&&Ha(o,c,!1),mn(i,o,C);m=o.stateNode,Lc.current=o;var K=D&&typeof c.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,i!==null&&D?(o.child=fr(o,i.child,null,C),o.child=fr(o,null,K,C)):_t(i,o,K,C),o.memoizedState=m.state,P&&Ha(o,c,!0),o.child}function Ol(i){var o=i.stateNode;o.pendingContext?qa(i,o.pendingContext,o.pendingContext!==o.context):o.context&&qa(i,o.context,!1),Xs(i,o.containerInfo)}function Ul(i,o,c,m,P){return hr(),zs(P),o.flags|=256,_t(i,o,c,m),o.child}var go={dehydrated:null,treeContext:null,retryLane:0};function yo(i){return{baseLanes:i,cachePool:null,transitions:null}}function ql(i,o,c){var m=o.pendingProps,P=tt.current,C=!1,D=(o.flags&128)!==0,K;if((K=D)||(K=i!==null&&i.memoizedState===null?!1:(P&2)!==0),K?(C=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(P|=1),Ye(tt,P&1),i===null)return Hs(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(D=m.children,i=m.fallback,C?(m=o.mode,C=o.child,D={mode:"hidden",children:D},(m&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=D):C=es(D,m,0,null),i=Qn(i,m,c,null),C.return=o,i.return=o,C.sibling=i,o.child=C,o.child.memoizedState=yo(c),o.memoizedState=go,i):Po(o,D));if(P=i.memoizedState,P!==null&&(K=P.dehydrated,K!==null))return Oc(i,o,D,m,K,P,c);if(C){C=m.fallback,D=o.mode,P=i.child,K=P.sibling;var te={mode:"hidden",children:m.children};return(D&1)===0&&o.child!==P?(m=o.child,m.childLanes=0,m.pendingProps=te,o.deletions=null):(m=Dn(P,te),m.subtreeFlags=P.subtreeFlags&14680064),K!==null?C=Dn(K,C):(C=Qn(C,D,c,null),C.flags|=2),C.return=o,m.return=o,m.sibling=C,o.child=m,m=C,C=o.child,D=i.child.memoizedState,D=D===null?yo(c):{baseLanes:D.baseLanes|c,cachePool:null,transitions:D.transitions},C.memoizedState=D,C.childLanes=i.childLanes&~c,o.memoizedState=go,m}return C=i.child,i=C.sibling,m=Dn(C,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=c),m.return=o,m.sibling=null,i!==null&&(c=o.deletions,c===null?(o.deletions=[i],o.flags|=16):c.push(i)),o.child=m,o.memoizedState=null,m}function Po(i,o){return o=es({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function qi(i,o,c,m){return m!==null&&zs(m),fr(o,i.child,null,c),i=Po(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Oc(i,o,c,m,P,C,D){if(c)return o.flags&256?(o.flags&=-257,m=ho(Error(n(422))),qi(i,o,D,m)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(C=m.fallback,P=o.mode,m=es({mode:"visible",children:m.children},P,0,null),C=Qn(C,P,D,null),C.flags|=2,m.return=o,C.return=o,m.sibling=C,o.child=m,(o.mode&1)!==0&&fr(o,i.child,null,D),o.child.memoizedState=yo(D),o.memoizedState=go,C);if((o.mode&1)===0)return qi(i,o,D,null);if(P.data==="$!"){if(m=P.nextSibling&&P.nextSibling.dataset,m)var K=m.dgst;return m=K,C=Error(n(419)),m=ho(C,m,void 0),qi(i,o,D,m)}if(K=(D&i.childLanes)!==0,Rt||K){if(m=ht,m!==null){switch(D&-D){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(m.suspendedLanes|D))!==0?0:P,P!==0&&P!==C.retryLane&&(C.retryLane=P,fn(i,P),Yt(m,i,P,-1))}return Mo(),m=ho(Error(n(421))),qi(i,o,D,m)}return P.data==="$?"?(o.flags|=128,o.child=i.child,o=Qc.bind(null,i),P._reactRetry=o,null):(i=C.treeContext,bt=An(P.nextSibling),It=o,Ze=!0,$t=null,i!==null&&(Ft[Dt++]=dn,Ft[Dt++]=hn,Ft[Dt++]=Hn,dn=i.id,hn=i.overflow,Hn=o),o=Po(o,m.children),o.flags|=4096,o)}function Gl(i,o,c){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),Js(i.return,o,c)}function vo(i,o,c,m,P){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:P}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=c,C.tailMode=P)}function Hl(i,o,c){var m=o.pendingProps,P=m.revealOrder,C=m.tail;if(_t(i,o,m.children,c),m=tt.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gl(i,c,o);else if(i.tag===19)Gl(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Ye(tt,m),(o.mode&1)===0)o.memoizedState=null;else switch(P){case"forwards":for(c=o.child,P=null;c!==null;)i=c.alternate,i!==null&&Mi(i)===null&&(P=c),c=c.sibling;c=P,c===null?(P=o.child,o.child=null):(P=c.sibling,c.sibling=null),vo(o,!1,P,c,C);break;case"backwards":for(c=null,P=o.child,o.child=null;P!==null;){if(i=P.alternate,i!==null&&Mi(i)===null){o.child=P;break}i=P.sibling,P.sibling=c,c=P,P=i}vo(o,!0,c,null,C);break;case"together":vo(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Gi(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function mn(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Jn|=o.lanes,(c&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,c=Dn(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Dn(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Uc(i,o,c){switch(o.tag){case 3:Ol(o),hr();break;case 5:rl(o);break;case 1:wt(o.type)&&Ci(o);break;case 4:Xs(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,P=o.memoizedProps.value;Ye(Vi,m._currentValue),m._currentValue=P;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(Ye(tt,tt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?ql(i,o,c):(Ye(tt,tt.current&1),i=mn(i,o,c),i!==null?i.sibling:null);Ye(tt,tt.current&1);break;case 19:if(m=(c&o.childLanes)!==0,(i.flags&128)!==0){if(m)return Hl(i,o,c);o.flags|=128}if(P=o.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Ye(tt,tt.current),m)break;return null;case 22:case 23:return o.lanes=0,Fl(i,o,c)}return mn(i,o,c)}var zl,xo,$l,Wl;zl=function(i,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},xo=function(){},$l=function(i,o,c,m){var P=i.memoizedProps;if(P!==m){i=o.stateNode,Wn(tn.current);var C=null;switch(c){case"input":P=de(i,P),m=de(i,m),C=[];break;case"select":P=v({},P,{value:void 0}),m=v({},m,{value:void 0}),C=[];break;case"textarea":P=Je(i,P),m=Je(i,m),C=[];break;default:typeof P.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=_i)}at(c,m);var D;c=null;for(he in P)if(!m.hasOwnProperty(he)&&P.hasOwnProperty(he)&&P[he]!=null)if(he==="style"){var K=P[he];for(D in K)K.hasOwnProperty(D)&&(c||(c={}),c[D]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(s.hasOwnProperty(he)?C||(C=[]):(C=C||[]).push(he,null));for(he in m){var te=m[he];if(K=P?.[he],m.hasOwnProperty(he)&&te!==K&&(te!=null||K!=null))if(he==="style")if(K){for(D in K)!K.hasOwnProperty(D)||te&&te.hasOwnProperty(D)||(c||(c={}),c[D]="");for(D in te)te.hasOwnProperty(D)&&K[D]!==te[D]&&(c||(c={}),c[D]=te[D])}else c||(C||(C=[]),C.push(he,c)),c=te;else he==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,K=K?K.__html:void 0,te!=null&&K!==te&&(C=C||[]).push(he,te)):he==="children"?typeof te!="string"&&typeof te!="number"||(C=C||[]).push(he,""+te):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(s.hasOwnProperty(he)?(te!=null&&he==="onScroll"&&Ke("scroll",i),C||K===te||(C=[])):(C=C||[]).push(he,te))}c&&(C=C||[]).push("style",c);var he=C;(o.updateQueue=he)&&(o.flags|=4)}},Wl=function(i,o,c,m){c!==m&&(o.flags|=4)};function Kr(i,o){if(!Ze)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Pt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,m=0;if(o)for(var P=i.child;P!==null;)c|=P.lanes|P.childLanes,m|=P.subtreeFlags&14680064,m|=P.flags&14680064,P.return=i,P=P.sibling;else for(P=i.child;P!==null;)c|=P.lanes|P.childLanes,m|=P.subtreeFlags,m|=P.flags,P.return=i,P=P.sibling;return i.subtreeFlags|=m,i.childLanes=c,o}function qc(i,o,c){var m=o.pendingProps;switch(qs(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(o),null;case 1:return wt(o.type)&&Si(),Pt(o),null;case 3:return m=o.stateNode,gr(),Xe(At),Xe(gt),eo(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(Ri(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$t!==null&&(ko($t),$t=null))),xo(i,o),Pt(o),null;case 5:Qs(o);var P=Wn($r.current);if(c=o.type,i!==null&&o.stateNode!=null)$l(i,o,c,m,P),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Pt(o),null}if(i=Wn(tn.current),Ri(o)){m=o.stateNode,c=o.type;var C=o.memoizedProps;switch(m[en]=o,m[Ur]=C,i=(o.mode&1)!==0,c){case"dialog":Ke("cancel",m),Ke("close",m);break;case"iframe":case"object":case"embed":Ke("load",m);break;case"video":case"audio":for(P=0;P<Dr.length;P++)Ke(Dr[P],m);break;case"source":Ke("error",m);break;case"img":case"image":case"link":Ke("error",m),Ke("load",m);break;case"details":Ke("toggle",m);break;case"input":ge(m,C),Ke("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!C.multiple},Ke("invalid",m);break;case"textarea":et(m,C),Ke("invalid",m)}at(c,C),P=null;for(var D in C)if(C.hasOwnProperty(D)){var K=C[D];D==="children"?typeof K=="string"?m.textContent!==K&&(C.suppressHydrationWarning!==!0&&xi(m.textContent,K,i),P=["children",K]):typeof K=="number"&&m.textContent!==""+K&&(C.suppressHydrationWarning!==!0&&xi(m.textContent,K,i),P=["children",""+K]):s.hasOwnProperty(D)&&K!=null&&D==="onScroll"&&Ke("scroll",m)}switch(c){case"input":se(m),Ce(m,C,!0);break;case"textarea":se(m),We(m);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(m.onclick=_i)}m=P,o.updateQueue=m,m!==null&&(o.flags|=4)}else{D=P.nodeType===9?P:P.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=fe(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=D.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=D.createElement(c,{is:m.is}):(i=D.createElement(c),c==="select"&&(D=i,m.multiple?D.multiple=!0:m.size&&(D.size=m.size))):i=D.createElementNS(i,c),i[en]=o,i[Ur]=m,zl(i,o,!1,!1),o.stateNode=i;e:{switch(D=Nt(c,m),c){case"dialog":Ke("cancel",i),Ke("close",i),P=m;break;case"iframe":case"object":case"embed":Ke("load",i),P=m;break;case"video":case"audio":for(P=0;P<Dr.length;P++)Ke(Dr[P],i);P=m;break;case"source":Ke("error",i),P=m;break;case"img":case"image":case"link":Ke("error",i),Ke("load",i),P=m;break;case"details":Ke("toggle",i),P=m;break;case"input":ge(i,m),P=de(i,m),Ke("invalid",i);break;case"option":P=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},P=v({},m,{value:void 0}),Ke("invalid",i);break;case"textarea":et(i,m),P=Je(i,m),Ke("invalid",i);break;default:P=m}at(c,P),K=P;for(C in K)if(K.hasOwnProperty(C)){var te=K[C];C==="style"?Kt(i,te):C==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Ue(i,te)):C==="children"?typeof te=="string"?(c!=="textarea"||te!=="")&&Me(i,te):typeof te=="number"&&Me(i,""+te):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?te!=null&&C==="onScroll"&&Ke("scroll",i):te!=null&&R(i,C,te,D))}switch(c){case"input":se(i),Ce(i,m,!1);break;case"textarea":se(i),We(i);break;case"option":m.value!=null&&i.setAttribute("value",""+G(m.value));break;case"select":i.multiple=!!m.multiple,C=m.value,C!=null?_e(i,!!m.multiple,C,!1):m.defaultValue!=null&&_e(i,!!m.multiple,m.defaultValue,!0);break;default:typeof P.onClick=="function"&&(i.onclick=_i)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Pt(o),null;case 6:if(i&&o.stateNode!=null)Wl(i,o,i.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(c=Wn($r.current),Wn(tn.current),Ri(o)){if(m=o.stateNode,c=o.memoizedProps,m[en]=o,(C=m.nodeValue!==c)&&(i=It,i!==null))switch(i.tag){case 3:xi(m.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&xi(m.nodeValue,c,(i.mode&1)!==0)}C&&(o.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[en]=o,o.stateNode=m}return Pt(o),null;case 13:if(Xe(tt),m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ze&&bt!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Ya(),hr(),o.flags|=98560,C=!1;else if(C=Ri(o),m!==null&&m.dehydrated!==null){if(i===null){if(!C)throw Error(n(318));if(C=o.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[en]=o}else hr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pt(o),C=!1}else $t!==null&&(ko($t),$t=null),C=!0;if(!C)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(tt.current&1)!==0?ut===0&&(ut=3):Mo())),o.updateQueue!==null&&(o.flags|=4),Pt(o),null);case 4:return gr(),xo(i,o),i===null&&Lr(o.stateNode.containerInfo),Pt(o),null;case 10:return js(o.type._context),Pt(o),null;case 17:return wt(o.type)&&Si(),Pt(o),null;case 19:if(Xe(tt),C=o.memoizedState,C===null)return Pt(o),null;if(m=(o.flags&128)!==0,D=C.rendering,D===null)if(m)Kr(C,!1);else{if(ut!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(D=Mi(i),D!==null){for(o.flags|=128,Kr(C,!1),m=D.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=c,c=o.child;c!==null;)C=c,i=m,C.flags&=14680066,D=C.alternate,D===null?(C.childLanes=0,C.lanes=i,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=D.childLanes,C.lanes=D.lanes,C.child=D.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=D.memoizedProps,C.memoizedState=D.memoizedState,C.updateQueue=D.updateQueue,C.type=D.type,i=D.dependencies,C.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Ye(tt,tt.current&1|2),o.child}i=i.sibling}C.tail!==null&&it()>xr&&(o.flags|=128,m=!0,Kr(C,!1),o.lanes=4194304)}else{if(!m)if(i=Mi(D),i!==null){if(o.flags|=128,m=!0,c=i.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Kr(C,!0),C.tail===null&&C.tailMode==="hidden"&&!D.alternate&&!Ze)return Pt(o),null}else 2*it()-C.renderingStartTime>xr&&c!==1073741824&&(o.flags|=128,m=!0,Kr(C,!1),o.lanes=4194304);C.isBackwards?(D.sibling=o.child,o.child=D):(c=C.last,c!==null?c.sibling=D:o.child=D,C.last=D)}return C.tail!==null?(o=C.tail,C.rendering=o,C.tail=o.sibling,C.renderingStartTime=it(),o.sibling=null,c=tt.current,Ye(tt,m?c&1|2:c&1),o):(Pt(o),null);case 22:case 23:return bo(),m=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(Mt&1073741824)!==0&&(Pt(o),o.subtreeFlags&6&&(o.flags|=8192)):Pt(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function Gc(i,o){switch(qs(o),o.tag){case 1:return wt(o.type)&&Si(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return gr(),Xe(At),Xe(gt),eo(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Qs(o),null;case 13:if(Xe(tt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));hr()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Xe(tt),null;case 4:return gr(),null;case 10:return js(o.type._context),null;case 22:case 23:return bo(),null;case 24:return null;default:return null}}var Hi=!1,vt=!1,Hc=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Pr(i,o){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){rt(i,o,m)}else c.current=null}function _o(i,o,c){try{c()}catch(m){rt(i,o,m)}}var jl=!1;function zc(i,o){if(Is=ui,i=Ta(),Cs(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var P=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{c.nodeType,C.nodeType}catch{c=null;break e}var D=0,K=-1,te=-1,he=0,Pe=0,xe=i,ye=null;t:for(;;){for(var we;xe!==c||P!==0&&xe.nodeType!==3||(K=D+P),xe!==C||m!==0&&xe.nodeType!==3||(te=D+m),xe.nodeType===3&&(D+=xe.nodeValue.length),(we=xe.firstChild)!==null;)ye=xe,xe=we;for(;;){if(xe===i)break t;if(ye===c&&++he===P&&(K=D),ye===C&&++Pe===m&&(te=D),(we=xe.nextSibling)!==null)break;xe=ye,ye=xe.parentNode}xe=we}c=K===-1||te===-1?null:{start:K,end:te}}else c=null}c=c||{start:0,end:0}}else c=null;for(bs={focusedElem:i,selectionRange:c},ui=!1,Re=o;Re!==null;)if(o=Re,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Re=i;else for(;Re!==null;){o=Re;try{var Ve=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var ke=Ve.memoizedProps,st=Ve.memoizedState,ue=o.stateNode,ie=ue.getSnapshotBeforeUpdate(o.elementType===o.type?ke:Wt(o.type,ke),st);ue.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ce=o.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ee){rt(o,o.return,Ee)}if(i=o.sibling,i!==null){i.return=o.return,Re=i;break}Re=o.return}return Ve=jl,jl=!1,Ve}function Xr(i,o,c){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var P=m=m.next;do{if((P.tag&i)===i){var C=P.destroy;P.destroy=void 0,C!==void 0&&_o(o,c,C)}P=P.next}while(P!==m)}}function zi(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&i)===i){var m=c.create;c.destroy=m()}c=c.next}while(c!==o)}}function Eo(i){var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof o=="function"?o(i):o.current=i}}function Jl(i){var o=i.alternate;o!==null&&(i.alternate=null,Jl(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[en],delete o[Ur],delete o[Ds],delete o[Ac],delete o[wc])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Yl(i){return i.tag===5||i.tag===3||i.tag===4}function Kl(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yl(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function So(i,o,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=_i));else if(m!==4&&(i=i.child,i!==null))for(So(i,o,c),i=i.sibling;i!==null;)So(i,o,c),i=i.sibling}function Co(i,o,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(Co(i,o,c),i=i.sibling;i!==null;)Co(i,o,c),i=i.sibling}var pt=null,jt=!1;function In(i,o,c){for(c=c.child;c!==null;)Xl(i,o,c),c=c.sibling}function Xl(i,o,c){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(ri,c)}catch{}switch(c.tag){case 5:vt||Pr(c,o);case 6:var m=pt,P=jt;pt=null,In(i,o,c),pt=m,jt=P,pt!==null&&(jt?(i=pt,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):pt.removeChild(c.stateNode));break;case 18:pt!==null&&(jt?(i=pt,c=c.stateNode,i.nodeType===8?Fs(i.parentNode,c):i.nodeType===1&&Fs(i,c),Br(i)):Fs(pt,c.stateNode));break;case 4:m=pt,P=jt,pt=c.stateNode.containerInfo,jt=!0,In(i,o,c),pt=m,jt=P;break;case 0:case 11:case 14:case 15:if(!vt&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){P=m=m.next;do{var C=P,D=C.destroy;C=C.tag,D!==void 0&&((C&2)!==0||(C&4)!==0)&&_o(c,o,D),P=P.next}while(P!==m)}In(i,o,c);break;case 1:if(!vt&&(Pr(c,o),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(K){rt(c,o,K)}In(i,o,c);break;case 21:In(i,o,c);break;case 22:c.mode&1?(vt=(m=vt)||c.memoizedState!==null,In(i,o,c),vt=m):In(i,o,c);break;default:In(i,o,c)}}function Ql(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new Hc),o.forEach(function(m){var P=Zc.bind(null,i,m);c.has(m)||(c.add(m),m.then(P,P))})}}function Jt(i,o){var c=o.deletions;if(c!==null)for(var m=0;m<c.length;m++){var P=c[m];try{var C=i,D=o,K=D;e:for(;K!==null;){switch(K.tag){case 5:pt=K.stateNode,jt=!1;break e;case 3:pt=K.stateNode.containerInfo,jt=!0;break e;case 4:pt=K.stateNode.containerInfo,jt=!0;break e}K=K.return}if(pt===null)throw Error(n(160));Xl(C,D,P),pt=null,jt=!1;var te=P.alternate;te!==null&&(te.return=null),P.return=null}catch(he){rt(P,o,he)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Zl(o,i),o=o.sibling}function Zl(i,o){var c=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Jt(o,i),rn(i),m&4){try{Xr(3,i,i.return),zi(3,i)}catch(ke){rt(i,i.return,ke)}try{Xr(5,i,i.return)}catch(ke){rt(i,i.return,ke)}}break;case 1:Jt(o,i),rn(i),m&512&&c!==null&&Pr(c,c.return);break;case 5:if(Jt(o,i),rn(i),m&512&&c!==null&&Pr(c,c.return),i.flags&32){var P=i.stateNode;try{Me(P,"")}catch(ke){rt(i,i.return,ke)}}if(m&4&&(P=i.stateNode,P!=null)){var C=i.memoizedProps,D=c!==null?c.memoizedProps:C,K=i.type,te=i.updateQueue;if(i.updateQueue=null,te!==null)try{K==="input"&&C.type==="radio"&&C.name!=null&&me(P,C),Nt(K,D);var he=Nt(K,C);for(D=0;D<te.length;D+=2){var Pe=te[D],xe=te[D+1];Pe==="style"?Kt(P,xe):Pe==="dangerouslySetInnerHTML"?Ue(P,xe):Pe==="children"?Me(P,xe):R(P,Pe,xe,he)}switch(K){case"input":Se(P,C);break;case"textarea":De(P,C);break;case"select":var ye=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!C.multiple;var we=C.value;we!=null?_e(P,!!C.multiple,we,!1):ye!==!!C.multiple&&(C.defaultValue!=null?_e(P,!!C.multiple,C.defaultValue,!0):_e(P,!!C.multiple,C.multiple?[]:"",!1))}P[Ur]=C}catch(ke){rt(i,i.return,ke)}}break;case 6:if(Jt(o,i),rn(i),m&4){if(i.stateNode===null)throw Error(n(162));P=i.stateNode,C=i.memoizedProps;try{P.nodeValue=C}catch(ke){rt(i,i.return,ke)}}break;case 3:if(Jt(o,i),rn(i),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Br(o.containerInfo)}catch(ke){rt(i,i.return,ke)}break;case 4:Jt(o,i),rn(i);break;case 13:Jt(o,i),rn(i),P=i.child,P.flags&8192&&(C=P.memoizedState!==null,P.stateNode.isHidden=C,!C||P.alternate!==null&&P.alternate.memoizedState!==null||(wo=it())),m&4&&Ql(i);break;case 22:if(Pe=c!==null&&c.memoizedState!==null,i.mode&1?(vt=(he=vt)||Pe,Jt(o,i),vt=he):Jt(o,i),rn(i),m&8192){if(he=i.memoizedState!==null,(i.stateNode.isHidden=he)&&!Pe&&(i.mode&1)!==0)for(Re=i,Pe=i.child;Pe!==null;){for(xe=Re=Pe;Re!==null;){switch(ye=Re,we=ye.child,ye.tag){case 0:case 11:case 14:case 15:Xr(4,ye,ye.return);break;case 1:Pr(ye,ye.return);var Ve=ye.stateNode;if(typeof Ve.componentWillUnmount=="function"){m=ye,c=ye.return;try{o=m,Ve.props=o.memoizedProps,Ve.state=o.memoizedState,Ve.componentWillUnmount()}catch(ke){rt(m,c,ke)}}break;case 5:Pr(ye,ye.return);break;case 22:if(ye.memoizedState!==null){nu(xe);continue}}we!==null?(we.return=ye,Re=we):nu(xe)}Pe=Pe.sibling}e:for(Pe=null,xe=i;;){if(xe.tag===5){if(Pe===null){Pe=xe;try{P=xe.stateNode,he?(C=P.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(K=xe.stateNode,te=xe.memoizedProps.style,D=te!=null&&te.hasOwnProperty("display")?te.display:null,K.style.display=Ct("display",D))}catch(ke){rt(i,i.return,ke)}}}else if(xe.tag===6){if(Pe===null)try{xe.stateNode.nodeValue=he?"":xe.memoizedProps}catch(ke){rt(i,i.return,ke)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===i)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===i)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===i)break e;Pe===xe&&(Pe=null),xe=xe.return}Pe===xe&&(Pe=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:Jt(o,i),rn(i),m&4&&Ql(i);break;case 21:break;default:Jt(o,i),rn(i)}}function rn(i){var o=i.flags;if(o&2){try{e:{for(var c=i.return;c!==null;){if(Yl(c)){var m=c;break e}c=c.return}throw Error(n(160))}switch(m.tag){case 5:var P=m.stateNode;m.flags&32&&(Me(P,""),m.flags&=-33);var C=Kl(i);Co(i,C,P);break;case 3:case 4:var D=m.stateNode.containerInfo,K=Kl(i);So(i,K,D);break;default:throw Error(n(161))}}catch(te){rt(i,i.return,te)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function $c(i,o,c){Re=i,eu(i)}function eu(i,o,c){for(var m=(i.mode&1)!==0;Re!==null;){var P=Re,C=P.child;if(P.tag===22&&m){var D=P.memoizedState!==null||Hi;if(!D){var K=P.alternate,te=K!==null&&K.memoizedState!==null||vt;K=Hi;var he=vt;if(Hi=D,(vt=te)&&!he)for(Re=P;Re!==null;)D=Re,te=D.child,D.tag===22&&D.memoizedState!==null?ru(P):te!==null?(te.return=D,Re=te):ru(P);for(;C!==null;)Re=C,eu(C),C=C.sibling;Re=P,Hi=K,vt=he}tu(i)}else(P.subtreeFlags&8772)!==0&&C!==null?(C.return=P,Re=C):tu(i)}}function tu(i){for(;Re!==null;){var o=Re;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:vt||zi(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!vt)if(c===null)m.componentDidMount();else{var P=o.elementType===o.type?c.memoizedProps:Wt(o.type,c.memoizedProps);m.componentDidUpdate(P,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var C=o.updateQueue;C!==null&&nl(o,C,m);break;case 3:var D=o.updateQueue;if(D!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}nl(o,D,c)}break;case 5:var K=o.stateNode;if(c===null&&o.flags&4){c=K;var te=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&c.focus();break;case"img":te.src&&(c.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var he=o.alternate;if(he!==null){var Pe=he.memoizedState;if(Pe!==null){var xe=Pe.dehydrated;xe!==null&&Br(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}vt||o.flags&512&&Eo(o)}catch(ye){rt(o,o.return,ye)}}if(o===i){Re=null;break}if(c=o.sibling,c!==null){c.return=o.return,Re=c;break}Re=o.return}}function nu(i){for(;Re!==null;){var o=Re;if(o===i){Re=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Re=c;break}Re=o.return}}function ru(i){for(;Re!==null;){var o=Re;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{zi(4,o)}catch(te){rt(o,c,te)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var P=o.return;try{m.componentDidMount()}catch(te){rt(o,P,te)}}var C=o.return;try{Eo(o)}catch(te){rt(o,C,te)}break;case 5:var D=o.return;try{Eo(o)}catch(te){rt(o,D,te)}}}catch(te){rt(o,o.return,te)}if(o===i){Re=null;break}var K=o.sibling;if(K!==null){K.return=o.return,Re=K;break}Re=o.return}}var Wc=Math.ceil,$i=B.ReactCurrentDispatcher,To=B.ReactCurrentOwner,Ut=B.ReactCurrentBatchConfig,Ge=0,ht=null,ot=null,mt=0,Mt=0,vr=wn(0),ut=0,Qr=null,Jn=0,Wi=0,Ao=0,Zr=null,Bt=null,wo=0,xr=1/0,gn=null,ji=!1,Ro=null,bn=null,Ji=!1,Mn=null,Yi=0,ei=0,Bo=null,Ki=-1,Xi=0;function Et(){return(Ge&6)!==0?it():Ki!==-1?Ki:Ki=it()}function Nn(i){return(i.mode&1)===0?1:(Ge&2)!==0&&mt!==0?mt&-mt:Bc.transition!==null?(Xi===0&&(Xi=Ko()),Xi):(i=$e,i!==0||(i=window.event,i=i===void 0?16:sa(i.type)),i)}function Yt(i,o,c,m){if(50<ei)throw ei=0,Bo=null,Error(n(185));Cr(i,c,m),((Ge&2)===0||i!==ht)&&(i===ht&&((Ge&2)===0&&(Wi|=c),ut===4&&Fn(i,mt)),Vt(i,m),c===1&&Ge===0&&(o.mode&1)===0&&(xr=it()+500,Ti&&Bn()))}function Vt(i,o){var c=i.callbackNode;Bu(i,o);var m=oi(i,i===ht?mt:0);if(m===0)c!==null&&jo(c),i.callbackNode=null,i.callbackPriority=0;else if(o=m&-m,i.callbackPriority!==o){if(c!=null&&jo(c),o===1)i.tag===0?Rc(su.bind(null,i)):za(su.bind(null,i)),Cc(function(){(Ge&6)===0&&Bn()}),c=null;else{switch(Xo(m)){case 1:c=as;break;case 4:c=Jo;break;case 16:c=ni;break;case 536870912:c=Yo;break;default:c=ni}c=fu(c,iu.bind(null,i))}i.callbackPriority=o,i.callbackNode=c}}function iu(i,o){if(Ki=-1,Xi=0,(Ge&6)!==0)throw Error(n(327));var c=i.callbackNode;if(_r()&&i.callbackNode!==c)return null;var m=oi(i,i===ht?mt:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||o)o=Qi(i,m);else{o=m;var P=Ge;Ge|=2;var C=au();(ht!==i||mt!==o)&&(gn=null,xr=it()+500,Kn(i,o));do try{Yc();break}catch(K){ou(i,K)}while(!0);Ws(),$i.current=C,Ge=P,ot!==null?o=0:(ht=null,mt=0,o=ut)}if(o!==0){if(o===2&&(P=ls(i),P!==0&&(m=P,o=Vo(i,P))),o===1)throw c=Qr,Kn(i,0),Fn(i,m),Vt(i,it()),c;if(o===6)Fn(i,m);else{if(P=i.current.alternate,(m&30)===0&&!jc(P)&&(o=Qi(i,m),o===2&&(C=ls(i),C!==0&&(m=C,o=Vo(i,C))),o===1))throw c=Qr,Kn(i,0),Fn(i,m),Vt(i,it()),c;switch(i.finishedWork=P,i.finishedLanes=m,o){case 0:case 1:throw Error(n(345));case 2:Xn(i,Bt,gn);break;case 3:if(Fn(i,m),(m&130023424)===m&&(o=wo+500-it(),10<o)){if(oi(i,0)!==0)break;if(P=i.suspendedLanes,(P&m)!==m){Et(),i.pingedLanes|=i.suspendedLanes&P;break}i.timeoutHandle=Ns(Xn.bind(null,i,Bt,gn),o);break}Xn(i,Bt,gn);break;case 4:if(Fn(i,m),(m&4194240)===m)break;for(o=i.eventTimes,P=-1;0<m;){var D=31-Ht(m);C=1<<D,D=o[D],D>P&&(P=D),m&=~C}if(m=P,m=it()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Wc(m/1960))-m,10<m){i.timeoutHandle=Ns(Xn.bind(null,i,Bt,gn),m);break}Xn(i,Bt,gn);break;case 5:Xn(i,Bt,gn);break;default:throw Error(n(329))}}}return Vt(i,it()),i.callbackNode===c?iu.bind(null,i):null}function Vo(i,o){var c=Zr;return i.current.memoizedState.isDehydrated&&(Kn(i,o).flags|=256),i=Qi(i,o),i!==2&&(o=Bt,Bt=c,o!==null&&ko(o)),i}function ko(i){Bt===null?Bt=i:Bt.push.apply(Bt,i)}function jc(i){for(var o=i;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var P=c[m],C=P.getSnapshot;P=P.value;try{if(!zt(C(),P))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fn(i,o){for(o&=~Ao,o&=~Wi,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var c=31-Ht(o),m=1<<c;i[c]=-1,o&=~m}}function su(i){if((Ge&6)!==0)throw Error(n(327));_r();var o=oi(i,0);if((o&1)===0)return Vt(i,it()),null;var c=Qi(i,o);if(i.tag!==0&&c===2){var m=ls(i);m!==0&&(o=m,c=Vo(i,m))}if(c===1)throw c=Qr,Kn(i,0),Fn(i,o),Vt(i,it()),c;if(c===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Xn(i,Bt,gn),Vt(i,it()),null}function Io(i,o){var c=Ge;Ge|=1;try{return i(o)}finally{Ge=c,Ge===0&&(xr=it()+500,Ti&&Bn())}}function Yn(i){Mn!==null&&Mn.tag===0&&(Ge&6)===0&&_r();var o=Ge;Ge|=1;var c=Ut.transition,m=$e;try{if(Ut.transition=null,$e=1,i)return i()}finally{$e=m,Ut.transition=c,Ge=o,(Ge&6)===0&&Bn()}}function bo(){Mt=vr.current,Xe(vr)}function Kn(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,Sc(c)),ot!==null)for(c=ot.return;c!==null;){var m=c;switch(qs(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Si();break;case 3:gr(),Xe(At),Xe(gt),eo();break;case 5:Qs(m);break;case 4:gr();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:js(m.type._context);break;case 22:case 23:bo()}c=c.return}if(ht=i,ot=i=Dn(i.current,null),mt=Mt=o,ut=0,Qr=null,Ao=Wi=Jn=0,Bt=Zr=null,$n!==null){for(o=0;o<$n.length;o++)if(c=$n[o],m=c.interleaved,m!==null){c.interleaved=null;var P=m.next,C=c.pending;if(C!==null){var D=C.next;C.next=P,m.next=D}c.pending=m}$n=null}return i}function ou(i,o){do{var c=ot;try{if(Ws(),Ni.current=Oi,Fi){for(var m=nt.memoizedState;m!==null;){var P=m.queue;P!==null&&(P.pending=null),m=m.next}Fi=!1}if(jn=0,dt=lt=nt=null,Wr=!1,jr=0,To.current=null,c===null||c.return===null){ut=1,Qr=o,ot=null;break}e:{var C=i,D=c.return,K=c,te=o;if(o=mt,K.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var he=te,Pe=K,xe=Pe.tag;if((Pe.mode&1)===0&&(xe===0||xe===11||xe===15)){var ye=Pe.alternate;ye?(Pe.updateQueue=ye.updateQueue,Pe.memoizedState=ye.memoizedState,Pe.lanes=ye.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var we=kl(D);if(we!==null){we.flags&=-257,Il(we,D,K,C,o),we.mode&1&&Vl(C,he,o),o=we,te=he;var Ve=o.updateQueue;if(Ve===null){var ke=new Set;ke.add(te),o.updateQueue=ke}else Ve.add(te);break e}else{if((o&1)===0){Vl(C,he,o),Mo();break e}te=Error(n(426))}}else if(Ze&&K.mode&1){var st=kl(D);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),Il(st,D,K,C,o),zs(yr(te,K));break e}}C=te=yr(te,K),ut!==4&&(ut=2),Zr===null?Zr=[C]:Zr.push(C),C=D;do{switch(C.tag){case 3:C.flags|=65536,o&=-o,C.lanes|=o;var ue=Rl(C,te,o);tl(C,ue);break e;case 1:K=te;var ie=C.type,ce=C.stateNode;if((C.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(bn===null||!bn.has(ce)))){C.flags|=65536,o&=-o,C.lanes|=o;var Ee=Bl(C,K,o);tl(C,Ee);break e}}C=C.return}while(C!==null)}uu(c)}catch(be){o=be,ot===c&&c!==null&&(ot=c=c.return);continue}break}while(!0)}function au(){var i=$i.current;return $i.current=Oi,i===null?Oi:i}function Mo(){(ut===0||ut===3||ut===2)&&(ut=4),ht===null||(Jn&268435455)===0&&(Wi&268435455)===0||Fn(ht,mt)}function Qi(i,o){var c=Ge;Ge|=2;var m=au();(ht!==i||mt!==o)&&(gn=null,Kn(i,o));do try{Jc();break}catch(P){ou(i,P)}while(!0);if(Ws(),Ge=c,$i.current=m,ot!==null)throw Error(n(261));return ht=null,mt=0,ut}function Jc(){for(;ot!==null;)lu(ot)}function Yc(){for(;ot!==null&&!xu();)lu(ot)}function lu(i){var o=hu(i.alternate,i,Mt);i.memoizedProps=i.pendingProps,o===null?uu(i):ot=o,To.current=null}function uu(i){var o=i;do{var c=o.alternate;if(i=o.return,(o.flags&32768)===0){if(c=qc(c,o,Mt),c!==null){ot=c;return}}else{if(c=Gc(c,o),c!==null){c.flags&=32767,ot=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ut=6,ot=null;return}}if(o=o.sibling,o!==null){ot=o;return}ot=o=i}while(o!==null);ut===0&&(ut=5)}function Xn(i,o,c){var m=$e,P=Ut.transition;try{Ut.transition=null,$e=1,Kc(i,o,c,m)}finally{Ut.transition=P,$e=m}return null}function Kc(i,o,c,m){do _r();while(Mn!==null);if((Ge&6)!==0)throw Error(n(327));c=i.finishedWork;var P=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var C=c.lanes|c.childLanes;if(Vu(i,C),i===ht&&(ot=ht=null,mt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Ji||(Ji=!0,fu(ni,function(){return _r(),null})),C=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||C){C=Ut.transition,Ut.transition=null;var D=$e;$e=1;var K=Ge;Ge|=4,To.current=null,zc(i,c),Zl(c,i),gc(bs),ui=!!Is,bs=Is=null,i.current=c,$c(c),_u(),Ge=K,$e=D,Ut.transition=C}else i.current=c;if(Ji&&(Ji=!1,Mn=i,Yi=P),C=i.pendingLanes,C===0&&(bn=null),Cu(c.stateNode),Vt(i,it()),o!==null)for(m=i.onRecoverableError,c=0;c<o.length;c++)P=o[c],m(P.value,{componentStack:P.stack,digest:P.digest});if(ji)throw ji=!1,i=Ro,Ro=null,i;return(Yi&1)!==0&&i.tag!==0&&_r(),C=i.pendingLanes,(C&1)!==0?i===Bo?ei++:(ei=0,Bo=i):ei=0,Bn(),null}function _r(){if(Mn!==null){var i=Xo(Yi),o=Ut.transition,c=$e;try{if(Ut.transition=null,$e=16>i?16:i,Mn===null)var m=!1;else{if(i=Mn,Mn=null,Yi=0,(Ge&6)!==0)throw Error(n(331));var P=Ge;for(Ge|=4,Re=i.current;Re!==null;){var C=Re,D=C.child;if((Re.flags&16)!==0){var K=C.deletions;if(K!==null){for(var te=0;te<K.length;te++){var he=K[te];for(Re=he;Re!==null;){var Pe=Re;switch(Pe.tag){case 0:case 11:case 15:Xr(8,Pe,C)}var xe=Pe.child;if(xe!==null)xe.return=Pe,Re=xe;else for(;Re!==null;){Pe=Re;var ye=Pe.sibling,we=Pe.return;if(Jl(Pe),Pe===he){Re=null;break}if(ye!==null){ye.return=we,Re=ye;break}Re=we}}}var Ve=C.alternate;if(Ve!==null){var ke=Ve.child;if(ke!==null){Ve.child=null;do{var st=ke.sibling;ke.sibling=null,ke=st}while(ke!==null)}}Re=C}}if((C.subtreeFlags&2064)!==0&&D!==null)D.return=C,Re=D;else e:for(;Re!==null;){if(C=Re,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Xr(9,C,C.return)}var ue=C.sibling;if(ue!==null){ue.return=C.return,Re=ue;break e}Re=C.return}}var ie=i.current;for(Re=ie;Re!==null;){D=Re;var ce=D.child;if((D.subtreeFlags&2064)!==0&&ce!==null)ce.return=D,Re=ce;else e:for(D=ie;Re!==null;){if(K=Re,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:zi(9,K)}}catch(be){rt(K,K.return,be)}if(K===D){Re=null;break e}var Ee=K.sibling;if(Ee!==null){Ee.return=K.return,Re=Ee;break e}Re=K.return}}if(Ge=P,Bn(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(ri,i)}catch{}m=!0}return m}finally{$e=c,Ut.transition=o}}return!1}function cu(i,o,c){o=yr(c,o),o=Rl(i,o,1),i=kn(i,o,1),o=Et(),i!==null&&(Cr(i,1,o),Vt(i,o))}function rt(i,o,c){if(i.tag===3)cu(i,i,c);else for(;o!==null;){if(o.tag===3){cu(o,i,c);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(bn===null||!bn.has(m))){i=yr(c,i),i=Bl(o,i,1),o=kn(o,i,1),i=Et(),o!==null&&(Cr(o,1,i),Vt(o,i));break}}o=o.return}}function Xc(i,o,c){var m=i.pingCache;m!==null&&m.delete(o),o=Et(),i.pingedLanes|=i.suspendedLanes&c,ht===i&&(mt&c)===c&&(ut===4||ut===3&&(mt&130023424)===mt&&500>it()-wo?Kn(i,0):Ao|=c),Vt(i,o)}function du(i,o){o===0&&((i.mode&1)===0?o=1:(o=si,si<<=1,(si&130023424)===0&&(si=4194304)));var c=Et();i=fn(i,o),i!==null&&(Cr(i,o,c),Vt(i,c))}function Qc(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),du(i,c)}function Zc(i,o){var c=0;switch(i.tag){case 13:var m=i.stateNode,P=i.memoizedState;P!==null&&(c=P.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(o),du(i,c)}var hu;hu=function(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps||At.current)Rt=!0;else{if((i.lanes&c)===0&&(o.flags&128)===0)return Rt=!1,Uc(i,o,c);Rt=(i.flags&131072)!==0}else Rt=!1,Ze&&(o.flags&1048576)!==0&&$a(o,wi,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;Gi(i,o),i=o.pendingProps;var P=ur(o,gt.current);mr(o,c),P=ro(null,o,m,i,P,c);var C=io();return o.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,wt(m)?(C=!0,Ci(o)):C=!1,o.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Ks(o),P.updater=Ui,o.stateNode=P,P._reactInternals=o,co(o,m,i,c),o=mo(null,o,m,!0,C,c)):(o.tag=0,Ze&&C&&Us(o),_t(null,o,P,c),o=o.child),o;case 16:m=o.elementType;e:{switch(Gi(i,o),i=o.pendingProps,P=m._init,m=P(m._payload),o.type=m,P=o.tag=td(m),i=Wt(m,i),P){case 0:o=po(null,o,m,i,c);break e;case 1:o=Ll(null,o,m,i,c);break e;case 11:o=bl(null,o,m,i,c);break e;case 14:o=Ml(null,o,m,Wt(m.type,i),c);break e}throw Error(n(306,m,""))}return o;case 0:return m=o.type,P=o.pendingProps,P=o.elementType===m?P:Wt(m,P),po(i,o,m,P,c);case 1:return m=o.type,P=o.pendingProps,P=o.elementType===m?P:Wt(m,P),Ll(i,o,m,P,c);case 3:e:{if(Ol(o),i===null)throw Error(n(387));m=o.pendingProps,C=o.memoizedState,P=C.element,el(i,o),bi(o,m,null,c);var D=o.memoizedState;if(m=D.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){P=yr(Error(n(423)),o),o=Ul(i,o,m,c,P);break e}else if(m!==P){P=yr(Error(n(424)),o),o=Ul(i,o,m,c,P);break e}else for(bt=An(o.stateNode.containerInfo.firstChild),It=o,Ze=!0,$t=null,c=Qa(o,null,m,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(hr(),m===P){o=mn(i,o,c);break e}_t(i,o,m,c)}o=o.child}return o;case 5:return rl(o),i===null&&Hs(o),m=o.type,P=o.pendingProps,C=i!==null?i.memoizedProps:null,D=P.children,Ms(m,P)?D=null:C!==null&&Ms(m,C)&&(o.flags|=32),Dl(i,o),_t(i,o,D,c),o.child;case 6:return i===null&&Hs(o),null;case 13:return ql(i,o,c);case 4:return Xs(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=fr(o,null,m,c):_t(i,o,m,c),o.child;case 11:return m=o.type,P=o.pendingProps,P=o.elementType===m?P:Wt(m,P),bl(i,o,m,P,c);case 7:return _t(i,o,o.pendingProps,c),o.child;case 8:return _t(i,o,o.pendingProps.children,c),o.child;case 12:return _t(i,o,o.pendingProps.children,c),o.child;case 10:e:{if(m=o.type._context,P=o.pendingProps,C=o.memoizedProps,D=P.value,Ye(Vi,m._currentValue),m._currentValue=D,C!==null)if(zt(C.value,D)){if(C.children===P.children&&!At.current){o=mn(i,o,c);break e}}else for(C=o.child,C!==null&&(C.return=o);C!==null;){var K=C.dependencies;if(K!==null){D=C.child;for(var te=K.firstContext;te!==null;){if(te.context===m){if(C.tag===1){te=pn(-1,c&-c),te.tag=2;var he=C.updateQueue;if(he!==null){he=he.shared;var Pe=he.pending;Pe===null?te.next=te:(te.next=Pe.next,Pe.next=te),he.pending=te}}C.lanes|=c,te=C.alternate,te!==null&&(te.lanes|=c),Js(C.return,c,o),K.lanes|=c;break}te=te.next}}else if(C.tag===10)D=C.type===o.type?null:C.child;else if(C.tag===18){if(D=C.return,D===null)throw Error(n(341));D.lanes|=c,K=D.alternate,K!==null&&(K.lanes|=c),Js(D,c,o),D=C.sibling}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===o){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}_t(i,o,P.children,c),o=o.child}return o;case 9:return P=o.type,m=o.pendingProps.children,mr(o,c),P=Lt(P),m=m(P),o.flags|=1,_t(i,o,m,c),o.child;case 14:return m=o.type,P=Wt(m,o.pendingProps),P=Wt(m.type,P),Ml(i,o,m,P,c);case 15:return Nl(i,o,o.type,o.pendingProps,c);case 17:return m=o.type,P=o.pendingProps,P=o.elementType===m?P:Wt(m,P),Gi(i,o),o.tag=1,wt(m)?(i=!0,Ci(o)):i=!1,mr(o,c),Al(o,m,P),co(o,m,P,c),mo(null,o,m,!0,i,c);case 19:return Hl(i,o,c);case 22:return Fl(i,o,c)}throw Error(n(156,o.tag))};function fu(i,o){return Wo(i,o)}function ed(i,o,c,m){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(i,o,c,m){return new ed(i,o,c,m)}function No(i){return i=i.prototype,!(!i||!i.isReactComponent)}function td(i){if(typeof i=="function")return No(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===J)return 14}return 2}function Dn(i,o){var c=i.alternate;return c===null?(c=qt(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Zi(i,o,c,m,P,C){var D=2;if(m=i,typeof i=="function")No(i)&&(D=1);else if(typeof i=="string")D=5;else e:switch(i){case z:return Qn(c.children,P,C,o);case V:D=8,P|=8;break;case b:return i=qt(12,c,o,P|2),i.elementType=b,i.lanes=C,i;case ee:return i=qt(13,c,o,P),i.elementType=ee,i.lanes=C,i;case $:return i=qt(19,c,o,P),i.elementType=$,i.lanes=C,i;case Z:return es(c,P,C,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:D=10;break e;case H:D=9;break e;case j:D=11;break e;case J:D=14;break e;case Q:D=16,m=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return o=qt(D,c,o,P),o.elementType=i,o.type=m,o.lanes=C,o}function Qn(i,o,c,m){return i=qt(7,i,m,o),i.lanes=c,i}function es(i,o,c,m){return i=qt(22,i,m,o),i.elementType=Z,i.lanes=c,i.stateNode={isHidden:!1},i}function Fo(i,o,c){return i=qt(6,i,null,o),i.lanes=c,i}function Do(i,o,c){return o=qt(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function nd(i,o,c,m,P){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=us(0),this.expirationTimes=us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.identifierPrefix=m,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function Lo(i,o,c,m,P,C,D,K,te){return i=new nd(i,o,c,K,te),o===1?(o=1,C===!0&&(o|=8)):o=0,C=qt(3,null,null,o),i.current=C,C.stateNode=i,C.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ks(C),i}function rd(i,o,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:m==null?null:""+m,children:i,containerInfo:o,implementation:c}}function pu(i){if(!i)return Rn;i=i._reactInternals;e:{if(Un(i)!==i||i.tag!==1)throw Error(n(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(wt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(i.tag===1){var c=i.type;if(wt(c))return Ga(i,c,o)}return o}function mu(i,o,c,m,P,C,D,K,te){return i=Lo(c,m,!0,i,P,C,D,K,te),i.context=pu(null),c=i.current,m=Et(),P=Nn(c),C=pn(m,P),C.callback=o??null,kn(c,C,P),i.current.lanes=P,Cr(i,P,m),Vt(i,m),i}function ts(i,o,c,m){var P=o.current,C=Et(),D=Nn(P);return c=pu(c),o.context===null?o.context=c:o.pendingContext=c,o=pn(C,D),o.payload={element:i},m=m===void 0?null:m,m!==null&&(o.callback=m),i=kn(P,o,D),i!==null&&(Yt(i,P,D,C),Ii(i,P,D)),D}function ns(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function gu(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Oo(i,o){gu(i,o),(i=i.alternate)&&gu(i,o)}function id(){return null}var yu=typeof reportError=="function"?reportError:function(i){console.error(i)};function Uo(i){this._internalRoot=i}rs.prototype.render=Uo.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));ts(i,o,null,null)},rs.prototype.unmount=Uo.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Yn(function(){ts(null,i,null,null)}),o[un]=null}};function rs(i){this._internalRoot=i}rs.prototype.unstable_scheduleHydration=function(i){if(i){var o=ea();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Sn.length&&o!==0&&o<Sn[c].priority;c++);Sn.splice(c,0,i),c===0&&ra(i)}};function qo(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function is(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Pu(){}function sd(i,o,c,m,P){if(P){if(typeof m=="function"){var C=m;m=function(){var he=ns(D);C.call(he)}}var D=mu(o,m,i,0,null,!1,!1,"",Pu);return i._reactRootContainer=D,i[un]=D.current,Lr(i.nodeType===8?i.parentNode:i),Yn(),D}for(;P=i.lastChild;)i.removeChild(P);if(typeof m=="function"){var K=m;m=function(){var he=ns(te);K.call(he)}}var te=Lo(i,0,!1,null,null,!1,!1,"",Pu);return i._reactRootContainer=te,i[un]=te.current,Lr(i.nodeType===8?i.parentNode:i),Yn(function(){ts(o,te,c,m)}),te}function ss(i,o,c,m,P){var C=c._reactRootContainer;if(C){var D=C;if(typeof P=="function"){var K=P;P=function(){var te=ns(D);K.call(te)}}ts(o,D,i,P)}else D=sd(c,o,i,P,m);return ns(D)}Qo=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var c=Sr(o.pendingLanes);c!==0&&(cs(o,c|1),Vt(o,it()),(Ge&6)===0&&(xr=it()+500,Bn()))}break;case 13:Yn(function(){var m=fn(i,1);if(m!==null){var P=Et();Yt(m,i,1,P)}}),Oo(i,1)}},ds=function(i){if(i.tag===13){var o=fn(i,134217728);if(o!==null){var c=Et();Yt(o,i,134217728,c)}Oo(i,134217728)}},Zo=function(i){if(i.tag===13){var o=Nn(i),c=fn(i,o);if(c!==null){var m=Et();Yt(c,i,o,m)}Oo(i,o)}},ea=function(){return $e},ta=function(i,o){var c=$e;try{return $e=i,o()}finally{$e=c}},ae=function(i,o,c){switch(o){case"input":if(Se(i,c),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var m=c[o];if(m!==i&&m.form===i.form){var P=Ei(m);if(!P)throw Error(n(90));le(m),Se(m,P)}}}break;case"textarea":De(i,c);break;case"select":o=c.value,o!=null&&_e(i,!!c.multiple,o,!1)}},on=Io,Xt=Yn;var od={usingClientEntryPoint:!1,Events:[qr,ar,Ei,ze,Gt,Io]},ti={findFiberByHostInstance:qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ad={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=zo(i),i===null?null:i.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||id,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var os=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!os.isDisabled&&os.supportsFiber)try{ri=os.inject(ad),Zt=os}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=od,reactDom_production_min.createPortal=function(i,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qo(o))throw Error(n(200));return rd(i,o,null,c)},reactDom_production_min.createRoot=function(i,o){if(!qo(i))throw Error(n(299));var c=!1,m="",P=yu;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(P=o.onRecoverableError)),o=Lo(i,1,!1,null,null,c,!1,m,P),i[un]=o.current,Lr(i.nodeType===8?i.parentNode:i),new Uo(o)},reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=zo(o),i=i===null?null:i.stateNode,i},reactDom_production_min.flushSync=function(i){return Yn(i)},reactDom_production_min.hydrate=function(i,o,c){if(!is(o))throw Error(n(200));return ss(null,i,o,!0,c)},reactDom_production_min.hydrateRoot=function(i,o,c){if(!qo(i))throw Error(n(405));var m=c!=null&&c.hydratedSources||null,P=!1,C="",D=yu;if(c!=null&&(c.unstable_strictMode===!0&&(P=!0),c.identifierPrefix!==void 0&&(C=c.identifierPrefix),c.onRecoverableError!==void 0&&(D=c.onRecoverableError)),o=mu(o,null,i,1,c??null,P,!1,C,D),i[un]=o.current,Lr(i),m)for(i=0;i<m.length;i++)c=m[i],P=c._getVersion,P=P(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,P]:o.mutableSourceEagerHydrationData.push(c,P);return new rs(o)},reactDom_production_min.render=function(i,o,c){if(!is(o))throw Error(n(200));return ss(null,i,o,!1,c)},reactDom_production_min.unmountComponentAtNode=function(i){if(!is(i))throw Error(n(40));return i._reactRootContainer?(Yn(function(){ss(null,null,i,!1,function(){i._reactRootContainer=null,i[un]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Io,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,o,c,m){if(!is(c))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return ss(i,o,c,!1,m)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var t=requireReactDom();return client.createRoot=t.createRoot,client.hydrateRoot=t.hydrateRoot,client}var clientExports=requireClient();requireReactDom();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_extends$2.apply(this,arguments)}var Action;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:l,hash:d}=r.location;return createLocation("",{pathname:a,search:l,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:createPath(s)}return getUrlBasedHistory(e,n,null,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,n,r){return n===void 0&&(n=null),_extends$2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:n,key:e&&e.key||r||createKey()})}function createPath(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function parsePath(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,d=Action.Pop,h=null,u=f();u==null&&(u=0,l.replaceState(_extends$2({},l.state,{idx:u}),""));function f(){return(l.state||{idx:null}).idx}function p(){d=Action.Pop;let w=f(),k=w==null?null:w-u;u=w,h&&h({action:d,location:S.location,delta:k})}function g(w,k){d=Action.Push;let N=createLocation(S.location,w,k);u=f()+1;let R=getHistoryState(N,u),B=S.createHref(N);try{l.pushState(R,"",B)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;s.location.assign(B)}a&&h&&h({action:d,location:S.location,delta:1})}function y(w,k){d=Action.Replace;let N=createLocation(S.location,w,k);u=f();let R=getHistoryState(N,u),B=S.createHref(N);l.replaceState(R,"",B),a&&h&&h({action:d,location:S.location,delta:0})}function x(w){let k=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof w=="string"?w:createPath(w);return N=N.replace(/ $/,"%20"),invariant(k,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,k)}let S={get action(){return d},get location(){return t(s,l)},listen(w){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(PopStateEventType,p),h=w,()=>{s.removeEventListener(PopStateEventType,p),h=null}},createHref(w){return e(s,w)},createURL:x,encodeLocation(w){let k=x(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:y,go(w){return l.go(w)}};return S}var ResultType;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ResultType||(ResultType={}));function matchRoutes(t,e,n){return n===void 0&&(n="/"),matchRoutesImpl(t,e,n)}function matchRoutesImpl(t,e,n,r){let s=typeof e=="string"?parsePath(e):e,a=stripBasename(s.pathname||"/",n);if(a==null)return null;let l=flattenRoutes(t);rankRouteBranches(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let u=decodePath(a);d=matchRouteBranch(l[h],u)}return d}function flattenRoutes(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,l,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};h.relativePath.startsWith("/")&&(invariant(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let u=joinPaths([r,h.relativePath]),f=n.concat(h);a.children&&a.children.length>0&&(invariant(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),flattenRoutes(a.children,e,f,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:computeScore(u,a.index),routesMeta:f})};return t.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,l);else for(let h of explodeOptionalSegments(a.path))s(a,l,h)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=explodeOptionalSegments(r.join("/")),d=[];return d.push(...l.map(h=>h===""?a:[a,h].join("/"))),s&&d.push(...l),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:compareIndexes(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let n=t.split("/"),r=n.length;return n.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),n.filter(s=>!isSplat(s)).reduce((s,a)=>s+(paramRe.test(a)?dynamicSegmentValue:a===""?emptySegmentValue:staticSegmentValue),r)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,n){let{routesMeta:r}=t,s={},a="/",l=[];for(let d=0;d<r.length;++d){let h=r[d],u=d===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:u},f),g=h.route;if(!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:joinPaths([a,p.pathname]),pathnameBase:normalizePathname(joinPaths([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=joinPaths([a,p.pathnameBase]))}return l}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=compilePath(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((u,f,p)=>{let{paramName:g,isOptional:y}=f;if(g==="*"){let S=d[p]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const x=d[p];return y&&!x?u[g]=void 0:u[g]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:t}}function compilePath(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function resolvePath(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?parsePath(t):t;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,e):e,search:normalizeSearch(r),hash:normalizeHash(s)}}function resolvePathname(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t,e){let n=getPathContributingMatches(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function resolveTo(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=parsePath(t):(s=_extends$2({},t),invariant(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,d;if(l==null)d=n;else{let p=e.length-1;if(!r&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}d=p>=0?e[p]:"/"}let h=resolvePath(s,d),u=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(u||f)&&(h.pathname+="/"),h}const joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(t,e){let{relative:n}=e===void 0?{}:e;useInRouterContext()||invariant(!1);let{basename:r,navigator:s}=reactExports.useContext(NavigationContext),{hash:a,pathname:l,search:d}=useResolvedPath(t,{relative:n}),h=l;return r!=="/"&&(h=l==="/"?r:joinPaths([r,l])),s.createHref({pathname:h,search:d,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let t=reactExports.useContext(DataRouterContext),{basename:e,future:n,navigator:r}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),l=JSON.stringify(getResolveToMatches(s,n.v7_relativeSplatPath)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{d.current=!0}),reactExports.useCallback(function(u,f){if(f===void 0&&(f={}),!d.current)return;if(typeof u=="number"){r.go(u);return}let p=resolveTo(u,JSON.parse(l),a,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:joinPaths([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,l,a,t])}function useResolvedPath(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),l=JSON.stringify(getResolveToMatches(s,r.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,n,r){useInRouterContext()||invariant(!1);let{navigator:s}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),l=a[a.length-1],d=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let u=useLocation(),f;if(e){var p;let w=typeof e=="string"?parsePath(e):e;h==="/"||(p=w.pathname)!=null&&p.startsWith(h)||invariant(!1),f=w}else f=u;let g=f.pathname||"/",y=g;if(h!=="/"){let w=h.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=matchRoutes(t,{pathname:y}),S=_renderMatches(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:joinPaths([h,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:joinPaths([h,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,n,r);return e&&S?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Action.Pop}},S):S}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),n?reactExports.createElement("pre",{style:s},n):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(t){let{routeContext:e,match:n,children:r}=t,s=reactExports.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),reactExports.createElement(RouteContext.Provider,{value:e},r)}function _renderMatches(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=(s=n)==null?void 0:s.errors;if(d!=null){let f=l.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);f>=0||invariant(!1),l=l.slice(0,Math.min(l.length,f+1))}let h=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:g,errors:y}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){h=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((f,p,g)=>{let y,x=!1,S=null,w=null;n&&(y=d&&p.route.id?d[p.route.id]:void 0,S=p.route.errorElement||defaultErrorElement,h&&(u<0&&g===0?(warningOnce("route-fallback"),x=!0,w=null):u===g&&(x=!0,w=p.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,g+1)),N=()=>{let R;return y?R=S:x?R=w:p.route.Component?R=reactExports.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=f,reactExports.createElement(RenderedRoute,{match:p,routeContext:{outlet:f,matches:k,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:N(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):N()},null)}var DataRouterHook$1=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(DataRouterHook$1||{}),DataRouterStateHook$1=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(DataRouterStateHook$1||{});function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(t){let e=useRouteContext(),n=e.matches[e.matches.length-1];return n.route.id||invariant(!1),n.route.id}function useRouteError(){var t;let e=reactExports.useContext(RouteErrorContext),n=useDataRouterState(),r=useCurrentRouteId();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function useNavigateStable(){let{router:t}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{n.current=!0}),reactExports.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,_extends$1({fromRouteId:e},a)))},[t,e])}const alreadyWarned$1={};function warningOnce(t,e,n){alreadyWarned$1[t]||(alreadyWarned$1[t]=!0)}function logV6DeprecationWarnings(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Route(t){invariant(!1)}function Router(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Action.Pop,navigator:a,static:l=!1,future:d}=t;useInRouterContext()&&invariant(!1);let h=e.replace(/^\/*/,"/"),u=reactExports.useMemo(()=>({basename:h,navigator:a,static:l,future:_extends$1({v7_relativeSplatPath:!1},d)}),[h,d,a,l]);typeof r=="string"&&(r=parsePath(r));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:x="default"}=r,S=reactExports.useMemo(()=>{let w=stripBasename(f,h);return w==null?null:{location:{pathname:w,search:p,hash:g,state:y,key:x},navigationType:s}},[h,f,p,g,y,x,s]);return S==null?null:reactExports.createElement(NavigationContext.Provider,{value:u},reactExports.createElement(LocationContext.Provider,{children:n,value:S}))}function Routes(t){let{children:e,location:n}=t;return useRoutes(createRoutesFromChildren(e),n)}new Promise(()=>{});function createRoutesFromChildren(t,e){e===void 0&&(e=[]);let n=[];return reactExports.Children.forEach(t,(r,s)=>{if(!reactExports.isValidElement(r))return;let a=[...e,s];if(r.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(r.props.children,a));return}r.type!==Route&&invariant(!1),!r.props.index||!r.props.children||invariant(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=createRoutesFromChildren(r.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(t){let{basename:e,children:n,future:r,window:s}=t,a=reactExports.useRef();a.current==null&&(a.current=createBrowserHistory({window:s,v5Compat:!0}));let l=a.current,[d,h]=reactExports.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},f=reactExports.useCallback(p=>{u&&startTransitionImpl?startTransitionImpl(()=>h(p)):h(p)},[h,u]);return reactExports.useLayoutEffect(()=>l.listen(f),[l,f]),reactExports.useEffect(()=>logV6DeprecationWarnings(r),[r]),reactExports.createElement(Router,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:l,future:r})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:l,state:d,target:h,to:u,preventScrollReset:f,viewTransition:p}=e,g=_objectWithoutPropertiesLoose(e,_excluded),{basename:y}=reactExports.useContext(NavigationContext),x,S=!1;if(typeof u=="string"&&ABSOLUTE_URL_REGEX.test(u)&&(x=u,isBrowser))try{let R=new URL(window.location.href),B=u.startsWith("//")?new URL(R.protocol+u):new URL(u),q=stripBasename(B.pathname,y);B.origin===R.origin&&q!=null?u=q+B.search+B.hash:S=!0}catch{}let w=useHref(u,{relative:s}),k=useLinkClickHandler(u,{replace:l,state:d,target:h,preventScrollReset:f,relative:s,viewTransition:p});function N(R){r&&r(R),R.defaultPrevented||k(R)}return reactExports.createElement("a",_extends({},g,{href:x||w,onClick:S||a?r:N,ref:n,target:h}))});var DataRouterHook;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:l,viewTransition:d}=e===void 0?{}:e,h=useNavigate(),u=useLocation(),f=useResolvedPath(t,{relative:l});return reactExports.useCallback(p=>{if(shouldProcessLinkClick(p,n)){p.preventDefault();let g=r!==void 0?r:createPath(u)===createPath(f);h(t,{replace:g,state:s,preventScrollReset:a,relative:l,viewTransition:d})}},[u,h,f,r,s,n,t,a,l,d])}const greekColumn="/Schedule-Sculptor/assets/greek-column-BPmWnMjY.png",logo="/Schedule-Sculptor/assets/logo-PNohiI9b.png";function Welcome(){const t=useNavigate(),[e,n]=reactExports.useState(!1);reactExports.useEffect(()=>{const s=localStorage.getItem("parsedAuditData");n(!!s)},[]);const r=()=>{t(e?"/dashboard":"/audit")};return jsxRuntimeExports.jsxs("div",{className:"relative min-h-screen font-sans bg-[#FAF8F5] overflow-x-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full w-1/4 hidden lg:flex items-stretch justify-start pl-2 xl:pl-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20 transform scale-x-[-1]"})}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 h-full w-1/4 hidden lg:flex items-stretch justify-end pr-2 xl:pr-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen text-center px-4",children:[jsxRuntimeExports.jsx("img",{src:logo,alt:"Schedule Sculptor Logo",className:"w-40 h-auto mb-8 lg:mb-12"}),jsxRuntimeExports.jsx("h1",{className:"serif-title text-5xl lg:text-6xl font-bold brand-purple mb-4",children:"Welcome to ScheduleSculptor"}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl text-gray-500 mb-10",children:"Simplify your academic planning with clear, interactive degree paths."}),jsxRuntimeExports.jsx("button",{onClick:r,className:"px-8 py-3 bg-purple-700 text-white rounded-lg hover:bg-purple-800 transition-colors text-lg font-medium",children:e?"View Progress":"Get Started"})]})]})}function Layout({children:t}){return jsxRuntimeExports.jsxs("div",{className:"relative min-h-screen font-sans bg-[#FAF8F5] overflow-x-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full w-1/4 hidden lg:flex items-stretch justify-start pl-2 xl:pl-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20 transform scale-x-[-1]"})}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 h-full w-1/4 hidden lg:flex items-stretch justify-end pr-2 xl:pl-10 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:greekColumn,alt:"Decorative Greek column",className:"h-full max-h-[85vh] w-auto max-w-[200px] object-cover opacity-50 translate-y-20"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 pt-5 flex flex-col min-h-screen",children:[jsxRuntimeExports.jsx("header",{className:"main-container py-8 animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b border-gray-300 pb-4",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"serif-title text-2xl font-semibold tracking-wider brand-purple",children:"SCHEDULE SCULPTOR"}),jsxRuntimeExports.jsxs("nav",{className:"hidden md:flex items-center space-x-8 text-sm font-medium text-gray-600",children:[jsxRuntimeExports.jsx(Link,{to:"/audit",className:"hover:text-purple-800 transition-colors",children:"Upload Audit"}),jsxRuntimeExports.jsx(Link,{to:"/dashboard",className:"hover:text-purple-800 transition-colors",children:"Dashboard"}),jsxRuntimeExports.jsx(Link,{to:"/sculpt",className:"hover:text-purple-800 transition-colors",children:"Sculpt your Semester"}),jsxRuntimeExports.jsx(Link,{to:"/ai-assistant",className:"hover:text-purple-800 transition-colors",children:"AI Assistant"})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-grow flex items-center animate-fade-in",style:{animationDelay:"0.2s"},children:jsxRuntimeExports.jsx("main",{className:"main-container",children:t})})]})]})}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(e,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=Se,e.arraysToBytes=Ce,e.assert=T,e.bytesToString=ge,e.createPromiseCapability=Nt,e.createValidAbsoluteUrl=A,e.escapeString=Ue,e.getModificationDate=at,e.getVerbosityLevel=O,e.info=v,e.isArrayBuffer=Kt,e.isArrayEqual=sn,e.isAscii=Me,e.objectFromMap=_e,e.objectSize=Ie,e.setVerbosityLevel=X,e.shadow=M,e.string32=Ae,e.stringToBytes=me,e.stringToPDFString=Be,e.stringToUTF16BEString=qe,e.stringToUTF8String=St,e.unreachable=I,e.utf8StringToString=Ct,e.warn=E,n(2);const r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;const s=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=s;const a=1.35;e.LINE_FACTOR=a;const l=.35;e.LINE_DESCENT_FACTOR=l;const d={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=d;const h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=h;const u="pdfjs_internal_editor_";e.AnnotationEditorPrefix=u;const f={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=f;const p={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=p;const g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=g;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=y;const x={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=x;const S={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=S;const w={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=w;const k={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=k;const N={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=N;const R={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=R;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=B;const q={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=q;const F={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=F;const z={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=z;const V={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=V;const b={O:"PageOpen",C:"PageClose"};e.PageActionEventType=b;const U={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=U;const H={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=H;const j={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=j;const ee={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=ee;const $={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=$;const J={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=J;const Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Q;let Z=j.WARNINGS;function X(pe){Number.isInteger(pe)&&(Z=pe)}function O(){return Z}function v(pe){Z>=j.INFOS&&console.log(`Info: ${pe}`)}function E(pe){Z>=j.WARNINGS&&console.log(`Warning: ${pe}`)}function I(pe){throw new Error(pe)}function T(pe,oe){pe||I(oe)}function _(pe){if(!pe)return!1;switch(pe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function A(pe,oe=null,ae=null){if(!pe)return null;try{if(ae&&typeof pe=="string"){if(ae.addDefaultProtocol&&pe.startsWith("www.")){const Le=pe.match(/\./g);Le&&Le.length>=2&&(pe=`http://${pe}`)}if(ae.tryConvertEncoding)try{pe=St(pe)}catch{}}const Te=oe?new URL(pe,oe):new URL(pe);if(_(Te))return Te}catch{}return null}function M(pe,oe,ae){return Object.defineProperty(pe,oe,{value:ae,enumerable:!0,configurable:!0,writable:!1}),ae}const L=(function(){function oe(ae,Te){this.constructor===oe&&I("Cannot initialize BaseException."),this.message=ae,this.name=Te}return oe.prototype=new Error,oe.constructor=oe,oe})();e.BaseException=L;class G extends L{constructor(oe,ae){super(oe,"PasswordException"),this.code=ae}}e.PasswordException=G;class W extends L{constructor(oe,ae){super(oe,"UnknownErrorException"),this.details=ae}}e.UnknownErrorException=W;class Y extends L{constructor(oe){super(oe,"InvalidPDFException")}}e.InvalidPDFException=Y;class se extends L{constructor(oe){super(oe,"MissingPDFException")}}e.MissingPDFException=se;class le extends L{constructor(oe,ae){super(oe,"UnexpectedResponseException"),this.status=ae}}e.UnexpectedResponseException=le;class ne extends L{constructor(oe){super(oe,"FormatError")}}e.FormatError=ne;class de extends L{constructor(oe){super(oe,"AbortException")}}e.AbortException=de;function ge(pe){(typeof pe!="object"||pe===null||pe.length===void 0)&&I("Invalid argument for bytesToString");const oe=pe.length,ae=8192;if(oe<ae)return String.fromCharCode.apply(null,pe);const Te=[];for(let Le=0;Le<oe;Le+=ae){const je=Math.min(Le+ae,oe),ze=pe.subarray(Le,je);Te.push(String.fromCharCode.apply(null,ze))}return Te.join("")}function me(pe){typeof pe!="string"&&I("Invalid argument for stringToBytes");const oe=pe.length,ae=new Uint8Array(oe);for(let Te=0;Te<oe;++Te)ae[Te]=pe.charCodeAt(Te)&255;return ae}function Se(pe){if(pe.length!==void 0)return pe.length;if(pe.byteLength!==void 0)return pe.byteLength;I("Invalid argument for arrayByteLength")}function Ce(pe){const oe=pe.length;if(oe===1&&pe[0]instanceof Uint8Array)return pe[0];let ae=0;for(let je=0;je<oe;je++)ae+=Se(pe[je]);let Te=0;const Le=new Uint8Array(ae);for(let je=0;je<oe;je++){let ze=pe[je];ze instanceof Uint8Array||(typeof ze=="string"?ze=me(ze):ze=new Uint8Array(ze));const Gt=ze.byteLength;Le.set(ze,Te),Te+=Gt}return Le}function Ae(pe){return String.fromCharCode(pe>>24&255,pe>>16&255,pe>>8&255,pe&255)}function Ie(pe){return Object.keys(pe).length}function _e(pe){const oe=Object.create(null);for(const[ae,Te]of pe)oe[ae]=Te;return oe}function Je(){const pe=new Uint8Array(4);return pe[0]=1,new Uint32Array(pe.buffer,0,1)[0]===1}function et(){try{return new Function(""),!0}catch{return!1}}class De{static get isLittleEndian(){return M(this,"isLittleEndian",Je())}static get isEvalSupported(){return M(this,"isEvalSupported",et())}static get isOffscreenCanvasSupported(){return M(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=De;const We=[...Array(256).keys()].map(pe=>pe.toString(16).padStart(2,"0"));class fe{static makeHexColor(oe,ae,Te){return`#${We[oe]}${We[ae]}${We[Te]}`}static scaleMinMax(oe,ae){let Te;oe[0]?(oe[0]<0&&(Te=ae[0],ae[0]=ae[1],ae[1]=Te),ae[0]*=oe[0],ae[1]*=oe[0],oe[3]<0&&(Te=ae[2],ae[2]=ae[3],ae[3]=Te),ae[2]*=oe[3],ae[3]*=oe[3]):(Te=ae[0],ae[0]=ae[2],ae[2]=Te,Te=ae[1],ae[1]=ae[3],ae[3]=Te,oe[1]<0&&(Te=ae[2],ae[2]=ae[3],ae[3]=Te),ae[2]*=oe[1],ae[3]*=oe[1],oe[2]<0&&(Te=ae[0],ae[0]=ae[1],ae[1]=Te),ae[0]*=oe[2],ae[1]*=oe[2]),ae[0]+=oe[4],ae[1]+=oe[4],ae[2]+=oe[5],ae[3]+=oe[5]}static transform(oe,ae){return[oe[0]*ae[0]+oe[2]*ae[1],oe[1]*ae[0]+oe[3]*ae[1],oe[0]*ae[2]+oe[2]*ae[3],oe[1]*ae[2]+oe[3]*ae[3],oe[0]*ae[4]+oe[2]*ae[5]+oe[4],oe[1]*ae[4]+oe[3]*ae[5]+oe[5]]}static applyTransform(oe,ae){const Te=oe[0]*ae[0]+oe[1]*ae[2]+ae[4],Le=oe[0]*ae[1]+oe[1]*ae[3]+ae[5];return[Te,Le]}static applyInverseTransform(oe,ae){const Te=ae[0]*ae[3]-ae[1]*ae[2],Le=(oe[0]*ae[3]-oe[1]*ae[2]+ae[2]*ae[5]-ae[4]*ae[3])/Te,je=(-oe[0]*ae[1]+oe[1]*ae[0]+ae[4]*ae[1]-ae[5]*ae[0])/Te;return[Le,je]}static getAxialAlignedBoundingBox(oe,ae){const Te=fe.applyTransform(oe,ae),Le=fe.applyTransform(oe.slice(2,4),ae),je=fe.applyTransform([oe[0],oe[3]],ae),ze=fe.applyTransform([oe[2],oe[1]],ae);return[Math.min(Te[0],Le[0],je[0],ze[0]),Math.min(Te[1],Le[1],je[1],ze[1]),Math.max(Te[0],Le[0],je[0],ze[0]),Math.max(Te[1],Le[1],je[1],ze[1])]}static inverseTransform(oe){const ae=oe[0]*oe[3]-oe[1]*oe[2];return[oe[3]/ae,-oe[1]/ae,-oe[2]/ae,oe[0]/ae,(oe[2]*oe[5]-oe[4]*oe[3])/ae,(oe[4]*oe[1]-oe[5]*oe[0])/ae]}static apply3dTransform(oe,ae){return[oe[0]*ae[0]+oe[1]*ae[1]+oe[2]*ae[2],oe[3]*ae[0]+oe[4]*ae[1]+oe[5]*ae[2],oe[6]*ae[0]+oe[7]*ae[1]+oe[8]*ae[2]]}static singularValueDecompose2dScale(oe){const ae=[oe[0],oe[2],oe[1],oe[3]],Te=oe[0]*ae[0]+oe[1]*ae[2],Le=oe[0]*ae[1]+oe[1]*ae[3],je=oe[2]*ae[0]+oe[3]*ae[2],ze=oe[2]*ae[1]+oe[3]*ae[3],Gt=(Te+ze)/2,on=Math.sqrt((Te+ze)**2-4*(Te*ze-je*Le))/2,Xt=Gt+on||1,ct=Gt-on||1;return[Math.sqrt(Xt),Math.sqrt(ct)]}static normalizeRect(oe){const ae=oe.slice(0);return oe[0]>oe[2]&&(ae[0]=oe[2],ae[2]=oe[0]),oe[1]>oe[3]&&(ae[1]=oe[3],ae[3]=oe[1]),ae}static intersect(oe,ae){const Te=Math.max(Math.min(oe[0],oe[2]),Math.min(ae[0],ae[2])),Le=Math.min(Math.max(oe[0],oe[2]),Math.max(ae[0],ae[2]));if(Te>Le)return null;const je=Math.max(Math.min(oe[1],oe[3]),Math.min(ae[1],ae[3])),ze=Math.min(Math.max(oe[1],oe[3]),Math.max(ae[1],ae[3]));return je>ze?null:[Te,je,Le,ze]}static bezierBoundingBox(oe,ae,Te,Le,je,ze,Gt,on){const Xt=[],ct=[[],[]];let an,Tt,yn,Qe,Zn,Qt,Pn,vn;for(let Er=0;Er<2;++Er){if(Er===0?(Tt=6*oe-12*Te+6*je,an=-3*oe+9*Te-9*je+3*Gt,yn=3*Te-3*oe):(Tt=6*ae-12*Le+6*ze,an=-3*ae+9*Le-9*ze+3*on,yn=3*Le-3*ae),Math.abs(an)<1e-12){if(Math.abs(Tt)<1e-12)continue;Qe=-yn/Tt,0<Qe&&Qe<1&&Xt.push(Qe);continue}Pn=Tt*Tt-4*yn*an,vn=Math.sqrt(Pn),!(Pn<0)&&(Zn=(-Tt+vn)/(2*an),0<Zn&&Zn<1&&Xt.push(Zn),Qt=(-Tt-vn)/(2*an),0<Qt&&Qt<1&&Xt.push(Qt))}let ln=Xt.length,xt;const On=ln;for(;ln--;)Qe=Xt[ln],xt=1-Qe,ct[0][ln]=xt*xt*xt*oe+3*xt*xt*Qe*Te+3*xt*Qe*Qe*je+Qe*Qe*Qe*Gt,ct[1][ln]=xt*xt*xt*ae+3*xt*xt*Qe*Le+3*xt*Qe*Qe*ze+Qe*Qe*Qe*on;return ct[0][On]=oe,ct[1][On]=ae,ct[0][On+1]=Gt,ct[1][On+1]=on,ct[0].length=ct[1].length=On+2,[Math.min(...ct[0]),Math.min(...ct[1]),Math.max(...ct[0]),Math.max(...ct[1])]}}e.Util=fe;const ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Be(pe){if(pe[0]>=""){let ae;if(pe[0]===""&&pe[1]===""?ae="utf-16be":pe[0]===""&&pe[1]===""?ae="utf-16le":pe[0]===""&&pe[1]===""&&pe[2]===""&&(ae="utf-8"),ae)try{const Te=new TextDecoder(ae,{fatal:!0}),Le=me(pe);return Te.decode(Le)}catch(Te){E(`stringToPDFString: "${Te}".`)}}const oe=[];for(let ae=0,Te=pe.length;ae<Te;ae++){const Le=ve[pe.charCodeAt(ae)];oe.push(Le?String.fromCharCode(Le):pe.charAt(ae))}return oe.join("")}function Ue(pe){return pe.replace(/([()\\\n\r])/g,oe=>oe===`
`?"\\n":oe==="\r"?"\\r":`\\${oe}`)}function Me(pe){return/^[\x00-\x7F]*$/.test(pe)}function qe(pe){const oe=[""];for(let ae=0,Te=pe.length;ae<Te;ae++){const Le=pe.charCodeAt(ae);oe.push(String.fromCharCode(Le>>8&255),String.fromCharCode(Le&255))}return oe.join("")}function St(pe){return decodeURIComponent(escape(pe))}function Ct(pe){return unescape(encodeURIComponent(pe))}function Kt(pe){return typeof pe=="object"&&pe!==null&&pe.byteLength!==void 0}function sn(pe,oe){if(pe.length!==oe.length)return!1;for(let ae=0,Te=pe.length;ae<Te;ae++)if(pe[ae]!==oe[ae])return!1;return!0}function at(pe=new Date){return[pe.getUTCFullYear().toString(),(pe.getUTCMonth()+1).toString().padStart(2,"0"),pe.getUTCDate().toString().padStart(2,"0"),pe.getUTCHours().toString().padStart(2,"0"),pe.getUTCMinutes().toString().padStart(2,"0"),pe.getUTCSeconds().toString().padStart(2,"0")].join("")}function Nt(){const pe=Object.create(null);let oe=!1;return Object.defineProperty(pe,"settled",{get(){return oe}}),pe.promise=new Promise(function(ae,Te){pe.resolve=function(Le){oe=!0,ae(Le)},pe.reject=function(Le){oe=!0,Te(Le)}}),pe}}),((t,e,n)=>{n(3)}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:n}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=t,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=n}let createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let n;if(typeof t=="string"||t instanceof URL)n={url:t};else if((0,_util.isArrayBuffer)(t))n={data:t};else if(t instanceof PDFDataRangeTransport)n={range:t};else{if(typeof t!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");n=t}const r=Object.create(null);let s=null,a=null;for(const d in n){const h=n[d];switch(d){case"url":if(typeof window<"u")try{r[d]=new URL(h,window.location).href;continue}catch(u){(0,_util.warn)(`Cannot create valid URL: "${u}".`)}else if(typeof h=="string"||h instanceof URL){r[d]=h.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":s=h;continue;case"worker":a=h;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&h instanceof Buffer)r[d]=new Uint8Array(h);else{if(h instanceof Uint8Array)break;if(typeof h=="string")r[d]=(0,_util.stringToBytes)(h);else if(typeof h=="object"&&h!==null&&!isNaN(h.length))r[d]=new Uint8Array(h);else if((0,_util.isArrayBuffer)(h))r[d]=new Uint8Array(h);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}r[d]=h}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,r.enableXfa=r.enableXfa===!0,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof r.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),typeof r.cMapUrl!="string"&&(r.cMapUrl=null),typeof r.standardFontDataUrl!="string"&&(r.standardFontDataUrl=null),typeof r.useWorkerFetch!="boolean"&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_is_node.isNodeJS),typeof r.useSystemFonts!="boolean"&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),(typeof r.ownerDocument!="object"||r.ownerDocument===null)&&(r.ownerDocument=globalThis.document),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!a){const d={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};a=d.port?PDFWorker.fromPort(d):new PDFWorker(d),e._worker=a}const l=e.docId;return a.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const d=_fetchDocument(a,r,s,l),h=new Promise(function(u){let f;s?f=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},s):r.data||(f=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),u(f)});return Promise.all([d,h]).then(function([u,f]){if(e.destroyed)throw new Error("Loading aborted");const p=new _message_handler.MessageHandler(l,u,a.port),g=new WorkerTransport(p,e,f,r);e._transport=g,p.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(t,e,n,r){if(t.destroyed)throw new Error("Worker was destroyed");n&&(e.length=n.length,e.initialData=n.initialData,e.progressiveDone=n.progressiveDone,e.contentDispositionFilename=n.contentDispositionFilename);const s=await t.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(e.data&&(e.data=null),t.destroyed)throw new Error("Worker was destroyed");return s}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,n,r=!1,s=null){this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,n){for(const r of this._rangeListeners)r(e,n)}onDataProgress(e,n){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,n)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,n){this._pdfInfo=e,this._transport=n,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,n,r,s,a=!1){this._pageIndex=e,this._pageInfo=n,this._ownerDocument=s,this._transport=r,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:n,offsetX:r,offsetY:s,dontFlip:a})}getAnnotations({intent:e="display"}={}){const n=this._transport.getRenderingIntent(e);let r=this._annotationPromises.get(n.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,n.renderingIntent),this._annotationPromises.set(n.cacheKey,r),r=r.then(s=>{for(const a of s)a.titleObj!==void 0&&Object.defineProperty(a,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),a.titleObj.str}}),a.contentsObj!==void 0&&Object.defineProperty(a,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),a.contentsObj.str}});return s})),r}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:n,intent:r="display",annotationMode:s=_util.AnnotationMode.ENABLE,transform:a=null,imageLayer:l=null,canvasFactory:d=null,background:h=null,optionalContentConfigPromise:u=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null}){arguments[0]?.renderInteractiveForms!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&s===_util.AnnotationMode.ENABLE&&(s=_util.AnnotationMode.ENABLE_FORMS)),arguments[0]?.includeAnnotationStorage!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&s===_util.AnnotationMode.ENABLE&&(s=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const y=this._transport.getRenderingIntent(r,s,g);this.pendingCleanup=!1,u||(u=this._transport.getOptionalContentConfig());let x=this._intentStates.get(y.cacheKey);x||(x=Object.create(null),this._intentStates.set(y.cacheKey,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const S=d||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),w=!!(y.renderingIntent&_util.RenderingIntentFlag.PRINT);x.displayReadyCapability||(x.displayReadyCapability=(0,_util.createPromiseCapability)(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(y));const k=B=>{x.renderTasks.delete(N),(this.cleanupAfterRender||w)&&(this.pendingCleanup=!0),this._tryCleanup(),B?(N.capability.reject(B),this._abortOperatorList({intentState:x,reason:B instanceof Error?B:new Error(B)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},N=new InternalRenderTask({callback:k,params:{canvasContext:e,viewport:n,transform:a,imageLayer:l,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:S,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:p});(x.renderTasks||=new Set).add(N);const R=N.task;return Promise.all([x.displayReadyCapability.promise,u]).then(([B,q])=>{if(this.pendingCleanup){k();return}this._stats&&this._stats.time("Rendering"),N.initializeGraphics({transparency:B,optionalContentConfig:q}),N.operatorListChanged()}).catch(k),R}getOperatorList({intent:e="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,n,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=s,l.opListReadCapability=(0,_util.createPromiseCapability)(),(l.renderTasks||=new Set).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:n===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,s){function a(){l.read().then(function({value:h,done:u}){if(u){r(d);return}Object.assign(d.styles,h.styles),d.items.push(...h.items),a()},s)}const l=n.getReader(),d={items:[],styles:Object.create(null)};a()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();this.objs.clear();for(const n of this._bitmaps)n.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:n,operatorList:r}of this._intentStates.values())if(n.size>0||!r.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const n of this._bitmaps)n.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,n){const r=this._intentStates.get(n);r&&(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(e))}_renderPageChunk(e,n){for(let r=0,s=e.length;r<s;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageMap:r}){const a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:r}).getReader(),l=this._intentStates.get(n);l.streamReader=a;const d=()=>{a.read().then(({value:h,done:u})=>{if(u){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,l),d())},h=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const u of l.renderTasks)u.operatorListChanged();this._tryCleanup()}if(l.displayReadyCapability)l.displayReadyCapability.reject(h);else if(l.opListReadCapability)l.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(!r){if(e.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:n,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,n){const r={data:structuredClone(e,n)};this._deferred.then(()=>{for(const s of this._listeners)s.call(this,r)})}addEventListener(e,n){this._listeners.push(n)}removeEventListener(e,n){const r=this._listeners.indexOf(n);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(e,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts=new WeakMap;constructor({name:t=null,port:e=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#workerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){PDFWorker.#workerPorts.set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),n=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",s),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||r()};e.addEventListener("error",s),n.on("test",l=>{if(e.removeEventListener("error",s),this.destroyed){r();return}l?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",l=>{if(e.removeEventListener("error",s),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const n=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(n+"_worker",n,e);t.setup(r,e);const s=new _message_handler.MessageHandler(n,n+"_worker",e);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(t.port)?this.#workerPorts.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#e=null;#t=new Map;#i=new Map;#n=null;constructor(e,n,r,s){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this._params=s,s.useWorkerFetch||(this.CMapReaderFactory=new s.CMapReaderFactory({baseUrl:s.cMapUrl,isCompressed:s.cMapPacked}),this.StandardFontDataFactory=new s.StandardFontDataFactory({baseUrl:s.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#e}getRenderingIntent(e,n=_util.AnnotationMode.ENABLE,r=null,s=!1){let a=_util.RenderingIntentFlag.DISPLAY,l=null;switch(e){case"any":a=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":a=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(n){case _util.AnnotationMode.DISABLE:a+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:a+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:a+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,l=(a&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return s&&(a+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:a,cacheKey:`${a}_${_annotation_storage.AnnotationStorage.getHash(l)}`,annotationStorageMap:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#n=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,s)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){s.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(a),"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",r=>{const s=(0,_util.createPromiseCapability)(),a=this._fullReader;return a.headersReady.then(()=>{(!a.isStreamingSupported||!a.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),a.onProgress=l=>{n.onProgress?.({loaded:l.loaded,total:l.total})}),s.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(r,s)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:d}){if(d){s.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(l),"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(r,this))}),e.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":s=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(s)}),e.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),n.onPassword){const s=a=>{a instanceof Error?this._passwordCapability.reject(a):this._passwordCapability.resolve({password:a})};try{n.onPassword(s,r.code)}catch(a){this._passwordCapability.reject(a)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),e.on("DataLoaded",r=>{n.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,a])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(s){case"Font":const l=this._params;if("error"in a){const u=a.error;(0,_util.warn)(`Error during font loading: ${u}`),this.commonObjs.resolve(r,u);break}let d=null;l.pdfBug&&globalThis.FontInspector?.enabled&&(d={registerFont(u,f){globalThis.FontInspector.fontAdded(u,f)}});const h=new _font_loader.FontFaceObject(a,{isEvalSupported:l.isEvalSupported,disableFontFace:l.disableFontFace,ignoreErrors:l.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:d});this.fontLoader.bind(h).catch(u=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(r,h)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${s}`)}}),e.on("obj",([r,s,a,l])=>{if(this.destroyed)return;const d=this.#t.get(s);if(!d.objs.has(r))switch(a){case"Image":d.objs.resolve(r,l);const h=8e6;if(l){let u;if(l.bitmap){const{bitmap:f,width:p,height:g}=l;u=p*g*4,d._bitmaps.add(f)}else u=l.data?.length||0;u>h&&(d.cleanupAfterRender=!0)}break;case"Pattern":d.objs.resolve(r,l);break;default:throw new Error(`Got unknown object type ${a}`)}}),e.on("DocProgress",r=>{this.destroyed||n.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("DocStats",r=>{this.destroyed||(this.#e=Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=this.#i.get(n);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");const l=new PDFPageProxy(n,a,this,this._params.ownerDocument,this._params.pdfBug);return this.#t.set(n,l),l});return this.#i.set(n,s),s}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#n||=this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#n=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}class PDFObjects{#e=Object.create(null);#t(e){const n=this.#e[e];return n||(this.#e[e]={capability:(0,_util.createPromiseCapability)(),data:null})}get(e,n=null){if(n){const s=this.#t(e);return s.capability.promise.then(()=>n(s.data)),null}const r=this.#e[e];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,n=null){const r=this.#t(e);r.data=n,r.capability.resolve()}clear(){this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(){this.#e.cancel()}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this.#e;return e.form||e.canvas&&n?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:n,objs:r,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:d,canvasFactory:h,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){this.callback=e,this.params=n,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=d,this.canvasFactory=h,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:a,imageLayer:l,background:d}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,l,n,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:e,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=n(1),s=n(6),a=n(10);class l{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(u,f){const p=this._storage.get(u);return p===void 0?f:Object.assign(f,p)}getRawValue(u){return this._storage.get(u)}remove(u){if(this._storage.delete(u),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of this._storage.values())if(f instanceof s.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(u,f){const p=this._storage.get(u);let g=!1;if(p!==void 0)for(const[y,x]of Object.entries(f))p[y]!==x&&(g=!0,p[y]=x);else g=!0,this._storage.set(u,f);g&&this.#e(),f instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(u){return this._storage.has(u)}getAll(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}get size(){return this._storage.size}#e(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new d(this)}get serializable(){if(this._storage.size===0)return null;const u=new Map;for(const[f,p]of this._storage){const g=p instanceof s.AnnotationEditor?p.serialize():p;g&&u.set(f,g)}return u}static getHash(u){if(!u)return"";const f=new a.MurmurHash3_64;for(const[p,g]of u)f.update(`${p}:${JSON.stringify(g)}`);return f.hexdigest()}}e.AnnotationStorage=l;class d extends l{#e=null;constructor(u){super(),this.#e=structuredClone(u.serializable)}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=d}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=n(7),s=n(1);class a{#e=this.focusin.bind(this);#t=this.focusout.bind(this);#i=!1;#n=!1;#s=!1;#c=a._zIndex++;static _colorManager=new r.ColorManager;static _zIndex=1;constructor(d){this.constructor===a&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null;const[h,u]=this.parent.viewportBaseDimensions;this.x=d.x/h,this.y=d.y/u,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#c}focusin(d){this.#i?this.#i=!1:this.parent.setSelected(this)}focusout(d){!this.isAttachedToDOM||d.relatedTarget?.closest(`#${this.id}`)||(d.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(d){const h=this.parent.div.getBoundingClientRect();this.startX=d.clientX-h.x,this.startY=d.clientY-h.y,d.dataTransfer.setData("text/plain",this.id),d.dataTransfer.effectAllowed="move"}setAt(d,h,u,f){const[p,g]=this.parent.viewportBaseDimensions;[u,f]=this.screenToPageTranslation(u,f),this.x=(d+u)/p,this.y=(h+f)/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(d,h){const[u,f]=this.parent.viewportBaseDimensions;[d,h]=this.screenToPageTranslation(d,h),this.x+=d/u,this.y+=h/f,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(d,h){const{rotation:u}=this.parent.viewport;switch(u){case 90:return[h,-d];case 180:return[-d,-h];case 270:return[-h,d];default:return[d,h]}}setDims(d,h){const[u,f]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*d/u}%`,this.div.style.height=`${100*h/f}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#e),this.div.addEventListener("focusout",this.#t);const[d,h]=this.getInitialTranslation();return this.translate(d,h),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(d){const h=r.KeyboardManager.platform.isMac;if(d.button!==0||d.ctrlKey&&h){d.preventDefault();return}d.ctrlKey&&!h||d.shiftKey||d.metaKey&&h?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#i=!0}getRect(d,h){const[u,f]=this.parent.viewportBaseDimensions,[p,g]=this.parent.pageDimensions,y=p*d/u,x=g*h/f,S=this.x*p,w=this.y*g,k=this.width*p,N=this.height*g;switch(this.rotation){case 0:return[S+y,g-w-x-N,S+y+k,g-w-x];case 90:return[S+x,g-w+y,S+x+N,g-w+y+k];case 180:return[S-y-k,g-w+x,S-y,g-w+x+N];case 270:return[S-x-N,g-w-y-k,S-x,g-w-y];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,h){const[u,f,p,g]=d,y=p-u,x=g-f;switch(this.rotation){case 0:return[u,h-g,y,x];case 90:return[u,h-f,x,y];case 180:return[p,h-f,y,x];case 270:return[p,h-g,x,y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#s=!0}disableEditMode(){this.#s=!1}isInEditMode(){return this.#s}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#e)}serialize(){(0,s.unreachable)("An editor must be serializable")}static deserialize(d,h){const u=new this.prototype.constructor({parent:h,id:h.getNextId()});u.rotation=d.rotation;const[f,p]=h.pageDimensions,[g,y,x,S]=u.getRectInCurrentCoords(d.rect,p);return u.x=g/f,u.y=y/p,u.width=x/f,u.height=S/p,u}remove(){this.div.removeEventListener("focusin",this.#e),this.div.removeEventListener("focusout",this.#t),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(d,h){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#n}set isEditing(d){this.#n=d,d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}e.AnnotationEditor=a}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=a,e.opacityToHex=l;var r=n(1),s=n(8);function a(y,x,S){for(const w of S)x.addEventListener(w,y[w].bind(y))}function l(y){return Math.round(Math.min(255,Math.max(1,255*y))).toString(16).padStart(2,"0")}class d{#e=0;getId(){return`${r.AnnotationEditorPrefix}${this.#e++}`}}class h{#e=[];#t=!1;#i;#n=-1;constructor(x=128){this.#i=x}add({cmd:x,undo:S,mustExec:w,type:k=NaN,overwriteIfSameType:N=!1,keepUndo:R=!1}){if(w&&x(),this.#t)return;const B={cmd:x,undo:S,type:k};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(B);return}if(N&&this.#e[this.#n].type===k){R&&(B.undo=this.#e[this.#n].undo),this.#e[this.#n]=B;return}const q=this.#n+1;q===this.#i?this.#e.splice(0,1):(this.#n=q,q<this.#e.length&&this.#e.splice(q)),this.#e.push(B)}undo(){this.#n!==-1&&(this.#t=!0,this.#e[this.#n].undo(),this.#t=!1,this.#n-=1)}redo(){this.#n<this.#e.length-1&&(this.#n+=1,this.#t=!0,this.#e[this.#n].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=h;class u{constructor(x){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const S=u.platform.isMac;for(const[w,k]of x)for(const N of w){const R=N.startsWith("mac+");S&&R?(this.callbacks.set(N.slice(4),k),this.allKeys.add(N.split("+").at(-1))):!S&&!R&&(this.callbacks.set(N,k),this.allKeys.add(N.split("+").at(-1)))}}static get platform(){const x=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:x.includes("Win"),isMac:x.includes("Mac")})}#e(x){x.altKey&&this.buffer.push("alt"),x.ctrlKey&&this.buffer.push("ctrl"),x.metaKey&&this.buffer.push("meta"),x.shiftKey&&this.buffer.push("shift"),this.buffer.push(x.key);const S=this.buffer.join("+");return this.buffer.length=0,S}exec(x,S){if(!this.allKeys.has(S.key))return;const w=this.callbacks.get(this.#e(S));w&&(w.bind(x)(),S.stopPropagation(),S.preventDefault())}}e.KeyboardManager=u;class f{#e=null;copy(x){x&&(Array.isArray(x)?this.#e=x.map(S=>S.serialize()):this.#e=[x.serialize()],this.#e=this.#e.filter(S=>!!S),this.#e.length===0&&(this.#e=null))}paste(){return this.#e}isEmpty(){return this.#e===null}destroy(){this.#e=null}}class p{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const x=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(x),(0,r.shadow)(this,"_colors",x)}convert(x){const S=(0,s.getRGB)(x);if(!window.matchMedia("(forced-colors: active)").matches)return S;for(const[w,k]of this._colors)if(k.every((N,R)=>N===S[R]))return p._colorsMapping.get(w);return S}getHexCode(x){const S=this._colors.get(x);return S?r.Util.makeHexColor(...S):x}}e.ColorManager=p;class g{#e=null;#t=new Map;#i=new Map;#n=new f;#s=new h;#c=0;#a=null;#r=null;#h=new d;#l=!1;#u=r.AnnotationEditorType.NONE;#o=new Set;#g=this.keydown.bind(this);#p=this.onEditingAction.bind(this);#C=this.onPageChanging.bind(this);#T={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#P=null;static _keyboardManager=new u([[["ctrl+a","mac+meta+a"],g.prototype.selectAll],[["ctrl+c","mac+meta+c"],g.prototype.copy],[["ctrl+v","mac+meta+v"],g.prototype.paste],[["ctrl+x","mac+meta+x"],g.prototype.cut],[["ctrl+z","mac+meta+z"],g.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],g.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],g.prototype.delete],[["Escape","mac+Escape"],g.prototype.unselectAll]]);constructor(x,S){this.#P=x,this.#r=S,this.#r._on("editingaction",this.#p),this.#r._on("pagechanging",this.#C)}destroy(){this.#x(),this.#r._off("editingaction",this.#p),this.#r._off("pagechanging",this.#C);for(const x of this.#i.values())x.destroy();this.#i.clear(),this.#t.clear(),this.#e=null,this.#o.clear(),this.#n.destroy(),this.#s.destroy()}onPageChanging({pageNumber:x}){this.#c=x-1}focusMainContainer(){this.#P.focus()}#A(){this.#P.addEventListener("keydown",this.#g)}#x(){this.#P.removeEventListener("keydown",this.#g)}keydown(x){this.getActive()?.shouldGetKeyboardEvents()||g._keyboardManager.exec(this,x)}onEditingAction(x){["undo","redo","cut","copy","paste","delete","selectAll"].includes(x.name)&&this[x.name]()}#d(x){Object.entries(x).some(([w,k])=>this.#T[w]!==k)&&this.#r.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#T,x)})}#v(x){this.#r.dispatch("annotationeditorparamschanged",{source:this,details:x})}setEditingState(x){x?(this.#A(),this.#d({isEditing:this.#u!==r.AnnotationEditorType.NONE,isEmpty:this.#m(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:this.#n.isEmpty()})):(this.#x(),this.#d({isEditing:!1}))}registerEditorTypes(x){this.#a=x;for(const S of this.#a)this.#v(S.defaultPropertiesToUpdate)}getId(){return this.#h.getId()}addLayer(x){this.#i.set(x.pageIndex,x),this.#l?x.enable():x.disable()}removeLayer(x){this.#i.delete(x.pageIndex)}updateMode(x){if(this.#u=x,x===r.AnnotationEditorType.NONE)this.setEditingState(!1),this.#f();else{this.setEditingState(!0),this.#w();for(const S of this.#i.values())S.updateMode(x)}}updateToolbar(x){x!==this.#u&&this.#r.dispatch("switchannotationeditormode",{source:this,mode:x})}updateParams(x,S){for(const w of this.#o)w.updateParams(x,S);for(const w of this.#a)w.updateDefaultParams(x,S)}#w(){if(!this.#l){this.#l=!0;for(const x of this.#i.values())x.enable()}}#f(){if(this.unselectAll(),this.#l){this.#l=!1;for(const x of this.#i.values())x.disable()}}getEditors(x){const S=[];for(const w of this.#t.values())w.pageIndex===x&&S.push(w);return S}getEditor(x){return this.#t.get(x)}addEditor(x){this.#t.set(x.id,x)}removeEditor(x){this.#t.delete(x.id),this.unselect(x)}#_(x){const S=this.#i.get(x.pageIndex);S?S.addOrRebuild(x):this.addEditor(x)}setActiveEditor(x){this.#e!==x&&(this.#e=x,x&&this.#v(x.propertiesToUpdate))}toggleSelected(x){if(this.#o.has(x)){this.#o.delete(x),x.unselect(),this.#d({hasSelectedEditor:this.hasSelection});return}this.#o.add(x),x.select(),this.#v(x.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}setSelected(x){for(const S of this.#o)S!==x&&S.unselect();this.#o.clear(),this.#o.add(x),x.select(),this.#v(x.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}isSelected(x){return this.#o.has(x)}unselect(x){x.unselect(),this.#o.delete(x),this.#d({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#o.size!==0}undo(){this.#s.undo(),this.#d({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#m()})}redo(){this.#s.redo(),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#m()})}addCommands(x){this.#s.add(x),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#m()})}#m(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const x of this.#t.values())return x.isEmpty();return!1}delete(){if(this.#e&&this.#e.commitOrRemove(),!this.hasSelection)return;const x=[...this.#o],S=()=>{for(const k of x)k.remove()},w=()=>{for(const k of x)this.#_(k)};this.addCommands({cmd:S,undo:w,mustExec:!0})}copy(){if(this.#e&&this.#e.commitOrRemove(),this.hasSelection){const x=[];for(const S of this.#o)S.isEmpty()||x.push(S);if(x.length===0)return;this.#n.copy(x),this.#d({hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(this.#n.isEmpty())return;this.unselectAll();const x=this.#i.get(this.#c),S=this.#n.paste().map(N=>x.deserialize(N)),w=()=>{for(const N of S)this.#_(N);this.#y(S)},k=()=>{for(const N of S)N.remove()};this.addCommands({cmd:w,undo:k,mustExec:!0})}#y(x){this.#o.clear();for(const S of x)S.isEmpty()||(this.#o.add(S),S.select());this.#d({hasSelectedEditor:!0})}selectAll(){for(const x of this.#o)x.commit();this.#y(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.#y.size!==0){for(const x of this.#o)x.unselect();this.#o.clear(),this.#d({hasSelectedEditor:!1})}}isActive(x){return this.#e===x}getActive(){return this.#e}getMode(){return this.#u}}e.AnnotationEditorUIManager=g}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=F,e.getColorValues=H,e.getCurrentTransform=j,e.getCurrentTransformInverse=ee,e.getFilenameFromUrl=k,e.getPdfFilenameFromUrl=N,e.getRGB=U,e.getXfaPageViewport=b,e.isDataScheme=S,e.isPdfFile=w,e.isValidFetchUrl=B,e.loadScript=q;var r=n(9),s=n(1);const a="http://www.w3.org/2000/svg",l="pdfjs_internal_id_";e.AnnotationPrefix=l;class d{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=d;class h extends r.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,Q){const Z=this._document.createElement("canvas");return Z.width=J,Z.height=Q,Z}}e.DOMCanvasFactory=h;async function u($,J=!1){if(B($,document.baseURI)){const Q=await fetch($);if(!Q.ok)throw new Error(Q.statusText);return J?new Uint8Array(await Q.arrayBuffer()):(0,s.stringToBytes)(await Q.text())}return new Promise((Q,Z)=>{const X=new XMLHttpRequest;X.open("GET",$,!0),J&&(X.responseType="arraybuffer"),X.onreadystatechange=()=>{if(X.readyState===XMLHttpRequest.DONE){if(X.status===200||X.status===0){let O;if(J&&X.response?O=new Uint8Array(X.response):!J&&X.responseText&&(O=(0,s.stringToBytes)(X.responseText)),O){Q(O);return}}Z(new Error(X.statusText))}},X.send(null)})}class f extends r.BaseCMapReaderFactory{_fetchData(J,Q){return u(J,this.isCompressed).then(Z=>({cMapData:Z,compressionType:Q}))}}e.DOMCMapReaderFactory=f;class p extends r.BaseStandardFontDataFactory{_fetchData(J){return u(J,!0)}}e.DOMStandardFontDataFactory=p;class g extends r.BaseSVGFactory{_createSVG(J){return document.createElementNS(a,J)}}e.DOMSVGFactory=g;class y{constructor({viewBox:J,scale:Q,rotation:Z,offsetX:X=0,offsetY:O=0,dontFlip:v=!1}){this.viewBox=J,this.scale=Q,this.rotation=Z,this.offsetX=X,this.offsetY=O;const E=(J[2]+J[0])/2,I=(J[3]+J[1])/2;let T,_,A,M;switch(Z%=360,Z<0&&(Z+=360),Z){case 180:T=-1,_=0,A=0,M=1;break;case 90:T=0,_=1,A=1,M=0;break;case 270:T=0,_=-1,A=-1,M=0;break;case 0:T=1,_=0,A=0,M=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}v&&(A=-A,M=-M);let L,G,W,Y;T===0?(L=Math.abs(I-J[1])*Q+X,G=Math.abs(E-J[0])*Q+O,W=Math.abs(J[3]-J[1])*Q,Y=Math.abs(J[2]-J[0])*Q):(L=Math.abs(E-J[0])*Q+X,G=Math.abs(I-J[1])*Q+O,W=Math.abs(J[2]-J[0])*Q,Y=Math.abs(J[3]-J[1])*Q),this.transform=[T*Q,_*Q,A*Q,M*Q,L-T*Q*E-A*Q*I,G-_*Q*E-M*Q*I],this.width=W,this.height=Y}clone({scale:J=this.scale,rotation:Q=this.rotation,offsetX:Z=this.offsetX,offsetY:X=this.offsetY,dontFlip:O=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:J,rotation:Q,offsetX:Z,offsetY:X,dontFlip:O})}convertToViewportPoint(J,Q){return s.Util.applyTransform([J,Q],this.transform)}convertToViewportRectangle(J){const Q=s.Util.applyTransform([J[0],J[1]],this.transform),Z=s.Util.applyTransform([J[2],J[3]],this.transform);return[Q[0],Q[1],Z[0],Z[1]]}convertToPdfPoint(J,Q){return s.Util.applyInverseTransform([J,Q],this.transform)}}e.PageViewport=y;class x extends s.BaseException{constructor(J,Q){super(J,"RenderingCancelledException"),this.type=Q}}e.RenderingCancelledException=x;function S($){const J=$.length;let Q=0;for(;Q<J&&$[Q].trim()==="";)Q++;return $.substring(Q,Q+5).toLowerCase()==="data:"}function w($){return typeof $=="string"&&/\.pdf$/i.test($)}function k($){const J=$.indexOf("#"),Q=$.indexOf("?"),Z=Math.min(J>0?J:$.length,Q>0?Q:$.length);return $.substring($.lastIndexOf("/",Z)+1,Z)}function N($,J="document.pdf"){if(typeof $!="string")return J;if(S($))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const Q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Z=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,X=Q.exec($);let O=Z.exec(X[1])||Z.exec(X[2])||Z.exec(X[3]);if(O&&(O=O[0],O.includes("%")))try{O=Z.exec(decodeURIComponent(O))[0]}catch{}return O||J}class R{constructor(){this.started=Object.create(null),this.times=[]}time(J){J in this.started&&(0,s.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,s.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let Q=0;for(const Z of this.times){const X=Z.name;X.length>Q&&(Q=X.length)}for(const Z of this.times){const X=Z.end-Z.start;J.push(`${Z.name.padEnd(Q)} ${X}ms
`)}return J.join("")}}e.StatTimer=R;function B($,J){try{const{protocol:Q}=J?new URL($,J):new URL($);return Q==="http:"||Q==="https:"}catch{return!1}}function q($,J=!1){return new Promise((Q,Z)=>{const X=document.createElement("script");X.src=$,X.onload=function(O){J&&X.remove(),Q(O)},X.onerror=function(){Z(new Error(`Cannot load script at: ${X.src}`))},(document.head||document.documentElement).append(X)})}function F($){console.log("Deprecated API usage: "+$)}let z;class V{static toDateObject(J){if(!J||typeof J!="string")return null;z||(z=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Q=z.exec(J);if(!Q)return null;const Z=parseInt(Q[1],10);let X=parseInt(Q[2],10);X=X>=1&&X<=12?X-1:0;let O=parseInt(Q[3],10);O=O>=1&&O<=31?O:1;let v=parseInt(Q[4],10);v=v>=0&&v<=23?v:0;let E=parseInt(Q[5],10);E=E>=0&&E<=59?E:0;let I=parseInt(Q[6],10);I=I>=0&&I<=59?I:0;const T=Q[7]||"Z";let _=parseInt(Q[8],10);_=_>=0&&_<=23?_:0;let A=parseInt(Q[9],10)||0;return A=A>=0&&A<=59?A:0,T==="-"?(v+=_,E+=A):T==="+"&&(v-=_,E-=A),new Date(Date.UTC(Z,X,O,v,E,I))}}e.PDFDateString=V;function b($,{scale:J=1,rotation:Q=0}){const{width:Z,height:X}=$.attributes.style,O=[0,0,parseInt(Z),parseInt(X)];return new y({viewBox:O,scale:J,rotation:Q})}function U($){if($.startsWith("#")){const J=parseInt($.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return $.startsWith("rgb(")?$.slice(4,-1).split(",").map(J=>parseInt(J)):$.startsWith("rgba(")?$.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,s.warn)(`Not a valid color format: "${$}"`),[0,0,0])}function H($){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const Q of $.keys()){J.style.color=Q;const Z=window.getComputedStyle(J).color;$.set(Q,U(Z))}J.remove()}function j($){const{a:J,b:Q,c:Z,d:X,e:O,f:v}=$.getTransform();return[J,Q,Z,X,O,v]}function ee($){const{a:J,b:Q,c:Z,d:X,e:O,f:v}=$.getTransform().invertSelf();return[J,Q,Z,X,O,v]}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=n(1);class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,f){if(u<=0||f<=0)throw new Error("Invalid canvas size");const p=this._createCanvas(u,f);return{canvas:p,context:p.getContext("2d")}}reset(u,f,p){if(!u.canvas)throw new Error("Canvas is not specified");if(f<=0||p<=0)throw new Error("Invalid canvas size");u.canvas.width=f,u.canvas.height=p}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,f){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=s;class a{constructor({baseUrl:u=null,isCompressed:f=!1}){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=f}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const f=this.baseUrl+u+(this.isCompressed?".bcmap":""),p=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(f,p).catch(g=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${f}`)})}_fetchData(u,f){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=a;class l{constructor({baseUrl:u=null}){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const f=`${this.baseUrl}${u}`;return this._fetchData(f).catch(p=>{throw new Error(`Unable to load font data at: ${f}`)})}_fetchData(u){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=l;class d{constructor(){this.constructor===d&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,f,p=!1){if(u<=0||f<=0)throw new Error("Invalid SVG dimensions");const g=this._createSVG("svg:svg");return g.setAttribute("version","1.1"),p||(g.setAttribute("width",`${u}px`),g.setAttribute("height",`${f}px`)),g.setAttribute("preserveAspectRatio","none"),g.setAttribute("viewBox",`0 0 ${u} ${f}`),g}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=d}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=n(1);const s=3285377520,a=4294901760,l=65535;class d{constructor(u){this.h1=u?u&4294967295:s,this.h2=u?u&4294967295:s}update(u){let f,p;if(typeof u=="string"){f=new Uint8Array(u.length*2),p=0;for(let z=0,V=u.length;z<V;z++){const b=u.charCodeAt(z);b<=255?f[p++]=b:(f[p++]=b>>>8,f[p++]=b&255)}}else if((0,r.isArrayBuffer)(u))f=u.slice(),p=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const g=p>>2,y=p-g*4,x=new Uint32Array(f.buffer,0,g);let S=0,w=0,k=this.h1,N=this.h2;const R=3432918353,B=461845907,q=R&l,F=B&l;for(let z=0;z<g;z++)z&1?(S=x[z],S=S*R&a|S*q&l,S=S<<15|S>>>17,S=S*B&a|S*F&l,k^=S,k=k<<13|k>>>19,k=k*5+3864292196):(w=x[z],w=w*R&a|w*q&l,w=w<<15|w>>>17,w=w*B&a|w*F&l,N^=w,N=N<<13|N>>>19,N=N*5+3864292196);switch(S=0,y){case 3:S^=f[g*4+2]<<16;case 2:S^=f[g*4+1]<<8;case 1:S^=f[g*4],S=S*R&a|S*q&l,S=S<<15|S>>>17,S=S*B&a|S*F&l,g&1?k^=S:N^=S}this.h1=k,this.h2=N}hexdigest(){let u=this.h1,f=this.h2;u^=f>>>1,u=u*3981806797&a|u*36045&l,f=f*4283543511&a|((f<<16|u>>>16)*2950163797&a)>>>16,u^=f>>>1,u=u*444984403&a|u*60499&l,f=f*3301882366&a|((f<<16|u>>>16)*3120437893&a)>>>16,u^=f>>>1;const p=(u>>>0).toString(16),g=(f>>>0).toString(16);return p.padStart(8,"0")+g.padStart(8,"0")}}e.MurmurHash3_64=d}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=n(1);class s{constructor({docId:h,onUnsupportedFeature:u,ownerDocument:f=globalThis.document,styleElement:p=null}){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=h,this._onUnsupportedFeature=u,this._document=f,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(h){this.nativeFontFaces.push(h),this._document.fonts.add(h)}insertRule(h){let u=this.styleElement;u||(u=this.styleElement=this._document.createElement("style"),u.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(u));const f=u.sheet;f.insertRule(h,f.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(h){if(h.attached||h.missingFile)return;if(h.attached=!0,this.isFontLoadingAPISupported){const f=h.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(p){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${f.family}': '${p}'.`),h.disableFontFace=!0,p}}return}const u=h.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const p=this._queueLoadingCallback(f);this._prepareFontLoadEvent([u],[h],p)})}}_queueLoadingCallback(h){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const h=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(h,u,f){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let a;e.FontLoader=a,e.FontLoader=a=class extends s{constructor(h){super(h),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let h=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(h=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function u(){for((0,r.assert)(!p.done,"completeRequest() cannot be called twice."),p.done=!0;f.requests.length>0&&f.requests[0].done;){const g=f.requests.shift();setTimeout(g.callback,0)}}const f=this.loadingContext,p={id:`pdfjs-font-loading-${f.nextRequestId++}`,done:!1,complete:u,callback:h};return f.requests.push(p),p}get _loadTestFont(){const h=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,r.shadow)(this,"_loadTestFont",h())}_prepareFontLoadEvent(h,u,f){function p(ee,$){return ee.charCodeAt($)<<24|ee.charCodeAt($+1)<<16|ee.charCodeAt($+2)<<8|ee.charCodeAt($+3)&255}function g(ee,$,J,Q){const Z=ee.substring(0,$),X=ee.substring($+J);return Z+Q+X}let y,x;const S=this._document.createElement("canvas");S.width=1,S.height=1;const w=S.getContext("2d");let k=0;function N(ee,$){if(k++,k>30){(0,r.warn)("Load test font never loaded."),$();return}if(w.font="30px "+ee,w.fillText(".",0,20),w.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(N.bind(null,ee,$))}const R=`lt${Date.now()}${this.loadTestFontId++}`;let B=this._loadTestFont;B=g(B,976,R.length,R);const F=16,z=1482184792;let V=p(B,F);for(y=0,x=R.length-3;y<x;y+=4)V=V-z+p(R,y)|0;y<R.length&&(V=V-z+p(R+"XXX",y)|0),B=g(B,F,4,(0,r.string32)(V));const b=`url(data:font/opentype;base64,${btoa(B)});`,U=`@font-face {font-family:"${R}";src:${b}}`;this.insertRule(U);const H=[];for(const ee of u)H.push(ee.loadedName);H.push(R);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const ee of H){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=ee,j.append($)}this._document.body.append(j),N(R,()=>{j.remove(),f.complete()})}};class l{constructor(h,{isEvalSupported:u=!0,disableFontFace:f=!1,ignoreErrors:p=!1,onUnsupportedFeature:g,fontRegistry:y=null}){this.compiledGlyphs=Object.create(null);for(const x in h)this[x]=h[x];this.isEvalSupported=u!==!1,this.disableFontFace=f===!0,this.ignoreErrors=p===!0,this._onUnsupportedFeature=g,this.fontRegistry=y}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const u={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(u.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,u)}return this.fontRegistry&&this.fontRegistry.registerFont(this),h}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const h=(0,r.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(h)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let p=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(p+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${p}src:${u}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,u),f}getPathGenerator(h,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let f;try{f=h.get(this.loadedName+"_path_"+u)}catch(p){if(!this.ignoreErrors)throw p;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${p}".`),this.compiledGlyphs[u]=function(g,y){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const p=[];for(const g of f){const y=g.args!==void 0?g.args.join(","):"";p.push("c.",g.cmd,"(",y,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",p.join(""))}return this.compiledGlyphs[u]=function(p,g){for(const y of f)y.cmd==="scale"&&(y.args=[g,-g]),p[y.cmd].apply(p,y.args)}}}e.FontFaceObject=l}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(8),s=n(1),a=n(13),l=n(14),d=n(3);const h=16,u=100,f=4096,p=15,g=10,y=d.isNodeJS&&typeof Path2D>"u"?-1:1e3,x=16;function S(O,v){if(O._removeMirroring)throw new Error("Context is already forwarding operations.");O.__originalSave=O.save,O.__originalRestore=O.restore,O.__originalRotate=O.rotate,O.__originalScale=O.scale,O.__originalTranslate=O.translate,O.__originalTransform=O.transform,O.__originalSetTransform=O.setTransform,O.__originalResetTransform=O.resetTransform,O.__originalClip=O.clip,O.__originalMoveTo=O.moveTo,O.__originalLineTo=O.lineTo,O.__originalBezierCurveTo=O.bezierCurveTo,O.__originalRect=O.rect,O.__originalClosePath=O.closePath,O.__originalBeginPath=O.beginPath,O._removeMirroring=()=>{O.save=O.__originalSave,O.restore=O.__originalRestore,O.rotate=O.__originalRotate,O.scale=O.__originalScale,O.translate=O.__originalTranslate,O.transform=O.__originalTransform,O.setTransform=O.__originalSetTransform,O.resetTransform=O.__originalResetTransform,O.clip=O.__originalClip,O.moveTo=O.__originalMoveTo,O.lineTo=O.__originalLineTo,O.bezierCurveTo=O.__originalBezierCurveTo,O.rect=O.__originalRect,O.closePath=O.__originalClosePath,O.beginPath=O.__originalBeginPath,delete O._removeMirroring},O.save=function(){v.save(),this.__originalSave()},O.restore=function(){v.restore(),this.__originalRestore()},O.translate=function(I,T){v.translate(I,T),this.__originalTranslate(I,T)},O.scale=function(I,T){v.scale(I,T),this.__originalScale(I,T)},O.transform=function(I,T,_,A,M,L){v.transform(I,T,_,A,M,L),this.__originalTransform(I,T,_,A,M,L)},O.setTransform=function(I,T,_,A,M,L){v.setTransform(I,T,_,A,M,L),this.__originalSetTransform(I,T,_,A,M,L)},O.resetTransform=function(){v.resetTransform(),this.__originalResetTransform()},O.rotate=function(I){v.rotate(I),this.__originalRotate(I)},O.clip=function(I){v.clip(I),this.__originalClip(I)},O.moveTo=function(E,I){v.moveTo(E,I),this.__originalMoveTo(E,I)},O.lineTo=function(E,I){v.lineTo(E,I),this.__originalLineTo(E,I)},O.bezierCurveTo=function(E,I,T,_,A,M){v.bezierCurveTo(E,I,T,_,A,M),this.__originalBezierCurveTo(E,I,T,_,A,M)},O.rect=function(E,I,T,_){v.rect(E,I,T,_),this.__originalRect(E,I,T,_)},O.closePath=function(){v.closePath(),this.__originalClosePath()},O.beginPath=function(){v.beginPath(),this.__originalBeginPath()}}class w{constructor(v){this.canvasFactory=v,this.cache=Object.create(null)}getCanvas(v,E,I){let T;return this.cache[v]!==void 0?(T=this.cache[v],this.canvasFactory.reset(T,E,I)):(T=this.canvasFactory.create(E,I),this.cache[v]=T),T}delete(v){delete this.cache[v]}clear(){for(const v in this.cache){const E=this.cache[v];this.canvasFactory.destroy(E),delete this.cache[v]}}}function k(O,v,E,I,T,_,A,M,L,G){const[W,Y,se,le,ne,de]=(0,r.getCurrentTransform)(O);if(Y===0&&se===0){const Se=A*W+ne,Ce=Math.round(Se),Ae=M*le+de,Ie=Math.round(Ae),_e=(A+L)*W+ne,Je=Math.abs(Math.round(_e)-Ce)||1,et=(M+G)*le+de,De=Math.abs(Math.round(et)-Ie)||1;return O.setTransform(Math.sign(W),0,0,Math.sign(le),Ce,Ie),O.drawImage(v,E,I,T,_,0,0,Je,De),O.setTransform(W,Y,se,le,ne,de),[Je,De]}if(W===0&&le===0){const Se=M*se+ne,Ce=Math.round(Se),Ae=A*Y+de,Ie=Math.round(Ae),_e=(M+G)*se+ne,Je=Math.abs(Math.round(_e)-Ce)||1,et=(A+L)*Y+de,De=Math.abs(Math.round(et)-Ie)||1;return O.setTransform(0,Math.sign(Y),Math.sign(se),0,Ce,Ie),O.drawImage(v,E,I,T,_,0,0,De,Je),O.setTransform(W,Y,se,le,ne,de),[De,Je]}O.drawImage(v,E,I,T,_,A,M,L,G);const ge=Math.hypot(W,Y),me=Math.hypot(se,le);return[ge*L,me*G]}function N(O){const{width:v,height:E}=O;if(v>y||E>y)return null;const I=1e3,T=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),_=v+1;let A=new Uint8Array(_*(E+1)),M,L,G;const W=v+7&-8;let Y=new Uint8Array(W*E),se=0;for(const me of O.data){let Se=128;for(;Se>0;)Y[se++]=me&Se?0:255,Se>>=1}let le=0;for(se=0,Y[se]!==0&&(A[0]=1,++le),L=1;L<v;L++)Y[se]!==Y[se+1]&&(A[L]=Y[se]?2:1,++le),se++;for(Y[se]!==0&&(A[L]=2,++le),M=1;M<E;M++){se=M*W,G=M*_,Y[se-W]!==Y[se]&&(A[G]=Y[se]?1:8,++le);let me=(Y[se]?4:0)+(Y[se-W]?8:0);for(L=1;L<v;L++)me=(me>>2)+(Y[se+1]?4:0)+(Y[se-W+1]?8:0),T[me]&&(A[G+L]=T[me],++le),se++;if(Y[se-W]!==Y[se]&&(A[G+L]=Y[se]?2:4,++le),le>I)return null}for(se=W*(E-1),G=M*_,Y[se]!==0&&(A[G]=8,++le),L=1;L<v;L++)Y[se]!==Y[se+1]&&(A[G+L]=Y[se]?4:8,++le),se++;if(Y[se]!==0&&(A[G+L]=4,++le),le>I)return null;const ne=new Int32Array([0,_,-1,0,-_,0,0,0,1]),de=new Path2D;for(M=0;le&&M<=E;M++){let me=M*_;const Se=me+v;for(;me<Se&&!A[me];)me++;if(me===Se)continue;de.moveTo(me%_,M);const Ce=me;let Ae=A[me];do{const Ie=ne[Ae];do me+=Ie;while(!A[me]);const _e=A[me];_e!==5&&_e!==10?(Ae=_e,A[me]=0):(Ae=_e&51*Ae>>4,A[me]&=Ae>>2|Ae<<2),de.lineTo(me%_,me/_|0),A[me]||--le}while(Ce!==me);--M}return Y=null,A=null,function(me){me.save(),me.scale(1/v,-1/E),me.translate(0,-E),me.fill(de),me.beginPath(),me.restore()}}class R{constructor(v,E){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,v,E])}clone(){const v=Object.create(this);return v.clipBox=this.clipBox.slice(),v}setCurrentPoint(v,E){this.x=v,this.y=E}updatePathMinMax(v,E,I){[E,I]=s.Util.applyTransform([E,I],v),this.minX=Math.min(this.minX,E),this.minY=Math.min(this.minY,I),this.maxX=Math.max(this.maxX,E),this.maxY=Math.max(this.maxY,I)}updateRectMinMax(v,E){const I=s.Util.applyTransform(E,v),T=s.Util.applyTransform(E.slice(2),v);this.minX=Math.min(this.minX,I[0],T[0]),this.minY=Math.min(this.minY,I[1],T[1]),this.maxX=Math.max(this.maxX,I[0],T[0]),this.maxY=Math.max(this.maxY,I[1],T[1])}updateScalingPathMinMax(v,E){s.Util.scaleMinMax(v,E),this.minX=Math.min(this.minX,E[0]),this.maxX=Math.max(this.maxX,E[1]),this.minY=Math.min(this.minY,E[2]),this.maxY=Math.max(this.maxY,E[3])}updateCurvePathMinMax(v,E,I,T,_,A,M,L,G,W){const Y=s.Util.bezierBoundingBox(E,I,T,_,A,M,L,G);if(W){W[0]=Math.min(W[0],Y[0],Y[2]),W[1]=Math.max(W[1],Y[0],Y[2]),W[2]=Math.min(W[2],Y[1],Y[3]),W[3]=Math.max(W[3],Y[1],Y[3]);return}this.updateRectMinMax(v,Y)}getPathBoundingBox(v=a.PathType.FILL,E=null){const I=[this.minX,this.minY,this.maxX,this.maxY];if(v===a.PathType.STROKE){E||(0,s.unreachable)("Stroke bounding box must include transform.");const T=s.Util.singularValueDecompose2dScale(E),_=T[0]*this.lineWidth/2,A=T[1]*this.lineWidth/2;I[0]-=_,I[1]-=A,I[2]+=_,I[3]+=A}return I}updateClipFromPath(){const v=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(v||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(v){this.clipBox=v,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(v=a.PathType.FILL,E=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(v,E))}}function B(O,v,E=null){if(typeof ImageData<"u"&&v instanceof ImageData){O.putImageData(v,0,0);return}const I=v.height,T=v.width,_=I%x,A=(I-_)/x,M=_===0?A:A+1,L=O.createImageData(T,x);let G=0,W;const Y=v.data,se=L.data;let le,ne,de,ge,me,Se,Ce,Ae;if(E)switch(E.length){case 1:me=E[0],Se=E[0],Ce=E[0],Ae=E[0];break;case 4:me=E[0],Se=E[1],Ce=E[2],Ae=E[3];break}if(v.kind===s.ImageKind.GRAYSCALE_1BPP){const Ie=Y.byteLength,_e=new Uint32Array(se.buffer,0,se.byteLength>>2),Je=_e.length,et=T+7>>3;let De=4294967295,We=s.FeatureTest.isLittleEndian?4278190080:255;for(Ae&&Ae[0]===255&&Ae[255]===0&&([De,We]=[We,De]),le=0;le<M;le++){for(de=le<A?x:_,W=0,ne=0;ne<de;ne++){const fe=Ie-G;let ve=0;const Be=fe>et?T:fe*8-7,Ue=Be&-8;let Me=0,qe=0;for(;ve<Ue;ve+=8)qe=Y[G++],_e[W++]=qe&128?De:We,_e[W++]=qe&64?De:We,_e[W++]=qe&32?De:We,_e[W++]=qe&16?De:We,_e[W++]=qe&8?De:We,_e[W++]=qe&4?De:We,_e[W++]=qe&2?De:We,_e[W++]=qe&1?De:We;for(;ve<Be;ve++)Me===0&&(qe=Y[G++],Me=128),_e[W++]=qe&Me?De:We,Me>>=1}for(;W<Je;)_e[W++]=0;O.putImageData(L,0,le*x)}}else if(v.kind===s.ImageKind.RGBA_32BPP){const Ie=!!(me||Se||Ce);for(ne=0,ge=T*x*4,le=0;le<A;le++){if(se.set(Y.subarray(G,G+ge)),G+=ge,Ie)for(let _e=0;_e<ge;_e+=4)me&&(se[_e+0]=me[se[_e+0]]),Se&&(se[_e+1]=Se[se[_e+1]]),Ce&&(se[_e+2]=Ce[se[_e+2]]);O.putImageData(L,0,ne),ne+=x}if(le<M){if(ge=T*_*4,se.set(Y.subarray(G,G+ge)),Ie)for(let _e=0;_e<ge;_e+=4)me&&(se[_e+0]=me[se[_e+0]]),Se&&(se[_e+1]=Se[se[_e+1]]),Ce&&(se[_e+2]=Ce[se[_e+2]]);O.putImageData(L,0,ne)}}else if(v.kind===s.ImageKind.RGB_24BPP){const Ie=!!(me||Se||Ce);for(de=x,ge=T*de,le=0;le<M;le++){for(le>=A&&(de=_,ge=T*de),W=0,ne=ge;ne--;)se[W++]=Y[G++],se[W++]=Y[G++],se[W++]=Y[G++],se[W++]=255;if(Ie)for(let _e=0;_e<W;_e+=4)me&&(se[_e+0]=me[se[_e+0]]),Se&&(se[_e+1]=Se[se[_e+1]]),Ce&&(se[_e+2]=Ce[se[_e+2]]);O.putImageData(L,0,le*x)}}else throw new Error(`bad image kind: ${v.kind}`)}function q(O,v){if(v.bitmap){O.drawImage(v.bitmap,0,0);return}const E=v.height,I=v.width,T=E%x,_=(E-T)/x,A=T===0?_:_+1,M=O.createImageData(I,x);let L=0;const G=v.data,W=M.data;for(let Y=0;Y<A;Y++){const se=Y<_?x:T;({srcPos:L}=(0,l.applyMaskImageData)({src:G,srcPos:L,dest:W,width:I,height:se})),O.putImageData(M,0,Y*x)}}function F(O,v){const E=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let I=0,T=E.length;I<T;I++){const _=E[I];O[_]!==void 0&&(v[_]=O[_])}O.setLineDash!==void 0&&(v.setLineDash(O.getLineDash()),v.lineDashOffset=O.lineDashOffset)}function z(O,v){O.strokeStyle=O.fillStyle=v||"#000000",O.fillRule="nonzero",O.globalAlpha=1,O.lineWidth=1,O.lineCap="butt",O.lineJoin="miter",O.miterLimit=10,O.globalCompositeOperation="source-over",O.font="10px sans-serif",O.setLineDash!==void 0&&(O.setLineDash([]),O.lineDashOffset=0)}function V(O,v,E,I){const T=O.length;for(let _=3;_<T;_+=4){const A=O[_];if(A===0)O[_-3]=v,O[_-2]=E,O[_-1]=I;else if(A<255){const M=255-A;O[_-3]=O[_-3]*A+v*M>>8,O[_-2]=O[_-2]*A+E*M>>8,O[_-1]=O[_-1]*A+I*M>>8}}}function b(O,v,E){const I=O.length,T=1/255;for(let _=3;_<I;_+=4){const A=E?E[O[_]]:O[_];v[_]=v[_]*A*T|0}}function U(O,v,E){const I=O.length;for(let T=3;T<I;T+=4){const _=O[T-3]*77+O[T-2]*152+O[T-1]*28;v[T]=E?v[T]*E[_>>8]>>8:v[T]*_>>16}}function H(O,v,E,I,T,_,A,M,L,G,W){const Y=!!_,se=Y?_[0]:0,le=Y?_[1]:0,ne=Y?_[2]:0;let de;T==="Luminosity"?de=U:de=b;const me=Math.min(I,Math.ceil(1048576/E));for(let Se=0;Se<I;Se+=me){const Ce=Math.min(me,I-Se),Ae=O.getImageData(M-G,Se+(L-W),E,Ce),Ie=v.getImageData(M,Se+L,E,Ce);Y&&V(Ae.data,se,le,ne),de(Ae.data,Ie.data,A),v.putImageData(Ie,M,Se+L)}}function j(O,v,E,I){const T=I[0],_=I[1],A=I[2]-T,M=I[3]-_;A===0||M===0||(H(v.context,E,A,M,v.subtype,v.backdrop,v.transferMap,T,_,v.offsetX,v.offsetY),O.save(),O.globalAlpha=1,O.globalCompositeOperation="source-over",O.setTransform(1,0,0,1,0,0),O.drawImage(E.canvas,0,0),O.restore())}function ee(O,v){const E=s.Util.singularValueDecompose2dScale(O);E[0]=Math.fround(E[0]),E[1]=Math.fround(E[1]);const I=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return v!==void 0?v:E[0]<=I||E[1]<=I}const $=["butt","round","square"],J=["miter","round","bevel"],Q={},Z={};class X{constructor(v,E,I,T,_,A,M,L){this.ctx=v,this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=E,this.objs=I,this.canvasFactory=T,this.imageLayer=_,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=A,this.cachedCanvases=new w(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=M,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=L?.background||null,this.foregroundColor=L?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(v,E=null){return typeof v=="string"?v.startsWith("g_")?this.commonObjs.get(v):this.objs.get(v):E}beginDrawing({transform:v,viewport:E,transparency:I=!1,background:T=null}){const _=this.ctx.canvas.width,A=this.ctx.canvas.height,M=T||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const L=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const G=this.backgroundColor=this.ctx.fillStyle;let W=!0,Y=M;if(this.ctx.fillStyle=M,Y=this.ctx.fillStyle,W=typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y),L==="#000000"&&G==="#ffffff"||L===G||!W)this.foregroundColor=this.backgroundColor=null;else{const[se,le,ne]=(0,r.getRGB)(Y),de=me=>(me/=255,me<=.03928?me/12.92:((me+.055)/1.055)**2.4),ge=Math.round(.2126*de(se)+.7152*de(le)+.0722*de(ne));this.selectColor=(me,Se,Ce)=>{const Ae=.2126*de(me)+.7152*de(Se)+.0722*de(Ce);return Math.round(Ae)===ge?G:L}}}if(this.ctx.fillStyle=this.backgroundColor||M,this.ctx.fillRect(0,0,_,A),this.ctx.restore(),I){const L=this.cachedCanvases.getCanvas("transparent",_,A);this.compositeCtx=this.ctx,this.transparentCanvas=L.canvas,this.ctx=L.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),z(this.ctx,this.foregroundColor),v&&(this.ctx.transform(...v),this.outputScaleX=v[0],this.outputScaleY=v[0]),this.ctx.transform(...E.transform),this.viewportScale=E.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx),this.imageLayer&&((0,r.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(v,E,I,T){const _=v.argsArray,A=v.fnArray;let M=E||0;const L=_.length;if(L===M)return M;const G=L-M>g&&typeof I=="function",W=G?Date.now()+p:0;let Y=0;const se=this.commonObjs,le=this.objs;let ne;for(;;){if(T!==void 0&&M===T.nextBreakPoint)return T.breakIt(M,I),M;if(ne=A[M],ne!==s.OPS.dependency)this[ne].apply(this,_[M]);else for(const de of _[M]){const ge=de.startsWith("g_")?se:le;if(!ge.has(de))return ge.get(de,I),M}if(M++,M===L)return M;if(G&&++Y>g){if(Date.now()>W)return I(),M;Y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const v of this._cachedBitmapsMap.values()){for(const E of v.values())typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement&&(E.width=E.height=0);v.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(v,E){const I=v.width,T=v.height;let _=Math.max(Math.hypot(E[0],E[1]),1),A=Math.max(Math.hypot(E[2],E[3]),1),M=I,L=T,G="prescale1",W,Y;for(;_>2&&M>1||A>2&&L>1;){let se=M,le=L;_>2&&M>1&&(se=Math.ceil(M/2),_/=M/se),A>2&&L>1&&(le=Math.ceil(L/2),A/=L/le),W=this.cachedCanvases.getCanvas(G,se,le),Y=W.context,Y.clearRect(0,0,se,le),Y.drawImage(v,0,0,M,L,0,0,se,le),v=W.canvas,M=se,L=le,G=G==="prescale1"?"prescale2":"prescale1"}return{img:v,paintWidth:M,paintHeight:L}}_createMaskCanvas(v){const E=this.ctx,{width:I,height:T}=v,_=this.current.fillColor,A=this.current.patternFill,M=(0,r.getCurrentTransform)(E);let L,G,W,Y;if((v.bitmap||v.data)&&v.count>1){const Je=v.bitmap||v.data.buffer,et=M.slice(0,4);G=JSON.stringify(A?et:[et,_]),L=this._cachedBitmapsMap.get(Je),L||(L=new Map,this._cachedBitmapsMap.set(Je,L));const De=L.get(G);if(De&&!A){const We=Math.round(Math.min(M[0],M[2])+M[4]),fe=Math.round(Math.min(M[1],M[3])+M[5]);return{canvas:De,offsetX:We,offsetY:fe}}W=De}W||(Y=this.cachedCanvases.getCanvas("maskCanvas",I,T),q(Y.context,v));let se=s.Util.transform(M,[1/I,0,0,-1/T,0,0]);se=s.Util.transform(se,[1,0,0,1,0,-T]);const le=s.Util.applyTransform([0,0],se),ne=s.Util.applyTransform([I,T],se),de=s.Util.normalizeRect([le[0],le[1],ne[0],ne[1]]),ge=Math.round(de[2]-de[0])||1,me=Math.round(de[3]-de[1])||1,Se=this.cachedCanvases.getCanvas("fillCanvas",ge,me),Ce=Se.context,Ae=Math.min(le[0],ne[0]),Ie=Math.min(le[1],ne[1]);Ce.translate(-Ae,-Ie),Ce.transform(...se),W||(W=this._scaleImage(Y.canvas,(0,r.getCurrentTransformInverse)(Ce)),W=W.img,L&&A&&L.set(G,W)),Ce.imageSmoothingEnabled=ee((0,r.getCurrentTransform)(Ce),v.interpolate),k(Ce,W,0,0,W.width,W.height,0,0,I,T),Ce.globalCompositeOperation="source-in";const _e=s.Util.transform((0,r.getCurrentTransformInverse)(Ce),[1,0,0,1,-Ae,-Ie]);return Ce.fillStyle=A?_.getPattern(E,this,_e,a.PathType.FILL):_,Ce.fillRect(0,0,I,T),L&&!A&&(this.cachedCanvases.delete("fillCanvas"),L.set(G,Se.canvas)),{canvas:Se.canvas,offsetX:Math.round(Ae),offsetY:Math.round(Ie)}}setLineWidth(v){v!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=v,this.ctx.lineWidth=v}setLineCap(v){this.ctx.lineCap=$[v]}setLineJoin(v){this.ctx.lineJoin=J[v]}setMiterLimit(v){this.ctx.miterLimit=v}setDash(v,E){const I=this.ctx;I.setLineDash!==void 0&&(I.setLineDash(v),I.lineDashOffset=E)}setRenderingIntent(v){}setFlatness(v){}setGState(v){for(let E=0,I=v.length;E<I;E++){const T=v[E],_=T[0],A=T[1];switch(_){case"LW":this.setLineWidth(A);break;case"LC":this.setLineCap(A);break;case"LJ":this.setLineJoin(A);break;case"ML":this.setMiterLimit(A);break;case"D":this.setDash(A[0],A[1]);break;case"RI":this.setRenderingIntent(A);break;case"FL":this.setFlatness(A);break;case"Font":this.setFont(A[0],A[1]);break;case"CA":this.current.strokeAlpha=T[1];break;case"ca":this.current.fillAlpha=T[1],this.ctx.globalAlpha=T[1];break;case"BM":this.ctx.globalCompositeOperation=A;break;case"SMask":this.current.activeSMask=A?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=A}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const v=this.inSMaskMode;this.current.activeSMask&&!v?this.beginSMaskMode():!this.current.activeSMask&&v&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const v=this.ctx.canvas.width,E=this.ctx.canvas.height,I="smaskGroupAt"+this.groupLevel,T=this.cachedCanvases.getCanvas(I,v,E);this.suspendedCtx=this.ctx,this.ctx=T.context;const _=this.ctx;_.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),F(this.suspendedCtx,_),S(_,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),F(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(v){if(!this.current.activeSMask)return;v?(v[0]=Math.floor(v[0]),v[1]=Math.floor(v[1]),v[2]=Math.ceil(v[2]),v[3]=Math.ceil(v[3])):v=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const E=this.current.activeSMask,I=this.suspendedCtx;j(I,E,this.ctx,v),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(F(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const v=this.current;this.stateStack.push(v),this.current=v.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),F(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(v,E,I,T,_,A){this.ctx.transform(v,E,I,T,_,A),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(v,E,I){const T=this.ctx,_=this.current;let A=_.x,M=_.y,L,G;const W=(0,r.getCurrentTransform)(T),Y=W[0]===0&&W[3]===0||W[1]===0&&W[2]===0,se=Y?I.slice(0):null;for(let le=0,ne=0,de=v.length;le<de;le++)switch(v[le]|0){case s.OPS.rectangle:A=E[ne++],M=E[ne++];const ge=E[ne++],me=E[ne++],Se=A+ge,Ce=M+me;T.moveTo(A,M),ge===0||me===0?T.lineTo(Se,Ce):(T.lineTo(Se,M),T.lineTo(Se,Ce),T.lineTo(A,Ce)),Y||_.updateRectMinMax(W,[A,M,Se,Ce]),T.closePath();break;case s.OPS.moveTo:A=E[ne++],M=E[ne++],T.moveTo(A,M),Y||_.updatePathMinMax(W,A,M);break;case s.OPS.lineTo:A=E[ne++],M=E[ne++],T.lineTo(A,M),Y||_.updatePathMinMax(W,A,M);break;case s.OPS.curveTo:L=A,G=M,A=E[ne+4],M=E[ne+5],T.bezierCurveTo(E[ne],E[ne+1],E[ne+2],E[ne+3],A,M),_.updateCurvePathMinMax(W,L,G,E[ne],E[ne+1],E[ne+2],E[ne+3],A,M,se),ne+=6;break;case s.OPS.curveTo2:L=A,G=M,T.bezierCurveTo(A,M,E[ne],E[ne+1],E[ne+2],E[ne+3]),_.updateCurvePathMinMax(W,L,G,A,M,E[ne],E[ne+1],E[ne+2],E[ne+3],se),A=E[ne+2],M=E[ne+3],ne+=4;break;case s.OPS.curveTo3:L=A,G=M,A=E[ne+2],M=E[ne+3],T.bezierCurveTo(E[ne],E[ne+1],A,M,A,M),_.updateCurvePathMinMax(W,L,G,E[ne],E[ne+1],A,M,A,M,se),ne+=4;break;case s.OPS.closePath:T.closePath();break}Y&&_.updateScalingPathMinMax(W,se),_.setCurrentPoint(A,M)}closePath(){this.ctx.closePath()}stroke(v){v=typeof v<"u"?v:!0;const E=this.ctx,I=this.current.strokeColor;E.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof I=="object"&&I?.getPattern?(E.save(),E.strokeStyle=I.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),a.PathType.STROKE),this.rescaleAndStroke(!1),E.restore()):this.rescaleAndStroke(!0)),v&&this.consumePath(this.current.getClippedPathBoundingBox()),E.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(v){v=typeof v<"u"?v:!0;const E=this.ctx,I=this.current.fillColor,T=this.current.patternFill;let _=!1;T&&(E.save(),E.fillStyle=I.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),a.PathType.FILL),_=!0);const A=this.current.getClippedPathBoundingBox();this.contentVisible&&A!==null&&(this.pendingEOFill?(E.fill("evenodd"),this.pendingEOFill=!1):E.fill()),_&&E.restore(),v&&this.consumePath(A)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Q}eoClip(){this.pendingClip=Z}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const v=this.pendingTextPaths,E=this.ctx;if(v===void 0){E.beginPath();return}E.save(),E.beginPath();for(const I of v)E.setTransform(...I.transform),E.translate(I.x,I.y),I.addToPath(E,I.fontSize);E.restore(),E.clip(),E.beginPath(),delete this.pendingTextPaths}setCharSpacing(v){this.current.charSpacing=v}setWordSpacing(v){this.current.wordSpacing=v}setHScale(v){this.current.textHScale=v/100}setLeading(v){this.current.leading=-v}setFont(v,E){const I=this.commonObjs.get(v),T=this.current;if(!I)throw new Error(`Can't find font for ${v}`);if(T.fontMatrix=I.fontMatrix||s.FONT_IDENTITY_MATRIX,(T.fontMatrix[0]===0||T.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+v),E<0?(E=-E,T.fontDirection=-1):T.fontDirection=1,this.current.font=I,this.current.fontSize=E,I.isType3Font)return;const _=I.loadedName||"sans-serif";let A="normal";I.black?A="900":I.bold&&(A="bold");const M=I.italic?"italic":"normal",L=`"${_}", ${I.fallbackName}`;let G=E;E<h?G=h:E>u&&(G=u),this.current.fontSizeScale=E/G,this.ctx.font=`${M} ${A} ${G}px ${L}`}setTextRenderingMode(v){this.current.textRenderingMode=v}setTextRise(v){this.current.textRise=v}moveText(v,E){this.current.x=this.current.lineX+=v,this.current.y=this.current.lineY+=E}setLeadingMoveText(v,E){this.setLeading(-E),this.moveText(v,E)}setTextMatrix(v,E,I,T,_,A){this.current.textMatrix=[v,E,I,T,_,A],this.current.textMatrixScale=Math.hypot(v,E),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(v,E,I,T){const _=this.ctx,A=this.current,M=A.font,L=A.textRenderingMode,G=A.fontSize/A.fontSizeScale,W=L&s.TextRenderingMode.FILL_STROKE_MASK,Y=!!(L&s.TextRenderingMode.ADD_TO_PATH_FLAG),se=A.patternFill&&!M.missingFile;let le;(M.disableFontFace||Y||se)&&(le=M.getPathGenerator(this.commonObjs,v)),M.disableFontFace||se?(_.save(),_.translate(E,I),_.beginPath(),le(_,G),T&&_.setTransform(...T),(W===s.TextRenderingMode.FILL||W===s.TextRenderingMode.FILL_STROKE)&&_.fill(),(W===s.TextRenderingMode.STROKE||W===s.TextRenderingMode.FILL_STROKE)&&_.stroke(),_.restore()):((W===s.TextRenderingMode.FILL||W===s.TextRenderingMode.FILL_STROKE)&&_.fillText(v,E,I),(W===s.TextRenderingMode.STROKE||W===s.TextRenderingMode.FILL_STROKE)&&_.strokeText(v,E,I)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(_),x:E,y:I,fontSize:G,addToPath:le})}get isFontSubpixelAAEnabled(){const{context:v}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);v.scale(1.5,1),v.fillText("I",0,10);const E=v.getImageData(0,0,10,10).data;let I=!1;for(let T=3;T<E.length;T+=4)if(E[T]>0&&E[T]<255){I=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",I)}showText(v){const E=this.current,I=E.font;if(I.isType3Font)return this.showType3Text(v);const T=E.fontSize;if(T===0)return;const _=this.ctx,A=E.fontSizeScale,M=E.charSpacing,L=E.wordSpacing,G=E.fontDirection,W=E.textHScale*G,Y=v.length,se=I.vertical,le=se?1:-1,ne=I.defaultVMetrics,de=T*E.fontMatrix[0],ge=E.textRenderingMode===s.TextRenderingMode.FILL&&!I.disableFontFace&&!E.patternFill;_.save(),_.transform(...E.textMatrix),_.translate(E.x,E.y+E.textRise),G>0?_.scale(W,-1):_.scale(W,1);let me;if(E.patternFill){_.save();const _e=E.fillColor.getPattern(_,this,(0,r.getCurrentTransformInverse)(_),a.PathType.FILL);me=(0,r.getCurrentTransform)(_),_.restore(),_.fillStyle=_e}let Se=E.lineWidth;const Ce=E.textMatrixScale;if(Ce===0||Se===0){const _e=E.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(_e===s.TextRenderingMode.STROKE||_e===s.TextRenderingMode.FILL_STROKE)&&(Se=this.getSinglePixelWidth())}else Se/=Ce;A!==1&&(_.scale(A,A),Se/=A),_.lineWidth=Se;let Ae=0,Ie;for(Ie=0;Ie<Y;++Ie){const _e=v[Ie];if(typeof _e=="number"){Ae+=le*_e*T/1e3;continue}let Je=!1;const et=(_e.isSpace?L:0)+M,De=_e.fontChar,We=_e.accent;let fe,ve,Be=_e.width;if(se){const Me=_e.vmetric||ne,qe=-(_e.vmetric?Me[1]:Be*.5)*de,St=Me[2]*de;Be=Me?-Me[0]:Be,fe=qe/A,ve=(Ae+St)/A}else fe=Ae/A,ve=0;if(I.remeasure&&Be>0){const Me=_.measureText(De).width*1e3/T*A;if(Be<Me&&this.isFontSubpixelAAEnabled){const qe=Be/Me;Je=!0,_.save(),_.scale(qe,1),fe/=qe}else Be!==Me&&(fe+=(Be-Me)/2e3*T/A)}if(this.contentVisible&&(_e.isInFont||I.missingFile)){if(ge&&!We)_.fillText(De,fe,ve);else if(this.paintChar(De,fe,ve,me),We){const Me=fe+T*We.offset.x/A,qe=ve-T*We.offset.y/A;this.paintChar(We.fontChar,Me,qe,me)}}let Ue;se?Ue=Be*de-et*G:Ue=Be*de+et*G,Ae+=Ue,Je&&_.restore()}se?E.y-=Ae:E.x+=Ae*W,_.restore(),this.compose()}showType3Text(v){const E=this.ctx,I=this.current,T=I.font,_=I.fontSize,A=I.fontDirection,M=T.vertical?1:-1,L=I.charSpacing,G=I.wordSpacing,W=I.textHScale*A,Y=I.fontMatrix||s.FONT_IDENTITY_MATRIX,se=v.length,le=I.textRenderingMode===s.TextRenderingMode.INVISIBLE;let ne,de,ge,me;if(!(le||_===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,E.save(),E.transform(...I.textMatrix),E.translate(I.x,I.y),E.scale(W,A),ne=0;ne<se;++ne){if(de=v[ne],typeof de=="number"){me=M*de*_/1e3,this.ctx.translate(me,0),I.x+=me*W;continue}const Se=(de.isSpace?G:0)+L,Ce=T.charProcOperatorList[de.operatorListId];if(!Ce){(0,s.warn)(`Type3 character "${de.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=de,this.save(),E.scale(_,_),E.transform(...Y),this.executeOperatorList(Ce),this.restore()),ge=s.Util.applyTransform([de.width,0],Y)[0]*_+Se,E.translate(ge,0),I.x+=ge*W}E.restore(),this.processingType3=null}}setCharWidth(v,E){}setCharWidthAndBounds(v,E,I,T,_,A){this.ctx.rect(I,T,_-I,A-T),this.ctx.clip(),this.endPath()}getColorN_Pattern(v){let E;if(v[0]==="TilingPattern"){const I=v[1],T=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),_={createCanvasGraphics:A=>new X(A,this.commonObjs,this.objs,this.canvasFactory)};E=new a.TilingPattern(v,I,this.ctx,_,T)}else E=this._getPattern(v[1],v[2]);return E}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(v,E,I){const T=this.selectColor?.(v,E,I)||s.Util.makeHexColor(v,E,I);this.ctx.strokeStyle=T,this.current.strokeColor=T}setFillRGBColor(v,E,I){const T=this.selectColor?.(v,E,I)||s.Util.makeHexColor(v,E,I);this.ctx.fillStyle=T,this.current.fillColor=T,this.current.patternFill=!1}_getPattern(v,E=null){let I;return this.cachedPatterns.has(v)?I=this.cachedPatterns.get(v):(I=(0,a.getShadingPattern)(this.objs.get(v)),this.cachedPatterns.set(v,I)),E&&(I.matrix=E),I}shadingFill(v){if(!this.contentVisible)return;const E=this.ctx;this.save();const I=this._getPattern(v);E.fillStyle=I.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),a.PathType.SHADING);const T=(0,r.getCurrentTransformInverse)(E);if(T){const _=E.canvas,A=_.width,M=_.height,L=s.Util.applyTransform([0,0],T),G=s.Util.applyTransform([0,M],T),W=s.Util.applyTransform([A,0],T),Y=s.Util.applyTransform([A,M],T),se=Math.min(L[0],G[0],W[0],Y[0]),le=Math.min(L[1],G[1],W[1],Y[1]),ne=Math.max(L[0],G[0],W[0],Y[0]),de=Math.max(L[1],G[1],W[1],Y[1]);this.ctx.fillRect(se,le,ne-se,de-le)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(v,E){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(v)&&v.length===6&&this.transform(...v),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),E)){const I=E[2]-E[0],T=E[3]-E[1];this.ctx.rect(E[0],E[1],I,T),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),E),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(v){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const E=this.ctx;v.isolated||(0,s.info)("TODO: Support non-isolated groups."),v.knockout&&(0,s.warn)("Knockout groups not supported.");const I=(0,r.getCurrentTransform)(E);if(v.matrix&&E.transform(...v.matrix),!v.bbox)throw new Error("Bounding box is required.");let T=s.Util.getAxialAlignedBoundingBox(v.bbox,(0,r.getCurrentTransform)(E));const _=[0,0,E.canvas.width,E.canvas.height];T=s.Util.intersect(T,_)||[0,0,0,0];const A=Math.floor(T[0]),M=Math.floor(T[1]);let L=Math.max(Math.ceil(T[2])-A,1),G=Math.max(Math.ceil(T[3])-M,1),W=1,Y=1;L>f&&(W=L/f,L=f),G>f&&(Y=G/f,G=f),this.current.startNewPathAndClipBox([0,0,L,G]);let se="groupAt"+this.groupLevel;v.smask&&(se+="_smask_"+this.smaskCounter++%2);const le=this.cachedCanvases.getCanvas(se,L,G),ne=le.context;ne.scale(1/W,1/Y),ne.translate(-A,-M),ne.transform(...I),v.smask?this.smaskStack.push({canvas:le.canvas,context:ne,offsetX:A,offsetY:M,scaleX:W,scaleY:Y,subtype:v.smask.subtype,backdrop:v.smask.backdrop,transferMap:v.smask.transferMap||null,startTransformInverse:null}):(E.setTransform(1,0,0,1,0,0),E.translate(A,M),E.scale(W,Y),E.save()),F(E,ne),this.ctx=ne,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(E),this.groupLevel++}endGroup(v){if(!this.contentVisible)return;this.groupLevel--;const E=this.ctx,I=this.groupStack.pop();if(this.ctx=I,this.ctx.imageSmoothingEnabled=!1,v.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const T=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...T);const _=s.Util.getAxialAlignedBoundingBox([0,0,E.canvas.width,E.canvas.height],T);this.ctx.drawImage(E.canvas,0,0),this.ctx.restore(),this.compose(_)}}beginAnnotation(v,E,I,T,_){if(this.#e(),z(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(E)&&E.length===4){const A=E[2]-E[0],M=E[3]-E[1];if(_&&this.annotationCanvasMap){I=I.slice(),I[4]-=E[0],I[5]-=E[1],E=E.slice(),E[0]=E[1]=0,E[2]=A,E[3]=M;const[L,G]=s.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:W}=this,Y=Math.ceil(A*this.outputScaleX*W),se=Math.ceil(M*this.outputScaleY*W);this.annotationCanvas=this.canvasFactory.create(Y,se);const{canvas:le,context:ne}=this.annotationCanvas;this.annotationCanvasMap.set(v,le),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ne,this.ctx.setTransform(L,0,0,-G,0,M*G),z(this.ctx,this.foregroundColor)}else z(this.ctx,this.foregroundColor),this.ctx.rect(E[0],E[1],A,M),this.ctx.clip(),this.endPath()}this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...I),this.transform(...T)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(v){if(!this.contentVisible)return;const E=v.count;v=this.getObject(v.data,v),v.count=E;const I=this.ctx,T=this.processingType3;if(T&&(T.compiled===void 0&&(T.compiled=N(v)),T.compiled)){T.compiled(I);return}const _=this._createMaskCanvas(v),A=_.canvas;I.save(),I.setTransform(1,0,0,1,0,0),I.drawImage(A,_.offsetX,_.offsetY),I.restore(),this.compose()}paintImageMaskXObjectRepeat(v,E,I=0,T=0,_,A){if(!this.contentVisible)return;v=this.getObject(v.data,v);const M=this.ctx;M.save();const L=(0,r.getCurrentTransform)(M);M.transform(E,I,T,_,0,0);const G=this._createMaskCanvas(v);M.setTransform(1,0,0,1,0,0);for(let W=0,Y=A.length;W<Y;W+=2){const se=s.Util.transform(L,[E,I,T,_,A[W],A[W+1]]),[le,ne]=s.Util.applyTransform([0,0],se);M.drawImage(G.canvas,le,ne)}M.restore(),this.compose()}paintImageMaskXObjectGroup(v){if(!this.contentVisible)return;const E=this.ctx,I=this.current.fillColor,T=this.current.patternFill;for(const _ of v){const{data:A,width:M,height:L,transform:G}=_,W=this.cachedCanvases.getCanvas("maskCanvas",M,L),Y=W.context;Y.save();const se=this.getObject(A,_);q(Y,se),Y.globalCompositeOperation="source-in",Y.fillStyle=T?I.getPattern(Y,this,(0,r.getCurrentTransformInverse)(E),a.PathType.FILL):I,Y.fillRect(0,0,M,L),Y.restore(),E.save(),E.transform(...G),E.scale(1,-1),k(E,W.canvas,0,0,M,L,0,-1,1,1),E.restore()}this.compose()}paintImageXObject(v){if(!this.contentVisible)return;const E=this.getObject(v);if(!E){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(E)}paintImageXObjectRepeat(v,E,I,T){if(!this.contentVisible)return;const _=this.getObject(v);if(!_){(0,s.warn)("Dependent image isn't ready yet");return}const A=_.width,M=_.height,L=[];for(let G=0,W=T.length;G<W;G+=2)L.push({transform:[E,0,0,I,T[G],T[G+1]],x:0,y:0,w:A,h:M});this.paintInlineImageXObjectGroup(_,L)}paintInlineImageXObject(v){if(!this.contentVisible)return;const E=v.width,I=v.height,T=this.ctx;this.save(),T.scale(1/E,-1/I);let _;if(typeof HTMLElement=="function"&&v instanceof HTMLElement||!v.data)_=v;else{const G=this.cachedCanvases.getCanvas("inlineImage",E,I),W=G.context;B(W,v,this.current.transferMaps),_=G.canvas}const A=this._scaleImage(_,(0,r.getCurrentTransformInverse)(T));T.imageSmoothingEnabled=ee((0,r.getCurrentTransform)(T),v.interpolate);const[M,L]=k(T,A.img,0,0,A.paintWidth,A.paintHeight,0,-I,E,I);if(this.imageLayer){const[G,W]=s.Util.applyTransform([0,-I],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:v,left:G,top:W,width:M,height:L})}this.compose(),this.restore()}paintInlineImageXObjectGroup(v,E){if(!this.contentVisible)return;const I=this.ctx,T=v.width,_=v.height,A=this.cachedCanvases.getCanvas("inlineImage",T,_),M=A.context;B(M,v,this.current.transferMaps);for(const L of E){if(I.save(),I.transform(...L.transform),I.scale(1,-1),k(I,A.canvas,L.x,L.y,L.w,L.h,0,-1,1,1),this.imageLayer){const[G,W]=s.Util.applyTransform([L.x,L.y],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:v,left:G,top:W,width:T,height:_})}I.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(v){}markPointProps(v,E){}beginMarkedContent(v){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(v,E){v==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(E)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(v){const E=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(v);const I=this.ctx;this.pendingClip&&(E||(this.pendingClip===Z?I.clip("evenodd"):I.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),I.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const v=(0,r.getCurrentTransform)(this.ctx);if(v[1]===0&&v[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(v[0]),Math.abs(v[3]));else{const E=Math.abs(v[0]*v[3]-v[2]*v[1]),I=Math.hypot(v[0],v[2]),T=Math.hypot(v[1],v[3]);this._cachedGetSinglePixelWidth=Math.max(I,T)/E}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:v}=this.current,E=(0,r.getCurrentTransform)(this.ctx);let I,T;if(E[1]===0&&E[2]===0){const _=Math.abs(E[0]),A=Math.abs(E[3]);if(v===0)I=1/_,T=1/A;else{const M=_*v,L=A*v;I=M<1?1/M:1,T=L<1?1/L:1}}else{const _=Math.abs(E[0]*E[3]-E[2]*E[1]),A=Math.hypot(E[0],E[1]),M=Math.hypot(E[2],E[3]);if(v===0)I=M/_,T=A/_;else{const L=v*_;I=M>L?M/L:1,T=A>L?A/L:1}}this._cachedScaleForStroking=[I,T]}return this._cachedScaleForStroking}rescaleAndStroke(v){const{ctx:E}=this,{lineWidth:I}=this.current,[T,_]=this.getScaleForStroking();if(E.lineWidth=I||1,T===1&&_===1){E.stroke();return}let A,M,L;v&&(A=(0,r.getCurrentTransform)(E),M=E.getLineDash().slice(),L=E.lineDashOffset),E.scale(T,_);const G=Math.max(T,_);E.setLineDash(E.getLineDash().map(W=>W/G)),E.lineDashOffset/=G,E.stroke(),v&&(E.setTransform(...A),E.setLineDash(M),E.lineDashOffset=L)}isContentVisible(){for(let v=this.markedContentStack.length-1;v>=0;v--)if(!this.markedContentStack[v].visible)return!1;return!0}}e.CanvasGraphics=X;for(const O in s.OPS)X.prototype[O]!==void 0&&(X.prototype[s.OPS[O]]=X.prototype[O])}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=x;var r=n(1),s=n(8),a=n(3);const l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=l;function d(k,N){if(!N||a.isNodeJS)return;const R=N[2]-N[0],B=N[3]-N[1],q=new Path2D;q.rect(N[0],N[1],R,B),k.clip(q)}class h{constructor(){this.constructor===h&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class u extends h{constructor(N){super(),this._type=N[1],this._bbox=N[2],this._colorStops=N[3],this._p0=N[4],this._p1=N[5],this._r0=N[6],this._r1=N[7],this.matrix=null}_createGradient(N){let R;this._type==="axial"?R=N.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(R=N.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const B of this._colorStops)R.addColorStop(B[0],B[1]);return R}getPattern(N,R,B,q){let F;if(q===l.STROKE||q===l.FILL){const z=R.current.getClippedPathBoundingBox(q,(0,s.getCurrentTransform)(N))||[0,0,0,0],V=Math.ceil(z[2]-z[0])||1,b=Math.ceil(z[3]-z[1])||1,U=R.cachedCanvases.getCanvas("pattern",V,b,!0),H=U.context;H.clearRect(0,0,H.canvas.width,H.canvas.height),H.beginPath(),H.rect(0,0,H.canvas.width,H.canvas.height),H.translate(-z[0],-z[1]),B=r.Util.transform(B,[1,0,0,1,z[0],z[1]]),H.transform(...R.baseTransform),this.matrix&&H.transform(...this.matrix),d(H,this._bbox),H.fillStyle=this._createGradient(H),H.fill(),F=N.createPattern(U.canvas,"no-repeat");const j=new DOMMatrix(B);try{F.setTransform(j)}catch(ee){(0,r.warn)(`RadialAxialShadingPattern.getPattern: "${ee?.message}".`)}}else d(N,this._bbox),F=this._createGradient(N);return F}}function f(k,N,R,B,q,F,z,V){const b=N.coords,U=N.colors,H=k.data,j=k.width*4;let ee;b[R+1]>b[B+1]&&(ee=R,R=B,B=ee,ee=F,F=z,z=ee),b[B+1]>b[q+1]&&(ee=B,B=q,q=ee,ee=z,z=V,V=ee),b[R+1]>b[B+1]&&(ee=R,R=B,B=ee,ee=F,F=z,z=ee);const $=(b[R]+N.offsetX)*N.scaleX,J=(b[R+1]+N.offsetY)*N.scaleY,Q=(b[B]+N.offsetX)*N.scaleX,Z=(b[B+1]+N.offsetY)*N.scaleY,X=(b[q]+N.offsetX)*N.scaleX,O=(b[q+1]+N.offsetY)*N.scaleY;if(J>=O)return;const v=U[F],E=U[F+1],I=U[F+2],T=U[z],_=U[z+1],A=U[z+2],M=U[V],L=U[V+1],G=U[V+2],W=Math.round(J),Y=Math.round(O);let se,le,ne,de,ge,me,Se,Ce;for(let Ae=W;Ae<=Y;Ae++){if(Ae<Z){let De;Ae<J?De=0:De=(J-Ae)/(J-Z),se=$-($-Q)*De,le=v-(v-T)*De,ne=E-(E-_)*De,de=I-(I-A)*De}else{let De;Ae>O?De=1:Z===O?De=0:De=(Z-Ae)/(Z-O),se=Q-(Q-X)*De,le=T-(T-M)*De,ne=_-(_-L)*De,de=A-(A-G)*De}let Ie;Ae<J?Ie=0:Ae>O?Ie=1:Ie=(J-Ae)/(J-O),ge=$-($-X)*Ie,me=v-(v-M)*Ie,Se=E-(E-L)*Ie,Ce=I-(I-G)*Ie;const _e=Math.round(Math.min(se,ge)),Je=Math.round(Math.max(se,ge));let et=j*Ae+_e*4;for(let De=_e;De<=Je;De++)Ie=(se-De)/(se-ge),Ie<0?Ie=0:Ie>1&&(Ie=1),H[et++]=le-(le-me)*Ie|0,H[et++]=ne-(ne-Se)*Ie|0,H[et++]=de-(de-Ce)*Ie|0,H[et++]=255}}function p(k,N,R){const B=N.coords,q=N.colors;let F,z;switch(N.type){case"lattice":const V=N.verticesPerRow,b=Math.floor(B.length/V)-1,U=V-1;for(F=0;F<b;F++){let H=F*V;for(let j=0;j<U;j++,H++)f(k,R,B[H],B[H+1],B[H+V],q[H],q[H+1],q[H+V]),f(k,R,B[H+V+1],B[H+1],B[H+V],q[H+V+1],q[H+1],q[H+V])}break;case"triangles":for(F=0,z=B.length;F<z;F+=3)f(k,R,B[F],B[F+1],B[F+2],q[F],q[F+1],q[F+2]);break;default:throw new Error("illegal figure")}}class g extends h{constructor(N){super(),this._coords=N[2],this._colors=N[3],this._figures=N[4],this._bounds=N[5],this._bbox=N[7],this._background=N[8],this.matrix=null}_createMeshCanvas(N,R,B){const V=Math.floor(this._bounds[0]),b=Math.floor(this._bounds[1]),U=Math.ceil(this._bounds[2])-V,H=Math.ceil(this._bounds[3])-b,j=Math.min(Math.ceil(Math.abs(U*N[0]*1.1)),3e3),ee=Math.min(Math.ceil(Math.abs(H*N[1]*1.1)),3e3),$=U/j,J=H/ee,Q={coords:this._coords,colors:this._colors,offsetX:-V,offsetY:-b,scaleX:1/$,scaleY:1/J},Z=j+4,X=ee+4,O=B.getCanvas("mesh",Z,X,!1),v=O.context,E=v.createImageData(j,ee);if(R){const T=E.data;for(let _=0,A=T.length;_<A;_+=4)T[_]=R[0],T[_+1]=R[1],T[_+2]=R[2],T[_+3]=255}for(const T of this._figures)p(E,T,Q);return v.putImageData(E,2,2),{canvas:O.canvas,offsetX:V-2*$,offsetY:b-2*J,scaleX:$,scaleY:J}}getPattern(N,R,B,q){d(N,this._bbox);let F;if(q===l.SHADING)F=r.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(N));else if(F=r.Util.singularValueDecompose2dScale(R.baseTransform),this.matrix){const V=r.Util.singularValueDecompose2dScale(this.matrix);F=[F[0]*V[0],F[1]*V[1]]}const z=this._createMeshCanvas(F,q===l.SHADING?null:this._background,R.cachedCanvases);return q!==l.SHADING&&(N.setTransform(...R.baseTransform),this.matrix&&N.transform(...this.matrix)),N.translate(z.offsetX,z.offsetY),N.scale(z.scaleX,z.scaleY),N.createPattern(z.canvas,"no-repeat")}}class y extends h{getPattern(){return"hotpink"}}function x(k){switch(k[0]){case"RadialAxial":return new u(k);case"Mesh":return new g(k);case"Dummy":return new y}throw new Error(`Unknown IR type: ${k[0]}`)}const S={COLORED:1,UNCOLORED:2};class w{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(N,R,B,q,F){this.operatorList=N[2],this.matrix=N[3]||[1,0,0,1,0,0],this.bbox=N[4],this.xstep=N[5],this.ystep=N[6],this.paintType=N[7],this.tilingType=N[8],this.color=R,this.ctx=B,this.canvasGraphicsFactory=q,this.baseTransform=F}createPatternCanvas(N){const R=this.operatorList,B=this.bbox,q=this.xstep,F=this.ystep,z=this.paintType,V=this.tilingType,b=this.color,U=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+V);const H=B[0],j=B[1],ee=B[2],$=B[3],J=r.Util.singularValueDecompose2dScale(this.matrix),Q=r.Util.singularValueDecompose2dScale(this.baseTransform),Z=[J[0]*Q[0],J[1]*Q[1]],X=this.getSizeAndScale(q,this.ctx.canvas.width,Z[0]),O=this.getSizeAndScale(F,this.ctx.canvas.height,Z[1]),v=N.cachedCanvases.getCanvas("pattern",X.size,O.size,!0),E=v.context,I=U.createCanvasGraphics(E);I.groupLevel=N.groupLevel,this.setFillAndStrokeStyleToContext(I,z,b);let T=H,_=j,A=ee,M=$;return H<0&&(T=0,A+=Math.abs(H)),j<0&&(_=0,M+=Math.abs(j)),E.translate(-(X.scale*T),-(O.scale*_)),I.transform(X.scale,0,0,O.scale,0,0),E.save(),this.clipBbox(I,T,_,A,M),I.baseTransform=(0,s.getCurrentTransform)(I.ctx),I.executeOperatorList(R),I.endDrawing(),{canvas:v.canvas,scaleX:X.scale,scaleY:O.scale,offsetX:T,offsetY:_}}getSizeAndScale(N,R,B){N=Math.abs(N);const q=Math.max(w.MAX_PATTERN_SIZE,R);let F=Math.ceil(N*B);return F>=q?F=q:B=F/N,{scale:B,size:F}}clipBbox(N,R,B,q,F){const z=q-R,V=F-B;N.ctx.rect(R,B,z,V),N.current.updateRectMinMax((0,s.getCurrentTransform)(N.ctx),[R,B,q,F]),N.clip(),N.endPath()}setFillAndStrokeStyleToContext(N,R,B){const q=N.ctx,F=N.current;switch(R){case S.COLORED:const z=this.ctx;q.fillStyle=z.fillStyle,q.strokeStyle=z.strokeStyle,F.fillColor=z.fillStyle,F.strokeColor=z.strokeStyle;break;case S.UNCOLORED:const V=r.Util.makeHexColor(B[0],B[1],B[2]);q.fillStyle=V,q.strokeStyle=V,F.fillColor=V,F.strokeColor=V;break;default:throw new r.FormatError(`Unsupported paint type: ${R}`)}}getPattern(N,R,B,q){let F=B;q!==l.SHADING&&(F=r.Util.transform(F,R.baseTransform),this.matrix&&(F=r.Util.transform(F,this.matrix)));const z=this.createPatternCanvas(R);let V=new DOMMatrix(F);V=V.translate(z.offsetX,z.offsetY),V=V.scale(1/z.scaleX,1/z.scaleY);const b=N.createPattern(z.canvas,"repeat");try{b.setTransform(V)}catch(U){(0,r.warn)(`TilingPattern.getPattern: "${U?.message}".`)}return b}}e.TilingPattern=w}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=s;var r=n(1);function s({src:a,srcPos:l=0,dest:d,destPos:h=0,width:u,height:f,inverseDecode:p=!1}){const g=r.FeatureTest.isLittleEndian?4278190080:255,[y,x]=p?[0,g]:[g,0],S=u>>3,w=u&7,k=a.length;d=new Uint32Array(d.buffer);for(let N=0;N<f;N++){for(const B=l+S;l<B;l++){const q=l<k?a[l]:255;d[h++]=q&128?x:y,d[h++]=q&64?x:y,d[h++]=q&32?x:y,d[h++]=q&16?x:y,d[h++]=q&8?x:y,d[h++]=q&4?x:y,d[h++]=q&2?x:y,d[h++]=q&1?x:y}if(w===0)continue;const R=l<k?a[l++]:255;for(let B=0;B<w;B++)d[h++]=R&1<<7-B?x:y}return{srcPos:l,destPos:h}}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=n.workerPort===void 0?null:n.workerPort,n.workerSrc=n.workerSrc===void 0?"":n.workerSrc}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=n(1);const s={DATA:1,ERROR:2},a={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function l(h){switch(h instanceof Error||typeof h=="object"&&h!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new r.AbortException(h.message);case"MissingPDFException":return new r.MissingPDFException(h.message);case"PasswordException":return new r.PasswordException(h.message,h.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(h.message,h.status);case"UnknownErrorException":return new r.UnknownErrorException(h.message,h.details);default:return new r.UnknownErrorException(h.message,h.toString())}}class d{constructor(u,f,p){this.sourceName=u,this.targetName=f,this.comObj=p,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=g=>{const y=g.data;if(y.targetName!==this.sourceName)return;if(y.stream){this._processStreamMessage(y);return}if(y.callback){const S=y.callbackId,w=this.callbackCapabilities[S];if(!w)throw new Error(`Cannot resolve callback ${S}`);if(delete this.callbackCapabilities[S],y.callback===s.DATA)w.resolve(y.data);else if(y.callback===s.ERROR)w.reject(l(y.reason));else throw new Error("Unexpected callback case");return}const x=this.actionHandler[y.action];if(!x)throw new Error(`Unknown action from worker: ${y.action}`);if(y.callbackId){const S=this.sourceName,w=y.sourceName;new Promise(function(k){k(x(y.data))}).then(function(k){p.postMessage({sourceName:S,targetName:w,callback:s.DATA,callbackId:y.callbackId,data:k})},function(k){p.postMessage({sourceName:S,targetName:w,callback:s.ERROR,callbackId:y.callbackId,reason:l(k)})});return}if(y.streamId){this._createStreamSink(y);return}x(y.data)},p.addEventListener("message",this._onComObjOnMessage)}on(u,f){const p=this.actionHandler;if(p[u])throw new Error(`There is already an actionName called "${u}"`);p[u]=f}send(u,f,p){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:f},p)}sendWithPromise(u,f,p){const g=this.callbackId++,y=(0,r.createPromiseCapability)();this.callbackCapabilities[g]=y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:g,data:f},p)}catch(x){y.reject(x)}return y.promise}sendWithStream(u,f,p,g){const y=this.streamId++,x=this.sourceName,S=this.targetName,w=this.comObj;return new ReadableStream({start:k=>{const N=(0,r.createPromiseCapability)();return this.streamControllers[y]={controller:k,startCall:N,pullCall:null,cancelCall:null,isClosed:!1},w.postMessage({sourceName:x,targetName:S,action:u,streamId:y,data:f,desiredSize:k.desiredSize},g),N.promise},pull:k=>{const N=(0,r.createPromiseCapability)();return this.streamControllers[y].pullCall=N,w.postMessage({sourceName:x,targetName:S,stream:a.PULL,streamId:y,desiredSize:k.desiredSize}),N.promise},cancel:k=>{(0,r.assert)(k instanceof Error,"cancel must have a valid reason");const N=(0,r.createPromiseCapability)();return this.streamControllers[y].cancelCall=N,this.streamControllers[y].isClosed=!0,w.postMessage({sourceName:x,targetName:S,stream:a.CANCEL,streamId:y,reason:l(k)}),N.promise}},p)}_createStreamSink(u){const f=u.streamId,p=this.sourceName,g=u.sourceName,y=this.comObj,x=this,S=this.actionHandler[u.action],w={enqueue(k,N=1,R){if(this.isCancelled)return;const B=this.desiredSize;this.desiredSize-=N,B>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),y.postMessage({sourceName:p,targetName:g,stream:a.ENQUEUE,streamId:f,chunk:k},R)},close(){this.isCancelled||(this.isCancelled=!0,y.postMessage({sourceName:p,targetName:g,stream:a.CLOSE,streamId:f}),delete x.streamSinks[f])},error(k){(0,r.assert)(k instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,y.postMessage({sourceName:p,targetName:g,stream:a.ERROR,streamId:f,reason:l(k)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};w.sinkCapability.resolve(),w.ready=w.sinkCapability.promise,this.streamSinks[f]=w,new Promise(function(k){k(S(u.data,w))}).then(function(){y.postMessage({sourceName:p,targetName:g,stream:a.START_COMPLETE,streamId:f,success:!0})},function(k){y.postMessage({sourceName:p,targetName:g,stream:a.START_COMPLETE,streamId:f,reason:l(k)})})}_processStreamMessage(u){const f=u.streamId,p=this.sourceName,g=u.sourceName,y=this.comObj,x=this.streamControllers[f],S=this.streamSinks[f];switch(u.stream){case a.START_COMPLETE:u.success?x.startCall.resolve():x.startCall.reject(l(u.reason));break;case a.PULL_COMPLETE:u.success?x.pullCall.resolve():x.pullCall.reject(l(u.reason));break;case a.PULL:if(!S){y.postMessage({sourceName:p,targetName:g,stream:a.PULL_COMPLETE,streamId:f,success:!0});break}S.desiredSize<=0&&u.desiredSize>0&&S.sinkCapability.resolve(),S.desiredSize=u.desiredSize,new Promise(function(w){w(S.onPull&&S.onPull())}).then(function(){y.postMessage({sourceName:p,targetName:g,stream:a.PULL_COMPLETE,streamId:f,success:!0})},function(w){y.postMessage({sourceName:p,targetName:g,stream:a.PULL_COMPLETE,streamId:f,reason:l(w)})});break;case a.ENQUEUE:if((0,r.assert)(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(u.chunk);break;case a.CLOSE:if((0,r.assert)(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),this._deleteStreamController(x,f);break;case a.ERROR:(0,r.assert)(x,"error should have stream controller"),x.controller.error(l(u.reason)),this._deleteStreamController(x,f);break;case a.CANCEL_COMPLETE:u.success?x.cancelCall.resolve():x.cancelCall.reject(l(u.reason)),this._deleteStreamController(x,f);break;case a.CANCEL:if(!S)break;new Promise(function(w){w(S.onCancel&&S.onCancel(l(u.reason)))}).then(function(){y.postMessage({sourceName:p,targetName:g,stream:a.CANCEL_COMPLETE,streamId:f,success:!0})},function(w){y.postMessage({sourceName:p,targetName:g,stream:a.CANCEL_COMPLETE,streamId:f,reason:l(w)})}),S.sinkCapability.reject(l(u.reason)),S.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(u,f){await Promise.allSettled([u.startCall&&u.startCall.promise,u.pullCall&&u.pullCall.promise,u.cancelCall&&u.cancelCall.promise]),delete this.streamControllers[f]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=d}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1);class s{#e;#t;constructor({parsedData:l,rawData:d}){this.#e=l,this.#t=d}getRaw(){return this.#t}get(l){return this.#e.get(l)??null}getAll(){return(0,r.objectFromMap)(this.#e)}has(l){return this.#e.has(l)}}e.Metadata=s}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=n(1);const s=Symbol("INTERNAL");class a{#e=!0;constructor(h,u){this.name=h,this.intent=u}get visible(){return this.#e}_setVisible(h,u){h!==s&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#e=u}}class l{#e=!0;#t=new Map;#i=null;#n=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#n=h.order;for(const u of h.groups)this.#t.set(u.id,new a(u.name,u.intent));if(h.baseState==="OFF")for(const u of this.#t.values())u._setVisible(s,!1);for(const u of h.on)this.#t.get(u)._setVisible(s,!0);for(const u of h.off)this.#t.get(u)._setVisible(s,!1);this.#i=new Map;for(const[u,f]of this.#t)this.#i.set(u,f.visible)}}#s(h){const u=h.length;if(u<2)return!0;const f=h[0];for(let p=1;p<u;p++){const g=h[p];let y;if(Array.isArray(g))y=this.#s(g);else if(this.#t.has(g))y=this.#t.get(g).visible;else return(0,r.warn)(`Optional content group not found: ${g}`),!0;switch(f){case"And":if(!y)return!1;break;case"Or":if(y)return!0;break;case"Not":return!y;default:return!0}}return f==="And"}isVisible(h){if(this.#t.size===0)return!0;if(!h)return(0,r.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#t.has(h.id)?this.#t.get(h.id).visible:((0,r.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#s(h.expression);if(!h.policy||h.policy==="AnyOn"){for(const u of h.ids){if(!this.#t.has(u))return(0,r.warn)(`Optional content group not found: ${u}`),!0;if(this.#t.get(u).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const u of h.ids){if(!this.#t.has(u))return(0,r.warn)(`Optional content group not found: ${u}`),!0;if(!this.#t.get(u).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const u of h.ids){if(!this.#t.has(u))return(0,r.warn)(`Optional content group not found: ${u}`),!0;if(!this.#t.get(u).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const u of h.ids){if(!this.#t.has(u))return(0,r.warn)(`Optional content group not found: ${u}`),!0;if(this.#t.get(u).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,r.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,u=!0){if(!this.#t.has(h)){(0,r.warn)(`Optional content group not found: ${h}`);return}this.#t.get(h)._setVisible(s,!!u),this.#e=null}get hasInitialVisibility(){if(this.#e!==null)return this.#e;for(const[h,u]of this.#t){const f=this.#i.get(h);if(u.visible!==f)return this.#e=!1}return this.#e=!0}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}getGroup(h){return this.#t.get(h)||null}}e.OptionalContentConfig=l}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=n(1),s=n(8);class a{constructor(u,f){(0,r.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=u.progressiveDone||!1,this._contentDispositionFilename=u.contentDispositionFilename||null;const p=u.initialData;if(p?.length>0){const g=new Uint8Array(p).buffer;this._queuedChunks.push(g)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._contentLength=u.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((g,y)=>{this._onReceiveData({begin:g,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((g,y)=>{this._onProgress({loaded:g,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(g=>{this._onReceiveData({chunk:g})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(u){const f=new Uint8Array(u.chunk).buffer;if(u.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const p=this._rangeReaders.some(function(g){return g._begin!==u.begin?!1:(g._enqueue(f),!0)});(0,r.assert)(p,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(u){if(u.total===void 0){const f=this._rangeReaders[0];f?.onProgress&&f.onProgress({loaded:u.loaded})}else{const f=this._fullRequestReader;f?.onProgress&&f.onProgress({loaded:u.loaded,total:u.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const f=this._rangeReaders.indexOf(u);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new l(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,f){if(f<=this._progressiveDataLength)return null;const p=new d(this,u,f);return this._pdfDataRangeTransport.requestDataRange(u,f),this._rangeReaders.push(p),p}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);for(const f of this._rangeReaders.slice(0))f.cancel(u);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=a;class l{constructor(u,f,p=!1,g=null){this._stream=u,this._done=p||!1,this._filename=(0,s.isPdfFile)(g)?g:null,this._queuedChunks=f||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,r.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class d{constructor(u,f,p){this._stream=u,this._begin=f,this._end=p,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,r.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(s){const a=[],l={items:a,styles:Object.create(null)};function d(h){if(!h)return;let u=null;const f=h.name;if(f==="#text")u=h.value;else if(n.shouldBuildText(f))h?.attributes?.textContent?u=h.attributes.textContent:h.value&&(u=h.value);else return;if(u!==null&&a.push({str:u}),!!h.children)for(const p of h.children)d(p)}return d(s),l}static shouldBuildText(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}e.XfaText=n}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=n(9);const s=function(h){return new Promise((u,f)=>{require$$5.readFile(h,(g,y)=>{if(g||!y){f(new Error(g));return}u(new Uint8Array(y))})})};class a extends r.BaseCanvasFactory{_createCanvas(u,f){return require$$5.createCanvas(u,f)}}e.NodeCanvasFactory=a;class l extends r.BaseCMapReaderFactory{_fetchData(u,f){return s(u).then(p=>({cMapData:p,compressionType:f}))}}e.NodeCMapReaderFactory=l;class d extends r.BaseStandardFontDataFactory{_fetchData(u){return s(u)}}e.NodeStandardFontDataFactory=d}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=n(7),s=n(1),a=n(23),l=n(24);class d{#e;#t=!1;#i=this.pointerup.bind(this);#n=this.pointerdown.bind(this);#s=new Map;#c=!1;#a=!1;#r;static _initialized=!1;constructor(u){d._initialized||(d._initialized=!0,a.FreeTextEditor.initialize(u.l10n),l.InkEditor.initialize(u.l10n),u.uiManager.registerEditorTypes([a.FreeTextEditor,l.InkEditor])),this.#r=u.uiManager,this.annotationStorage=u.annotationStorage,this.pageIndex=u.pageIndex,this.div=u.div,this.#e=u.accessibilityManager,this.#r.addLayer(this)}updateToolbar(u){this.#r.updateToolbar(u)}updateMode(u=this.#r.getMode()){this.#o(),u===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#r.unselectAll()}addInkEditorIfNeeded(u){if(!u&&this.#r.getMode()!==s.AnnotationEditorType.INK)return;if(!u){for(const p of this.#s.values())if(p.isEmpty()){p.setInBackground();return}}this.#u({offsetX:0,offsetY:0}).setInBackground()}setEditingState(u){this.#r.setEditingState(u)}addCommands(u){this.#r.addCommands(u)}enable(){this.div.style.pointerEvents="auto";for(const u of this.#s.values())u.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const u of this.#s.values())u.disableEditing()}setActiveEditor(u){this.#r.getActive()!==u&&this.#r.setActiveEditor(u)}enableClick(){this.div.addEventListener("pointerdown",this.#n),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#n),this.div.removeEventListener("pointerup",this.#i)}attach(u){this.#s.set(u.id,u)}detach(u){this.#s.delete(u.id),this.#e?.removePointerInTextLayer(u.contentDiv)}remove(u){this.#r.removeEditor(u),this.detach(u),this.annotationStorage.remove(u.id),u.div.style.display="none",setTimeout(()=>{u.div.style.display="",u.div.remove(),u.isAttachedToDOM=!1,document.activeElement===document.body&&this.#r.focusMainContainer()},0),this.#a||this.addInkEditorIfNeeded(!1)}#h(u){u.parent!==this&&(this.attach(u),u.pageIndex=this.pageIndex,u.parent?.detach(u),u.parent=this,u.div&&u.isAttachedToDOM&&(u.div.remove(),this.div.append(u.div)))}add(u){if(this.#h(u),this.#r.addEditor(u),this.attach(u),!u.isAttachedToDOM){const f=u.render();this.div.append(f),u.isAttachedToDOM=!0}this.moveEditorInDOM(u),u.onceAdded(),this.addToAnnotationStorage(u)}moveEditorInDOM(u){this.#e?.moveElementInDOM(this.div,u.div,u.contentDiv,!0)}addToAnnotationStorage(u){!u.isEmpty()&&!this.annotationStorage.has(u.id)&&this.annotationStorage.setValue(u.id,u)}addOrRebuild(u){u.needsToBeRebuilt()?u.rebuild():this.add(u)}addANewEditor(u){const f=()=>{this.addOrRebuild(u)},p=()=>{u.remove()};this.addCommands({cmd:f,undo:p,mustExec:!0})}addUndoableEditor(u){const f=()=>{this.addOrRebuild(u)},p=()=>{u.remove()};this.addCommands({cmd:f,undo:p,mustExec:!1})}getNextId(){return this.#r.getId()}#l(u){switch(this.#r.getMode()){case s.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(u);case s.AnnotationEditorType.INK:return new l.InkEditor(u)}return null}deserialize(u){switch(u.annotationType){case s.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(u,this);case s.AnnotationEditorType.INK:return l.InkEditor.deserialize(u,this)}return null}#u(u){const f=this.getNextId(),p=this.#l({parent:this,id:f,x:u.offsetX,y:u.offsetY});return p&&this.add(p),p}setSelected(u){this.#r.setSelected(u)}toggleSelected(u){this.#r.toggleSelected(u)}isSelected(u){return this.#r.isSelected(u)}unselect(u){this.#r.unselect(u)}pointerup(u){const f=r.KeyboardManager.platform.isMac;if(!(u.button!==0||u.ctrlKey&&f)&&u.target===this.div&&this.#c){if(this.#c=!1,!this.#t){this.#t=!0;return}this.#u(u)}}pointerdown(u){const f=r.KeyboardManager.platform.isMac;if(u.button!==0||u.ctrlKey&&f||u.target!==this.div)return;this.#c=!0;const p=this.#r.getActive();this.#t=!p||p.isEmpty()}drop(u){const f=u.dataTransfer.getData("text/plain"),p=this.#r.getEditor(f);if(!p)return;u.preventDefault(),u.dataTransfer.dropEffect="move",this.#h(p);const g=this.div.getBoundingClientRect(),y=u.clientX-g.x,x=u.clientY-g.y;p.translate(y-p.startX,x-p.startY),this.moveEditorInDOM(p),p.div.focus()}dragover(u){u.preventDefault()}destroy(){this.#r.getActive()?.parent===this&&this.#r.setActiveEditor(null);for(const u of this.#s.values())this.#e?.removePointerInTextLayer(u.contentDiv),u.isAttachedToDOM=!1,u.div.remove(),u.parent=null;this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#o(){this.#a=!0;for(const u of this.#s.values())u.isEmpty()&&u.remove();this.#a=!1}render(u){this.viewport=u.viewport,(0,r.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const f of this.#r.getEditors(this.pageIndex))this.add(f);this.updateMode()}update(u){this.viewport=u.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[u,f,p,g]=this.viewport.viewBox,y=p-u,x=g-f;return[y,x]}get viewportBaseDimensions(){const{width:u,height:f,rotation:p}=this.viewport;return p%180===0?[u,f]:[f,u]}setDimensions(){const{width:u,height:f,rotation:p}=this.viewport,g=p%180!==0,y=Math.floor(u)+"px",x=Math.floor(f)+"px";this.div.style.width=g?x:y,this.div.style.height=g?y:x,this.div.setAttribute("data-main-rotation",p)}}e.AnnotationEditorLayer=d}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=n(1),s=n(7),a=n(6);class l extends a.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#i=this.editorDivKeydown.bind(this);#n;#s="";#c=!1;#a;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new s.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],l.prototype.commitOrRemove]]);static _type="freetext";constructor(h){super({...h,name:"freeTextEditor"}),this.#n=h.color||l._defaultColor||a.AnnotationEditor._defaultLineColor,this.#a=h.fontSize||l._defaultFontSize}static initialize(h){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(f=>[f,h.get(f)]));const u=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(u.getPropertyValue("--freetext-padding"))}static updateDefaultParams(h,u){switch(h){case r.AnnotationEditorParamsType.FREETEXT_SIZE:l._defaultFontSize=u;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:l._defaultColor=u;break}}updateParams(h,u){switch(h){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(u);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#h(u);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,l._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,l._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#a],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#n]]}#r(h){const u=p=>{this.editorDiv.style.fontSize=`calc(${p}px * var(--scale-factor))`,this.translate(0,-(p-this.#a)*this.parent.scaleFactor),this.#a=p,this.#u()},f=this.#a;this.parent.addCommands({cmd:()=>{u(h)},undo:()=>{u(f)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#h(h){const u=this.#n;this.parent.addCommands({cmd:()=>{this.#n=h,this.editorDiv.style.color=h},undo:()=>{this.#n=u,this.editorDiv.style.color=u},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){return[-l._internalPadding*this.parent.scaleFactor,-(l._internalPadding+this.#a)*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.div.focus(),this.isEditing=!1)}focusin(h){super.focusin(h),h.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}#l(){const h=this.editorDiv.getElementsByTagName("div");if(h.length===0)return this.editorDiv.innerText;const u=[];for(let f=0,p=h.length;f<p;f++){const y=h[f].firstChild;y?.nodeName==="#text"?u.push(y.data):u.push("")}return u.join(`
`)}#u(){const[h,u]=this.parent.viewportBaseDimensions,f=this.div.getBoundingClientRect();this.width=f.width/h,this.height=f.height/u}commit(){super.commit(),this.#c||(this.#c=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#s=this.#l().trimEnd(),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(h){this.enableEditMode(),this.editorDiv.focus()}keydown(h){h.target===this.div&&h.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(h){l._keyboardManager.exec(this,h)}editorDivFocus(h){this.isEditing=!0}editorDivBlur(h){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let h,u;this.width&&(h=this.x,u=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),l._l10nPromise.get("editor_free_text_aria_label").then(p=>this.editorDiv?.setAttribute("aria-label",p)),l._l10nPromise.get("free_text_default_content").then(p=>this.editorDiv?.setAttribute("default-content",p)),this.editorDiv.contentEditable=!0;const{style:f}=this.editorDiv;if(f.fontSize=`calc(${this.#a}px * var(--scale-factor))`,f.color=this.#n,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[p,g]=this.parent.viewportBaseDimensions;this.setAt(h*p,u*g,this.width*p,this.height*g);for(const y of this.#s.split(`
`)){const x=document.createElement("div");x.append(y?document.createTextNode(y):document.createElement("br")),this.editorDiv.append(x)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(h,u){const f=super.deserialize(h,u);return f.#a=h.fontSize,f.#n=r.Util.makeHexColor(...h.color),f.#s=h.value,f}serialize(){if(this.isEmpty())return null;const h=l._internalPadding*this.parent.scaleFactor,u=this.getRect(h,h),f=a.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:r.AnnotationEditorType.FREETEXT,color:f,fontSize:this.#a,value:this.#s,pageIndex:this.parent.pageIndex,rect:u,rotation:this.rotation}}}e.FreeTextEditor=l}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return a.fitCurve}});var r=n(1),s=n(6),a=n(25),l=n(7);const d=16;class h extends s.AnnotationEditor{#e=0;#t=0;#i=0;#n=this.canvasPointermove.bind(this);#s=this.canvasPointerleave.bind(this);#c=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#r=!1;#h=!1;#l=null;#u=null;#o=0;#g=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(f){super({...f,name:"inkEditor"}),this.color=f.color||null,this.thickness=f.thickness||null,this.opacity=f.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(f){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(p=>[p,f.get(p)]))}static updateDefaultParams(f,p){switch(f){case r.AnnotationEditorParamsType.INK_THICKNESS:h._defaultThickness=p;break;case r.AnnotationEditorParamsType.INK_COLOR:h._defaultColor=p;break;case r.AnnotationEditorParamsType.INK_OPACITY:h._defaultOpacity=p/100;break}}updateParams(f,p){switch(f){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#C(p);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#T(p);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#P(p);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,h._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,h._defaultColor||s.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(h._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||h._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||h._defaultColor||s.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??h._defaultOpacity))]]}#C(f){const p=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=f,this.#S()},undo:()=>{this.thickness=p,this.#S()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#T(f){const p=this.color;this.parent.addCommands({cmd:()=>{this.color=f,this.#f()},undo:()=>{this.color=p,this.#f()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#P(f){f/=100;const p=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=f,this.#f()},undo:()=>{this.opacity=p,this.#f()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(this.#m(),this.#y()),this.isAttachedToDOM||(this.parent.add(this),this.#E()),this.#S())}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#u.disconnect(),this.#u=null,super.remove())}enableEditMode(){this.#r||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#a),this.canvas.addEventListener("pointerup",this.#c))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a),this.canvas.removeEventListener("pointerup",this.#c))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#A(){const{width:f,height:p,rotation:g}=this.parent.viewport;switch(g){case 90:return[0,f,f,p];case 180:return[f,p,f,p];case 270:return[p,0,f,p];default:return[0,0,f,p]}}#x(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,l.opacityToHex)(this.opacity)}`}#d(f,p){this.isEditing=!0,this.#h||(this.#h=!0,this.#E(),this.thickness||=h._defaultThickness,this.color||=h._defaultColor||s.AnnotationEditor._defaultLineColor,this.opacity??=h._defaultOpacity),this.currentPath.push([f,p]),this.#l=null,this.#x(),this.ctx.beginPath(),this.ctx.moveTo(f,p),this.#p=()=>{this.#p&&(this.#l&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#f(),this.ctx.lineTo(...this.#l),this.#l=null,this.ctx.stroke()),window.requestAnimationFrame(this.#p))},window.requestAnimationFrame(this.#p)}#v(f,p){const[g,y]=this.currentPath.at(-1);f===g&&p===y||(this.currentPath.push([f,p]),this.#l=[f,p])}#w(f,p){this.ctx.closePath(),this.#p=null,f=Math.min(Math.max(f,0),this.canvas.width),p=Math.min(Math.max(p,0),this.canvas.height);const[g,y]=this.currentPath.at(-1);(f!==g||p!==y)&&this.currentPath.push([f,p]);let x;if(this.currentPath.length!==1)x=(0,a.fitCurve)(this.currentPath,30,null);else{const N=[f,p];x=[[N,N.slice(),N.slice(),N]]}const S=h.#k(x);this.currentPath.length=0;const w=()=>{this.paths.push(x),this.bezierPath2D.push(S),this.rebuild()},k=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#m(),this.#y()),this.#S())};this.parent.addCommands({cmd:w,undo:k,mustExec:!0})}#f(){if(this.isEmpty()){this.#R();return}this.#x();const{canvas:f,ctx:p}=this;p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,f.width,f.height),this.#R();for(const g of this.bezierPath2D)p.stroke(g)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#S(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(f){super.focusin(f),this.enableEditMode()}canvasPointerdown(f){f.button!==0||!this.isInEditMode()||this.#r||(this.setInForeground(),f.type!=="mouse"&&this.div.focus(),f.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#s),this.canvas.addEventListener("pointermove",this.#n),this.#d(f.offsetX,f.offsetY))}canvasPointermove(f){f.stopPropagation(),this.#v(f.offsetX,f.offsetY)}canvasPointerup(f){f.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(f.stopPropagation(),this.#_(f),this.setInBackground())}canvasPointerleave(f){this.#_(f),this.setInBackground()}#_(f){this.#w(f.offsetX,f.offsetY),this.canvas.removeEventListener("pointerleave",this.#s),this.canvas.removeEventListener("pointermove",this.#n),this.parent.addToAnnotationStorage(this)}#m(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",h._l10nPromise.get("editor_ink_canvas_aria_label").then(f=>this.canvas?.setAttribute("aria-label",f)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#y(){this.#u=new ResizeObserver(f=>{const p=f[0].contentRect;p.width&&p.height&&this.setDimensions(p.width,p.height)}),this.#u.observe(this.div)}render(){if(this.div)return this.div;let f,p;this.width&&(f=this.x,p=this.y),super.render(),h._l10nPromise.get("editor_ink_aria_label").then(w=>this.div?.setAttribute("aria-label",w));const[g,y,x,S]=this.#A();if(this.setAt(g,y,0,0),this.setDims(x,S),this.#m(),this.width){const[w,k]=this.parent.viewportBaseDimensions;this.setAt(f*w,p*k,this.width*w,this.height*k),this.#h=!0,this.#E(),this.setDims(this.width*w,this.height*k),this.#f(),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#y(),this.div}#E(){if(!this.#h)return;const[f,p]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*f),this.canvas.height=Math.ceil(this.height*p),this.#R()}setDimensions(f,p){const g=Math.round(f),y=Math.round(p);if(this.#o===g&&this.#g===y)return;this.#o=g,this.#g=y,this.canvas.style.visibility="hidden",this.#e&&Math.abs(this.#e-f/p)>.01&&(p=Math.ceil(f/this.#e),this.setDims(f,p));const[x,S]=this.parent.viewportBaseDimensions;this.width=f/x,this.height=p/S,this.#r&&this.#V(f,p),this.#E(),this.#f(),this.canvas.style.visibility="visible"}#V(f,p){const g=this.#B(),y=(f-g)/this.#i,x=(p-g)/this.#t;this.scaleFactor=Math.min(y,x)}#R(){const f=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+f,this.translationY*this.scaleFactor+f)}static#k(f){const p=new Path2D;for(let g=0,y=f.length;g<y;g++){const[x,S,w,k]=f[g];g===0&&p.moveTo(...x),p.bezierCurveTo(S[0],S[1],w[0],w[1],k[0],k[1])}return p}#M(f,p,g,y){const S=[],w=this.thickness/2;let k,N;for(const R of this.paths){k=[],N=[];for(let B=0,q=R.length;B<q;B++){const[F,z,V,b]=R[B],U=f*(F[0]+p)+w,H=y-f*(F[1]+g)-w,j=f*(z[0]+p)+w,ee=y-f*(z[1]+g)-w,$=f*(V[0]+p)+w,J=y-f*(V[1]+g)-w,Q=f*(b[0]+p)+w,Z=y-f*(b[1]+g)-w;B===0&&(k.push(U,H),N.push(U,H)),k.push(j,ee,$,J,Q,Z),this.#N(U,H,j,ee,$,J,Q,Z,4,N)}S.push({bezier:k,points:N})}return S}#N(f,p,g,y,x,S,w,k,N,R){if(this.#F(f,p,g,y,x,S,w,k)){R.push(w,k);return}for(let B=1;B<N-1;B++){const q=B/N,F=1-q;let z=q*f+F*g,V=q*p+F*y,b=q*g+F*x,U=q*y+F*S;const H=q*x+F*w,j=q*S+F*k;z=q*z+F*b,V=q*V+F*U,b=q*b+F*H,U=q*U+F*j,z=q*z+F*b,V=q*V+F*U,R.push(z,V)}R.push(w,k)}#F(f,p,g,y,x,S,w,k){const R=(3*g-2*f-w)**2,B=(3*y-2*p-k)**2,q=(3*x-f-2*w)**2,F=(3*S-p-2*k)**2;return Math.max(R,q)+Math.max(B,F)<=10}#I(){let f=1/0,p=-1/0,g=1/0,y=-1/0;for(const x of this.paths)for(const[S,w,k,N]of x){const R=r.Util.bezierBoundingBox(...S,...w,...k,...N);f=Math.min(f,R[0]),g=Math.min(g,R[1]),p=Math.max(p,R[2]),y=Math.max(y,R[3])}return[f,g,p,y]}#B(){return this.#r?Math.ceil(this.thickness*this.parent.scaleFactor):0}#S(f=!1){if(this.isEmpty())return;if(!this.#r){this.#f();return}const p=this.#I(),g=this.#B();this.#i=Math.max(d,p[2]-p[0]),this.#t=Math.max(d,p[3]-p[1]);const y=Math.ceil(g+this.#i*this.scaleFactor),x=Math.ceil(g+this.#t*this.scaleFactor),[S,w]=this.parent.viewportBaseDimensions;this.width=y/S,this.height=x/w,this.#e=y/x,this.#b();const k=this.translationX,N=this.translationY;this.translationX=-p[0],this.translationY=-p[1],this.#E(),this.#f(),this.#o=y,this.#g=x,this.setDims(y,x);const R=f?g/this.scaleFactor/2:0;this.translate(k-this.translationX-R,N-this.translationY-R)}#b(){const{style:f}=this.div;this.#e>=1?(f.minHeight=`${d}px`,f.minWidth=`${Math.round(this.#e*d)}px`):(f.minWidth=`${d}px`,f.minHeight=`${Math.round(d/this.#e)}px`)}static deserialize(f,p){const g=super.deserialize(f,p);g.thickness=f.thickness,g.color=r.Util.makeHexColor(...f.color),g.opacity=f.opacity;const[y,x]=p.pageDimensions,S=g.width*y,w=g.height*x,k=p.scaleFactor,N=f.thickness/2;g.#e=S/w,g.#r=!0,g.#o=Math.round(S),g.#g=Math.round(w);for(const{bezier:B}of f.paths){const q=[];g.paths.push(q);let F=k*(B[0]-N),z=k*(w-B[1]-N);for(let b=2,U=B.length;b<U;b+=6){const H=k*(B[b]-N),j=k*(w-B[b+1]-N),ee=k*(B[b+2]-N),$=k*(w-B[b+3]-N),J=k*(B[b+4]-N),Q=k*(w-B[b+5]-N);q.push([[F,z],[H,j],[ee,$],[J,Q]]),F=J,z=Q}const V=this.#k(q);g.bezierPath2D.push(V)}const R=g.#I();return g.#i=Math.max(d,R[2]-R[0]),g.#t=Math.max(d,R[3]-R[1]),g.#V(S,w),g}serialize(){if(this.isEmpty())return null;const f=this.getRect(0,0),p=this.rotation%180===0?f[3]-f[1]:f[2]-f[0],g=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:g,thickness:this.thickness,opacity:this.opacity,paths:this.#M(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,p),pageIndex:this.parent.pageIndex,rect:f,rotation:this.rotation}}}e.InkEditor=h}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const r=n(26);e.fitCurve=r}),(t=>{function e(x,S,w){if(!Array.isArray(x))throw new TypeError("First argument should be an array");if(x.forEach(B=>{if(!Array.isArray(B)||B.some(q=>typeof q!="number")||B.length!==x[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),x=x.filter((B,q)=>q===0||!B.every((F,z)=>F===x[q-1][z])),x.length<2)return[];const k=x.length,N=p(x[1],x[0]),R=p(x[k-2],x[k-1]);return n(x,N,R,S,w)}function n(x,S,w,k,N){var B,q,F,z,V,b,U,H,j,ee,$,J,Q;if(x.length===2)return J=g.vectorLen(g.subtract(x[0],x[1]))/3,B=[x[0],g.addArrays(x[0],g.mulItems(S,J)),g.addArrays(x[1],g.mulItems(w,J)),x[1]],[B];if(q=d(x),[B,z,b]=r(x,q,q,S,w,N),z===0||z<k)return[B];if(z<k*k)for(F=q,V=z,U=b,Q=0;Q<20;Q++){if(F=a(B,x,F),[B,z,b]=r(x,q,F,S,w,N),z<k)return[B];if(b===U){let Z=z/V;if(Z>.9999&&Z<1.0001)break}V=z,U=b}return $=[],H=g.subtract(x[b-1],x[b+1]),H.every(Z=>Z===0)&&(H=g.subtract(x[b-1],x[b]),[H[0],H[1]]=[-H[1],H[0]]),j=g.normalize(H),ee=g.mulItems(j,-1),$=$.concat(n(x.slice(0,b+1),S,j,k,N)),$=$.concat(n(x.slice(b),ee,w,k,N)),$}function r(x,S,w,k,N,R){var B,q,F;return B=s(x,w,k,N),[q,F]=h(x,B,S),R&&R({bez:B,points:x,params:S,maxErr:q,maxPoint:F}),[B,q,F]}function s(x,S,w,k){var N,R,B,q,F,z,V,b,U,H,j,ee,$,J,Q,Z,X,O=x[0],v=x[x.length-1];for(N=[O,null,null,v],R=g.zeros_Xx2x2(S.length),$=0,J=S.length;$<J;$++)Z=S[$],X=1-Z,B=R[$],B[0]=g.mulItems(w,3*Z*(X*X)),B[1]=g.mulItems(k,3*X*(Z*Z));for(q=[[0,0],[0,0]],F=[0,0],$=0,J=x.length;$<J;$++)Z=S[$],B=R[$],q[0][0]+=g.dot(B[0],B[0]),q[0][1]+=g.dot(B[0],B[1]),q[1][0]+=g.dot(B[0],B[1]),q[1][1]+=g.dot(B[1],B[1]),Q=g.subtract(x[$],y.q([O,O,v,v],Z)),F[0]+=g.dot(B[0],Q),F[1]+=g.dot(B[1],Q);return z=q[0][0]*q[1][1]-q[1][0]*q[0][1],V=q[0][0]*F[1]-q[1][0]*F[0],b=F[0]*q[1][1]-F[1]*q[0][1],U=z===0?0:b/z,H=z===0?0:V/z,ee=g.vectorLen(g.subtract(O,v)),j=1e-6*ee,U<j||H<j?(N[1]=g.addArrays(O,g.mulItems(w,ee/3)),N[2]=g.addArrays(v,g.mulItems(k,ee/3))):(N[1]=g.addArrays(O,g.mulItems(w,U)),N[2]=g.addArrays(v,g.mulItems(k,H))),N}function a(x,S,w){return w.map((k,N)=>l(x,S[N],k))}function l(x,S,w){var k=g.subtract(y.q(x,w),S),N=y.qprime(x,w),R=g.mulMatrix(k,N),B=g.sum(g.squareItems(N))+2*g.mulMatrix(k,y.qprimeprime(x,w));return B===0?w:w-R/B}function d(x){var S=[],w,k,N;return x.forEach((R,B)=>{w=B?k+g.vectorLen(g.subtract(R,N)):0,S.push(w),k=w,N=R}),S=S.map(R=>R/k),S}function h(x,S,w){var k,N,R,B,q,F,z,V;N=0,R=Math.floor(x.length/2);const b=u(S,10);for(q=0,F=x.length;q<F;q++)z=x[q],V=f(S,w[q],b,10),B=g.subtract(y.q(S,V),z),k=B[0]*B[0]+B[1]*B[1],k>N&&(N=k,R=q);return[N,R]}var u=function(x,S){for(var w,k=[0],N=x[0],R=0,B=1;B<=S;B++)w=y.q(x,B/S),R+=g.vectorLen(g.subtract(w,N)),k.push(R),N=w;return k=k.map(q=>q/R),k};function f(x,S,w,k){if(S<0)return 0;if(S>1)return 1;for(var N,R,B,q,F,z=1;z<=k;z++)if(S<=w[z]){q=(z-1)/k,B=z/k,R=w[z-1],N=w[z],F=(S-R)/(N-R)*(B-q)+q;break}return F}function p(x,S){return g.normalize(g.subtract(x,S))}class g{static zeros_Xx2x2(S){for(var w=[];S--;)w.push([0,0]);return w}static mulItems(S,w){return S.map(k=>k*w)}static mulMatrix(S,w){return S.reduce((k,N,R)=>k+N*w[R],0)}static subtract(S,w){return S.map((k,N)=>k-w[N])}static addArrays(S,w){return S.map((k,N)=>k+w[N])}static addItems(S,w){return S.map(k=>k+w)}static sum(S){return S.reduce((w,k)=>w+k)}static dot(S,w){return g.mulMatrix(S,w)}static vectorLen(S){return Math.hypot(...S)}static divItems(S,w){return S.map(k=>k/w)}static squareItems(S){return S.map(w=>w*w)}static normalize(S){return this.divItems(S,this.vectorLen(S))}}class y{static q(S,w){var k=1-w,N=g.mulItems(S[0],k*k*k),R=g.mulItems(S[1],3*k*k*w),B=g.mulItems(S[2],3*k*w*w),q=g.mulItems(S[3],w*w*w);return g.addArrays(g.addArrays(N,R),g.addArrays(B,q))}static qprime(S,w){var k=1-w,N=g.mulItems(g.subtract(S[1],S[0]),3*k*k),R=g.mulItems(g.subtract(S[2],S[1]),6*k*w),B=g.mulItems(g.subtract(S[3],S[2]),3*w*w);return g.addArrays(g.addArrays(N,R),B)}static qprimeprime(S,w){return g.addArrays(g.mulItems(g.addArrays(g.subtract(S[2],g.mulItems(S[1],2)),S[0]),6*(1-w)),g.mulItems(g.addArrays(g.subtract(S[3],g.mulItems(S[2],2)),S[1]),6*w))}}t.exports=e,t.exports.fitCubic=n,t.exports.createTangent=p}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r=n(1),s=n(8),a=n(5),l=n(28),d=n(29);const h=1e3,u=9,f=new WeakSet;function p(T){return{width:T[2]-T[0],height:T[3]-T[1]}}class g{static create(_){switch(_.data.annotationType){case r.AnnotationType.LINK:return new x(_);case r.AnnotationType.TEXT:return new S(_);case r.AnnotationType.WIDGET:switch(_.data.fieldType){case"Tx":return new k(_);case"Btn":return _.data.radioButton?new R(_):_.data.checkBox?new N(_):new B(_);case"Ch":return new q(_)}return new w(_);case r.AnnotationType.POPUP:return new F(_);case r.AnnotationType.FREETEXT:return new V(_);case r.AnnotationType.LINE:return new b(_);case r.AnnotationType.SQUARE:return new U(_);case r.AnnotationType.CIRCLE:return new H(_);case r.AnnotationType.POLYLINE:return new j(_);case r.AnnotationType.CARET:return new $(_);case r.AnnotationType.INK:return new J(_);case r.AnnotationType.POLYGON:return new ee(_);case r.AnnotationType.HIGHLIGHT:return new Q(_);case r.AnnotationType.UNDERLINE:return new Z(_);case r.AnnotationType.SQUIGGLY:return new X(_);case r.AnnotationType.STRIKEOUT:return new O(_);case r.AnnotationType.STAMP:return new v(_);case r.AnnotationType.FILEATTACHMENT:return new E(_);default:return new y(_)}}}class y{constructor(_,{isRenderable:A=!1,ignoreBorder:M=!1,createQuadrilaterals:L=!1}={}){this.isRenderable=A,this.data=_.data,this.layer=_.layer,this.page=_.page,this.viewport=_.viewport,this.linkService=_.linkService,this.downloadManager=_.downloadManager,this.imageResourcesPath=_.imageResourcesPath,this.renderForms=_.renderForms,this.svgFactory=_.svgFactory,this.annotationStorage=_.annotationStorage,this.enableScripting=_.enableScripting,this.hasJSActions=_.hasJSActions,this._fieldObjects=_.fieldObjects,this._mouseState=_.mouseState,A&&(this.container=this._createContainer(M)),L&&(this.quadrilaterals=this._createQuadrilaterals(M))}_createContainer(_=!1){const A=this.data,M=this.page,L=this.viewport,G=document.createElement("section"),{width:W,height:Y}=p(A.rect),[se,le,ne,de]=L.viewBox,ge=ne-se,me=de-le;G.setAttribute("data-annotation-id",A.id);const Se=r.Util.normalizeRect([A.rect[0],M.view[3]-A.rect[1]+M.view[1],A.rect[2],M.view[3]-A.rect[3]+M.view[1]]);if(!_&&A.borderStyle.width>0){G.style.borderWidth=`${A.borderStyle.width}px`;const Ae=A.borderStyle.horizontalCornerRadius,Ie=A.borderStyle.verticalCornerRadius;if(Ae>0||Ie>0){const Je=`calc(${Ae}px * var(--scale-factor)) / calc(${Ie}px * var(--scale-factor))`;G.style.borderRadius=Je}else if(this instanceof R){const Je=`calc(${W}px * var(--scale-factor)) / calc(${Y}px * var(--scale-factor))`;G.style.borderRadius=Je}switch(A.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:G.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:G.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:G.style.borderBottomStyle="solid";break}const _e=A.borderColor||null;_e?G.style.borderColor=r.Util.makeHexColor(_e[0]|0,_e[1]|0,_e[2]|0):G.style.borderWidth=0}G.style.left=`${100*(Se[0]-se)/ge}%`,G.style.top=`${100*(Se[1]-le)/me}%`;const{rotation:Ce}=A;return A.hasOwnCanvas||Ce===0?(G.style.width=`${100*W/ge}%`,G.style.height=`${100*Y/me}%`):this.setRotation(Ce,G),G}setRotation(_,A=this.container){const[M,L,G,W]=this.viewport.viewBox,Y=G-M,se=W-L,{width:le,height:ne}=p(this.data.rect);let de,ge;_%180===0?(de=100*le/Y,ge=100*ne/se):(de=100*ne/Y,ge=100*le/se),A.style.width=`${de}%`,A.style.height=`${ge}%`,A.setAttribute("data-main-rotation",(360-_)%360)}get _commonActions(){const _=(A,M,L)=>{const G=L.detail[A];L.target.style[M]=l.ColorConverters[`${G[0]}_HTML`](G.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:A=>{const M=A.detail.display%2===1;this.container.style.visibility=M?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M,print:A.detail.display===0||A.detail.display===3})},print:A=>{this.annotationStorage.setValue(this.data.id,{print:A.detail.print})},hidden:A=>{this.container.style.visibility=A.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:A.detail.hidden})},focus:A=>{setTimeout(()=>A.target.focus({preventScroll:!1}),0)},userName:A=>{A.target.title=A.detail.userName},readonly:A=>{A.detail.readonly?A.target.setAttribute("readonly",""):A.target.removeAttribute("readonly")},required:A=>{this._setRequired(A.target,A.detail.required)},bgColor:A=>{_("bgColor","backgroundColor",A)},fillColor:A=>{_("fillColor","backgroundColor",A)},fgColor:A=>{_("fgColor","color",A)},textColor:A=>{_("textColor","color",A)},borderColor:A=>{_("borderColor","borderColor",A)},strokeColor:A=>{_("strokeColor","borderColor",A)},rotation:A=>{const M=A.detail.rotation;this.setRotation(M),this.annotationStorage.setValue(this.data.id,{rotation:M})}})}_dispatchEventFromSandbox(_,A){const M=this._commonActions;for(const L of Object.keys(A.detail)){const G=_[L]||M[L];G&&G(A)}}_setDefaultPropertiesFromJS(_){if(!this.enableScripting)return;const A=this.annotationStorage.getRawValue(this.data.id);if(!A)return;const M=this._commonActions;for(const[L,G]of Object.entries(A)){const W=M[L];if(W){const Y={detail:{[L]:G},target:_};W(Y),delete A[L]}}}_createQuadrilaterals(_=!1){if(!this.data.quadPoints)return null;const A=[],M=this.data.rect;for(const L of this.data.quadPoints)this.data.rect=[L[2].x,L[2].y,L[1].x,L[1].y],A.push(this._createContainer(_));return this.data.rect=M,A}_createPopup(_,A){let M=this.container;this.quadrilaterals&&(_=_||this.quadrilaterals,M=this.quadrilaterals[0]),_||(_=document.createElement("div"),_.className="popupTriggerArea",M.append(_));const G=new z({container:M,trigger:_,color:A.color,titleObj:A.titleObj,modificationDate:A.modificationDate,contentsObj:A.contentsObj,richText:A.richText,hideWrapper:!0}).render();G.style.left="100%",M.append(G)}_renderQuadrilaterals(_){for(const A of this.quadrilaterals)A.className=_;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(_,A=null){const M=[];if(this._fieldObjects){const L=this._fieldObjects[_];if(L)for(const{page:G,id:W,exportValues:Y}of L){if(G===-1||W===A)continue;const se=typeof Y=="string"?Y:null,le=document.querySelector(`[data-element-id="${W}"]`);if(le&&!f.has(le)){(0,r.warn)(`_getElementsByName - element not allowed: ${W}`);continue}M.push({id:W,exportValue:se,domElement:le})}return M}for(const L of document.getElementsByName(_)){const{id:G,exportValue:W}=L;G!==A&&f.has(L)&&M.push({id:G,exportValue:W,domElement:L})}return M}static get platform(){const _=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:_.includes("Win"),isMac:_.includes("Mac")})}}class x extends y{constructor(_,A=null){super(_,{isRenderable:!0,ignoreBorder:!!A?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=_.data.isTooltipOnly}render(){const{data:_,linkService:A}=this,M=document.createElement("a");M.setAttribute("data-element-id",_.id);let L=!1;return _.url?(A.addLinkAttributes(M,_.url,_.newWindow),L=!0):_.action?(this._bindNamedAction(M,_.action),L=!0):_.dest?(this._bindLink(M,_.dest),L=!0):(_.actions&&(_.actions.Action||_.actions["Mouse Up"]||_.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(M,_),L=!0),_.resetForm?(this._bindResetFormAction(M,_.resetForm),L=!0):this.isTooltipOnly&&!L&&(this._bindLink(M,""),L=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((G,W)=>{const Y=W===0?M:M.cloneNode();return G.append(Y),G}):(this.container.className="linkAnnotation",L&&this.container.append(M),this.container)}_bindLink(_,A){_.href=this.linkService.getDestinationHash(A),_.onclick=()=>(A&&this.linkService.goToDestination(A),!1),(A||A==="")&&(_.className="internalLink")}_bindNamedAction(_,A){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>(this.linkService.executeNamedAction(A),!1),_.className="internalLink"}_bindJSAction(_,A){_.href=this.linkService.getAnchorUrl("");const M=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const L of Object.keys(A.actions)){const G=M.get(L);G&&(_[G]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A.id,name:L}}),!1))}_.onclick||(_.onclick=()=>!1),_.className="internalLink"}_bindResetFormAction(_,A){const M=_.onclick;if(M||(_.href=this.linkService.getAnchorUrl("")),_.className="internalLink",!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),M||(_.onclick=()=>!1);return}_.onclick=()=>{M&&M();const{fields:L,refs:G,include:W}=A,Y=[];if(L.length!==0||G.length!==0){const ne=new Set(G);for(const de of L){const ge=this._fieldObjects[de]||[];for(const{id:me}of ge)ne.add(me)}for(const de of Object.values(this._fieldObjects))for(const ge of de)ne.has(ge.id)===W&&Y.push(ge)}else for(const ne of Object.values(this._fieldObjects))Y.push(...ne);const se=this.annotationStorage,le=[];for(const ne of Y){const{id:de}=ne;switch(le.push(de),ne.type){case"text":{const me=ne.defaultValue||"";se.setValue(de,{value:me});break}case"checkbox":case"radiobutton":{const me=ne.defaultValue===ne.exportValues;se.setValue(de,{value:me});break}case"combobox":case"listbox":{const me=ne.defaultValue||"";se.setValue(de,{value:me});break}default:continue}const ge=document.querySelector(`[data-element-id="${de}"]`);if(ge){if(!f.has(ge)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${de}`);continue}}else continue;ge.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:le,name:"ResetForm"}}),!1}}}class S extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A})}render(){this.container.className="textAnnotation";const _=document.createElement("img");return _.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",_.alt="[{{type}} Annotation]",_.dataset.l10nId="text_annotation_type",_.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(_,this.data),this.container.append(_),this.container}}class w extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(_){const{isWin:A,isMac:M}=y.platform;return A&&_.ctrlKey||M&&_.metaKey}_setEventListener(_,A,M,L){A.includes("mouse")?_.addEventListener(A,G=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:M,value:L(G),shift:G.shiftKey,modifier:this._getKeyModifier(G)}})}):_.addEventListener(A,G=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:M,value:L(G)}})})}_setEventListeners(_,A,M){for(const[L,G]of A)(G==="Action"||this.data.actions?.[G])&&this._setEventListener(_,L,G,M)}_setBackgroundColor(_){const A=this.data.backgroundColor||null;_.style.backgroundColor=A===null?"transparent":r.Util.makeHexColor(A[0],A[1],A[2])}_setTextStyle(_){const A=["left","center","right"],{fontColor:M}=this.data.defaultAppearanceData,L=this.data.defaultAppearanceData.fontSize||u,G=_.style;let W;if(this.data.multiLine){const Y=Math.abs(this.data.rect[3]-this.data.rect[1]),se=Math.round(Y/(r.LINE_FACTOR*L))||1,le=Y/se;W=Math.min(L,Math.round(le/r.LINE_FACTOR))}else{const Y=Math.abs(this.data.rect[3]-this.data.rect[1]);W=Math.min(L,Math.round(Y/r.LINE_FACTOR))}G.fontSize=`calc(${W}px * var(--scale-factor))`,G.color=r.Util.makeHexColor(M[0],M[1],M[2]),this.data.textAlignment!==null&&(G.textAlign=A[this.data.textAlignment])}_setRequired(_,A){A?_.setAttribute("required",!0):_.removeAttribute("required"),_.setAttribute("aria-required",A)}}class k extends w{constructor(_){const A=_.renderForms||!_.data.hasAppearance&&!!_.data.fieldValue;super(_,{isRenderable:A})}setPropertyOnSiblings(_,A,M,L){const G=this.annotationStorage;for(const W of this._getElementsByName(_.name,_.id))W.domElement&&(W.domElement[A]=M),G.setValue(W.id,{[L]:M})}render(){const _=this.annotationStorage,A=this.data.id;this.container.className="textWidgetAnnotation";let M=null;if(this.renderForms){const L=_.getValue(A,{value:this.data.fieldValue});let G=L.formattedValue||L.value||"";const W=_.getValue(A,{charLimit:this.data.maxLen}).charLimit;W&&G.length>W&&(G=G.slice(0,W));const Y={userValue:G,formattedValue:null,valueOnFocus:""};this.data.multiLine?(M=document.createElement("textarea"),M.textContent=G,this.data.doNotScroll&&(M.style.overflowY="hidden")):(M=document.createElement("input"),M.type="text",M.setAttribute("value",G),this.data.doNotScroll&&(M.style.overflowX="hidden")),f.add(M),M.setAttribute("data-element-id",A),M.disabled=this.data.readOnly,M.name=this.data.fieldName,M.tabIndex=h,this._setRequired(M,this.data.required),W&&(M.maxLength=W),M.addEventListener("input",le=>{_.setValue(A,{value:le.target.value}),this.setPropertyOnSiblings(M,"value",le.target.value,"value")}),M.addEventListener("resetform",le=>{const ne=this.data.defaultFieldValue??"";M.value=Y.userValue=ne,Y.formattedValue=null});let se=le=>{const{formattedValue:ne}=Y;ne!=null&&(le.target.value=ne),le.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){M.addEventListener("focus",ne=>{Y.userValue&&(ne.target.value=Y.userValue),Y.valueOnFocus=ne.target.value}),M.addEventListener("updatefromsandbox",ne=>{const de={value(ge){Y.userValue=ge.detail.value??"",_.setValue(A,{value:Y.userValue.toString()}),ge.target.value=Y.userValue},formattedValue(ge){const{formattedValue:me}=ge.detail;Y.formattedValue=me,me!=null&&ge.target!==document.activeElement&&(ge.target.value=me),_.setValue(A,{formattedValue:me})},selRange(ge){ge.target.setSelectionRange(...ge.detail.selRange)},charLimit:ge=>{const{charLimit:me}=ge.detail,{target:Se}=ge;if(me===0){Se.removeAttribute("maxLength");return}Se.setAttribute("maxLength",me);let Ce=Y.userValue;!Ce||Ce.length<=me||(Ce=Ce.slice(0,me),Se.value=Y.userValue=Ce,_.setValue(A,{value:Ce}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:Ce,willCommit:!0,commitKey:1,selStart:Se.selectionStart,selEnd:Se.selectionEnd}}))}};this._dispatchEventFromSandbox(de,ne)}),M.addEventListener("keydown",ne=>{let de=-1;if(ne.key==="Escape"?de=0:ne.key==="Enter"?de=2:ne.key==="Tab"&&(de=3),de===-1)return;const{value:ge}=ne.target;Y.valueOnFocus!==ge&&(Y.userValue=ge,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:ge,willCommit:!0,commitKey:de,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}}))});const le=se;se=null,M.addEventListener("blur",ne=>{const{value:de}=ne.target;Y.userValue=de,this._mouseState.isDown&&Y.valueOnFocus!==de&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:de,willCommit:!0,commitKey:1,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}}),le(ne)}),this.data.actions?.Keystroke&&M.addEventListener("beforeinput",ne=>{const{data:de,target:ge}=ne,{value:me,selectionStart:Se,selectionEnd:Ce}=ge;let Ae=Se,Ie=Ce;switch(ne.inputType){case"deleteWordBackward":{const _e=me.substring(0,Se).match(/\w*[^\w]*$/);_e&&(Ae-=_e[0].length);break}case"deleteWordForward":{const _e=me.substring(Se).match(/^[^\w]*\w*/);_e&&(Ie+=_e[0].length);break}case"deleteContentBackward":Se===Ce&&(Ae-=1);break;case"deleteContentForward":Se===Ce&&(Ie+=1);break}ne.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:me,change:de||"",willCommit:!1,selStart:Ae,selEnd:Ie}})}),this._setEventListeners(M,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ne=>ne.target.value)}if(se&&M.addEventListener("blur",se),this.data.comb){const ne=(this.data.rect[2]-this.data.rect[0])/W;M.classList.add("comb"),M.style.letterSpacing=`calc(${ne}px * var(--scale-factor) - 1ch)`}}else M=document.createElement("div"),M.textContent=this.data.fieldValue,M.style.verticalAlign="middle",M.style.display="table-cell";return this._setTextStyle(M),this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class N extends w{constructor(_){super(_,{isRenderable:_.renderForms})}render(){const _=this.annotationStorage,A=this.data,M=A.id;let L=_.getValue(M,{value:A.exportValue===A.fieldValue}).value;typeof L=="string"&&(L=L!=="Off",_.setValue(M,{value:L})),this.container.className="buttonWidgetAnnotation checkBox";const G=document.createElement("input");return f.add(G),G.setAttribute("data-element-id",M),G.disabled=A.readOnly,this._setRequired(G,this.data.required),G.type="checkbox",G.name=A.fieldName,L&&G.setAttribute("checked",!0),G.setAttribute("exportValue",A.exportValue),G.tabIndex=h,G.addEventListener("change",W=>{const{name:Y,checked:se}=W.target;for(const le of this._getElementsByName(Y,M)){const ne=se&&le.exportValue===A.exportValue;le.domElement&&(le.domElement.checked=ne),_.setValue(le.id,{value:ne})}_.setValue(M,{value:se})}),G.addEventListener("resetform",W=>{const Y=A.defaultFieldValue||"Off";W.target.checked=Y===A.exportValue}),this.enableScripting&&this.hasJSActions&&(G.addEventListener("updatefromsandbox",W=>{const Y={value(se){se.target.checked=se.detail.value!=="Off",_.setValue(M,{value:se.target.checked})}};this._dispatchEventFromSandbox(Y,W)}),this._setEventListeners(G,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class R extends w{constructor(_){super(_,{isRenderable:_.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const _=this.annotationStorage,A=this.data,M=A.id;let L=_.getValue(M,{value:A.fieldValue===A.buttonValue}).value;typeof L=="string"&&(L=L!==A.buttonValue,_.setValue(M,{value:L}));const G=document.createElement("input");if(f.add(G),G.setAttribute("data-element-id",M),G.disabled=A.readOnly,this._setRequired(G,this.data.required),G.type="radio",G.name=A.fieldName,L&&G.setAttribute("checked",!0),G.tabIndex=h,G.addEventListener("change",W=>{const{name:Y,checked:se}=W.target;for(const le of this._getElementsByName(Y,M))_.setValue(le.id,{value:!1});_.setValue(M,{value:se})}),G.addEventListener("resetform",W=>{const Y=A.defaultFieldValue;W.target.checked=Y!=null&&Y===A.buttonValue}),this.enableScripting&&this.hasJSActions){const W=A.buttonValue;G.addEventListener("updatefromsandbox",Y=>{const se={value:le=>{const ne=W===le.detail.value;for(const de of this._getElementsByName(le.target.name)){const ge=ne&&de.id===M;de.domElement&&(de.domElement.checked=ge),_.setValue(de.id,{value:ge})}}};this._dispatchEventFromSandbox(se,Y)}),this._setEventListeners(G,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class B extends x{constructor(_){super(_,{ignoreBorder:_.data.hasAppearance})}render(){const _=super.render();_.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(_.title=this.data.alternativeText);const A=_.lastChild;return this.enableScripting&&this.hasJSActions&&A&&(this._setDefaultPropertiesFromJS(A),A.addEventListener("updatefromsandbox",M=>{this._dispatchEventFromSandbox({},M)})),_}}class q extends w{constructor(_){super(_,{isRenderable:_.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const _=this.annotationStorage,A=this.data.id,M=_.getValue(A,{value:this.data.fieldValue}),L=document.createElement("select");f.add(L),L.setAttribute("data-element-id",A),L.disabled=this.data.readOnly,this._setRequired(L,this.data.required),L.name=this.data.fieldName,L.tabIndex=h;let G=this.data.combo&&this.data.options.length>0;this.data.combo||(L.size=this.data.options.length,this.data.multiSelect&&(L.multiple=!0)),L.addEventListener("resetform",le=>{const ne=this.data.defaultFieldValue;for(const de of L.options)de.selected=de.value===ne});for(const le of this.data.options){const ne=document.createElement("option");ne.textContent=le.displayValue,ne.value=le.exportValue,M.value.includes(le.exportValue)&&(ne.setAttribute("selected",!0),G=!1),L.append(ne)}let W=null;if(G){const le=document.createElement("option");le.value=" ",le.setAttribute("hidden",!0),le.setAttribute("selected",!0),L.prepend(le),W=()=>{le.remove(),L.removeEventListener("input",W),W=null},L.addEventListener("input",W)}const Y=(le,ne)=>{const de=ne?"value":"textContent",ge=le.target.options;return le.target.multiple?Array.prototype.filter.call(ge,me=>me.selected).map(me=>me[de]):ge.selectedIndex===-1?null:ge[ge.selectedIndex][de]},se=le=>{const ne=le.target.options;return Array.prototype.map.call(ne,de=>({displayValue:de.textContent,exportValue:de.value}))};return this.enableScripting&&this.hasJSActions?(L.addEventListener("updatefromsandbox",le=>{const ne={value(de){W?.();const ge=de.detail.value,me=new Set(Array.isArray(ge)?ge:[ge]);for(const Se of L.options)Se.selected=me.has(Se.value);_.setValue(A,{value:Y(de,!0)})},multipleSelection(de){L.multiple=!0},remove(de){const ge=L.options,me=de.detail.remove;ge[me].selected=!1,L.remove(me),ge.length>0&&Array.prototype.findIndex.call(ge,Ce=>Ce.selected)===-1&&(ge[0].selected=!0),_.setValue(A,{value:Y(de,!0),items:se(de)})},clear(de){for(;L.length!==0;)L.remove(0);_.setValue(A,{value:null,items:[]})},insert(de){const{index:ge,displayValue:me,exportValue:Se}=de.detail.insert,Ce=L.children[ge],Ae=document.createElement("option");Ae.textContent=me,Ae.value=Se,Ce?Ce.before(Ae):L.append(Ae),_.setValue(A,{value:Y(de,!0),items:se(de)})},items(de){const{items:ge}=de.detail;for(;L.length!==0;)L.remove(0);for(const me of ge){const{displayValue:Se,exportValue:Ce}=me,Ae=document.createElement("option");Ae.textContent=Se,Ae.value=Ce,L.append(Ae)}L.options.length>0&&(L.options[0].selected=!0),_.setValue(A,{value:Y(de,!0),items:se(de)})},indices(de){const ge=new Set(de.detail.indices);for(const me of de.target.options)me.selected=ge.has(me.index);_.setValue(A,{value:Y(de,!0)})},editable(de){de.target.disabled=!de.detail.editable}};this._dispatchEventFromSandbox(ne,le)}),L.addEventListener("input",le=>{const ne=Y(le,!0),de=Y(le,!1);_.setValue(A,{value:ne}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:de,changeEx:ne,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],le=>le.target.checked)):L.addEventListener("input",function(le){_.setValue(A,{value:Y(le,!0)})}),this.data.combo&&this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class F extends y{constructor(_){const A=!!(_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A})}render(){const _=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",_.includes(this.data.parentType))return this.container;const A=`[data-annotation-id="${this.data.parentId}"]`,M=this.layer.querySelectorAll(A);if(M.length===0)return this.container;const L=new z({container:this.container,trigger:Array.from(M),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),G=this.page,W=r.Util.normalizeRect([this.data.parentRect[0],G.view[3]-this.data.parentRect[1]+G.view[1],this.data.parentRect[2],G.view[3]-this.data.parentRect[3]+G.view[1]]),Y=W[0]+this.data.parentRect[2]-this.data.parentRect[0],se=W[1],[le,ne,de,ge]=this.viewport.viewBox,me=de-le,Se=ge-ne;return this.container.style.left=`${100*(Y-le)/me}%`,this.container.style.top=`${100*(se-ne)/Se}%`,this.container.append(L.render()),this.container}}class z{constructor(_){this.container=_.container,this.trigger=_.trigger,this.color=_.color,this.titleObj=_.titleObj,this.modificationDate=_.modificationDate,this.contentsObj=_.contentsObj,this.richText=_.richText,this.hideWrapper=_.hideWrapper||!1,this.pinned=!1}render(){const A=document.createElement("div");A.className="popupWrapper",this.hideElement=this.hideWrapper?A:this.container,this.hideElement.hidden=!0;const M=document.createElement("div");M.className="popup";const L=this.color;if(L){const Y=.7*(255-L[0])+L[0],se=.7*(255-L[1])+L[1],le=.7*(255-L[2])+L[2];M.style.backgroundColor=r.Util.makeHexColor(Y|0,se|0,le|0)}const G=document.createElement("h1");G.dir=this.titleObj.dir,G.textContent=this.titleObj.str,M.append(G);const W=s.PDFDateString.toDateObject(this.modificationDate);if(W){const Y=document.createElement("span");Y.className="popupDate",Y.textContent="{{date}}, {{time}}",Y.dataset.l10nId="annotation_date_string",Y.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),M.append(Y)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))d.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:M}),M.lastChild.className="richText popupContent";else{const Y=this._formatContents(this.contentsObj);M.append(Y)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Y of this.trigger)Y.addEventListener("click",this._toggle.bind(this)),Y.addEventListener("mouseover",this._show.bind(this,!1)),Y.addEventListener("mouseout",this._hide.bind(this,!1));return M.addEventListener("click",this._hide.bind(this,!0)),A.append(M),A}_formatContents({str:_,dir:A}){const M=document.createElement("p");M.className="popupContent",M.dir=A;const L=_.split(/(?:\r\n?|\n)/);for(let G=0,W=L.length;G<W;++G){const Y=L[G];M.append(document.createTextNode(Y)),G<W-1&&M.append(document.createElement("br"))}return M}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(_=!1){_&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(_=!0){_&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class V extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0}),this.textContent=_.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const _=document.createElement("div");_.className="annotationTextContent",_.setAttribute("role","comment");for(const A of this.textContent){const M=document.createElement("span");M.textContent=A,_.append(M)}this.container.append(_)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class b extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const _=this.data,{width:A,height:M}=p(_.rect),L=this.svgFactory.create(A,M,!0),G=this.svgFactory.createElement("svg:line");return G.setAttribute("x1",_.rect[2]-_.lineCoordinates[0]),G.setAttribute("y1",_.rect[3]-_.lineCoordinates[1]),G.setAttribute("x2",_.rect[2]-_.lineCoordinates[2]),G.setAttribute("y2",_.rect[3]-_.lineCoordinates[3]),G.setAttribute("stroke-width",_.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),L.append(G),this.container.append(L),this._createPopup(G,_),this.container}}class U extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const _=this.data,{width:A,height:M}=p(_.rect),L=this.svgFactory.create(A,M,!0),G=_.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",G/2),W.setAttribute("y",G/2),W.setAttribute("width",A-G),W.setAttribute("height",M-G),W.setAttribute("stroke-width",G||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),L.append(W),this.container.append(L),this._createPopup(W,_),this.container}}class H extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const _=this.data,{width:A,height:M}=p(_.rect),L=this.svgFactory.create(A,M,!0),G=_.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",A/2),W.setAttribute("cy",M/2),W.setAttribute("rx",A/2-G/2),W.setAttribute("ry",M/2-G/2),W.setAttribute("stroke-width",G||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),L.append(W),this.container.append(L),this._createPopup(W,_),this.container}}class j extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const _=this.data,{width:A,height:M}=p(_.rect),L=this.svgFactory.create(A,M,!0);let G=[];for(const Y of _.vertices){const se=Y.x-_.rect[0],le=_.rect[3]-Y.y;G.push(se+","+le)}G=G.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",G),W.setAttribute("stroke-width",_.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),L.append(W),this.container.append(L),this._createPopup(W,_),this.container}}class ee extends j{constructor(_){super(_),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $ extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class J extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const _=this.data,{width:A,height:M}=p(_.rect),L=this.svgFactory.create(A,M,!0);for(const G of _.inkLists){let W=[];for(const se of G){const le=se.x-_.rect[0],ne=_.rect[3]-se.y;W.push(`${le},${ne}`)}W=W.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);Y.setAttribute("points",W),Y.setAttribute("stroke-width",_.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),this._createPopup(Y,_),L.append(Y)}return this.container.append(L),this.container}}class Q extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Z extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class X extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class O extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class v extends y{constructor(_){const A=!!(_.data.hasPopup||_.data.titleObj?.str||_.data.contentsObj?.str||_.data.richText?.str);super(_,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class E extends y{constructor(_){super(_,{isRenderable:!0});const{filename:A,content:M}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(A),this.content=M,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:A,content:M})}render(){this.container.className="fileAttachmentAnnotation";const _=document.createElement("div");return _.className="popupTriggerArea",_.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(_,this.data),this.container.append(_),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class I{static#e(_,A,M,L){const G=_.firstChild||_;G.id=`${s.AnnotationPrefix}${A}`,M.append(_),L?.moveElementInDOM(M,_,G,!1)}static render(_){const{annotations:A,div:M,viewport:L,accessibilityManager:G}=_;this.#t(M,L);let W=0;for(const Y of A){if(Y.annotationType!==r.AnnotationType.POPUP){const{width:le,height:ne}=p(Y.rect);if(le<=0||ne<=0)continue}const se=g.create({data:Y,layer:M,page:_.page,viewport:L,linkService:_.linkService,downloadManager:_.downloadManager,imageResourcesPath:_.imageResourcesPath||"",renderForms:_.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:_.annotationStorage||new a.AnnotationStorage,enableScripting:_.enableScripting,hasJSActions:_.hasJSActions,fieldObjects:_.fieldObjects,mouseState:_.mouseState||{isDown:!1}});if(se.isRenderable){const le=se.render();if(Y.hidden&&(le.style.visibility="hidden"),Array.isArray(le))for(const ne of le)ne.style.zIndex=W++,I.#e(ne,Y.id,M,G);else le.style.zIndex=W++,se instanceof F?M.prepend(le):I.#e(le,Y.id,M,G)}}this.#i(M,_.annotationCanvasMap)}static update(_){const{annotationCanvasMap:A,div:M,viewport:L}=_;this.#t(M,L),this.#i(M,A),M.hidden=!1}static#t(_,{width:A,height:M,rotation:L}){const{style:G}=_,W=L%180!==0,Y=Math.floor(A)+"px",se=Math.floor(M)+"px";G.width=W?se:Y,G.height=W?Y:se,_.setAttribute("data-main-rotation",L)}static#i(_,A){if(A){for(const[M,L]of A){const G=_.querySelector(`[data-annotation-id="${M}"]`);if(!G)continue;const{firstChild:W}=G;W?W.nodeName==="CANVAS"?W.replaceWith(L):W.before(L):G.append(L)}A.clear()}}}e.AnnotationLayer=I}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}class r{static CMYK_G([a,l,d,h]){return["G",1-Math.min(1,.3*a+.59*d+.11*l+h)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_HTML([a]){const l=n(a);return`#${l}${l}${l}`}static RGB_G([a,l,d]){return["G",.3*a+.59*l+.11*d]}static RGB_HTML([a,l,d]){const h=n(a),u=n(l),f=n(d);return`#${h}${u}${f}`}static T_HTML(){return"#00000000"}static CMYK_RGB([a,l,d,h]){return["RGB",1-Math.min(1,a+h),1-Math.min(1,d+h),1-Math.min(1,l+h)]}static CMYK_HTML(a){const l=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(l)}static RGB_CMYK([a,l,d]){const h=1-a,u=1-l,f=1-d,p=Math.min(h,u,f);return["CMYK",h,u,f,p]}}e.ColorConverters=r}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=n(20);class s{static setupStorage(l,d,h,u,f){const p=u.getValue(d,{value:null});switch(h.name){case"textarea":if(p.value!==null&&(l.textContent=p.value),f==="print")break;l.addEventListener("input",g=>{u.setValue(d,{value:g.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(p.value===h.attributes.xfaOn?l.setAttribute("checked",!0):p.value===h.attributes.xfaOff&&l.removeAttribute("checked"),f==="print")break;l.addEventListener("change",g=>{u.setValue(d,{value:g.target.checked?g.target.getAttribute("xfaOn"):g.target.getAttribute("xfaOff")})})}else{if(p.value!==null&&l.setAttribute("value",p.value),f==="print")break;l.addEventListener("input",g=>{u.setValue(d,{value:g.target.value})})}break;case"select":if(p.value!==null)for(const g of h.children)g.attributes.value===p.value&&(g.attributes.selected=!0);l.addEventListener("input",g=>{const y=g.target.options,x=y.selectedIndex===-1?"":y[y.selectedIndex].value;u.setValue(d,{value:x})});break}}static setAttributes({html:l,element:d,storage:h=null,intent:u,linkService:f}){const{attributes:p}=d,g=l instanceof HTMLAnchorElement;p.type==="radio"&&(p.name=`${p.name}-${u}`);for(const[y,x]of Object.entries(p))if(x!=null)switch(y){case"class":x.length&&l.setAttribute(y,x.join(" "));break;case"dataId":break;case"id":l.setAttribute("data-element-id",x);break;case"style":Object.assign(l.style,x);break;case"textContent":l.textContent=x;break;default:(!g||y!=="href"&&y!=="newWindow")&&l.setAttribute(y,x)}g&&f.addLinkAttributes(l,p.href,p.newWindow),h&&p.dataId&&this.setupStorage(l,p.dataId,d,h)}static render(l){const d=l.annotationStorage,h=l.linkService,u=l.xfaHtml,f=l.intent||"display",p=document.createElement(u.name);u.attributes&&this.setAttributes({html:p,element:u,intent:f,linkService:h});const g=[[u,-1,p]],y=l.div;if(y.append(p),l.viewport){const S=`matrix(${l.viewport.transform.join(",")})`;y.style.transform=S}f!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const x=[];for(;g.length>0;){const[S,w,k]=g.at(-1);if(w+1===S.children.length){g.pop();continue}const N=S.children[++g.at(-1)[1]];if(N===null)continue;const{name:R}=N;if(R==="#text"){const q=document.createTextNode(N.value);x.push(q),k.append(q);continue}let B;if(N?.attributes?.xmlns?B=document.createElementNS(N.attributes.xmlns,R):B=document.createElement(R),k.append(B),N.attributes&&this.setAttributes({html:B,element:N,storage:d,intent:f,linkService:h}),N.children&&N.children.length>0)g.push([N,-1,B]);else if(N.value){const q=document.createTextNode(N.value);r.XfaText.shouldBuildText(R)&&x.push(q),B.append(q)}}for(const S of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:x}}static update(l){const d=`matrix(${l.viewport.transform.join(",")})`;l.div.style.transform=d,l.div.hidden=!1}}e.XfaLayer=s}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=N;var r=n(1),s=n(8);const a=1e5,l=30,d=.8,h=new Map,u=/^\s+$/g;function f(R,B){const q=h.get(R);if(q)return q;B.save(),B.font=`${l}px ${R}`;const F=B.measureText("");let z=F.fontBoundingBoxAscent,V=Math.abs(F.fontBoundingBoxDescent);if(z){B.restore();const U=z/(z+V);return h.set(R,U),U}B.strokeStyle="red",B.clearRect(0,0,l,l),B.strokeText("g",0,0);let b=B.getImageData(0,0,l,l).data;V=0;for(let U=b.length-1-3;U>=0;U-=4)if(b[U]>0){V=Math.ceil(U/4/l);break}B.clearRect(0,0,l,l),B.strokeText("A",0,l),b=B.getImageData(0,0,l,l).data,z=0;for(let U=0,H=b.length;U<H;U+=4)if(b[U]>0){z=l-Math.floor(U/4/l);break}if(B.restore(),z){const U=z/(z+V);return h.set(R,U),U}return h.set(R,d),d}function p(R,B,q,F){const z=document.createElement("span"),V=R._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:B.str!=="",hasEOL:B.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:B.str!=="",hasEOL:B.hasEOL,fontSize:0};R._textDivs.push(z);const b=r.Util.transform(R._viewport.transform,B.transform);let U=Math.atan2(b[1],b[0]);const H=q[B.fontName];H.vertical&&(U+=Math.PI/2);const j=Math.hypot(b[2],b[3]),ee=j*f(H.fontFamily,F);let $,J;U===0?($=b[4],J=b[5]-ee):($=b[4]+ee*Math.sin(U),J=b[5]-ee*Math.cos(U)),z.style.left=`${$}px`,z.style.top=`${J}px`,z.style.fontSize=`${j}px`,z.style.fontFamily=H.fontFamily,V.fontSize=j,z.setAttribute("role","presentation"),z.textContent=B.str,z.dir=B.dir,R._fontInspectorEnabled&&(z.dataset.fontName=B.fontName),U!==0&&(V.angle=U*(180/Math.PI));let Q=!1;if(B.str.length>1||R._enhanceTextSelection&&u.test(B.str))Q=!0;else if(B.str!==" "&&B.transform[0]!==B.transform[3]){const Z=Math.abs(B.transform[0]),X=Math.abs(B.transform[3]);Z!==X&&Math.max(Z,X)/Math.min(Z,X)>1.5&&(Q=!0)}if(Q&&(H.vertical?V.canvasWidth=B.height*R._viewport.scale:V.canvasWidth=B.width*R._viewport.scale),R._textDivProperties.set(z,V),R._textContentStream&&R._layoutText(z),R._enhanceTextSelection&&V.hasText){let Z=1,X=0;U!==0&&(Z=Math.cos(U),X=Math.sin(U));const O=(H.vertical?B.height:B.width)*R._viewport.scale,v=j;let E,I;U!==0?(E=[Z,X,-X,Z,$,J],I=r.Util.getAxialAlignedBoundingBox([0,0,O,v],E)):I=[$,J,$+O,J+v],R._bounds.push({left:I[0],top:I[1],right:I[2],bottom:I[3],div:z,size:[O,v],m:E})}}function g(R){if(R._canceled)return;const B=R._textDivs,q=R._capability,F=B.length;if(F>a){R._renderingDone=!0,q.resolve();return}if(!R._textContentStream)for(let z=0;z<F;z++)R._layoutText(B[z]);R._renderingDone=!0,q.resolve()}function y(R,B,q){let F=0;for(let z=0;z<q;z++){const V=R[B++];V>0&&(F=F?Math.min(V,F):V)}return F}function x(R){const B=R._bounds,q=R._viewport,F=S(q.width,q.height,B);for(let z=0;z<F.length;z++){const V=B[z].div,b=R._textDivProperties.get(V);if(b.angle===0){b.paddingLeft=B[z].left-F[z].left,b.paddingTop=B[z].top-F[z].top,b.paddingRight=F[z].right-B[z].right,b.paddingBottom=F[z].bottom-B[z].bottom,R._textDivProperties.set(V,b);continue}const U=F[z],H=B[z],j=H.m,ee=j[0],$=j[1],J=[[0,0],[0,H.size[1]],[H.size[0],0],H.size],Q=new Float64Array(64);for(let X=0,O=J.length;X<O;X++){const v=r.Util.applyTransform(J[X],j);Q[X+0]=ee&&(U.left-v[0])/ee,Q[X+4]=$&&(U.top-v[1])/$,Q[X+8]=ee&&(U.right-v[0])/ee,Q[X+12]=$&&(U.bottom-v[1])/$,Q[X+16]=$&&(U.left-v[0])/-$,Q[X+20]=ee&&(U.top-v[1])/ee,Q[X+24]=$&&(U.right-v[0])/-$,Q[X+28]=ee&&(U.bottom-v[1])/ee,Q[X+32]=ee&&(U.left-v[0])/-ee,Q[X+36]=$&&(U.top-v[1])/-$,Q[X+40]=ee&&(U.right-v[0])/-ee,Q[X+44]=$&&(U.bottom-v[1])/-$,Q[X+48]=$&&(U.left-v[0])/$,Q[X+52]=ee&&(U.top-v[1])/-ee,Q[X+56]=$&&(U.right-v[0])/$,Q[X+60]=ee&&(U.bottom-v[1])/-ee}const Z=1+Math.min(Math.abs(ee),Math.abs($));b.paddingLeft=y(Q,32,16)/Z,b.paddingTop=y(Q,48,16)/Z,b.paddingRight=y(Q,0,16)/Z,b.paddingBottom=y(Q,16,16)/Z,R._textDivProperties.set(V,b)}}function S(R,B,q){const F=q.map(function(V,b){return{x1:V.left,y1:V.top,x2:V.right,y2:V.bottom,index:b,x1New:void 0,x2New:void 0}});w(R,F);const z=new Array(q.length);for(const V of F){const b=V.index;z[b]={left:V.x1New,top:0,right:V.x2New,bottom:0}}q.map(function(V,b){const U=z[b],H=F[b];H.x1=V.top,H.y1=R-U.right,H.x2=V.bottom,H.y2=R-U.left,H.index=b,H.x1New=void 0,H.x2New=void 0}),w(B,F);for(const V of F){const b=V.index;z[b].top=V.x1New,z[b].bottom=V.x2New}return z}function w(R,B){B.sort(function(z,V){return z.x1-V.x1||z.index-V.index});const F=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const z of B){let V=0;for(;V<F.length&&F[V].end<=z.y1;)V++;let b=F.length-1;for(;b>=0&&F[b].start>=z.y2;)b--;let U,H,j,ee,$=-1/0;for(j=V;j<=b;j++){U=F[j],H=U.boundary;let Z;H.x2>z.x1?Z=H.index>z.index?H.x1New:z.x1:H.x2New===void 0?Z=(H.x2+z.x1)/2:Z=H.x2New,Z>$&&($=Z)}for(z.x1New=$,j=V;j<=b;j++)U=F[j],H=U.boundary,H.x2New===void 0?H.x2>z.x1?H.index>z.index&&(H.x2New=H.x2):H.x2New=$:H.x2New>$&&(H.x2New=Math.max($,H.x2));const J=[];let Q=null;for(j=V;j<=b;j++){U=F[j],H=U.boundary;const Z=H.x2>z.x2?H:z;Q===Z?J.at(-1).end=U.end:(J.push({start:U.start,end:U.end,boundary:Z}),Q=Z)}for(F[V].start<z.y1&&(J[0].start=z.y1,J.unshift({start:F[V].start,end:z.y1,boundary:F[V].boundary})),z.y2<F[b].end&&(J.at(-1).end=z.y2,J.push({start:z.y2,end:F[b].end,boundary:F[b].boundary})),j=V;j<=b;j++){if(U=F[j],H=U.boundary,H.x2New!==void 0)continue;let Z=!1;for(ee=V-1;!Z&&ee>=0&&F[ee].start>=H.y1;ee--)Z=F[ee].boundary===H;for(ee=b+1;!Z&&ee<F.length&&F[ee].end<=H.y2;ee++)Z=F[ee].boundary===H;for(ee=0;!Z&&ee<J.length;ee++)Z=J[ee].boundary===H;Z||(H.x2New=$)}Array.prototype.splice.apply(F,[V,b-V+1,...J])}for(const z of F){const V=z.boundary;V.x2New===void 0&&(V.x2New=Math.max(R,V.x2))}}class k{constructor({textContent:B,textContentStream:q,container:F,viewport:z,textDivs:V,textContentItemsStr:b,enhanceTextSelection:U}){U&&(0,s.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=B,this._textContentStream=q,this._container=F,this._document=F.ownerDocument,this._viewport=z,this._textDivs=V||[],this._textContentItemsStr=b||[],this._enhanceTextSelection=!!U,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(B,q){for(let F=0,z=B.length;F<z;F++){if(B[F].str===void 0){if(B[F].type==="beginMarkedContentProps"||B[F].type==="beginMarkedContent"){const V=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),B[F].id!==null&&this._container.setAttribute("id",`${B[F].id}`),V.append(this._container)}else B[F].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(B[F].str),p(this,B[F],q,this._layoutTextCtx)}}_layoutText(B){const q=this._textDivProperties.get(B);let F="";if(q.canvasWidth!==0&&q.hasText){const{fontFamily:z}=B.style,{fontSize:V}=q;(V!==this._layoutTextLastFontSize||z!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${V*this._devicePixelRatio}px ${z}`,this._layoutTextLastFontSize=V,this._layoutTextLastFontFamily=z);const{width:b}=this._layoutTextCtx.measureText(B.textContent);if(b>0){const U=this._devicePixelRatio*q.canvasWidth/b;this._enhanceTextSelection&&(q.scale=U),F=`scaleX(${U})`}}if(q.angle!==0&&(F=`rotate(${q.angle}deg) ${F}`),F.length>0&&(this._enhanceTextSelection&&(q.originalTransform=F),B.style.transform=F),q.hasText&&this._container.append(B),q.hasEOL){const z=document.createElement("br");z.setAttribute("role","presentation"),this._container.append(z)}}_render(B=0){const q=(0,r.createPromiseCapability)();let F=Object.create(null);const z=this._document.createElement("canvas");if(z.height=z.width=l,this._layoutTextCtx=z.getContext("2d",{alpha:!1}),this._textContent){const V=this._textContent.items,b=this._textContent.styles;this._processItems(V,b),q.resolve()}else if(this._textContentStream){const V=()=>{this._reader.read().then(({value:b,done:U})=>{if(U){q.resolve();return}Object.assign(F,b.styles),this._processItems(b.items,F),V()},q.reject)};this._reader=this._textContentStream.getReader(),V()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');q.promise.then(()=>{F=null,B?this._renderTimer=setTimeout(()=>{g(this),this._renderTimer=null},B):g(this)},this._capability.reject)}expandTextDivs(B=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(x(this),this._bounds=null);const q=[],F=[];for(let z=0,V=this._textDivs.length;z<V;z++){const b=this._textDivs[z],U=this._textDivProperties.get(b);U.hasText&&(B?(q.length=0,F.length=0,U.originalTransform&&q.push(U.originalTransform),U.paddingTop>0?(F.push(`${U.paddingTop}px`),q.push(`translateY(${-U.paddingTop}px)`)):F.push(0),U.paddingRight>0?F.push(`${U.paddingRight/U.scale}px`):F.push(0),U.paddingBottom>0?F.push(`${U.paddingBottom}px`):F.push(0),U.paddingLeft>0?(F.push(`${U.paddingLeft/U.scale}px`),q.push(`translateX(${-U.paddingLeft/U.scale}px)`)):F.push(0),b.style.padding=F.join(" "),q.length&&(b.style.transform=q.join(" "))):(b.style.padding=null,b.style.transform=U.originalTransform))}}}e.TextLayerRenderTask=k;function N(R){const B=new k({textContent:R.textContent,textContentStream:R.textContentStream,container:R.container,viewport:R.viewport,textDivs:R.textDivs,textContentItemsStr:R.textContentItemsStr,enhanceTextSelection:R.enhanceTextSelection});return B._render(R.timeout),B}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=n(8),s=n(1),a=n(3);let l=class{constructor(){(0,s.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=l;{let N=function(V){let b=[];const U=[];for(const H of V){if(H.fn==="save"){b.push({fnId:92,fn:"group",items:[]}),U.push(b),b=b.at(-1).items;continue}H.fn==="restore"?b=U.pop():b.push(H)}return b},R=function(V){if(Number.isInteger(V))return V.toString();const b=V.toFixed(10);let U=b.length-1;if(b[U]!=="0")return b;do U--;while(b[U]==="0");return b.substring(0,b[U]==="."?U:U+1)},B=function(V){if(V[4]===0&&V[5]===0){if(V[1]===0&&V[2]===0)return V[0]===1&&V[3]===1?"":`scale(${R(V[0])} ${R(V[3])})`;if(V[0]===V[3]&&V[1]===-V[2]){const b=Math.acos(V[0])*180/Math.PI;return`rotate(${R(b)})`}}else if(V[0]===1&&V[1]===0&&V[2]===0&&V[3]===1)return`translate(${R(V[4])} ${R(V[5])})`;return`matrix(${R(V[0])} ${R(V[1])} ${R(V[2])} ${R(V[3])} ${R(V[4])} ${R(V[5])})`};var d=N,h=R,u=B;const f={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/1999/xlink",y=["butt","round","square"],x=["miter","round","bevel"],S=function(V,b="",U=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!U)return URL.createObjectURL(new Blob([V],{type:b}));const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let j=`data:${b};base64,`;for(let ee=0,$=V.length;ee<$;ee+=3){const J=V[ee]&255,Q=V[ee+1]&255,Z=V[ee+2]&255,X=J>>2,O=(J&3)<<4|Q>>4,v=ee+1<$?(Q&15)<<2|Z>>6:64,E=ee+2<$?Z&63:64;j+=H[X]+H[O]+H[v]+H[E]}return j},w=(function(){const V=new Uint8Array([137,80,78,71,13,10,26,10]),b=12,U=new Int32Array(256);for(let Z=0;Z<256;Z++){let X=Z;for(let O=0;O<8;O++)X&1?X=3988292384^X>>1&2147483647:X=X>>1&2147483647;U[Z]=X}function H(Z,X,O){let v=-1;for(let E=X;E<O;E++){const I=(v^Z[E])&255,T=U[I];v=v>>>8^T}return v^-1}function j(Z,X,O,v){let E=v;const I=X.length;O[E]=I>>24&255,O[E+1]=I>>16&255,O[E+2]=I>>8&255,O[E+3]=I&255,E+=4,O[E]=Z.charCodeAt(0)&255,O[E+1]=Z.charCodeAt(1)&255,O[E+2]=Z.charCodeAt(2)&255,O[E+3]=Z.charCodeAt(3)&255,E+=4,O.set(X,E),E+=X.length;const T=H(O,v+4,E);O[E]=T>>24&255,O[E+1]=T>>16&255,O[E+2]=T>>8&255,O[E+3]=T&255}function ee(Z,X,O){let v=1,E=0;for(let I=X;I<O;++I)v=(v+(Z[I]&255))%65521,E=(E+v)%65521;return E<<16|v}function $(Z){if(!a.isNodeJS)return J(Z);try{let X;parseInt(process.versions.node)>=8?X=Z:X=Buffer.from(Z);const O=require$$5.deflateSync(X,{level:9});return O instanceof Uint8Array?O:new Uint8Array(O)}catch(X){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return J(Z)}function J(Z){let X=Z.length;const O=65535,v=Math.ceil(X/O),E=new Uint8Array(2+X+v*5+4);let I=0;E[I++]=120,E[I++]=156;let T=0;for(;X>O;)E[I++]=0,E[I++]=255,E[I++]=255,E[I++]=0,E[I++]=0,E.set(Z.subarray(T,T+O),I),I+=O,T+=O,X-=O;E[I++]=1,E[I++]=X&255,E[I++]=X>>8&255,E[I++]=~X&65535&255,E[I++]=(~X&65535)>>8&255,E.set(Z.subarray(T),I),I+=Z.length-T;const _=ee(Z,0,Z.length);return E[I++]=_>>24&255,E[I++]=_>>16&255,E[I++]=_>>8&255,E[I++]=_&255,E}function Q(Z,X,O,v){const E=Z.width,I=Z.height;let T,_,A;const M=Z.data;switch(X){case s.ImageKind.GRAYSCALE_1BPP:_=0,T=1,A=E+7>>3;break;case s.ImageKind.RGB_24BPP:_=2,T=8,A=E*3;break;case s.ImageKind.RGBA_32BPP:_=6,T=8,A=E*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+A)*I);let G=0,W=0;for(let ge=0;ge<I;++ge)L[G++]=0,L.set(M.subarray(W,W+A),G),W+=A,G+=A;if(X===s.ImageKind.GRAYSCALE_1BPP&&v){G=0;for(let ge=0;ge<I;ge++){G++;for(let me=0;me<A;me++)L[G++]^=255}}const Y=new Uint8Array([E>>24&255,E>>16&255,E>>8&255,E&255,I>>24&255,I>>16&255,I>>8&255,I&255,T,_,0,0,0]),se=$(L),le=V.length+b*3+Y.length+se.length,ne=new Uint8Array(le);let de=0;return ne.set(V,de),de+=V.length,j("IHDR",Y,ne,de),de+=b+Y.length,j("IDATA",se,ne,de),de+=b+se.length,j("IEND",new Uint8Array(0),ne,de),S(ne,"image/png",O)}return function(X,O,v){const E=X.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:X.kind;return Q(X,E,O,v)}})();class k{constructor(){this.fontSizeScale=1,this.fontWeight=f.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=f.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(b,U){this.x=b,this.y=U}}let q=0,F=0,z=0;e.SVGGraphics=l=class{constructor(V,b,U=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new k,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=V,this.objs=b,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!U,this._operatorIdMapping=[];for(const H in s.OPS)this._operatorIdMapping[s.OPS[H]]=H}save(){this.transformStack.push(this.transformMatrix);const V=this.current;this.extraStack.push(V),this.current=V.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(V){this.save(),this.executeOpTree(V),this.restore()}loadDependencies(V){const b=V.fnArray,U=V.argsArray;for(let H=0,j=b.length;H<j;H++)if(b[H]===s.OPS.dependency)for(const ee of U[H]){const $=ee.startsWith("g_")?this.commonObjs:this.objs,J=new Promise(Q=>{$.get(ee,Q)});this.current.dependencies.push(J)}return Promise.all(this.current.dependencies)}transform(V,b,U,H,j,ee){const $=[V,b,U,H,j,ee];this.transformMatrix=s.Util.transform(this.transformMatrix,$),this.tgrp=null}getSVG(V,b){this.viewport=b;const U=this._initialize(b);return this.loadDependencies(V).then(()=>(this.transformMatrix=s.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(V)),U))}convertOpList(V){const b=this._operatorIdMapping,U=V.argsArray,H=V.fnArray,j=[];for(let ee=0,$=H.length;ee<$;ee++){const J=H[ee];j.push({fnId:J,fn:b[J],args:U[ee]})}return N(j)}executeOpTree(V){for(const b of V){const U=b.fn,H=b.fnId,j=b.args;switch(H|0){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(j);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(j[0],j[1]);break;case s.OPS.setFont:this.setFont(j);break;case s.OPS.showText:this.showText(j[0]);break;case s.OPS.showSpacedText:this.showText(j[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(j[0],j[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(j[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(j[0]);break;case s.OPS.setHScale:this.setHScale(j[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(j[0],j[1],j[2],j[3],j[4],j[5]);break;case s.OPS.setTextRise:this.setTextRise(j[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(j[0]);break;case s.OPS.setLineWidth:this.setLineWidth(j[0]);break;case s.OPS.setLineJoin:this.setLineJoin(j[0]);break;case s.OPS.setLineCap:this.setLineCap(j[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(j[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(j[0],j[1],j[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(j[0],j[1],j[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(j);break;case s.OPS.setFillColorN:this.setFillColorN(j);break;case s.OPS.shadingFill:this.shadingFill(j[0]);break;case s.OPS.setDash:this.setDash(j[0],j[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(j[0]);break;case s.OPS.setFlatness:this.setFlatness(j[0]);break;case s.OPS.setGState:this.setGState(j[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(j[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(j[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(j[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(j[0],j[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(j[0],j[1],j[2],j[3],j[4],j[5]);break;case s.OPS.constructPath:this.constructPath(j[0],j[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(b.items);break;default:(0,s.warn)(`Unimplemented operator ${U}`);break}}}setWordSpacing(V){this.current.wordSpacing=V}setCharSpacing(V){this.current.charSpacing=V}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(V,b,U,H,j,ee){const $=this.current;$.textMatrix=$.lineMatrix=[V,b,U,H,j,ee],$.textMatrixScale=Math.hypot(V,b),$.x=$.lineX=0,$.y=$.lineY=0,$.xcoords=[],$.ycoords=[],$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${R($.fontSize)}px`),$.tspan.setAttributeNS(null,"y",R(-$.y)),$.txtElement=this.svgFactory.createElement("svg:text"),$.txtElement.append($.tspan)}beginText(){const V=this.current;V.x=V.lineX=0,V.y=V.lineY=0,V.textMatrix=s.IDENTITY_MATRIX,V.lineMatrix=s.IDENTITY_MATRIX,V.textMatrixScale=1,V.tspan=this.svgFactory.createElement("svg:tspan"),V.txtElement=this.svgFactory.createElement("svg:text"),V.txtgrp=this.svgFactory.createElement("svg:g"),V.xcoords=[],V.ycoords=[]}moveText(V,b){const U=this.current;U.x=U.lineX+=V,U.y=U.lineY+=b,U.xcoords=[],U.ycoords=[],U.tspan=this.svgFactory.createElement("svg:tspan"),U.tspan.setAttributeNS(null,"font-family",U.fontFamily),U.tspan.setAttributeNS(null,"font-size",`${R(U.fontSize)}px`),U.tspan.setAttributeNS(null,"y",R(-U.y))}showText(V){const b=this.current,U=b.font,H=b.fontSize;if(H===0)return;const j=b.fontSizeScale,ee=b.charSpacing,$=b.wordSpacing,J=b.fontDirection,Q=b.textHScale*J,Z=U.vertical,X=Z?1:-1,O=U.defaultVMetrics,v=H*b.fontMatrix[0];let E=0;for(const _ of V){if(_===null){E+=J*$;continue}else if(typeof _=="number"){E+=X*_*H/1e3;continue}const A=(_.isSpace?$:0)+ee,M=_.fontChar;let L,G,W=_.width;if(Z){let se;const le=_.vmetric||O;se=_.vmetric?le[1]:W*.5,se=-se*v;const ne=le[2]*v;W=le?-le[0]:W,L=se/j,G=(E+ne)/j}else L=E/j,G=0;(_.isInFont||U.missingFile)&&(b.xcoords.push(b.x+L),Z&&b.ycoords.push(-b.y+G),b.tspan.textContent+=M);let Y;Z?Y=W*v-A*J:Y=W*v+A*J,E+=Y}b.tspan.setAttributeNS(null,"x",b.xcoords.map(R).join(" ")),Z?b.tspan.setAttributeNS(null,"y",b.ycoords.map(R).join(" ")):b.tspan.setAttributeNS(null,"y",R(-b.y)),Z?b.y-=E:b.x+=E*Q,b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${R(b.fontSize)}px`),b.fontStyle!==f.fontStyle&&b.tspan.setAttributeNS(null,"font-style",b.fontStyle),b.fontWeight!==f.fontWeight&&b.tspan.setAttributeNS(null,"font-weight",b.fontWeight);const I=b.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(I===s.TextRenderingMode.FILL||I===s.TextRenderingMode.FILL_STROKE?(b.fillColor!==f.fillColor&&b.tspan.setAttributeNS(null,"fill",b.fillColor),b.fillAlpha<1&&b.tspan.setAttributeNS(null,"fill-opacity",b.fillAlpha)):b.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?b.tspan.setAttributeNS(null,"fill","transparent"):b.tspan.setAttributeNS(null,"fill","none"),I===s.TextRenderingMode.STROKE||I===s.TextRenderingMode.FILL_STROKE){const _=1/(b.textMatrixScale||1);this._setStrokeAttributes(b.tspan,_)}let T=b.textMatrix;b.textRise!==0&&(T=T.slice(),T[5]+=b.textRise),b.txtElement.setAttributeNS(null,"transform",`${B(T)} scale(${R(Q)}, -1)`),b.txtElement.setAttributeNS(p,"xml:space","preserve"),b.txtElement.append(b.tspan),b.txtgrp.append(b.txtElement),this._ensureTransformGroup().append(b.txtElement)}setLeadingMoveText(V,b){this.setLeading(-b),this.moveText(V,b)}addFontStyle(V){if(!V.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const b=S(V.data,V.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${V.loadedName}"; src: url(${b}); }
`}setFont(V){const b=this.current,U=this.commonObjs.get(V[0]);let H=V[1];b.font=U,this.embedFonts&&!U.missingFile&&!this.embeddedFonts[U.loadedName]&&(this.addFontStyle(U),this.embeddedFonts[U.loadedName]=U),b.fontMatrix=U.fontMatrix||s.FONT_IDENTITY_MATRIX;let j="normal";U.black?j="900":U.bold&&(j="bold");const ee=U.italic?"italic":"normal";H<0?(H=-H,b.fontDirection=-1):b.fontDirection=1,b.fontSize=H,b.fontFamily=U.loadedName,b.fontWeight=j,b.fontStyle=ee,b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"y",R(-b.y)),b.xcoords=[],b.ycoords=[]}endText(){const V=this.current;V.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&V.txtElement?.hasChildNodes()&&(V.element=V.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(V){V>0&&(this.current.lineWidth=V)}setLineCap(V){this.current.lineCap=y[V]}setLineJoin(V){this.current.lineJoin=x[V]}setMiterLimit(V){this.current.miterLimit=V}setStrokeAlpha(V){this.current.strokeAlpha=V}setStrokeRGBColor(V,b,U){this.current.strokeColor=s.Util.makeHexColor(V,b,U)}setFillAlpha(V){this.current.fillAlpha=V}setFillRGBColor(V,b,U){this.current.fillColor=s.Util.makeHexColor(V,b,U),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(V){this.current.strokeColor=this._makeColorN_Pattern(V)}setFillColorN(V){this.current.fillColor=this._makeColorN_Pattern(V)}shadingFill(V){const b=this.viewport.width,U=this.viewport.height,H=s.Util.inverseTransform(this.transformMatrix),j=s.Util.applyTransform([0,0],H),ee=s.Util.applyTransform([0,U],H),$=s.Util.applyTransform([b,0],H),J=s.Util.applyTransform([b,U],H),Q=Math.min(j[0],ee[0],$[0],J[0]),Z=Math.min(j[1],ee[1],$[1],J[1]),X=Math.max(j[0],ee[0],$[0],J[0]),O=Math.max(j[1],ee[1],$[1],J[1]),v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x",Q),v.setAttributeNS(null,"y",Z),v.setAttributeNS(null,"width",X-Q),v.setAttributeNS(null,"height",O-Z),v.setAttributeNS(null,"fill",this._makeShadingPattern(V)),this.current.fillAlpha<1&&v.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(v)}_makeColorN_Pattern(V){return V[0]==="TilingPattern"?this._makeTilingPattern(V):this._makeShadingPattern(V)}_makeTilingPattern(V){const b=V[1],U=V[2],H=V[3]||s.IDENTITY_MATRIX,[j,ee,$,J]=V[4],Q=V[5],Z=V[6],X=V[7],O=`shading${z++}`,[v,E,I,T]=s.Util.normalizeRect([...s.Util.applyTransform([j,ee],H),...s.Util.applyTransform([$,J],H)]),[_,A]=s.Util.singularValueDecompose2dScale(H),M=Q*_,L=Z*A,G=this.svgFactory.createElement("svg:pattern");G.setAttributeNS(null,"id",O),G.setAttributeNS(null,"patternUnits","userSpaceOnUse"),G.setAttributeNS(null,"width",M),G.setAttributeNS(null,"height",L),G.setAttributeNS(null,"x",`${v}`),G.setAttributeNS(null,"y",`${E}`);const W=this.svg,Y=this.transformMatrix,se=this.current.fillColor,le=this.current.strokeColor,ne=this.svgFactory.create(I-v,T-E);if(this.svg=ne,this.transformMatrix=H,X===2){const de=s.Util.makeHexColor(...b);this.current.fillColor=de,this.current.strokeColor=de}return this.executeOpTree(this.convertOpList(U)),this.svg=W,this.transformMatrix=Y,this.current.fillColor=se,this.current.strokeColor=le,G.append(ne.childNodes[0]),this.defs.append(G),`url(#${O})`}_makeShadingPattern(V){switch(typeof V=="string"&&(V=this.objs.get(V)),V[0]){case"RadialAxial":const b=`shading${z++}`,U=V[3];let H;switch(V[1]){case"axial":const j=V[4],ee=V[5];H=this.svgFactory.createElement("svg:linearGradient"),H.setAttributeNS(null,"id",b),H.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),H.setAttributeNS(null,"x1",j[0]),H.setAttributeNS(null,"y1",j[1]),H.setAttributeNS(null,"x2",ee[0]),H.setAttributeNS(null,"y2",ee[1]);break;case"radial":const $=V[4],J=V[5],Q=V[6],Z=V[7];H=this.svgFactory.createElement("svg:radialGradient"),H.setAttributeNS(null,"id",b),H.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),H.setAttributeNS(null,"cx",J[0]),H.setAttributeNS(null,"cy",J[1]),H.setAttributeNS(null,"r",Z),H.setAttributeNS(null,"fx",$[0]),H.setAttributeNS(null,"fy",$[1]),H.setAttributeNS(null,"fr",Q);break;default:throw new Error(`Unknown RadialAxial type: ${V[1]}`)}for(const j of U){const ee=this.svgFactory.createElement("svg:stop");ee.setAttributeNS(null,"offset",j[0]),ee.setAttributeNS(null,"stop-color",j[1]),H.append(ee)}return this.defs.append(H),`url(#${b})`;case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${V[0]}`)}}setDash(V,b){this.current.dashArray=V,this.current.dashPhase=b}constructPath(V,b){const U=this.current;let H=U.x,j=U.y,ee=[],$=0;for(const J of V)switch(J|0){case s.OPS.rectangle:H=b[$++],j=b[$++];const Q=b[$++],Z=b[$++],X=H+Q,O=j+Z;ee.push("M",R(H),R(j),"L",R(X),R(j),"L",R(X),R(O),"L",R(H),R(O),"Z");break;case s.OPS.moveTo:H=b[$++],j=b[$++],ee.push("M",R(H),R(j));break;case s.OPS.lineTo:H=b[$++],j=b[$++],ee.push("L",R(H),R(j));break;case s.OPS.curveTo:H=b[$+4],j=b[$+5],ee.push("C",R(b[$]),R(b[$+1]),R(b[$+2]),R(b[$+3]),R(H),R(j)),$+=6;break;case s.OPS.curveTo2:ee.push("C",R(H),R(j),R(b[$]),R(b[$+1]),R(b[$+2]),R(b[$+3])),H=b[$+2],j=b[$+3],$+=4;break;case s.OPS.curveTo3:H=b[$+2],j=b[$+3],ee.push("C",R(b[$]),R(b[$+1]),R(H),R(j),R(H),R(j)),$+=4;break;case s.OPS.closePath:ee.push("Z");break}ee=ee.join(" "),U.path&&V.length>0&&V[0]!==s.OPS.rectangle&&V[0]!==s.OPS.moveTo?ee=U.path.getAttributeNS(null,"d")+ee:(U.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(U.path)),U.path.setAttributeNS(null,"d",ee),U.path.setAttributeNS(null,"fill","none"),U.element=U.path,U.setCurrentPoint(H,j)}endPath(){const V=this.current;if(V.path=null,!this.pendingClip)return;if(!V.element){this.pendingClip=null;return}const b=`clippath${q++}`,U=this.svgFactory.createElement("svg:clipPath");U.setAttributeNS(null,"id",b),U.setAttributeNS(null,"transform",B(this.transformMatrix));const H=V.element.cloneNode(!0);if(this.pendingClip==="evenodd"?H.setAttributeNS(null,"clip-rule","evenodd"):H.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,U.append(H),this.defs.append(U),V.activeClipUrl){V.clipGroup=null;for(const j of this.extraStack)j.clipGroup=null;U.setAttributeNS(null,"clip-path",V.activeClipUrl)}V.activeClipUrl=`url(#${b})`,this.tgrp=null}clip(V){this.pendingClip=V}closePath(){const V=this.current;if(V.path){const b=`${V.path.getAttributeNS(null,"d")}Z`;V.path.setAttributeNS(null,"d",b)}}setLeading(V){this.current.leading=-V}setTextRise(V){this.current.textRise=V}setTextRenderingMode(V){this.current.textRenderingMode=V}setHScale(V){this.current.textHScale=V/100}setRenderingIntent(V){}setFlatness(V){}setGState(V){for(const[b,U]of V)switch(b){case"LW":this.setLineWidth(U);break;case"LC":this.setLineCap(U);break;case"LJ":this.setLineJoin(U);break;case"ML":this.setMiterLimit(U);break;case"D":this.setDash(U[0],U[1]);break;case"RI":this.setRenderingIntent(U);break;case"FL":this.setFlatness(U);break;case"Font":this.setFont(U);break;case"CA":this.setStrokeAlpha(U);break;case"ca":this.setFillAlpha(U);break;default:(0,s.warn)(`Unimplemented graphic state operator ${b}`);break}}fill(){const V=this.current;V.element&&(V.element.setAttributeNS(null,"fill",V.fillColor),V.element.setAttributeNS(null,"fill-opacity",V.fillAlpha),this.endPath())}stroke(){const V=this.current;V.element&&(this._setStrokeAttributes(V.element),V.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(V,b=1){const U=this.current;let H=U.dashArray;b!==1&&H.length>0&&(H=H.map(function(j){return b*j})),V.setAttributeNS(null,"stroke",U.strokeColor),V.setAttributeNS(null,"stroke-opacity",U.strokeAlpha),V.setAttributeNS(null,"stroke-miterlimit",R(U.miterLimit)),V.setAttributeNS(null,"stroke-linecap",U.lineCap),V.setAttributeNS(null,"stroke-linejoin",U.lineJoin),V.setAttributeNS(null,"stroke-width",R(b*U.lineWidth)+"px"),V.setAttributeNS(null,"stroke-dasharray",H.map(R).join(" ")),V.setAttributeNS(null,"stroke-dashoffset",R(b*U.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width","1px"),V.setAttributeNS(null,"height","1px"),V.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(V)}paintImageXObject(V){const b=V.startsWith("g_")?this.commonObjs.get(V):this.objs.get(V);if(!b){(0,s.warn)(`Dependent image with object ID ${V} is not ready yet`);return}this.paintInlineImageXObject(b)}paintInlineImageXObject(V,b){const U=V.width,H=V.height,j=w(V,this.forceDataSchema,!!b),ee=this.svgFactory.createElement("svg:rect");ee.setAttributeNS(null,"x","0"),ee.setAttributeNS(null,"y","0"),ee.setAttributeNS(null,"width",R(U)),ee.setAttributeNS(null,"height",R(H)),this.current.element=ee,this.clip("nonzero");const $=this.svgFactory.createElement("svg:image");$.setAttributeNS(g,"xlink:href",j),$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y",R(-H)),$.setAttributeNS(null,"width",R(U)+"px"),$.setAttributeNS(null,"height",R(H)+"px"),$.setAttributeNS(null,"transform",`scale(${R(1/U)} ${R(-1/H)})`),b?b.append($):this._ensureTransformGroup().append($)}paintImageMaskXObject(V){const b=this.current,U=V.width,H=V.height,j=b.fillColor;b.maskId=`mask${F++}`;const ee=this.svgFactory.createElement("svg:mask");ee.setAttributeNS(null,"id",b.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",R(U)),$.setAttributeNS(null,"height",R(H)),$.setAttributeNS(null,"fill",j),$.setAttributeNS(null,"mask",`url(#${b.maskId})`),this.defs.append(ee),this._ensureTransformGroup().append($),this.paintInlineImageXObject(V,ee)}paintFormXObjectBegin(V,b){if(Array.isArray(V)&&V.length===6&&this.transform(V[0],V[1],V[2],V[3],V[4],V[5]),b){const U=b[2]-b[0],H=b[3]-b[1],j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",b[0]),j.setAttributeNS(null,"y",b[1]),j.setAttributeNS(null,"width",R(U)),j.setAttributeNS(null,"height",R(H)),this.current.element=j,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(V){const b=this.svgFactory.create(V.width,V.height),U=this.svgFactory.createElement("svg:defs");b.append(U),this.defs=U;const H=this.svgFactory.createElement("svg:g");return H.setAttributeNS(null,"transform",B(V.transform)),b.append(H),this.svg=H,b}_ensureClipGroup(){if(!this.current.clipGroup){const V=this.svgFactory.createElement("svg:g");V.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(V),this.current.clipGroup=V}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",B(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=n(1),s=n(33);const a=require$$5,l=require$$5,d=require$$5,h=require$$5,u=/^file:\/\/\/[a-zA-Z]:\//;function f(R){const B=h.parse(R);return B.protocol==="file:"||B.host?B:/^[a-z]:[/\\]/i.test(R)?h.parse(`file:///${R}`):(B.host||(B.protocol="file:"),B)}class p{constructor(B){this.source=B,this.url=f(B.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new k(this):new S(this),this._fullRequestReader}getRangeReader(B,q){if(q<=this._progressiveDataLength)return null;const F=this.isFsUrl?new N(this,B,q):new w(this,B,q);return this._rangeRequestReaders.push(F),F}cancelAllRequests(B){this._fullRequestReader&&this._fullRequestReader.cancel(B);for(const q of this._rangeRequestReaders.slice(0))q.cancel(B)}}e.PDFNodeStream=p;class g{constructor(B){this._url=B.url,this._done=!1,this._storedError=null,this.onProgress=null;const q=B.source;this._contentLength=q.length,this._loaded=0,this._filename=null,this._disableRange=q.disableRange||!1,this._rangeChunkSize=q.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!q.disableStream,this._isRangeSupported=!q.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const B=this._readableStream.read();return B===null?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=B.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){if(!this._readableStream){this._error(B);return}this._readableStream.destroy(B)}_error(B){this._storedError=B,this._readCapability.resolve()}_setReadableStream(B){this._readableStream=B,B.on("readable",()=>{this._readCapability.resolve()}),B.on("end",()=>{B.destroy(),this._done=!0,this._readCapability.resolve()}),B.on("error",q=>{this._error(q)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y{constructor(B){this._url=B.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const q=B.source;this._isStreamingSupported=!q.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const B=this._readableStream.read();return B===null?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=B.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){if(!this._readableStream){this._error(B);return}this._readableStream.destroy(B)}_error(B){this._storedError=B,this._readCapability.resolve()}_setReadableStream(B){this._readableStream=B,B.on("readable",()=>{this._readCapability.resolve()}),B.on("end",()=>{B.destroy(),this._done=!0,this._readCapability.resolve()}),B.on("error",q=>{this._error(q)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function x(R,B){return{protocol:R.protocol,auth:R.auth,host:R.hostname,port:R.port,path:R.path,method:"GET",headers:B}}class S extends g{constructor(B){super(B);const q=F=>{if(F.statusCode===404){const U=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=U,this._headersCapability.reject(U);return}this._headersCapability.resolve(),this._setReadableStream(F);const z=U=>this._readableStream.headers[U.toLowerCase()],{allowRangeRequests:V,suggestedLength:b}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:z,isHttp:B.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=V,this._contentLength=b||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(z)};this._request=null,this._url.protocol==="http:"?this._request=l.request(x(this._url,B.httpHeaders),q):this._request=d.request(x(this._url,B.httpHeaders),q),this._request.on("error",F=>{this._storedError=F,this._headersCapability.reject(F)}),this._request.end()}}class w extends y{constructor(B,q,F){super(B),this._httpHeaders={};for(const V in B.httpHeaders){const b=B.httpHeaders[V];typeof b>"u"||(this._httpHeaders[V]=b)}this._httpHeaders.Range=`bytes=${q}-${F-1}`;const z=V=>{if(V.statusCode===404){const b=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=b;return}this._setReadableStream(V)};this._request=null,this._url.protocol==="http:"?this._request=l.request(x(this._url,this._httpHeaders),z):this._request=d.request(x(this._url,this._httpHeaders),z),this._request.on("error",V=>{this._storedError=V}),this._request.end()}}class k extends g{constructor(B){super(B);let q=decodeURIComponent(this._url.path);u.test(this._url.href)&&(q=q.replace(/^\//,"")),a.lstat(q,(F,z)=>{if(F){F.code==="ENOENT"&&(F=new r.MissingPDFException(`Missing PDF "${q}".`)),this._storedError=F,this._headersCapability.reject(F);return}this._contentLength=z.size,this._setReadableStream(a.createReadStream(q)),this._headersCapability.resolve()})}}class N extends y{constructor(B,q,F){super(B);let z=decodeURIComponent(this._url.path);u.test(this._url.href)&&(z=z.replace(/^\//,"")),this._setReadableStream(a.createReadStream(z,{start:q,end:F-1}))}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=h,e.extractFilenameFromHeader=d,e.validateRangeRequestCapabilities=l,e.validateResponseStatus=u;var r=n(1),s=n(34),a=n(8);function l({getResponseHeader:f,isHttp:p,rangeChunkSize:g,disableRange:y}){const x={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(f("Content-Length"),10);return!Number.isInteger(S)||(x.suggestedLength=S,S<=2*g)||y||!p||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(x.allowRangeRequests=!0),x}function d(f){const p=f("Content-Disposition");if(p){let g=(0,s.getFilenameFromContentDispositionHeader)(p);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,a.isPdfFile)(g))return g}return null}function h(f,p){return f===404||f===0&&p.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+p+'".'):new r.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${p}".`,f)}function u(f){return f===200||f===206}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=s;var r=n(1);function s(a){let l=!0,d=h("filename\\*","i").exec(a);if(d){d=d[1];let S=g(d);return S=unescape(S),S=y(S),S=x(S),f(S)}if(d=p(a),d){const S=x(d);return f(S)}if(d=h("filename","i").exec(a),d){d=d[1];let S=g(d);return S=x(S),f(S)}function h(S,w){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',w)}function u(S,w){if(S){if(!/^[\x00-\xFF]+$/.test(w))return w;try{const k=new TextDecoder(S,{fatal:!0}),N=(0,r.stringToBytes)(w);w=k.decode(N),l=!1}catch{}}return w}function f(S){return l&&/[\x80-\xff]/.test(S)&&(S=u("utf-8",S),l&&(S=u("iso-8859-1",S))),S}function p(S){const w=[];let k;const N=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(k=N.exec(S))!==null;){let[,B,q,F]=k;if(B=parseInt(B,10),B in w){if(B===0)break;continue}w[B]=[q,F]}const R=[];for(let B=0;B<w.length&&B in w;++B){let[q,F]=w[B];F=g(F),q&&(F=unescape(F),B===0&&(F=y(F))),R.push(F)}return R.join("")}function g(S){if(S.startsWith('"')){const w=S.slice(1).split('\\"');for(let k=0;k<w.length;++k){const N=w[k].indexOf('"');N!==-1&&(w[k]=w[k].slice(0,N),w.length=k+1),w[k]=w[k].replace(/\\(.)/g,"$1")}S=w.join('"')}return S}function y(S){const w=S.indexOf("'");if(w===-1)return S;const k=S.slice(0,w),R=S.slice(w+1).replace(/^[^']*'/,"");return u(k,R)}function x(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(w,k,N,R){if(N==="q"||N==="Q")return R=R.replace(/_/g," "),R=R.replace(/=([0-9a-fA-F]{2})/g,function(B,q){return String.fromCharCode(parseInt(q,16))}),u(k,R);try{R=atob(R)}catch{}return u(k,R)})}return""}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=n(1),s=n(33);const a=200,l=206;function d(g){const y=g.response;return typeof y!="string"?y:(0,r.stringToBytes)(y).buffer}class h{constructor(y,x={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&x.httpHeaders||Object.create(null),this.withCredentials=x.withCredentials||!1,this.getXhr=x.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,x,S){const w={begin:y,end:x};for(const k in S)w[k]=S[k];return this.request(w)}requestFull(y){return this.request(y)}request(y){const x=this.getXhr(),S=this.currXhrId++,w=this.pendingRequests[S]={xhr:x};x.open("GET",this.url),x.withCredentials=this.withCredentials;for(const k in this.httpHeaders){const N=this.httpHeaders[k];typeof N>"u"||x.setRequestHeader(k,N)}return this.isHttp&&"begin"in y&&"end"in y?(x.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),w.expectedStatus=l):w.expectedStatus=a,x.responseType="arraybuffer",y.onError&&(x.onerror=function(k){y.onError(x.status)}),x.onreadystatechange=this.onStateChange.bind(this,S),x.onprogress=this.onProgress.bind(this,S),w.onHeadersReceived=y.onHeadersReceived,w.onDone=y.onDone,w.onError=y.onError,w.onProgress=y.onProgress,x.send(null),S}onProgress(y,x){const S=this.pendingRequests[y];S&&S.onProgress?.(x)}onStateChange(y,x){const S=this.pendingRequests[y];if(!S)return;const w=S.xhr;if(w.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),w.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],w.status===0&&this.isHttp){S.onError?.(w.status);return}const k=w.status||a;if(!(k===a&&S.expectedStatus===l)&&k!==S.expectedStatus){S.onError?.(w.status);return}const R=d(w);if(k===l){const B=w.getResponseHeader("Content-Range"),q=/bytes (\d+)-(\d+)\/(\d+)/.exec(B);S.onDone({begin:parseInt(q[1],10),chunk:R})}else R?S.onDone({begin:0,chunk:R}):S.onError?.(w.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const x=this.pendingRequests[y].xhr;delete this.pendingRequests[y],x.abort()}}class u{constructor(y){this._source=y,this._manager=new h(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const x=this._rangeRequestReaders.indexOf(y);x>=0&&this._rangeRequestReaders.splice(x,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(y,x){const S=new p(this._manager,y,x);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(y){this._fullRequestReader?.cancel(y);for(const x of this._rangeRequestReaders.slice(0))x.cancel(y)}}e.PDFNetworkStream=u;class f{constructor(y,x){this._manager=y;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._fullRequestId=y.requestFull(S),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=x.disableRange||!1,this._contentLength=x.length,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,x=this._manager.getRequestXhr(y),S=N=>x.getResponseHeader(N),{allowRangeRequests:w,suggestedLength:k}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});w&&(this._isRangeSupported=!0),this._contentLength=k||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,s.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){this.onProgress?.({loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,r.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class p{constructor(y,x,S){this._manager=y;const w={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(x,S,w),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(y){const x=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunk=x,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,s.createResponseStatusError)(y,this._url);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){this.isStreamingSupported||this.onProgress?.({loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const x=this._queuedChunk;return this._queuedChunk=null,{value:x,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,r.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=n(1),s=n(33);function a(f,p,g){return{method:"GET",headers:f,signal:g.signal,mode:"cors",credentials:p?"include":"same-origin",redirect:"follow"}}function l(f){const p=new Headers;for(const g in f){const y=f[g];typeof y>"u"||p.append(g,y)}return p}class d{constructor(p){this.source=p,this.isHttp=/^https?:/i.test(p.url),this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(p,g){if(g<=this._progressiveDataLength)return null;const y=new u(this,p,g);return this._rangeRequestReaders.push(y),y}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const g of this._rangeRequestReaders.slice(0))g.cancel(p)}}e.PDFFetchStream=d;class h{constructor(p){this._stream=p,this._reader=null,this._loaded=0,this._filename=null;const g=p.source;this._withCredentials=g.withCredentials||!1,this._contentLength=g.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._headers=l(this._stream.httpHeaders);const y=g.url;fetch(y,a(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,s.validateResponseStatus)(x.status))throw(0,s.createResponseStatusError)(x.status,y);this._reader=x.body.getReader(),this._headersCapability.resolve();const S=N=>x.headers.get(N),{allowRangeRequests:w,suggestedLength:k}=(0,s.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=k||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(S),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:p,done:g}=await this._reader.read();return g?{value:p,done:g}:(this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){this._reader&&this._reader.cancel(p),this._abortController.abort()}}class u{constructor(p,g,y){this._stream=p,this._reader=null,this._loaded=0;const x=p.source;this._withCredentials=x.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!x.disableStream,this._abortController=new AbortController,this._headers=l(this._stream.httpHeaders),this._headers.append("Range",`bytes=${g}-${y-1}`);const S=x.url;fetch(S,a(this._headers,this._withCredentials,this._abortController)).then(w=>{if(!(0,s.validateResponseStatus)(w.status))throw(0,s.createResponseStatusError)(w.status,S);this._readCapability.resolve(),this._reader=w.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:p,done:g}=await this._reader.read();return g?{value:p,done:g}:(this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){this._reader&&this._reader.cancel(p),this._abortController.abort()}}})],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return a.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return l.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return d.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return n.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return f.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return p.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(4),r=__w_pdfjs_require__(8),s=__w_pdfjs_require__(22),a=__w_pdfjs_require__(7),l=__w_pdfjs_require__(27),d=__w_pdfjs_require__(15),h=__w_pdfjs_require__(3),u=__w_pdfjs_require__(30),f=__w_pdfjs_require__(31),p=__w_pdfjs_require__(29);if(h.isNodeJS){const{PDFNodeStream:g}=__w_pdfjs_require__(32);(0,n.setPDFNetworkStreamFactory)(y=>new g(y))}else{const{PDFNetworkStream:g}=__w_pdfjs_require__(35),{PDFFetchStream:y}=__w_pdfjs_require__(36);(0,n.setPDFNetworkStreamFactory)(x=>(0,r.isValidFetchUrl)(x.url)?new y(x):new g(x))}})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();const pdfWorker="/Schedule-Sculptor/assets/pdf.worker.min-ZbYrRmVo.js";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _defaultBaseGeminiUrl,_defaultBaseVertexUrl;function getDefaultBaseUrls(){return{geminiUrl:_defaultBaseGeminiUrl,vertexUrl:_defaultBaseVertexUrl}}function getBaseUrl(t,e,n,r){var s,a;if(!t?.baseUrl){const l=getDefaultBaseUrls();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(a=l.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseModule{}function formatMap(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function setValueByPath(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[d])){const h=t[d];if(Array.isArray(n))for(let u=0;u<h.length;u++){const f=h[u];setValueByPath(f,e.slice(a+1),n[u])}else for(const u of h)setValueByPath(u,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in t||(t[d]=[{}]);const h=t[d];setValueByPath(h[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function getValueByPath(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(d=>getValueByPath(d,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function moveValueByPath(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),a=r.split("."),l=new Set;let d=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){d=h;break}if(d!==-1&&a.length>d)for(let h=d;h<a.length;h++){const u=a[h];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&l.add(u)}_moveValueRecursive(t,s,a,0,l)}}function _moveValueRecursive(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2),d=t;if(l in d&&Array.isArray(d[l]))for(const h of d[l])_moveValueRecursive(h,e,n,r+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,d=Object.keys(l).filter(u=>!u.startsWith("_")&&!s.has(u)),h={};for(const u of d)h[u]=l[u];for(const[u,f]of Object.entries(h)){const p=[];for(const g of n.slice(r))g==="*"?p.push(u):p.push(g);setValueByPath(l,p,f)}for(const u of d)delete l[u]}}else{const l=t;a in l&&_moveValueRecursive(l[a],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tBytes$1(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fetchPredictOperationParametersToVertex(t){const e={},n=getValueByPath(t,["operationName"]);n!=null&&setValueByPath(e,["operationName"],n);const r=getValueByPath(t,["resourceName"]);return r!=null&&setValueByPath(e,["_url","resourceName"],r),e}function generateVideosOperationFromMldev$1(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata"]);r!=null&&setValueByPath(e,["metadata"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["response","generateVideoResponse"]);return l!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev$1(l)),e}function generateVideosOperationFromVertex$1(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata"]);r!=null&&setValueByPath(e,["metadata"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["response"]);return l!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex$1(l)),e}function generateVideosResponseFromMldev$1(t){const e={},n=getValueByPath(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>generatedVideoFromMldev$1(l))),setValueByPath(e,["generatedVideos"],a)}const r=getValueByPath(t,["raiMediaFilteredCount"]);r!=null&&setValueByPath(e,["raiMediaFilteredCount"],r);const s=getValueByPath(t,["raiMediaFilteredReasons"]);return s!=null&&setValueByPath(e,["raiMediaFilteredReasons"],s),e}function generateVideosResponseFromVertex$1(t){const e={},n=getValueByPath(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>generatedVideoFromVertex$1(l))),setValueByPath(e,["generatedVideos"],a)}const r=getValueByPath(t,["raiMediaFilteredCount"]);r!=null&&setValueByPath(e,["raiMediaFilteredCount"],r);const s=getValueByPath(t,["raiMediaFilteredReasons"]);return s!=null&&setValueByPath(e,["raiMediaFilteredReasons"],s),e}function generatedVideoFromMldev$1(t){const e={},n=getValueByPath(t,["video"]);return n!=null&&setValueByPath(e,["video"],videoFromMldev$1(n)),e}function generatedVideoFromVertex$1(t){const e={},n=getValueByPath(t,["_self"]);return n!=null&&setValueByPath(e,["video"],videoFromVertex$1(n)),e}function getOperationParametersToMldev(t){const e={},n=getValueByPath(t,["operationName"]);return n!=null&&setValueByPath(e,["_url","operationName"],n),e}function getOperationParametersToVertex(t){const e={},n=getValueByPath(t,["operationName"]);return n!=null&&setValueByPath(e,["_url","operationName"],n),e}function importFileOperationFromMldev$1(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata"]);r!=null&&setValueByPath(e,["metadata"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["response"]);return l!=null&&setValueByPath(e,["response"],importFileResponseFromMldev$1(l)),e}function importFileResponseFromMldev$1(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["parent"]);r!=null&&setValueByPath(e,["parent"],r);const s=getValueByPath(t,["documentName"]);return s!=null&&setValueByPath(e,["documentName"],s),e}function uploadToFileSearchStoreOperationFromMldev(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata"]);r!=null&&setValueByPath(e,["metadata"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["response"]);return l!=null&&setValueByPath(e,["response"],uploadToFileSearchStoreResponseFromMldev(l)),e}function uploadToFileSearchStoreResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["parent"]);r!=null&&setValueByPath(e,["parent"],r);const s=getValueByPath(t,["documentName"]);return s!=null&&setValueByPath(e,["documentName"],s),e}function videoFromMldev$1(t){const e={},n=getValueByPath(t,["uri"]);n!=null&&setValueByPath(e,["uri"],n);const r=getValueByPath(t,["encodedVideo"]);r!=null&&setValueByPath(e,["videoBytes"],tBytes$1(r));const s=getValueByPath(t,["encoding"]);return s!=null&&setValueByPath(e,["mimeType"],s),e}function videoFromVertex$1(t){const e={},n=getValueByPath(t,["gcsUri"]);n!=null&&setValueByPath(e,["uri"],n);const r=getValueByPath(t,["bytesBase64Encoded"]);r!=null&&setValueByPath(e,["videoBytes"],tBytes$1(r));const s=getValueByPath(t,["mimeType"]);return s!=null&&setValueByPath(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Outcome$1;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Outcome$1||(Outcome$1={}));var Language;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Language||(Language={}));var FunctionResponseScheduling;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(FunctionResponseScheduling||(FunctionResponseScheduling={}));var Type;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Type||(Type={}));var Mode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mode||(Mode={}));var ApiSpec;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ApiSpec||(ApiSpec={}));var AuthType;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(AuthType||(AuthType={}));var HttpElementLocation;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(HttpElementLocation||(HttpElementLocation={}));var PhishBlockThreshold;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(PhishBlockThreshold||(PhishBlockThreshold={}));var HarmCategory$1;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(HarmCategory$1||(HarmCategory$1={}));var HarmBlockMethod;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(HarmBlockMethod||(HarmBlockMethod={}));var HarmBlockThreshold$1;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(HarmBlockThreshold$1||(HarmBlockThreshold$1={}));var FinishReason$1;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(FinishReason$1||(FinishReason$1={}));var HarmProbability$1;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HarmProbability$1||(HarmProbability$1={}));var HarmSeverity;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HarmSeverity||(HarmSeverity={}));var UrlRetrievalStatus;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(UrlRetrievalStatus||(UrlRetrievalStatus={}));var BlockedReason;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(BlockedReason||(BlockedReason={}));var TrafficType;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(TrafficType||(TrafficType={}));var Modality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Modality||(Modality={}));var MediaResolution;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MediaResolution||(MediaResolution={}));var TuningMode;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TuningMode||(TuningMode={}));var AdapterSize;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AdapterSize||(AdapterSize={}));var JobState;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(JobState||(JobState={}));var TuningTask;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(TuningTask||(TuningTask={}));var FeatureSelectionPreference;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FeatureSelectionPreference||(FeatureSelectionPreference={}));var Behavior;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Behavior||(Behavior={}));var DynamicRetrievalConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalConfigMode||(DynamicRetrievalConfigMode={}));var Environment;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Environment||(Environment={}));var FunctionCallingConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(FunctionCallingConfigMode||(FunctionCallingConfigMode={}));var SafetyFilterLevel;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(SafetyFilterLevel||(SafetyFilterLevel={}));var PersonGeneration;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(PersonGeneration||(PersonGeneration={}));var ImagePromptLanguage;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ImagePromptLanguage||(ImagePromptLanguage={}));var MaskReferenceMode;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MaskReferenceMode||(MaskReferenceMode={}));var ControlReferenceType;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ControlReferenceType||(ControlReferenceType={}));var SubjectReferenceType;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SubjectReferenceType||(SubjectReferenceType={}));var EditMode;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EditMode||(EditMode={}));var SegmentMode;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(SegmentMode||(SegmentMode={}));var VideoGenerationReferenceType;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(VideoGenerationReferenceType||(VideoGenerationReferenceType={}));var VideoGenerationMaskMode;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(VideoGenerationMaskMode||(VideoGenerationMaskMode={}));var VideoCompressionQuality;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(VideoCompressionQuality||(VideoCompressionQuality={}));var TuningMethod;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(TuningMethod||(TuningMethod={}));var DocumentState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(DocumentState||(DocumentState={}));var FileState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(FileState||(FileState={}));var FileSource;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(FileSource||(FileSource={}));var TurnCompleteReason;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(TurnCompleteReason||(TurnCompleteReason={}));var MediaModality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MediaModality||(MediaModality={}));var StartSensitivity;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(StartSensitivity||(StartSensitivity={}));var EndSensitivity;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EndSensitivity||(EndSensitivity={}));var ActivityHandling;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ActivityHandling||(ActivityHandling={}));var TurnCoverage;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(TurnCoverage||(TurnCoverage={}));var Scale;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Scale||(Scale={}));var MusicGenerationMode;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(MusicGenerationMode||(MusicGenerationMode={}));var LiveMusicPlaybackControl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(LiveMusicPlaybackControl||(LiveMusicPlaybackControl={}));class HttpResponse{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class GenerateContentResponse{get text(){var e,n,r,s,a,l,d,h;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const g of(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[y,x]of Object.entries(g))y!=="text"&&y!=="thought"&&(x!==null||x!==void 0)&&p.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,u+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,r,s,a,l,d,h;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[g,y]of Object.entries(p))g!=="inlineData"&&(y!==null||y!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,s,a,l,d,h;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(u?.length!==0)return u}get executableCode(){var e,n,r,s,a,l,d,h,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,s,a,l,d,h,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(h=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.output}}class EmbedContentResponse{}class GenerateImagesResponse{}class EditImageResponse{}class UpscaleImageResponse{}class RecontextImageResponse{}class SegmentImageResponse{}class ListModelsResponse{}class DeleteModelResponse{}class CountTokensResponse{}class ComputeTokensResponse{}class GenerateVideosOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new GenerateVideosOperation;let s;const a=e;return n?s=generateVideosOperationFromVertex$1(a):s=generateVideosOperationFromMldev$1(a),Object.assign(r,s),r}}class ListTuningJobsResponse{}class DeleteCachedContentResponse{}class ListCachedContentsResponse{}class ListDocumentsResponse{}class ListFileSearchStoresResponse{}class UploadToFileSearchStoreResumableResponse{}class ImportFileOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ImportFileOperation,a=importFileOperationFromMldev$1(e);return Object.assign(r,a),r}}class ListFilesResponse{}class CreateFileResponse{}class DeleteFileResponse{}class ListBatchJobsResponse{}class LiveServerMessage{get text(){var e,n,r;let s="",a=!1;const l=[];for(const d of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[h,u]of Object.entries(d))h!=="text"&&h!=="thought"&&u!==null&&l.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,s+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,r;let s="";const a=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,h]of Object.entries(l))d!=="inlineData"&&h!==null&&a.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class LiveMusicServerMessage{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class UploadToFileSearchStoreOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new UploadToFileSearchStoreOperation,a=uploadToFileSearchStoreOperationFromMldev(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tModel(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tCachesModel(t,e){const n=tModel(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function tBlobs(t){return Array.isArray(t)?t.map(e=>tBlob(e)):[tBlob(t)]}function tBlob(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function tImageBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tAudioBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tPart(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function tParts(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>tPart(e)):[tPart(t)]}function _isContent(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function _isFunctionCallPart(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _isFunctionResponsePart(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tContent(t){if(t==null)throw new Error("ContentUnion is required");return _isContent(t)?t:{role:"user",parts:tParts(t)}}function tContentsForEmbed(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=tContent(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=tContent(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>tContent(n)):[tContent(e)]}function tContents(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(_isFunctionCallPart(t)||_isFunctionResponsePart(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tContent(t)]}const e=[],n=[],r=_isContent(t[0]);for(const s of t){const a=_isContent(s);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(_isFunctionCallPart(s)||_isFunctionResponsePart(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:tParts(n)}),e}function flattenTypeArrayToAnyOf(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Type).includes(n[0].toUpperCase())?n[0].toUpperCase():Type.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Type).includes(r.toUpperCase())?r.toUpperCase():Type.TYPE_UNSPECIFIED})}}function processJsonSchema(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&flattenTypeArrayToAnyOf(t.type,e);for(const[l,d]of Object.entries(t))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Type).includes(d.toUpperCase())?d.toUpperCase():Type.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=processJsonSchema(d);else if(r.includes(l)){const h=[];for(const u of d){if(u.type=="null"){e.nullable=!0;continue}h.push(processJsonSchema(u))}e[l]=h}else if(s.includes(l)){const h={};for(const[u,f]of Object.entries(d))h[u]=processJsonSchema(f);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=d}return e}function tSchema(t){return processJsonSchema(t)}function tSpeechConfig(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function tLiveSpeechConfig(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function tTool(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=processJsonSchema(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=processJsonSchema(e.response));return t}function tTools(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function resourceName(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function tCachedContentName(t,e){if(typeof e!="string")throw new Error("name must be a string");return resourceName(t,e,"cachedContents")}function tTuningJobStatus(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function tBytes(t){return tBytes$1(t)}function _isFile(t){return t!=null&&typeof t=="object"&&"name"in t}function isGeneratedVideo(t){return t!=null&&typeof t=="object"&&"video"in t}function isVideo(t){return t!=null&&typeof t=="object"&&"uri"in t}function tFileName(t){var e;let n;if(_isFile(t)&&(n=t.name),!(isVideo(t)&&(n=t.uri,n===void 0))&&!(isGeneratedVideo(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tModelsUrl(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function tExtractModels(t){for(const e of["models","tunedModels","publisherModels"])if(hasField(t,e))return t[e];return[]}function hasField(t,e){return t!==null&&typeof t=="object"&&e in t}function mcpToGeminiTool(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function mcpToolsToGeminiTool(t,e={}){const n=[],r=new Set;for(const s of t){const a=s.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=mcpToGeminiTool(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function tBatchJobSource(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function tBatchJobDestination(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tRecvBatchJobDestination(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function tBatchJobName(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tJobState(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function batchJobDestinationFromMldev(t){const e={},n=getValueByPath(t,["responsesFile"]);n!=null&&setValueByPath(e,["fileName"],n);const r=getValueByPath(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>inlinedResponseFromMldev(l))),setValueByPath(e,["inlinedResponses"],a)}const s=getValueByPath(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["inlinedEmbedContentResponses"],a)}return e}function batchJobDestinationFromVertex(t){const e={},n=getValueByPath(t,["predictionsFormat"]);n!=null&&setValueByPath(e,["format"],n);const r=getValueByPath(t,["gcsDestination","outputUriPrefix"]);r!=null&&setValueByPath(e,["gcsUri"],r);const s=getValueByPath(t,["bigqueryDestination","outputUri"]);return s!=null&&setValueByPath(e,["bigqueryUri"],s),e}function batchJobDestinationToVertex(t){const e={},n=getValueByPath(t,["format"]);n!=null&&setValueByPath(e,["predictionsFormat"],n);const r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsDestination","outputUriPrefix"],r);const s=getValueByPath(t,["bigqueryUri"]);if(s!=null&&setValueByPath(e,["bigqueryDestination","outputUri"],s),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function batchJobFromMldev(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata","displayName"]);r!=null&&setValueByPath(e,["displayName"],r);const s=getValueByPath(t,["metadata","state"]);s!=null&&setValueByPath(e,["state"],tJobState(s));const a=getValueByPath(t,["metadata","createTime"]);a!=null&&setValueByPath(e,["createTime"],a);const l=getValueByPath(t,["metadata","endTime"]);l!=null&&setValueByPath(e,["endTime"],l);const d=getValueByPath(t,["metadata","updateTime"]);d!=null&&setValueByPath(e,["updateTime"],d);const h=getValueByPath(t,["metadata","model"]);h!=null&&setValueByPath(e,["model"],h);const u=getValueByPath(t,["metadata","output"]);return u!=null&&setValueByPath(e,["dest"],batchJobDestinationFromMldev(tRecvBatchJobDestination(u))),e}function batchJobFromVertex(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["displayName"]);r!=null&&setValueByPath(e,["displayName"],r);const s=getValueByPath(t,["state"]);s!=null&&setValueByPath(e,["state"],tJobState(s));const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["createTime"]);l!=null&&setValueByPath(e,["createTime"],l);const d=getValueByPath(t,["startTime"]);d!=null&&setValueByPath(e,["startTime"],d);const h=getValueByPath(t,["endTime"]);h!=null&&setValueByPath(e,["endTime"],h);const u=getValueByPath(t,["updateTime"]);u!=null&&setValueByPath(e,["updateTime"],u);const f=getValueByPath(t,["model"]);f!=null&&setValueByPath(e,["model"],f);const p=getValueByPath(t,["inputConfig"]);p!=null&&setValueByPath(e,["src"],batchJobSourceFromVertex(p));const g=getValueByPath(t,["outputConfig"]);g!=null&&setValueByPath(e,["dest"],batchJobDestinationFromVertex(tRecvBatchJobDestination(g)));const y=getValueByPath(t,["completionStats"]);return y!=null&&setValueByPath(e,["completionStats"],y),e}function batchJobSourceFromVertex(t){const e={},n=getValueByPath(t,["instancesFormat"]);n!=null&&setValueByPath(e,["format"],n);const r=getValueByPath(t,["gcsSource","uris"]);r!=null&&setValueByPath(e,["gcsUri"],r);const s=getValueByPath(t,["bigquerySource","inputUri"]);return s!=null&&setValueByPath(e,["bigqueryUri"],s),e}function batchJobSourceToMldev(t,e){const n={};if(getValueByPath(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(getValueByPath(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=getValueByPath(e,["fileName"]);r!=null&&setValueByPath(n,["fileName"],r);const s=getValueByPath(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>inlinedRequestToMldev(t,l))),setValueByPath(n,["requests","requests"],a)}return n}function batchJobSourceToVertex(t){const e={},n=getValueByPath(t,["format"]);n!=null&&setValueByPath(e,["instancesFormat"],n);const r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsSource","uris"],r);const s=getValueByPath(t,["bigqueryUri"]);if(s!=null&&setValueByPath(e,["bigquerySource","inputUri"],s),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function blobToMldev$4(t){const e={},n=getValueByPath(t,["data"]);if(n!=null&&setValueByPath(e,["data"],n),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function cancelBatchJobParametersToMldev(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tBatchJobName(t,r)),n}function cancelBatchJobParametersToVertex(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tBatchJobName(t,r)),n}function candidateFromMldev$1(t){const e={},n=getValueByPath(t,["content"]);n!=null&&setValueByPath(e,["content"],n);const r=getValueByPath(t,["citationMetadata"]);r!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev$1(r));const s=getValueByPath(t,["tokenCount"]);s!=null&&setValueByPath(e,["tokenCount"],s);const a=getValueByPath(t,["finishReason"]);a!=null&&setValueByPath(e,["finishReason"],a);const l=getValueByPath(t,["avgLogprobs"]);l!=null&&setValueByPath(e,["avgLogprobs"],l);const d=getValueByPath(t,["groundingMetadata"]);d!=null&&setValueByPath(e,["groundingMetadata"],d);const h=getValueByPath(t,["index"]);h!=null&&setValueByPath(e,["index"],h);const u=getValueByPath(t,["logprobsResult"]);u!=null&&setValueByPath(e,["logprobsResult"],u);const f=getValueByPath(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),setValueByPath(e,["safetyRatings"],g)}const p=getValueByPath(t,["urlContextMetadata"]);return p!=null&&setValueByPath(e,["urlContextMetadata"],p),e}function citationMetadataFromMldev$1(t){const e={},n=getValueByPath(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),setValueByPath(e,["citations"],r)}return e}function contentToMldev$4(t){const e={},n=getValueByPath(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>partToMldev$4(a))),setValueByPath(e,["parts"],s)}const r=getValueByPath(t,["role"]);return r!=null&&setValueByPath(e,["role"],r),e}function createBatchJobConfigToMldev(t,e){const n={},r=getValueByPath(t,["displayName"]);if(e!==void 0&&r!=null&&setValueByPath(e,["batch","displayName"],r),getValueByPath(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function createBatchJobConfigToVertex(t,e){const n={},r=getValueByPath(t,["displayName"]);e!==void 0&&r!=null&&setValueByPath(e,["displayName"],r);const s=getValueByPath(t,["dest"]);return e!==void 0&&s!=null&&setValueByPath(e,["outputConfig"],batchJobDestinationToVertex(tBatchJobDestination(s))),n}function createBatchJobParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["src"]);s!=null&&setValueByPath(n,["batch","inputConfig"],batchJobSourceToMldev(t,tBatchJobSource(t,s)));const a=getValueByPath(e,["config"]);return a!=null&&createBatchJobConfigToMldev(a,n),n}function createBatchJobParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["model"],tModel(t,r));const s=getValueByPath(e,["src"]);s!=null&&setValueByPath(n,["inputConfig"],batchJobSourceToVertex(tBatchJobSource(t,s)));const a=getValueByPath(e,["config"]);return a!=null&&createBatchJobConfigToVertex(a,n),n}function createEmbeddingsBatchJobConfigToMldev(t,e){const n={},r=getValueByPath(t,["displayName"]);return e!==void 0&&r!=null&&setValueByPath(e,["batch","displayName"],r),n}function createEmbeddingsBatchJobParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["src"]);s!=null&&setValueByPath(n,["batch","inputConfig"],embeddingsBatchJobSourceToMldev(t,s));const a=getValueByPath(e,["config"]);return a!=null&&createEmbeddingsBatchJobConfigToMldev(a,n),n}function deleteBatchJobParametersToMldev(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tBatchJobName(t,r)),n}function deleteBatchJobParametersToVertex(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tBatchJobName(t,r)),n}function deleteResourceJobFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);return a!=null&&setValueByPath(e,["error"],a),e}function deleteResourceJobFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);return a!=null&&setValueByPath(e,["error"],a),e}function embedContentBatchToMldev(t,e){const n={},r=getValueByPath(e,["contents"]);if(r!=null){let a=tContentsForEmbed(t,r);Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(n,["requests[]","request","content"],a)}const s=getValueByPath(e,["config"]);return s!=null&&(setValueByPath(n,["_self"],embedContentConfigToMldev$1(s,n)),moveValueByPath(n,{"requests[].*":"requests[].request.*"})),n}function embedContentConfigToMldev$1(t,e){const n={},r=getValueByPath(t,["taskType"]);e!==void 0&&r!=null&&setValueByPath(e,["requests[]","taskType"],r);const s=getValueByPath(t,["title"]);e!==void 0&&s!=null&&setValueByPath(e,["requests[]","title"],s);const a=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&setValueByPath(e,["requests[]","outputDimensionality"],a),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function embeddingsBatchJobSourceToMldev(t,e){const n={},r=getValueByPath(e,["fileName"]);r!=null&&setValueByPath(n,["file_name"],r);const s=getValueByPath(e,["inlinedRequests"]);return s!=null&&setValueByPath(n,["requests"],embedContentBatchToMldev(t,s)),n}function fileDataToMldev$4(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(t,["fileUri"]);n!=null&&setValueByPath(e,["fileUri"],n);const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function generateContentConfigToMldev$1(t,e,n){const r={},s=getValueByPath(e,["systemInstruction"]);n!==void 0&&s!=null&&setValueByPath(n,["systemInstruction"],contentToMldev$4(tContent(s)));const a=getValueByPath(e,["temperature"]);a!=null&&setValueByPath(r,["temperature"],a);const l=getValueByPath(e,["topP"]);l!=null&&setValueByPath(r,["topP"],l);const d=getValueByPath(e,["topK"]);d!=null&&setValueByPath(r,["topK"],d);const h=getValueByPath(e,["candidateCount"]);h!=null&&setValueByPath(r,["candidateCount"],h);const u=getValueByPath(e,["maxOutputTokens"]);u!=null&&setValueByPath(r,["maxOutputTokens"],u);const f=getValueByPath(e,["stopSequences"]);f!=null&&setValueByPath(r,["stopSequences"],f);const p=getValueByPath(e,["responseLogprobs"]);p!=null&&setValueByPath(r,["responseLogprobs"],p);const g=getValueByPath(e,["logprobs"]);g!=null&&setValueByPath(r,["logprobs"],g);const y=getValueByPath(e,["presencePenalty"]);y!=null&&setValueByPath(r,["presencePenalty"],y);const x=getValueByPath(e,["frequencyPenalty"]);x!=null&&setValueByPath(r,["frequencyPenalty"],x);const S=getValueByPath(e,["seed"]);S!=null&&setValueByPath(r,["seed"],S);const w=getValueByPath(e,["responseMimeType"]);w!=null&&setValueByPath(r,["responseMimeType"],w);const k=getValueByPath(e,["responseSchema"]);k!=null&&setValueByPath(r,["responseSchema"],tSchema(k));const N=getValueByPath(e,["responseJsonSchema"]);if(N!=null&&setValueByPath(r,["responseJsonSchema"],N),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=getValueByPath(e,["safetySettings"]);if(n!==void 0&&R!=null){let j=R;Array.isArray(j)&&(j=j.map(ee=>safetySettingToMldev$1(ee))),setValueByPath(n,["safetySettings"],j)}const B=getValueByPath(e,["tools"]);if(n!==void 0&&B!=null){let j=tTools(B);Array.isArray(j)&&(j=j.map(ee=>toolToMldev$4(tTool(ee)))),setValueByPath(n,["tools"],j)}const q=getValueByPath(e,["toolConfig"]);if(n!==void 0&&q!=null&&setValueByPath(n,["toolConfig"],q),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=getValueByPath(e,["cachedContent"]);n!==void 0&&F!=null&&setValueByPath(n,["cachedContent"],tCachedContentName(t,F));const z=getValueByPath(e,["responseModalities"]);z!=null&&setValueByPath(r,["responseModalities"],z);const V=getValueByPath(e,["mediaResolution"]);V!=null&&setValueByPath(r,["mediaResolution"],V);const b=getValueByPath(e,["speechConfig"]);if(b!=null&&setValueByPath(r,["speechConfig"],tSpeechConfig(b)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=getValueByPath(e,["thinkingConfig"]);U!=null&&setValueByPath(r,["thinkingConfig"],U);const H=getValueByPath(e,["imageConfig"]);return H!=null&&setValueByPath(r,["imageConfig"],H),r}function generateContentResponseFromMldev$1(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(u=>candidateFromMldev$1(u))),setValueByPath(e,["candidates"],h)}const s=getValueByPath(t,["modelVersion"]);s!=null&&setValueByPath(e,["modelVersion"],s);const a=getValueByPath(t,["promptFeedback"]);a!=null&&setValueByPath(e,["promptFeedback"],a);const l=getValueByPath(t,["responseId"]);l!=null&&setValueByPath(e,["responseId"],l);const d=getValueByPath(t,["usageMetadata"]);return d!=null&&setValueByPath(e,["usageMetadata"],d),e}function getBatchJobParametersToMldev(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tBatchJobName(t,r)),n}function getBatchJobParametersToVertex(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tBatchJobName(t,r)),n}function googleMapsToMldev$4(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(t,["enableWidget"]);return n!=null&&setValueByPath(e,["enableWidget"],n),e}function googleSearchToMldev$4(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(t,["timeRangeFilter"]);return n!=null&&setValueByPath(e,["timeRangeFilter"],n),e}function inlinedRequestToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["request","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let d=tContents(s);Array.isArray(d)&&(d=d.map(h=>contentToMldev$4(h))),setValueByPath(n,["request","contents"],d)}const a=getValueByPath(e,["metadata"]);a!=null&&setValueByPath(n,["metadata"],a);const l=getValueByPath(e,["config"]);return l!=null&&setValueByPath(n,["request","generationConfig"],generateContentConfigToMldev$1(t,l,getValueByPath(n,["request"],{}))),n}function inlinedResponseFromMldev(t){const e={},n=getValueByPath(t,["response"]);n!=null&&setValueByPath(e,["response"],generateContentResponseFromMldev$1(n));const r=getValueByPath(t,["error"]);return r!=null&&setValueByPath(e,["error"],r),e}function listBatchJobsConfigToMldev(t,e){const n={},r=getValueByPath(t,["pageSize"]);e!==void 0&&r!=null&&setValueByPath(e,["_query","pageSize"],r);const s=getValueByPath(t,["pageToken"]);if(e!==void 0&&s!=null&&setValueByPath(e,["_query","pageToken"],s),getValueByPath(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function listBatchJobsConfigToVertex(t,e){const n={},r=getValueByPath(t,["pageSize"]);e!==void 0&&r!=null&&setValueByPath(e,["_query","pageSize"],r);const s=getValueByPath(t,["pageToken"]);e!==void 0&&s!=null&&setValueByPath(e,["_query","pageToken"],s);const a=getValueByPath(t,["filter"]);return e!==void 0&&a!=null&&setValueByPath(e,["_query","filter"],a),n}function listBatchJobsParametersToMldev(t){const e={},n=getValueByPath(t,["config"]);return n!=null&&listBatchJobsConfigToMldev(n,e),e}function listBatchJobsParametersToVertex(t){const e={},n=getValueByPath(t,["config"]);return n!=null&&listBatchJobsConfigToVertex(n,e),e}function listBatchJobsResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>batchJobFromMldev(l))),setValueByPath(e,["batchJobs"],a)}return e}function listBatchJobsResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>batchJobFromVertex(l))),setValueByPath(e,["batchJobs"],a)}return e}function partToMldev$4(t){const e={},n=getValueByPath(t,["functionCall"]);n!=null&&setValueByPath(e,["functionCall"],n);const r=getValueByPath(t,["codeExecutionResult"]);r!=null&&setValueByPath(e,["codeExecutionResult"],r);const s=getValueByPath(t,["executableCode"]);s!=null&&setValueByPath(e,["executableCode"],s);const a=getValueByPath(t,["fileData"]);a!=null&&setValueByPath(e,["fileData"],fileDataToMldev$4(a));const l=getValueByPath(t,["functionResponse"]);l!=null&&setValueByPath(e,["functionResponse"],l);const d=getValueByPath(t,["inlineData"]);d!=null&&setValueByPath(e,["inlineData"],blobToMldev$4(d));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const f=getValueByPath(t,["thoughtSignature"]);f!=null&&setValueByPath(e,["thoughtSignature"],f);const p=getValueByPath(t,["videoMetadata"]);return p!=null&&setValueByPath(e,["videoMetadata"],p),e}function safetySettingToMldev$1(t){const e={},n=getValueByPath(t,["category"]);if(n!=null&&setValueByPath(e,["category"],n),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=getValueByPath(t,["threshold"]);return r!=null&&setValueByPath(e,["threshold"],r),e}function toolToMldev$4(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),setValueByPath(e,["functionDeclarations"],f)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=getValueByPath(t,["googleSearchRetrieval"]);r!=null&&setValueByPath(e,["googleSearchRetrieval"],r);const s=getValueByPath(t,["computerUse"]);s!=null&&setValueByPath(e,["computerUse"],s);const a=getValueByPath(t,["fileSearch"]);a!=null&&setValueByPath(e,["fileSearch"],a);const l=getValueByPath(t,["codeExecution"]);if(l!=null&&setValueByPath(e,["codeExecution"],l),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=getValueByPath(t,["googleMaps"]);d!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$4(d));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$4(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PagedItem;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(PagedItem||(PagedItem={}));class Pager{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Batches extends BaseModule{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Pager(PagedItem.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=createBatchJobParametersToMldev(this.apiClient,e),r=n._url,s=formatMap("{model}:batchGenerateContent",r),d=n.batch.inputConfig.requests,h=d.requests,u=[];for(const f of h){const p=Object.assign({},f);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=g,p.request=y}u.push(p)}return d.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${s}`;else if(l)r.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=createBatchJobParametersToVertex(this.apiClient,e);return d=formatMap("batchPredictionJobs",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>batchJobFromVertex(f))}else{const u=createBatchJobParametersToMldev(this.apiClient,e);return d=formatMap("{model}:batchGenerateContent",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>batchJobFromMldev(f))}}async createEmbeddingsInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=createEmbeddingsBatchJobParametersToMldev(this.apiClient,e);return a=formatMap("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>batchJobFromMldev(h))}}async get(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=getBatchJobParametersToVertex(this.apiClient,e);return d=formatMap("batchPredictionJobs/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>batchJobFromVertex(f))}else{const u=getBatchJobParametersToMldev(this.apiClient,e);return d=formatMap("batches/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>batchJobFromMldev(f))}}async cancel(e){var n,r,s,a;let l="",d={};if(this.apiClient.isVertexAI()){const h=cancelBatchJobParametersToVertex(this.apiClient,e);l=formatMap("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const h=cancelBatchJobParametersToMldev(this.apiClient,e);l=formatMap("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=listBatchJobsParametersToVertex(e);return d=formatMap("batchPredictionJobs",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listBatchJobsResponseFromVertex(f),g=new ListBatchJobsResponse;return Object.assign(g,p),g})}else{const u=listBatchJobsParametersToMldev(e);return d=formatMap("batches",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listBatchJobsResponseFromMldev(f),g=new ListBatchJobsResponse;return Object.assign(g,p),g})}}async delete(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=deleteBatchJobParametersToVertex(this.apiClient,e);return d=formatMap("batchPredictionJobs/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>deleteResourceJobFromVertex(f))}else{const u=deleteBatchJobParametersToMldev(this.apiClient,e);return d=formatMap("batches/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>deleteResourceJobFromMldev(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$3(t){const e={},n=getValueByPath(t,["data"]);if(n!=null&&setValueByPath(e,["data"],n),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function contentToMldev$3(t){const e={},n=getValueByPath(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>partToMldev$3(a))),setValueByPath(e,["parts"],s)}const r=getValueByPath(t,["role"]);return r!=null&&setValueByPath(e,["role"],r),e}function createCachedContentConfigToMldev(t,e){const n={},r=getValueByPath(t,["ttl"]);e!==void 0&&r!=null&&setValueByPath(e,["ttl"],r);const s=getValueByPath(t,["expireTime"]);e!==void 0&&s!=null&&setValueByPath(e,["expireTime"],s);const a=getValueByPath(t,["displayName"]);e!==void 0&&a!=null&&setValueByPath(e,["displayName"],a);const l=getValueByPath(t,["contents"]);if(e!==void 0&&l!=null){let f=tContents(l);Array.isArray(f)&&(f=f.map(p=>contentToMldev$3(p))),setValueByPath(e,["contents"],f)}const d=getValueByPath(t,["systemInstruction"]);e!==void 0&&d!=null&&setValueByPath(e,["systemInstruction"],contentToMldev$3(tContent(d)));const h=getValueByPath(t,["tools"]);if(e!==void 0&&h!=null){let f=h;Array.isArray(f)&&(f=f.map(p=>toolToMldev$3(p))),setValueByPath(e,["tools"],f)}const u=getValueByPath(t,["toolConfig"]);if(e!==void 0&&u!=null&&setValueByPath(e,["toolConfig"],u),getValueByPath(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function createCachedContentConfigToVertex(t,e){const n={},r=getValueByPath(t,["ttl"]);e!==void 0&&r!=null&&setValueByPath(e,["ttl"],r);const s=getValueByPath(t,["expireTime"]);e!==void 0&&s!=null&&setValueByPath(e,["expireTime"],s);const a=getValueByPath(t,["displayName"]);e!==void 0&&a!=null&&setValueByPath(e,["displayName"],a);const l=getValueByPath(t,["contents"]);if(e!==void 0&&l!=null){let p=tContents(l);Array.isArray(p)&&(p=p.map(g=>g)),setValueByPath(e,["contents"],p)}const d=getValueByPath(t,["systemInstruction"]);e!==void 0&&d!=null&&setValueByPath(e,["systemInstruction"],tContent(d));const h=getValueByPath(t,["tools"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>toolToVertex$2(g))),setValueByPath(e,["tools"],p)}const u=getValueByPath(t,["toolConfig"]);e!==void 0&&u!=null&&setValueByPath(e,["toolConfig"],u);const f=getValueByPath(t,["kmsKeyName"]);return e!==void 0&&f!=null&&setValueByPath(e,["encryption_spec","kmsKeyName"],f),n}function createCachedContentParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["model"],tCachesModel(t,r));const s=getValueByPath(e,["config"]);return s!=null&&createCachedContentConfigToMldev(s,n),n}function createCachedContentParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["model"],tCachesModel(t,r));const s=getValueByPath(e,["config"]);return s!=null&&createCachedContentConfigToVertex(s,n),n}function deleteCachedContentParametersToMldev(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tCachedContentName(t,r)),n}function deleteCachedContentParametersToVertex(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tCachedContentName(t,r)),n}function deleteCachedContentResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);return n!=null&&setValueByPath(e,["sdkHttpResponse"],n),e}function deleteCachedContentResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);return n!=null&&setValueByPath(e,["sdkHttpResponse"],n),e}function fileDataToMldev$3(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(t,["fileUri"]);n!=null&&setValueByPath(e,["fileUri"],n);const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function functionDeclarationToVertex$2(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=getValueByPath(t,["description"]);n!=null&&setValueByPath(e,["description"],n);const r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const s=getValueByPath(t,["parameters"]);s!=null&&setValueByPath(e,["parameters"],s);const a=getValueByPath(t,["parametersJsonSchema"]);a!=null&&setValueByPath(e,["parametersJsonSchema"],a);const l=getValueByPath(t,["response"]);l!=null&&setValueByPath(e,["response"],l);const d=getValueByPath(t,["responseJsonSchema"]);return d!=null&&setValueByPath(e,["responseJsonSchema"],d),e}function getCachedContentParametersToMldev(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tCachedContentName(t,r)),n}function getCachedContentParametersToVertex(t,e){const n={},r=getValueByPath(e,["name"]);return r!=null&&setValueByPath(n,["_url","name"],tCachedContentName(t,r)),n}function googleMapsToMldev$3(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(t,["enableWidget"]);return n!=null&&setValueByPath(e,["enableWidget"],n),e}function googleSearchToMldev$3(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(t,["timeRangeFilter"]);return n!=null&&setValueByPath(e,["timeRangeFilter"],n),e}function listCachedContentsConfigToMldev(t,e){const n={},r=getValueByPath(t,["pageSize"]);e!==void 0&&r!=null&&setValueByPath(e,["_query","pageSize"],r);const s=getValueByPath(t,["pageToken"]);return e!==void 0&&s!=null&&setValueByPath(e,["_query","pageToken"],s),n}function listCachedContentsConfigToVertex(t,e){const n={},r=getValueByPath(t,["pageSize"]);e!==void 0&&r!=null&&setValueByPath(e,["_query","pageSize"],r);const s=getValueByPath(t,["pageToken"]);return e!==void 0&&s!=null&&setValueByPath(e,["_query","pageToken"],s),n}function listCachedContentsParametersToMldev(t){const e={},n=getValueByPath(t,["config"]);return n!=null&&listCachedContentsConfigToMldev(n,e),e}function listCachedContentsParametersToVertex(t){const e={},n=getValueByPath(t,["config"]);return n!=null&&listCachedContentsConfigToVertex(n,e),e}function listCachedContentsResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["cachedContents"],a)}return e}function listCachedContentsResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["cachedContents"],a)}return e}function partToMldev$3(t){const e={},n=getValueByPath(t,["functionCall"]);n!=null&&setValueByPath(e,["functionCall"],n);const r=getValueByPath(t,["codeExecutionResult"]);r!=null&&setValueByPath(e,["codeExecutionResult"],r);const s=getValueByPath(t,["executableCode"]);s!=null&&setValueByPath(e,["executableCode"],s);const a=getValueByPath(t,["fileData"]);a!=null&&setValueByPath(e,["fileData"],fileDataToMldev$3(a));const l=getValueByPath(t,["functionResponse"]);l!=null&&setValueByPath(e,["functionResponse"],l);const d=getValueByPath(t,["inlineData"]);d!=null&&setValueByPath(e,["inlineData"],blobToMldev$3(d));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const f=getValueByPath(t,["thoughtSignature"]);f!=null&&setValueByPath(e,["thoughtSignature"],f);const p=getValueByPath(t,["videoMetadata"]);return p!=null&&setValueByPath(e,["videoMetadata"],p),e}function toolToMldev$3(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),setValueByPath(e,["functionDeclarations"],f)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=getValueByPath(t,["googleSearchRetrieval"]);r!=null&&setValueByPath(e,["googleSearchRetrieval"],r);const s=getValueByPath(t,["computerUse"]);s!=null&&setValueByPath(e,["computerUse"],s);const a=getValueByPath(t,["fileSearch"]);a!=null&&setValueByPath(e,["fileSearch"],a);const l=getValueByPath(t,["codeExecution"]);if(l!=null&&setValueByPath(e,["codeExecution"],l),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=getValueByPath(t,["googleMaps"]);d!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$3(d));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$3(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}function toolToVertex$2(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>functionDeclarationToVertex$2(g))),setValueByPath(e,["functionDeclarations"],p)}const r=getValueByPath(t,["retrieval"]);r!=null&&setValueByPath(e,["retrieval"],r);const s=getValueByPath(t,["googleSearchRetrieval"]);s!=null&&setValueByPath(e,["googleSearchRetrieval"],s);const a=getValueByPath(t,["computerUse"]);if(a!=null&&setValueByPath(e,["computerUse"],a),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=getValueByPath(t,["codeExecution"]);l!=null&&setValueByPath(e,["codeExecution"],l);const d=getValueByPath(t,["enterpriseWebSearch"]);d!=null&&setValueByPath(e,["enterpriseWebSearch"],d);const h=getValueByPath(t,["googleMaps"]);h!=null&&setValueByPath(e,["googleMaps"],h);const u=getValueByPath(t,["googleSearch"]);u!=null&&setValueByPath(e,["googleSearch"],u);const f=getValueByPath(t,["urlContext"]);return f!=null&&setValueByPath(e,["urlContext"],f),e}function updateCachedContentConfigToMldev(t,e){const n={},r=getValueByPath(t,["ttl"]);e!==void 0&&r!=null&&setValueByPath(e,["ttl"],r);const s=getValueByPath(t,["expireTime"]);return e!==void 0&&s!=null&&setValueByPath(e,["expireTime"],s),n}function updateCachedContentConfigToVertex(t,e){const n={},r=getValueByPath(t,["ttl"]);e!==void 0&&r!=null&&setValueByPath(e,["ttl"],r);const s=getValueByPath(t,["expireTime"]);return e!==void 0&&s!=null&&setValueByPath(e,["expireTime"],s),n}function updateCachedContentParametersToMldev(t,e){const n={},r=getValueByPath(e,["name"]);r!=null&&setValueByPath(n,["_url","name"],tCachedContentName(t,r));const s=getValueByPath(e,["config"]);return s!=null&&updateCachedContentConfigToMldev(s,n),n}function updateCachedContentParametersToVertex(t,e){const n={},r=getValueByPath(e,["name"]);r!=null&&setValueByPath(n,["_url","name"],tCachedContentName(t,r));const s=getValueByPath(e,["config"]);return s!=null&&updateCachedContentConfigToVertex(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Caches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Pager(PagedItem.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=createCachedContentParametersToVertex(this.apiClient,e);return d=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const u=createCachedContentParametersToMldev(this.apiClient,e);return d=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async get(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=getCachedContentParametersToVertex(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const u=getCachedContentParametersToMldev(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async delete(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=deleteCachedContentParametersToVertex(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=deleteCachedContentResponseFromVertex(f),g=new DeleteCachedContentResponse;return Object.assign(g,p),g})}else{const u=deleteCachedContentParametersToMldev(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=deleteCachedContentResponseFromMldev(f),g=new DeleteCachedContentResponse;return Object.assign(g,p),g})}}async update(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=updateCachedContentParametersToVertex(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const u=updateCachedContentParametersToMldev(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async listInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=listCachedContentsParametersToVertex(e);return d=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listCachedContentsResponseFromVertex(f),g=new ListCachedContentsResponse;return Object.assign(g,p),g})}else{const u=listCachedContentsParametersToMldev(e);return d=formatMap("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listCachedContentsResponseFromMldev(f),g=new ListCachedContentsResponse;return Object.assign(g,p),g})}}}function __values(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await$1(t){return this instanceof __await$1?(this.v=t,this):new __await$1(t)}function __asyncGenerator$1(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(y){return function(x){return Promise.resolve(x).then(y,p)}}function d(y,x){r[y]&&(s[y]=function(S){return new Promise(function(w,k){a.push([y,S,w,k])>1||h(y,S)})},x&&(s[y]=x(s[y])))}function h(y,x){try{u(r[y](x))}catch(S){g(a[0][3],S)}}function u(y){y.value instanceof __await$1?Promise.resolve(y.value.v).then(f,p):g(a[0][2],y)}function f(y){h("next",y)}function p(y){h("throw",y)}function g(y,x){y(x),a.shift(),a.length&&h(a[0][0],a[0][1])}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(l){return new Promise(function(d,h){l=t[a](l),s(d,h,l.done,l.value)})}}function s(a,l,d,h){Promise.resolve(h).then(function(u){a({value:u,done:d})},l)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isValidResponse$1(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:isValidContent(n)}function isValidContent(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function validateHistory(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function extractCuratedHistory(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let a=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),a&&!isValidContent(t[r])&&(a=!1),r++;a?e.push(...s):e.pop()}return e}class Chats{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Chat(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Chat{constructor(e,n,r,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),validateHistory(a)}async sendMessage(e){var n;await this.sendPromise;const r=tContent(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,d;const h=await s,u=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,f=h.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];f!=null&&(g=(d=f.slice(p))!==null&&d!==void 0?d:[]);const y=u?[u]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=tContent(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?extractCuratedHistory(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return __asyncGenerator$1(this,arguments,function*(){var l,d,h,u;const f=[];try{for(var p=!0,g=__asyncValues(e),y;y=yield __await$1(g.next()),l=y.done,!l;p=!0){u=y.value,p=!1;const x=u;if(isValidResponse$1(x)){const S=(s=(r=x.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;S!==void 0&&f.push(S)}yield yield __await$1(x)}}catch(x){d={error:x}}finally{try{!p&&!l&&(h=g.return)&&(yield __await$1(h.call(g)))}finally{if(d)throw d.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...extractCuratedHistory(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ApiError extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ApiError.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileParametersToMldev(t){const e={},n=getValueByPath(t,["file"]);return n!=null&&setValueByPath(e,["file"],n),e}function createFileResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);return n!=null&&setValueByPath(e,["sdkHttpResponse"],n),e}function deleteFileParametersToMldev(t){const e={},n=getValueByPath(t,["name"]);return n!=null&&setValueByPath(e,["_url","file"],tFileName(n)),e}function deleteFileResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);return n!=null&&setValueByPath(e,["sdkHttpResponse"],n),e}function getFileParametersToMldev(t){const e={},n=getValueByPath(t,["name"]);return n!=null&&setValueByPath(e,["_url","file"],tFileName(n)),e}function listFilesConfigToMldev(t,e){const n={},r=getValueByPath(t,["pageSize"]);e!==void 0&&r!=null&&setValueByPath(e,["_query","pageSize"],r);const s=getValueByPath(t,["pageToken"]);return e!==void 0&&s!=null&&setValueByPath(e,["_query","pageToken"],s),n}function listFilesParametersToMldev(t){const e={},n=getValueByPath(t,["config"]);return n!=null&&listFilesConfigToMldev(n,e),e}function listFilesResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Files extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Pager(PagedItem.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=listFilesParametersToMldev(e);return a=formatMap("files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:h.headers},f})),s.then(h=>{const u=listFilesResponseFromMldev(h),f=new ListFilesResponse;return Object.assign(f,u),f})}}async createInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=createFileParametersToMldev(e);return a=formatMap("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const u=createFileResponseFromMldev(h),f=new CreateFileResponse;return Object.assign(f,u),f})}}async get(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=getFileParametersToMldev(e);return a=formatMap("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=deleteFileParametersToMldev(e);return a=formatMap("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:h.headers},f})),s.then(h=>{const u=deleteFileResponseFromMldev(h),f=new DeleteFileResponse;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$2(t){const e={},n=getValueByPath(t,["data"]);if(n!=null&&setValueByPath(e,["data"],n),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function contentToMldev$2(t){const e={},n=getValueByPath(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>partToMldev$2(a))),setValueByPath(e,["parts"],s)}const r=getValueByPath(t,["role"]);return r!=null&&setValueByPath(e,["role"],r),e}function fileDataToMldev$2(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(t,["fileUri"]);n!=null&&setValueByPath(e,["fileUri"],n);const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function functionDeclarationToVertex$1(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=getValueByPath(t,["description"]);n!=null&&setValueByPath(e,["description"],n);const r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const s=getValueByPath(t,["parameters"]);s!=null&&setValueByPath(e,["parameters"],s);const a=getValueByPath(t,["parametersJsonSchema"]);a!=null&&setValueByPath(e,["parametersJsonSchema"],a);const l=getValueByPath(t,["response"]);l!=null&&setValueByPath(e,["response"],l);const d=getValueByPath(t,["responseJsonSchema"]);return d!=null&&setValueByPath(e,["responseJsonSchema"],d),e}function generationConfigToVertex$1(t){const e={},n=getValueByPath(t,["modelSelectionConfig"]);n!=null&&setValueByPath(e,["modelConfig"],n);const r=getValueByPath(t,["responseJsonSchema"]);r!=null&&setValueByPath(e,["responseJsonSchema"],r);const s=getValueByPath(t,["audioTimestamp"]);s!=null&&setValueByPath(e,["audioTimestamp"],s);const a=getValueByPath(t,["candidateCount"]);a!=null&&setValueByPath(e,["candidateCount"],a);const l=getValueByPath(t,["enableAffectiveDialog"]);l!=null&&setValueByPath(e,["enableAffectiveDialog"],l);const d=getValueByPath(t,["frequencyPenalty"]);d!=null&&setValueByPath(e,["frequencyPenalty"],d);const h=getValueByPath(t,["logprobs"]);h!=null&&setValueByPath(e,["logprobs"],h);const u=getValueByPath(t,["maxOutputTokens"]);u!=null&&setValueByPath(e,["maxOutputTokens"],u);const f=getValueByPath(t,["mediaResolution"]);f!=null&&setValueByPath(e,["mediaResolution"],f);const p=getValueByPath(t,["presencePenalty"]);p!=null&&setValueByPath(e,["presencePenalty"],p);const g=getValueByPath(t,["responseLogprobs"]);g!=null&&setValueByPath(e,["responseLogprobs"],g);const y=getValueByPath(t,["responseMimeType"]);y!=null&&setValueByPath(e,["responseMimeType"],y);const x=getValueByPath(t,["responseModalities"]);x!=null&&setValueByPath(e,["responseModalities"],x);const S=getValueByPath(t,["responseSchema"]);S!=null&&setValueByPath(e,["responseSchema"],S);const w=getValueByPath(t,["routingConfig"]);w!=null&&setValueByPath(e,["routingConfig"],w);const k=getValueByPath(t,["seed"]);k!=null&&setValueByPath(e,["seed"],k);const N=getValueByPath(t,["speechConfig"]);N!=null&&setValueByPath(e,["speechConfig"],speechConfigToVertex$1(N));const R=getValueByPath(t,["stopSequences"]);R!=null&&setValueByPath(e,["stopSequences"],R);const B=getValueByPath(t,["temperature"]);B!=null&&setValueByPath(e,["temperature"],B);const q=getValueByPath(t,["thinkingConfig"]);q!=null&&setValueByPath(e,["thinkingConfig"],q);const F=getValueByPath(t,["topK"]);F!=null&&setValueByPath(e,["topK"],F);const z=getValueByPath(t,["topP"]);if(z!=null&&setValueByPath(e,["topP"],z),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function googleMapsToMldev$2(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(t,["enableWidget"]);return n!=null&&setValueByPath(e,["enableWidget"],n),e}function googleSearchToMldev$2(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(t,["timeRangeFilter"]);return n!=null&&setValueByPath(e,["timeRangeFilter"],n),e}function liveConnectConfigToMldev$1(t,e){const n={},r=getValueByPath(t,["generationConfig"]);e!==void 0&&r!=null&&setValueByPath(e,["setup","generationConfig"],r);const s=getValueByPath(t,["responseModalities"]);e!==void 0&&s!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],s);const a=getValueByPath(t,["temperature"]);e!==void 0&&a!=null&&setValueByPath(e,["setup","generationConfig","temperature"],a);const l=getValueByPath(t,["topP"]);e!==void 0&&l!=null&&setValueByPath(e,["setup","generationConfig","topP"],l);const d=getValueByPath(t,["topK"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","topK"],d);const h=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],h);const u=getValueByPath(t,["mediaResolution"]);e!==void 0&&u!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],u);const f=getValueByPath(t,["seed"]);e!==void 0&&f!=null&&setValueByPath(e,["setup","generationConfig","seed"],f);const p=getValueByPath(t,["speechConfig"]);e!==void 0&&p!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(p));const g=getValueByPath(t,["thinkingConfig"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],g);const y=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=getValueByPath(t,["systemInstruction"]);e!==void 0&&x!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev$2(tContent(x)));const S=getValueByPath(t,["tools"]);if(e!==void 0&&S!=null){let F=tTools(S);Array.isArray(F)&&(F=F.map(z=>toolToMldev$2(tTool(z)))),setValueByPath(e,["setup","tools"],F)}const w=getValueByPath(t,["sessionResumption"]);e!==void 0&&w!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev$1(w));const k=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&setValueByPath(e,["setup","inputAudioTranscription"],k);const N=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&setValueByPath(e,["setup","outputAudioTranscription"],N);const R=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&setValueByPath(e,["setup","realtimeInputConfig"],R);const B=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&B!=null&&setValueByPath(e,["setup","contextWindowCompression"],B);const q=getValueByPath(t,["proactivity"]);return e!==void 0&&q!=null&&setValueByPath(e,["setup","proactivity"],q),n}function liveConnectConfigToVertex(t,e){const n={},r=getValueByPath(t,["generationConfig"]);e!==void 0&&r!=null&&setValueByPath(e,["setup","generationConfig"],generationConfigToVertex$1(r));const s=getValueByPath(t,["responseModalities"]);e!==void 0&&s!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],s);const a=getValueByPath(t,["temperature"]);e!==void 0&&a!=null&&setValueByPath(e,["setup","generationConfig","temperature"],a);const l=getValueByPath(t,["topP"]);e!==void 0&&l!=null&&setValueByPath(e,["setup","generationConfig","topP"],l);const d=getValueByPath(t,["topK"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","topK"],d);const h=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],h);const u=getValueByPath(t,["mediaResolution"]);e!==void 0&&u!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],u);const f=getValueByPath(t,["seed"]);e!==void 0&&f!=null&&setValueByPath(e,["setup","generationConfig","seed"],f);const p=getValueByPath(t,["speechConfig"]);e!==void 0&&p!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],speechConfigToVertex$1(tLiveSpeechConfig(p)));const g=getValueByPath(t,["thinkingConfig"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],g);const y=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=getValueByPath(t,["systemInstruction"]);e!==void 0&&x!=null&&setValueByPath(e,["setup","systemInstruction"],tContent(x));const S=getValueByPath(t,["tools"]);if(e!==void 0&&S!=null){let F=tTools(S);Array.isArray(F)&&(F=F.map(z=>toolToVertex$1(tTool(z)))),setValueByPath(e,["setup","tools"],F)}const w=getValueByPath(t,["sessionResumption"]);e!==void 0&&w!=null&&setValueByPath(e,["setup","sessionResumption"],w);const k=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&setValueByPath(e,["setup","inputAudioTranscription"],k);const N=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&setValueByPath(e,["setup","outputAudioTranscription"],N);const R=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&setValueByPath(e,["setup","realtimeInputConfig"],R);const B=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&B!=null&&setValueByPath(e,["setup","contextWindowCompression"],B);const q=getValueByPath(t,["proactivity"]);return e!==void 0&&q!=null&&setValueByPath(e,["setup","proactivity"],q),n}function liveConnectParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["setup","model"],tModel(t,r));const s=getValueByPath(e,["config"]);return s!=null&&setValueByPath(n,["config"],liveConnectConfigToMldev$1(s,n)),n}function liveConnectParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["setup","model"],tModel(t,r));const s=getValueByPath(e,["config"]);return s!=null&&setValueByPath(n,["config"],liveConnectConfigToVertex(s,n)),n}function liveMusicSetConfigParametersToMldev(t){const e={},n=getValueByPath(t,["musicGenerationConfig"]);return n!=null&&setValueByPath(e,["musicGenerationConfig"],n),e}function liveMusicSetWeightedPromptsParametersToMldev(t){const e={},n=getValueByPath(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),setValueByPath(e,["weightedPrompts"],r)}return e}function liveSendRealtimeInputParametersToMldev(t){const e={},n=getValueByPath(t,["media"]);if(n!=null){let u=tBlobs(n);Array.isArray(u)&&(u=u.map(f=>blobToMldev$2(f))),setValueByPath(e,["mediaChunks"],u)}const r=getValueByPath(t,["audio"]);r!=null&&setValueByPath(e,["audio"],blobToMldev$2(tAudioBlob(r)));const s=getValueByPath(t,["audioStreamEnd"]);s!=null&&setValueByPath(e,["audioStreamEnd"],s);const a=getValueByPath(t,["video"]);a!=null&&setValueByPath(e,["video"],blobToMldev$2(tImageBlob(a)));const l=getValueByPath(t,["text"]);l!=null&&setValueByPath(e,["text"],l);const d=getValueByPath(t,["activityStart"]);d!=null&&setValueByPath(e,["activityStart"],d);const h=getValueByPath(t,["activityEnd"]);return h!=null&&setValueByPath(e,["activityEnd"],h),e}function liveSendRealtimeInputParametersToVertex(t){const e={},n=getValueByPath(t,["media"]);if(n!=null){let u=tBlobs(n);Array.isArray(u)&&(u=u.map(f=>f)),setValueByPath(e,["mediaChunks"],u)}const r=getValueByPath(t,["audio"]);r!=null&&setValueByPath(e,["audio"],tAudioBlob(r));const s=getValueByPath(t,["audioStreamEnd"]);s!=null&&setValueByPath(e,["audioStreamEnd"],s);const a=getValueByPath(t,["video"]);a!=null&&setValueByPath(e,["video"],tImageBlob(a));const l=getValueByPath(t,["text"]);l!=null&&setValueByPath(e,["text"],l);const d=getValueByPath(t,["activityStart"]);d!=null&&setValueByPath(e,["activityStart"],d);const h=getValueByPath(t,["activityEnd"]);return h!=null&&setValueByPath(e,["activityEnd"],h),e}function liveServerMessageFromVertex(t){const e={},n=getValueByPath(t,["setupComplete"]);n!=null&&setValueByPath(e,["setupComplete"],n);const r=getValueByPath(t,["serverContent"]);r!=null&&setValueByPath(e,["serverContent"],r);const s=getValueByPath(t,["toolCall"]);s!=null&&setValueByPath(e,["toolCall"],s);const a=getValueByPath(t,["toolCallCancellation"]);a!=null&&setValueByPath(e,["toolCallCancellation"],a);const l=getValueByPath(t,["usageMetadata"]);l!=null&&setValueByPath(e,["usageMetadata"],usageMetadataFromVertex(l));const d=getValueByPath(t,["goAway"]);d!=null&&setValueByPath(e,["goAway"],d);const h=getValueByPath(t,["sessionResumptionUpdate"]);return h!=null&&setValueByPath(e,["sessionResumptionUpdate"],h),e}function partToMldev$2(t){const e={},n=getValueByPath(t,["functionCall"]);n!=null&&setValueByPath(e,["functionCall"],n);const r=getValueByPath(t,["codeExecutionResult"]);r!=null&&setValueByPath(e,["codeExecutionResult"],r);const s=getValueByPath(t,["executableCode"]);s!=null&&setValueByPath(e,["executableCode"],s);const a=getValueByPath(t,["fileData"]);a!=null&&setValueByPath(e,["fileData"],fileDataToMldev$2(a));const l=getValueByPath(t,["functionResponse"]);l!=null&&setValueByPath(e,["functionResponse"],l);const d=getValueByPath(t,["inlineData"]);d!=null&&setValueByPath(e,["inlineData"],blobToMldev$2(d));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const f=getValueByPath(t,["thoughtSignature"]);f!=null&&setValueByPath(e,["thoughtSignature"],f);const p=getValueByPath(t,["videoMetadata"]);return p!=null&&setValueByPath(e,["videoMetadata"],p),e}function sessionResumptionConfigToMldev$1(t){const e={},n=getValueByPath(t,["handle"]);if(n!=null&&setValueByPath(e,["handle"],n),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function speechConfigToVertex$1(t){const e={},n=getValueByPath(t,["languageCode"]);n!=null&&setValueByPath(e,["languageCode"],n);const r=getValueByPath(t,["voiceConfig"]);if(r!=null&&setValueByPath(e,["voiceConfig"],r),getValueByPath(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function toolToMldev$2(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),setValueByPath(e,["functionDeclarations"],f)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=getValueByPath(t,["googleSearchRetrieval"]);r!=null&&setValueByPath(e,["googleSearchRetrieval"],r);const s=getValueByPath(t,["computerUse"]);s!=null&&setValueByPath(e,["computerUse"],s);const a=getValueByPath(t,["fileSearch"]);a!=null&&setValueByPath(e,["fileSearch"],a);const l=getValueByPath(t,["codeExecution"]);if(l!=null&&setValueByPath(e,["codeExecution"],l),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=getValueByPath(t,["googleMaps"]);d!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$2(d));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$2(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}function toolToVertex$1(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>functionDeclarationToVertex$1(g))),setValueByPath(e,["functionDeclarations"],p)}const r=getValueByPath(t,["retrieval"]);r!=null&&setValueByPath(e,["retrieval"],r);const s=getValueByPath(t,["googleSearchRetrieval"]);s!=null&&setValueByPath(e,["googleSearchRetrieval"],s);const a=getValueByPath(t,["computerUse"]);if(a!=null&&setValueByPath(e,["computerUse"],a),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=getValueByPath(t,["codeExecution"]);l!=null&&setValueByPath(e,["codeExecution"],l);const d=getValueByPath(t,["enterpriseWebSearch"]);d!=null&&setValueByPath(e,["enterpriseWebSearch"],d);const h=getValueByPath(t,["googleMaps"]);h!=null&&setValueByPath(e,["googleMaps"],h);const u=getValueByPath(t,["googleSearch"]);u!=null&&setValueByPath(e,["googleSearch"],u);const f=getValueByPath(t,["urlContext"]);return f!=null&&setValueByPath(e,["urlContext"],f),e}function usageMetadataFromVertex(t){const e={},n=getValueByPath(t,["promptTokenCount"]);n!=null&&setValueByPath(e,["promptTokenCount"],n);const r=getValueByPath(t,["cachedContentTokenCount"]);r!=null&&setValueByPath(e,["cachedContentTokenCount"],r);const s=getValueByPath(t,["candidatesTokenCount"]);s!=null&&setValueByPath(e,["responseTokenCount"],s);const a=getValueByPath(t,["toolUsePromptTokenCount"]);a!=null&&setValueByPath(e,["toolUsePromptTokenCount"],a);const l=getValueByPath(t,["thoughtsTokenCount"]);l!=null&&setValueByPath(e,["thoughtsTokenCount"],l);const d=getValueByPath(t,["totalTokenCount"]);d!=null&&setValueByPath(e,["totalTokenCount"],d);const h=getValueByPath(t,["promptTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(x=>x)),setValueByPath(e,["promptTokensDetails"],y)}const u=getValueByPath(t,["cacheTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(x=>x)),setValueByPath(e,["cacheTokensDetails"],y)}const f=getValueByPath(t,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(x=>x)),setValueByPath(e,["responseTokensDetails"],y)}const p=getValueByPath(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>x)),setValueByPath(e,["toolUsePromptTokensDetails"],y)}const g=getValueByPath(t,["trafficType"]);return g!=null&&setValueByPath(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$1(t){const e={},n=getValueByPath(t,["data"]);if(n!=null&&setValueByPath(e,["data"],n),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function candidateFromMldev(t){const e={},n=getValueByPath(t,["content"]);n!=null&&setValueByPath(e,["content"],n);const r=getValueByPath(t,["citationMetadata"]);r!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev(r));const s=getValueByPath(t,["tokenCount"]);s!=null&&setValueByPath(e,["tokenCount"],s);const a=getValueByPath(t,["finishReason"]);a!=null&&setValueByPath(e,["finishReason"],a);const l=getValueByPath(t,["avgLogprobs"]);l!=null&&setValueByPath(e,["avgLogprobs"],l);const d=getValueByPath(t,["groundingMetadata"]);d!=null&&setValueByPath(e,["groundingMetadata"],d);const h=getValueByPath(t,["index"]);h!=null&&setValueByPath(e,["index"],h);const u=getValueByPath(t,["logprobsResult"]);u!=null&&setValueByPath(e,["logprobsResult"],u);const f=getValueByPath(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),setValueByPath(e,["safetyRatings"],g)}const p=getValueByPath(t,["urlContextMetadata"]);return p!=null&&setValueByPath(e,["urlContextMetadata"],p),e}function citationMetadataFromMldev(t){const e={},n=getValueByPath(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),setValueByPath(e,["citations"],r)}return e}function computeTokensParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let a=tContents(s);Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(n,["contents"],a)}return n}function computeTokensResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),setValueByPath(e,["tokensInfo"],s)}return e}function contentEmbeddingFromVertex(t){const e={},n=getValueByPath(t,["values"]);n!=null&&setValueByPath(e,["values"],n);const r=getValueByPath(t,["statistics"]);return r!=null&&setValueByPath(e,["statistics"],contentEmbeddingStatisticsFromVertex(r)),e}function contentEmbeddingStatisticsFromVertex(t){const e={},n=getValueByPath(t,["truncated"]);n!=null&&setValueByPath(e,["truncated"],n);const r=getValueByPath(t,["token_count"]);return r!=null&&setValueByPath(e,["tokenCount"],r),e}function contentToMldev$1(t){const e={},n=getValueByPath(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>partToMldev$1(a))),setValueByPath(e,["parts"],s)}const r=getValueByPath(t,["role"]);return r!=null&&setValueByPath(e,["role"],r),e}function controlReferenceConfigToVertex(t){const e={},n=getValueByPath(t,["controlType"]);n!=null&&setValueByPath(e,["controlType"],n);const r=getValueByPath(t,["enableControlImageComputation"]);return r!=null&&setValueByPath(e,["computeControl"],r),e}function countTokensConfigToMldev(t){const e={};if(getValueByPath(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(getValueByPath(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(getValueByPath(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function countTokensConfigToVertex(t,e){const n={},r=getValueByPath(t,["systemInstruction"]);e!==void 0&&r!=null&&setValueByPath(e,["systemInstruction"],tContent(r));const s=getValueByPath(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>toolToVertex(d))),setValueByPath(e,["tools"],l)}const a=getValueByPath(t,["generationConfig"]);return e!==void 0&&a!=null&&setValueByPath(e,["generationConfig"],generationConfigToVertex(a)),n}function countTokensParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let l=tContents(s);Array.isArray(l)&&(l=l.map(d=>contentToMldev$1(d))),setValueByPath(n,["contents"],l)}const a=getValueByPath(e,["config"]);return a!=null&&countTokensConfigToMldev(a),n}function countTokensParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let l=tContents(s);Array.isArray(l)&&(l=l.map(d=>d)),setValueByPath(n,["contents"],l)}const a=getValueByPath(e,["config"]);return a!=null&&countTokensConfigToVertex(a,n),n}function countTokensResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["totalTokens"]);r!=null&&setValueByPath(e,["totalTokens"],r);const s=getValueByPath(t,["cachedContentTokenCount"]);return s!=null&&setValueByPath(e,["cachedContentTokenCount"],s),e}function countTokensResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["totalTokens"]);return r!=null&&setValueByPath(e,["totalTokens"],r),e}function deleteModelParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);return r!=null&&setValueByPath(n,["_url","name"],tModel(t,r)),n}function deleteModelParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);return r!=null&&setValueByPath(n,["_url","name"],tModel(t,r)),n}function deleteModelResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);return n!=null&&setValueByPath(e,["sdkHttpResponse"],n),e}function deleteModelResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);return n!=null&&setValueByPath(e,["sdkHttpResponse"],n),e}function editImageConfigToVertex(t,e){const n={},r=getValueByPath(t,["outputGcsUri"]);e!==void 0&&r!=null&&setValueByPath(e,["parameters","storageUri"],r);const s=getValueByPath(t,["negativePrompt"]);e!==void 0&&s!=null&&setValueByPath(e,["parameters","negativePrompt"],s);const a=getValueByPath(t,["numberOfImages"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","sampleCount"],a);const l=getValueByPath(t,["aspectRatio"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","aspectRatio"],l);const d=getValueByPath(t,["guidanceScale"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","guidanceScale"],d);const h=getValueByPath(t,["seed"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","seed"],h);const u=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","safetySetting"],u);const f=getValueByPath(t,["personGeneration"]);e!==void 0&&f!=null&&setValueByPath(e,["parameters","personGeneration"],f);const p=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],p);const g=getValueByPath(t,["includeRaiReason"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","includeRaiReason"],g);const y=getValueByPath(t,["language"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","language"],y);const x=getValueByPath(t,["outputMimeType"]);e!==void 0&&x!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],x);const S=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],S);const w=getValueByPath(t,["addWatermark"]);e!==void 0&&w!=null&&setValueByPath(e,["parameters","addWatermark"],w);const k=getValueByPath(t,["labels"]);e!==void 0&&k!=null&&setValueByPath(e,["labels"],k);const N=getValueByPath(t,["editMode"]);e!==void 0&&N!=null&&setValueByPath(e,["parameters","editMode"],N);const R=getValueByPath(t,["baseSteps"]);return e!==void 0&&R!=null&&setValueByPath(e,["parameters","editConfig","baseSteps"],R),n}function editImageParametersInternalToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["prompt"]);s!=null&&setValueByPath(n,["instances[0]","prompt"],s);const a=getValueByPath(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>referenceImageAPIInternalToVertex(h))),setValueByPath(n,["instances[0]","referenceImages"],d)}const l=getValueByPath(e,["config"]);return l!=null&&editImageConfigToVertex(l,n),n}function editImageResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>generatedImageFromVertex(a))),setValueByPath(e,["generatedImages"],s)}return e}function embedContentConfigToMldev(t,e){const n={},r=getValueByPath(t,["taskType"]);e!==void 0&&r!=null&&setValueByPath(e,["requests[]","taskType"],r);const s=getValueByPath(t,["title"]);e!==void 0&&s!=null&&setValueByPath(e,["requests[]","title"],s);const a=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&setValueByPath(e,["requests[]","outputDimensionality"],a),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function embedContentConfigToVertex(t,e){const n={},r=getValueByPath(t,["taskType"]);e!==void 0&&r!=null&&setValueByPath(e,["instances[]","task_type"],r);const s=getValueByPath(t,["title"]);e!==void 0&&s!=null&&setValueByPath(e,["instances[]","title"],s);const a=getValueByPath(t,["outputDimensionality"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","outputDimensionality"],a);const l=getValueByPath(t,["mimeType"]);e!==void 0&&l!=null&&setValueByPath(e,["instances[]","mimeType"],l);const d=getValueByPath(t,["autoTruncate"]);return e!==void 0&&d!=null&&setValueByPath(e,["parameters","autoTruncate"],d),n}function embedContentParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let d=tContentsForEmbed(t,s);Array.isArray(d)&&(d=d.map(h=>h)),setValueByPath(n,["requests[]","content"],d)}const a=getValueByPath(e,["config"]);a!=null&&embedContentConfigToMldev(a,n);const l=getValueByPath(e,["model"]);return l!==void 0&&setValueByPath(n,["requests[]","model"],tModel(t,l)),n}function embedContentParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let l=tContentsForEmbed(t,s);Array.isArray(l)&&(l=l.map(d=>d)),setValueByPath(n,["instances[]","content"],l)}const a=getValueByPath(e,["config"]);return a!=null&&embedContentConfigToVertex(a,n),n}function embedContentResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["embeddings"],a)}const s=getValueByPath(t,["metadata"]);return s!=null&&setValueByPath(e,["metadata"],s),e}function embedContentResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>contentEmbeddingFromVertex(l))),setValueByPath(e,["embeddings"],a)}const s=getValueByPath(t,["metadata"]);return s!=null&&setValueByPath(e,["metadata"],s),e}function endpointFromVertex(t){const e={},n=getValueByPath(t,["endpoint"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["deployedModelId"]);return r!=null&&setValueByPath(e,["deployedModelId"],r),e}function fileDataToMldev$1(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(t,["fileUri"]);n!=null&&setValueByPath(e,["fileUri"],n);const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function functionDeclarationToVertex(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=getValueByPath(t,["description"]);n!=null&&setValueByPath(e,["description"],n);const r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const s=getValueByPath(t,["parameters"]);s!=null&&setValueByPath(e,["parameters"],s);const a=getValueByPath(t,["parametersJsonSchema"]);a!=null&&setValueByPath(e,["parametersJsonSchema"],a);const l=getValueByPath(t,["response"]);l!=null&&setValueByPath(e,["response"],l);const d=getValueByPath(t,["responseJsonSchema"]);return d!=null&&setValueByPath(e,["responseJsonSchema"],d),e}function generateContentConfigToMldev(t,e,n){const r={},s=getValueByPath(e,["systemInstruction"]);n!==void 0&&s!=null&&setValueByPath(n,["systemInstruction"],contentToMldev$1(tContent(s)));const a=getValueByPath(e,["temperature"]);a!=null&&setValueByPath(r,["temperature"],a);const l=getValueByPath(e,["topP"]);l!=null&&setValueByPath(r,["topP"],l);const d=getValueByPath(e,["topK"]);d!=null&&setValueByPath(r,["topK"],d);const h=getValueByPath(e,["candidateCount"]);h!=null&&setValueByPath(r,["candidateCount"],h);const u=getValueByPath(e,["maxOutputTokens"]);u!=null&&setValueByPath(r,["maxOutputTokens"],u);const f=getValueByPath(e,["stopSequences"]);f!=null&&setValueByPath(r,["stopSequences"],f);const p=getValueByPath(e,["responseLogprobs"]);p!=null&&setValueByPath(r,["responseLogprobs"],p);const g=getValueByPath(e,["logprobs"]);g!=null&&setValueByPath(r,["logprobs"],g);const y=getValueByPath(e,["presencePenalty"]);y!=null&&setValueByPath(r,["presencePenalty"],y);const x=getValueByPath(e,["frequencyPenalty"]);x!=null&&setValueByPath(r,["frequencyPenalty"],x);const S=getValueByPath(e,["seed"]);S!=null&&setValueByPath(r,["seed"],S);const w=getValueByPath(e,["responseMimeType"]);w!=null&&setValueByPath(r,["responseMimeType"],w);const k=getValueByPath(e,["responseSchema"]);k!=null&&setValueByPath(r,["responseSchema"],tSchema(k));const N=getValueByPath(e,["responseJsonSchema"]);if(N!=null&&setValueByPath(r,["responseJsonSchema"],N),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=getValueByPath(e,["safetySettings"]);if(n!==void 0&&R!=null){let j=R;Array.isArray(j)&&(j=j.map(ee=>safetySettingToMldev(ee))),setValueByPath(n,["safetySettings"],j)}const B=getValueByPath(e,["tools"]);if(n!==void 0&&B!=null){let j=tTools(B);Array.isArray(j)&&(j=j.map(ee=>toolToMldev$1(tTool(ee)))),setValueByPath(n,["tools"],j)}const q=getValueByPath(e,["toolConfig"]);if(n!==void 0&&q!=null&&setValueByPath(n,["toolConfig"],q),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=getValueByPath(e,["cachedContent"]);n!==void 0&&F!=null&&setValueByPath(n,["cachedContent"],tCachedContentName(t,F));const z=getValueByPath(e,["responseModalities"]);z!=null&&setValueByPath(r,["responseModalities"],z);const V=getValueByPath(e,["mediaResolution"]);V!=null&&setValueByPath(r,["mediaResolution"],V);const b=getValueByPath(e,["speechConfig"]);if(b!=null&&setValueByPath(r,["speechConfig"],tSpeechConfig(b)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=getValueByPath(e,["thinkingConfig"]);U!=null&&setValueByPath(r,["thinkingConfig"],U);const H=getValueByPath(e,["imageConfig"]);return H!=null&&setValueByPath(r,["imageConfig"],H),r}function generateContentConfigToVertex(t,e,n){const r={},s=getValueByPath(e,["systemInstruction"]);n!==void 0&&s!=null&&setValueByPath(n,["systemInstruction"],tContent(s));const a=getValueByPath(e,["temperature"]);a!=null&&setValueByPath(r,["temperature"],a);const l=getValueByPath(e,["topP"]);l!=null&&setValueByPath(r,["topP"],l);const d=getValueByPath(e,["topK"]);d!=null&&setValueByPath(r,["topK"],d);const h=getValueByPath(e,["candidateCount"]);h!=null&&setValueByPath(r,["candidateCount"],h);const u=getValueByPath(e,["maxOutputTokens"]);u!=null&&setValueByPath(r,["maxOutputTokens"],u);const f=getValueByPath(e,["stopSequences"]);f!=null&&setValueByPath(r,["stopSequences"],f);const p=getValueByPath(e,["responseLogprobs"]);p!=null&&setValueByPath(r,["responseLogprobs"],p);const g=getValueByPath(e,["logprobs"]);g!=null&&setValueByPath(r,["logprobs"],g);const y=getValueByPath(e,["presencePenalty"]);y!=null&&setValueByPath(r,["presencePenalty"],y);const x=getValueByPath(e,["frequencyPenalty"]);x!=null&&setValueByPath(r,["frequencyPenalty"],x);const S=getValueByPath(e,["seed"]);S!=null&&setValueByPath(r,["seed"],S);const w=getValueByPath(e,["responseMimeType"]);w!=null&&setValueByPath(r,["responseMimeType"],w);const k=getValueByPath(e,["responseSchema"]);k!=null&&setValueByPath(r,["responseSchema"],tSchema(k));const N=getValueByPath(e,["responseJsonSchema"]);N!=null&&setValueByPath(r,["responseJsonSchema"],N);const R=getValueByPath(e,["routingConfig"]);R!=null&&setValueByPath(r,["routingConfig"],R);const B=getValueByPath(e,["modelSelectionConfig"]);B!=null&&setValueByPath(r,["modelConfig"],B);const q=getValueByPath(e,["safetySettings"]);if(n!==void 0&&q!=null){let Q=q;Array.isArray(Q)&&(Q=Q.map(Z=>Z)),setValueByPath(n,["safetySettings"],Q)}const F=getValueByPath(e,["tools"]);if(n!==void 0&&F!=null){let Q=tTools(F);Array.isArray(Q)&&(Q=Q.map(Z=>toolToVertex(tTool(Z)))),setValueByPath(n,["tools"],Q)}const z=getValueByPath(e,["toolConfig"]);n!==void 0&&z!=null&&setValueByPath(n,["toolConfig"],z);const V=getValueByPath(e,["labels"]);n!==void 0&&V!=null&&setValueByPath(n,["labels"],V);const b=getValueByPath(e,["cachedContent"]);n!==void 0&&b!=null&&setValueByPath(n,["cachedContent"],tCachedContentName(t,b));const U=getValueByPath(e,["responseModalities"]);U!=null&&setValueByPath(r,["responseModalities"],U);const H=getValueByPath(e,["mediaResolution"]);H!=null&&setValueByPath(r,["mediaResolution"],H);const j=getValueByPath(e,["speechConfig"]);j!=null&&setValueByPath(r,["speechConfig"],speechConfigToVertex(tSpeechConfig(j)));const ee=getValueByPath(e,["audioTimestamp"]);ee!=null&&setValueByPath(r,["audioTimestamp"],ee);const $=getValueByPath(e,["thinkingConfig"]);$!=null&&setValueByPath(r,["thinkingConfig"],$);const J=getValueByPath(e,["imageConfig"]);return J!=null&&setValueByPath(r,["imageConfig"],J),r}function generateContentParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let l=tContents(s);Array.isArray(l)&&(l=l.map(d=>contentToMldev$1(d))),setValueByPath(n,["contents"],l)}const a=getValueByPath(e,["config"]);return a!=null&&setValueByPath(n,["generationConfig"],generateContentConfigToMldev(t,a,n)),n}function generateContentParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["contents"]);if(s!=null){let l=tContents(s);Array.isArray(l)&&(l=l.map(d=>d)),setValueByPath(n,["contents"],l)}const a=getValueByPath(e,["config"]);return a!=null&&setValueByPath(n,["generationConfig"],generateContentConfigToVertex(t,a,n)),n}function generateContentResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(u=>candidateFromMldev(u))),setValueByPath(e,["candidates"],h)}const s=getValueByPath(t,["modelVersion"]);s!=null&&setValueByPath(e,["modelVersion"],s);const a=getValueByPath(t,["promptFeedback"]);a!=null&&setValueByPath(e,["promptFeedback"],a);const l=getValueByPath(t,["responseId"]);l!=null&&setValueByPath(e,["responseId"],l);const d=getValueByPath(t,["usageMetadata"]);return d!=null&&setValueByPath(e,["usageMetadata"],d),e}function generateContentResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),setValueByPath(e,["candidates"],u)}const s=getValueByPath(t,["createTime"]);s!=null&&setValueByPath(e,["createTime"],s);const a=getValueByPath(t,["modelVersion"]);a!=null&&setValueByPath(e,["modelVersion"],a);const l=getValueByPath(t,["promptFeedback"]);l!=null&&setValueByPath(e,["promptFeedback"],l);const d=getValueByPath(t,["responseId"]);d!=null&&setValueByPath(e,["responseId"],d);const h=getValueByPath(t,["usageMetadata"]);return h!=null&&setValueByPath(e,["usageMetadata"],h),e}function generateImagesConfigToMldev(t,e){const n={};if(getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=getValueByPath(t,["numberOfImages"]);e!==void 0&&r!=null&&setValueByPath(e,["parameters","sampleCount"],r);const s=getValueByPath(t,["aspectRatio"]);e!==void 0&&s!=null&&setValueByPath(e,["parameters","aspectRatio"],s);const a=getValueByPath(t,["guidanceScale"]);if(e!==void 0&&a!=null&&setValueByPath(e,["parameters","guidanceScale"],a),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","safetySetting"],l);const d=getValueByPath(t,["personGeneration"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","personGeneration"],d);const h=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],h);const u=getValueByPath(t,["includeRaiReason"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","includeRaiReason"],u);const f=getValueByPath(t,["language"]);e!==void 0&&f!=null&&setValueByPath(e,["parameters","language"],f);const p=getValueByPath(t,["outputMimeType"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],p);const g=getValueByPath(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],g),getValueByPath(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=getValueByPath(t,["imageSize"]);if(e!==void 0&&y!=null&&setValueByPath(e,["parameters","sampleImageSize"],y),getValueByPath(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function generateImagesConfigToVertex(t,e){const n={},r=getValueByPath(t,["outputGcsUri"]);e!==void 0&&r!=null&&setValueByPath(e,["parameters","storageUri"],r);const s=getValueByPath(t,["negativePrompt"]);e!==void 0&&s!=null&&setValueByPath(e,["parameters","negativePrompt"],s);const a=getValueByPath(t,["numberOfImages"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","sampleCount"],a);const l=getValueByPath(t,["aspectRatio"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","aspectRatio"],l);const d=getValueByPath(t,["guidanceScale"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","guidanceScale"],d);const h=getValueByPath(t,["seed"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","seed"],h);const u=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","safetySetting"],u);const f=getValueByPath(t,["personGeneration"]);e!==void 0&&f!=null&&setValueByPath(e,["parameters","personGeneration"],f);const p=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],p);const g=getValueByPath(t,["includeRaiReason"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","includeRaiReason"],g);const y=getValueByPath(t,["language"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","language"],y);const x=getValueByPath(t,["outputMimeType"]);e!==void 0&&x!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],x);const S=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],S);const w=getValueByPath(t,["addWatermark"]);e!==void 0&&w!=null&&setValueByPath(e,["parameters","addWatermark"],w);const k=getValueByPath(t,["labels"]);e!==void 0&&k!=null&&setValueByPath(e,["labels"],k);const N=getValueByPath(t,["imageSize"]);e!==void 0&&N!=null&&setValueByPath(e,["parameters","sampleImageSize"],N);const R=getValueByPath(t,["enhancePrompt"]);return e!==void 0&&R!=null&&setValueByPath(e,["parameters","enhancePrompt"],R),n}function generateImagesParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["prompt"]);s!=null&&setValueByPath(n,["instances[0]","prompt"],s);const a=getValueByPath(e,["config"]);return a!=null&&generateImagesConfigToMldev(a,n),n}function generateImagesParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["prompt"]);s!=null&&setValueByPath(n,["instances[0]","prompt"],s);const a=getValueByPath(e,["config"]);return a!=null&&generateImagesConfigToVertex(a,n),n}function generateImagesResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>generatedImageFromMldev(l))),setValueByPath(e,["generatedImages"],a)}const s=getValueByPath(t,["positivePromptSafetyAttributes"]);return s!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromMldev(s)),e}function generateImagesResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>generatedImageFromVertex(l))),setValueByPath(e,["generatedImages"],a)}const s=getValueByPath(t,["positivePromptSafetyAttributes"]);return s!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromVertex(s)),e}function generateVideosConfigToMldev(t,e){const n={},r=getValueByPath(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&setValueByPath(e,["parameters","sampleCount"],r),getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=getValueByPath(t,["durationSeconds"]);if(e!==void 0&&s!=null&&setValueByPath(e,["parameters","durationSeconds"],s),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=getValueByPath(t,["aspectRatio"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","aspectRatio"],a);const l=getValueByPath(t,["resolution"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","resolution"],l);const d=getValueByPath(t,["personGeneration"]);if(e!==void 0&&d!=null&&setValueByPath(e,["parameters","personGeneration"],d),getValueByPath(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=getValueByPath(t,["negativePrompt"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","negativePrompt"],h);const u=getValueByPath(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&setValueByPath(e,["parameters","enhancePrompt"],u),getValueByPath(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=getValueByPath(t,["lastFrame"]);e!==void 0&&f!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToMldev(f));const p=getValueByPath(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>videoGenerationReferenceImageToMldev(y))),setValueByPath(e,["instances[0]","referenceImages"],g)}if(getValueByPath(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(getValueByPath(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function generateVideosConfigToVertex(t,e){const n={},r=getValueByPath(t,["numberOfVideos"]);e!==void 0&&r!=null&&setValueByPath(e,["parameters","sampleCount"],r);const s=getValueByPath(t,["outputGcsUri"]);e!==void 0&&s!=null&&setValueByPath(e,["parameters","storageUri"],s);const a=getValueByPath(t,["fps"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","fps"],a);const l=getValueByPath(t,["durationSeconds"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","durationSeconds"],l);const d=getValueByPath(t,["seed"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","seed"],d);const h=getValueByPath(t,["aspectRatio"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","aspectRatio"],h);const u=getValueByPath(t,["resolution"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","resolution"],u);const f=getValueByPath(t,["personGeneration"]);e!==void 0&&f!=null&&setValueByPath(e,["parameters","personGeneration"],f);const p=getValueByPath(t,["pubsubTopic"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","pubsubTopic"],p);const g=getValueByPath(t,["negativePrompt"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","negativePrompt"],g);const y=getValueByPath(t,["enhancePrompt"]);e!==void 0&&y!=null&&setValueByPath(e,["parameters","enhancePrompt"],y);const x=getValueByPath(t,["generateAudio"]);e!==void 0&&x!=null&&setValueByPath(e,["parameters","generateAudio"],x);const S=getValueByPath(t,["lastFrame"]);e!==void 0&&S!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToVertex(S));const w=getValueByPath(t,["referenceImages"]);if(e!==void 0&&w!=null){let R=w;Array.isArray(R)&&(R=R.map(B=>videoGenerationReferenceImageToVertex(B))),setValueByPath(e,["instances[0]","referenceImages"],R)}const k=getValueByPath(t,["mask"]);e!==void 0&&k!=null&&setValueByPath(e,["instances[0]","mask"],videoGenerationMaskToVertex(k));const N=getValueByPath(t,["compressionQuality"]);return e!==void 0&&N!=null&&setValueByPath(e,["parameters","compressionQuality"],N),n}function generateVideosOperationFromMldev(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata"]);r!=null&&setValueByPath(e,["metadata"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["response","generateVideoResponse"]);return l!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev(l)),e}function generateVideosOperationFromVertex(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata"]);r!=null&&setValueByPath(e,["metadata"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["response"]);return l!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex(l)),e}function generateVideosParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["prompt"]);s!=null&&setValueByPath(n,["instances[0]","prompt"],s);const a=getValueByPath(e,["image"]);a!=null&&setValueByPath(n,["instances[0]","image"],imageToMldev(a));const l=getValueByPath(e,["video"]);l!=null&&setValueByPath(n,["instances[0]","video"],videoToMldev(l));const d=getValueByPath(e,["source"]);d!=null&&generateVideosSourceToMldev(d,n);const h=getValueByPath(e,["config"]);return h!=null&&generateVideosConfigToMldev(h,n),n}function generateVideosParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["prompt"]);s!=null&&setValueByPath(n,["instances[0]","prompt"],s);const a=getValueByPath(e,["image"]);a!=null&&setValueByPath(n,["instances[0]","image"],imageToVertex(a));const l=getValueByPath(e,["video"]);l!=null&&setValueByPath(n,["instances[0]","video"],videoToVertex(l));const d=getValueByPath(e,["source"]);d!=null&&generateVideosSourceToVertex(d,n);const h=getValueByPath(e,["config"]);return h!=null&&generateVideosConfigToVertex(h,n),n}function generateVideosResponseFromMldev(t){const e={},n=getValueByPath(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>generatedVideoFromMldev(l))),setValueByPath(e,["generatedVideos"],a)}const r=getValueByPath(t,["raiMediaFilteredCount"]);r!=null&&setValueByPath(e,["raiMediaFilteredCount"],r);const s=getValueByPath(t,["raiMediaFilteredReasons"]);return s!=null&&setValueByPath(e,["raiMediaFilteredReasons"],s),e}function generateVideosResponseFromVertex(t){const e={},n=getValueByPath(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>generatedVideoFromVertex(l))),setValueByPath(e,["generatedVideos"],a)}const r=getValueByPath(t,["raiMediaFilteredCount"]);r!=null&&setValueByPath(e,["raiMediaFilteredCount"],r);const s=getValueByPath(t,["raiMediaFilteredReasons"]);return s!=null&&setValueByPath(e,["raiMediaFilteredReasons"],s),e}function generateVideosSourceToMldev(t,e){const n={},r=getValueByPath(t,["prompt"]);e!==void 0&&r!=null&&setValueByPath(e,["instances[0]","prompt"],r);const s=getValueByPath(t,["image"]);e!==void 0&&s!=null&&setValueByPath(e,["instances[0]","image"],imageToMldev(s));const a=getValueByPath(t,["video"]);return e!==void 0&&a!=null&&setValueByPath(e,["instances[0]","video"],videoToMldev(a)),n}function generateVideosSourceToVertex(t,e){const n={},r=getValueByPath(t,["prompt"]);e!==void 0&&r!=null&&setValueByPath(e,["instances[0]","prompt"],r);const s=getValueByPath(t,["image"]);e!==void 0&&s!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(s));const a=getValueByPath(t,["video"]);return e!==void 0&&a!=null&&setValueByPath(e,["instances[0]","video"],videoToVertex(a)),n}function generatedImageFromMldev(t){const e={},n=getValueByPath(t,["_self"]);n!=null&&setValueByPath(e,["image"],imageFromMldev(n));const r=getValueByPath(t,["raiFilteredReason"]);r!=null&&setValueByPath(e,["raiFilteredReason"],r);const s=getValueByPath(t,["_self"]);return s!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromMldev(s)),e}function generatedImageFromVertex(t){const e={},n=getValueByPath(t,["_self"]);n!=null&&setValueByPath(e,["image"],imageFromVertex(n));const r=getValueByPath(t,["raiFilteredReason"]);r!=null&&setValueByPath(e,["raiFilteredReason"],r);const s=getValueByPath(t,["_self"]);s!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromVertex(s));const a=getValueByPath(t,["prompt"]);return a!=null&&setValueByPath(e,["enhancedPrompt"],a),e}function generatedImageMaskFromVertex(t){const e={},n=getValueByPath(t,["_self"]);n!=null&&setValueByPath(e,["mask"],imageFromVertex(n));const r=getValueByPath(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),setValueByPath(e,["labels"],s)}return e}function generatedVideoFromMldev(t){const e={},n=getValueByPath(t,["video"]);return n!=null&&setValueByPath(e,["video"],videoFromMldev(n)),e}function generatedVideoFromVertex(t){const e={},n=getValueByPath(t,["_self"]);return n!=null&&setValueByPath(e,["video"],videoFromVertex(n)),e}function generationConfigToVertex(t){const e={},n=getValueByPath(t,["modelSelectionConfig"]);n!=null&&setValueByPath(e,["modelConfig"],n);const r=getValueByPath(t,["responseJsonSchema"]);r!=null&&setValueByPath(e,["responseJsonSchema"],r);const s=getValueByPath(t,["audioTimestamp"]);s!=null&&setValueByPath(e,["audioTimestamp"],s);const a=getValueByPath(t,["candidateCount"]);a!=null&&setValueByPath(e,["candidateCount"],a);const l=getValueByPath(t,["enableAffectiveDialog"]);l!=null&&setValueByPath(e,["enableAffectiveDialog"],l);const d=getValueByPath(t,["frequencyPenalty"]);d!=null&&setValueByPath(e,["frequencyPenalty"],d);const h=getValueByPath(t,["logprobs"]);h!=null&&setValueByPath(e,["logprobs"],h);const u=getValueByPath(t,["maxOutputTokens"]);u!=null&&setValueByPath(e,["maxOutputTokens"],u);const f=getValueByPath(t,["mediaResolution"]);f!=null&&setValueByPath(e,["mediaResolution"],f);const p=getValueByPath(t,["presencePenalty"]);p!=null&&setValueByPath(e,["presencePenalty"],p);const g=getValueByPath(t,["responseLogprobs"]);g!=null&&setValueByPath(e,["responseLogprobs"],g);const y=getValueByPath(t,["responseMimeType"]);y!=null&&setValueByPath(e,["responseMimeType"],y);const x=getValueByPath(t,["responseModalities"]);x!=null&&setValueByPath(e,["responseModalities"],x);const S=getValueByPath(t,["responseSchema"]);S!=null&&setValueByPath(e,["responseSchema"],S);const w=getValueByPath(t,["routingConfig"]);w!=null&&setValueByPath(e,["routingConfig"],w);const k=getValueByPath(t,["seed"]);k!=null&&setValueByPath(e,["seed"],k);const N=getValueByPath(t,["speechConfig"]);N!=null&&setValueByPath(e,["speechConfig"],speechConfigToVertex(N));const R=getValueByPath(t,["stopSequences"]);R!=null&&setValueByPath(e,["stopSequences"],R);const B=getValueByPath(t,["temperature"]);B!=null&&setValueByPath(e,["temperature"],B);const q=getValueByPath(t,["thinkingConfig"]);q!=null&&setValueByPath(e,["thinkingConfig"],q);const F=getValueByPath(t,["topK"]);F!=null&&setValueByPath(e,["topK"],F);const z=getValueByPath(t,["topP"]);if(z!=null&&setValueByPath(e,["topP"],z),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function getModelParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);return r!=null&&setValueByPath(n,["_url","name"],tModel(t,r)),n}function getModelParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);return r!=null&&setValueByPath(n,["_url","name"],tModel(t,r)),n}function googleMapsToMldev$1(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(t,["enableWidget"]);return n!=null&&setValueByPath(e,["enableWidget"],n),e}function googleSearchToMldev$1(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(t,["timeRangeFilter"]);return n!=null&&setValueByPath(e,["timeRangeFilter"],n),e}function imageFromMldev(t){const e={},n=getValueByPath(t,["bytesBase64Encoded"]);n!=null&&setValueByPath(e,["imageBytes"],tBytes(n));const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function imageFromVertex(t){const e={},n=getValueByPath(t,["gcsUri"]);n!=null&&setValueByPath(e,["gcsUri"],n);const r=getValueByPath(t,["bytesBase64Encoded"]);r!=null&&setValueByPath(e,["imageBytes"],tBytes(r));const s=getValueByPath(t,["mimeType"]);return s!=null&&setValueByPath(e,["mimeType"],s),e}function imageToMldev(t){const e={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=getValueByPath(t,["imageBytes"]);n!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(n));const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function imageToVertex(t){const e={},n=getValueByPath(t,["gcsUri"]);n!=null&&setValueByPath(e,["gcsUri"],n);const r=getValueByPath(t,["imageBytes"]);r!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(r));const s=getValueByPath(t,["mimeType"]);return s!=null&&setValueByPath(e,["mimeType"],s),e}function listModelsConfigToMldev(t,e,n){const r={},s=getValueByPath(e,["pageSize"]);n!==void 0&&s!=null&&setValueByPath(n,["_query","pageSize"],s);const a=getValueByPath(e,["pageToken"]);n!==void 0&&a!=null&&setValueByPath(n,["_query","pageToken"],a);const l=getValueByPath(e,["filter"]);n!==void 0&&l!=null&&setValueByPath(n,["_query","filter"],l);const d=getValueByPath(e,["queryBase"]);return n!==void 0&&d!=null&&setValueByPath(n,["_url","models_url"],tModelsUrl(t,d)),r}function listModelsConfigToVertex(t,e,n){const r={},s=getValueByPath(e,["pageSize"]);n!==void 0&&s!=null&&setValueByPath(n,["_query","pageSize"],s);const a=getValueByPath(e,["pageToken"]);n!==void 0&&a!=null&&setValueByPath(n,["_query","pageToken"],a);const l=getValueByPath(e,["filter"]);n!==void 0&&l!=null&&setValueByPath(n,["_query","filter"],l);const d=getValueByPath(e,["queryBase"]);return n!==void 0&&d!=null&&setValueByPath(n,["_url","models_url"],tModelsUrl(t,d)),r}function listModelsParametersToMldev(t,e){const n={},r=getValueByPath(e,["config"]);return r!=null&&listModelsConfigToMldev(t,r,n),n}function listModelsParametersToVertex(t,e){const n={},r=getValueByPath(e,["config"]);return r!=null&&listModelsConfigToVertex(t,r,n),n}function listModelsResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["_self"]);if(s!=null){let a=tExtractModels(s);Array.isArray(a)&&(a=a.map(l=>modelFromMldev(l))),setValueByPath(e,["models"],a)}return e}function listModelsResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["_self"]);if(s!=null){let a=tExtractModels(s);Array.isArray(a)&&(a=a.map(l=>modelFromVertex(l))),setValueByPath(e,["models"],a)}return e}function maskReferenceConfigToVertex(t){const e={},n=getValueByPath(t,["maskMode"]);n!=null&&setValueByPath(e,["maskMode"],n);const r=getValueByPath(t,["segmentationClasses"]);r!=null&&setValueByPath(e,["maskClasses"],r);const s=getValueByPath(t,["maskDilation"]);return s!=null&&setValueByPath(e,["dilation"],s),e}function modelFromMldev(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["displayName"]);r!=null&&setValueByPath(e,["displayName"],r);const s=getValueByPath(t,["description"]);s!=null&&setValueByPath(e,["description"],s);const a=getValueByPath(t,["version"]);a!=null&&setValueByPath(e,["version"],a);const l=getValueByPath(t,["_self"]);l!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromMldev(l));const d=getValueByPath(t,["inputTokenLimit"]);d!=null&&setValueByPath(e,["inputTokenLimit"],d);const h=getValueByPath(t,["outputTokenLimit"]);h!=null&&setValueByPath(e,["outputTokenLimit"],h);const u=getValueByPath(t,["supportedGenerationMethods"]);return u!=null&&setValueByPath(e,["supportedActions"],u),e}function modelFromVertex(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["displayName"]);r!=null&&setValueByPath(e,["displayName"],r);const s=getValueByPath(t,["description"]);s!=null&&setValueByPath(e,["description"],s);const a=getValueByPath(t,["versionId"]);a!=null&&setValueByPath(e,["version"],a);const l=getValueByPath(t,["deployedModels"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(g=>endpointFromVertex(g))),setValueByPath(e,["endpoints"],p)}const d=getValueByPath(t,["labels"]);d!=null&&setValueByPath(e,["labels"],d);const h=getValueByPath(t,["_self"]);h!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromVertex(h));const u=getValueByPath(t,["defaultCheckpointId"]);u!=null&&setValueByPath(e,["defaultCheckpointId"],u);const f=getValueByPath(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),setValueByPath(e,["checkpoints"],p)}return e}function partToMldev$1(t){const e={},n=getValueByPath(t,["functionCall"]);n!=null&&setValueByPath(e,["functionCall"],n);const r=getValueByPath(t,["codeExecutionResult"]);r!=null&&setValueByPath(e,["codeExecutionResult"],r);const s=getValueByPath(t,["executableCode"]);s!=null&&setValueByPath(e,["executableCode"],s);const a=getValueByPath(t,["fileData"]);a!=null&&setValueByPath(e,["fileData"],fileDataToMldev$1(a));const l=getValueByPath(t,["functionResponse"]);l!=null&&setValueByPath(e,["functionResponse"],l);const d=getValueByPath(t,["inlineData"]);d!=null&&setValueByPath(e,["inlineData"],blobToMldev$1(d));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const f=getValueByPath(t,["thoughtSignature"]);f!=null&&setValueByPath(e,["thoughtSignature"],f);const p=getValueByPath(t,["videoMetadata"]);return p!=null&&setValueByPath(e,["videoMetadata"],p),e}function productImageToVertex(t){const e={},n=getValueByPath(t,["productImage"]);return n!=null&&setValueByPath(e,["image"],imageToVertex(n)),e}function recontextImageConfigToVertex(t,e){const n={},r=getValueByPath(t,["numberOfImages"]);e!==void 0&&r!=null&&setValueByPath(e,["parameters","sampleCount"],r);const s=getValueByPath(t,["baseSteps"]);e!==void 0&&s!=null&&setValueByPath(e,["parameters","editConfig","baseSteps"],s);const a=getValueByPath(t,["outputGcsUri"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","storageUri"],a);const l=getValueByPath(t,["seed"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","seed"],l);const d=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","safetySetting"],d);const h=getValueByPath(t,["personGeneration"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","personGeneration"],h);const u=getValueByPath(t,["addWatermark"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","addWatermark"],u);const f=getValueByPath(t,["outputMimeType"]);e!==void 0&&f!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],f);const p=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],p);const g=getValueByPath(t,["enhancePrompt"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","enhancePrompt"],g);const y=getValueByPath(t,["labels"]);return e!==void 0&&y!=null&&setValueByPath(e,["labels"],y),n}function recontextImageParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["source"]);s!=null&&recontextImageSourceToVertex(s,n);const a=getValueByPath(e,["config"]);return a!=null&&recontextImageConfigToVertex(a,n),n}function recontextImageResponseFromVertex(t){const e={},n=getValueByPath(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>generatedImageFromVertex(s))),setValueByPath(e,["generatedImages"],r)}return e}function recontextImageSourceToVertex(t,e){const n={},r=getValueByPath(t,["prompt"]);e!==void 0&&r!=null&&setValueByPath(e,["instances[0]","prompt"],r);const s=getValueByPath(t,["personImage"]);e!==void 0&&s!=null&&setValueByPath(e,["instances[0]","personImage","image"],imageToVertex(s));const a=getValueByPath(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>productImageToVertex(d))),setValueByPath(e,["instances[0]","productImages"],l)}return n}function referenceImageAPIInternalToVertex(t){const e={},n=getValueByPath(t,["referenceImage"]);n!=null&&setValueByPath(e,["referenceImage"],imageToVertex(n));const r=getValueByPath(t,["referenceId"]);r!=null&&setValueByPath(e,["referenceId"],r);const s=getValueByPath(t,["referenceType"]);s!=null&&setValueByPath(e,["referenceType"],s);const a=getValueByPath(t,["maskImageConfig"]);a!=null&&setValueByPath(e,["maskImageConfig"],maskReferenceConfigToVertex(a));const l=getValueByPath(t,["controlImageConfig"]);l!=null&&setValueByPath(e,["controlImageConfig"],controlReferenceConfigToVertex(l));const d=getValueByPath(t,["styleImageConfig"]);d!=null&&setValueByPath(e,["styleImageConfig"],d);const h=getValueByPath(t,["subjectImageConfig"]);return h!=null&&setValueByPath(e,["subjectImageConfig"],h),e}function safetyAttributesFromMldev(t){const e={},n=getValueByPath(t,["safetyAttributes","categories"]);n!=null&&setValueByPath(e,["categories"],n);const r=getValueByPath(t,["safetyAttributes","scores"]);r!=null&&setValueByPath(e,["scores"],r);const s=getValueByPath(t,["contentType"]);return s!=null&&setValueByPath(e,["contentType"],s),e}function safetyAttributesFromVertex(t){const e={},n=getValueByPath(t,["safetyAttributes","categories"]);n!=null&&setValueByPath(e,["categories"],n);const r=getValueByPath(t,["safetyAttributes","scores"]);r!=null&&setValueByPath(e,["scores"],r);const s=getValueByPath(t,["contentType"]);return s!=null&&setValueByPath(e,["contentType"],s),e}function safetySettingToMldev(t){const e={},n=getValueByPath(t,["category"]);if(n!=null&&setValueByPath(e,["category"],n),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=getValueByPath(t,["threshold"]);return r!=null&&setValueByPath(e,["threshold"],r),e}function scribbleImageToVertex(t){const e={},n=getValueByPath(t,["image"]);return n!=null&&setValueByPath(e,["image"],imageToVertex(n)),e}function segmentImageConfigToVertex(t,e){const n={},r=getValueByPath(t,["mode"]);e!==void 0&&r!=null&&setValueByPath(e,["parameters","mode"],r);const s=getValueByPath(t,["maxPredictions"]);e!==void 0&&s!=null&&setValueByPath(e,["parameters","maxPredictions"],s);const a=getValueByPath(t,["confidenceThreshold"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","confidenceThreshold"],a);const l=getValueByPath(t,["maskDilation"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","maskDilation"],l);const d=getValueByPath(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","binaryColorThreshold"],d);const h=getValueByPath(t,["labels"]);return e!==void 0&&h!=null&&setValueByPath(e,["labels"],h),n}function segmentImageParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["source"]);s!=null&&segmentImageSourceToVertex(s,n);const a=getValueByPath(e,["config"]);return a!=null&&segmentImageConfigToVertex(a,n),n}function segmentImageResponseFromVertex(t){const e={},n=getValueByPath(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>generatedImageMaskFromVertex(s))),setValueByPath(e,["generatedMasks"],r)}return e}function segmentImageSourceToVertex(t,e){const n={},r=getValueByPath(t,["prompt"]);e!==void 0&&r!=null&&setValueByPath(e,["instances[0]","prompt"],r);const s=getValueByPath(t,["image"]);e!==void 0&&s!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(s));const a=getValueByPath(t,["scribbleImage"]);return e!==void 0&&a!=null&&setValueByPath(e,["instances[0]","scribble"],scribbleImageToVertex(a)),n}function speechConfigToVertex(t){const e={},n=getValueByPath(t,["languageCode"]);n!=null&&setValueByPath(e,["languageCode"],n);const r=getValueByPath(t,["voiceConfig"]);if(r!=null&&setValueByPath(e,["voiceConfig"],r),getValueByPath(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function toolToMldev$1(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),setValueByPath(e,["functionDeclarations"],f)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=getValueByPath(t,["googleSearchRetrieval"]);r!=null&&setValueByPath(e,["googleSearchRetrieval"],r);const s=getValueByPath(t,["computerUse"]);s!=null&&setValueByPath(e,["computerUse"],s);const a=getValueByPath(t,["fileSearch"]);a!=null&&setValueByPath(e,["fileSearch"],a);const l=getValueByPath(t,["codeExecution"]);if(l!=null&&setValueByPath(e,["codeExecution"],l),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=getValueByPath(t,["googleMaps"]);d!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$1(d));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$1(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}function toolToVertex(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>functionDeclarationToVertex(g))),setValueByPath(e,["functionDeclarations"],p)}const r=getValueByPath(t,["retrieval"]);r!=null&&setValueByPath(e,["retrieval"],r);const s=getValueByPath(t,["googleSearchRetrieval"]);s!=null&&setValueByPath(e,["googleSearchRetrieval"],s);const a=getValueByPath(t,["computerUse"]);if(a!=null&&setValueByPath(e,["computerUse"],a),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=getValueByPath(t,["codeExecution"]);l!=null&&setValueByPath(e,["codeExecution"],l);const d=getValueByPath(t,["enterpriseWebSearch"]);d!=null&&setValueByPath(e,["enterpriseWebSearch"],d);const h=getValueByPath(t,["googleMaps"]);h!=null&&setValueByPath(e,["googleMaps"],h);const u=getValueByPath(t,["googleSearch"]);u!=null&&setValueByPath(e,["googleSearch"],u);const f=getValueByPath(t,["urlContext"]);return f!=null&&setValueByPath(e,["urlContext"],f),e}function tunedModelInfoFromMldev(t){const e={},n=getValueByPath(t,["baseModel"]);n!=null&&setValueByPath(e,["baseModel"],n);const r=getValueByPath(t,["createTime"]);r!=null&&setValueByPath(e,["createTime"],r);const s=getValueByPath(t,["updateTime"]);return s!=null&&setValueByPath(e,["updateTime"],s),e}function tunedModelInfoFromVertex(t){const e={},n=getValueByPath(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&setValueByPath(e,["baseModel"],n);const r=getValueByPath(t,["createTime"]);r!=null&&setValueByPath(e,["createTime"],r);const s=getValueByPath(t,["updateTime"]);return s!=null&&setValueByPath(e,["updateTime"],s),e}function updateModelConfigToMldev(t,e){const n={},r=getValueByPath(t,["displayName"]);e!==void 0&&r!=null&&setValueByPath(e,["displayName"],r);const s=getValueByPath(t,["description"]);e!==void 0&&s!=null&&setValueByPath(e,["description"],s);const a=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&setValueByPath(e,["defaultCheckpointId"],a),n}function updateModelConfigToVertex(t,e){const n={},r=getValueByPath(t,["displayName"]);e!==void 0&&r!=null&&setValueByPath(e,["displayName"],r);const s=getValueByPath(t,["description"]);e!==void 0&&s!=null&&setValueByPath(e,["description"],s);const a=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&setValueByPath(e,["defaultCheckpointId"],a),n}function updateModelParametersToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","name"],tModel(t,r));const s=getValueByPath(e,["config"]);return s!=null&&updateModelConfigToMldev(s,n),n}function updateModelParametersToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["config"]);return s!=null&&updateModelConfigToVertex(s,n),n}function upscaleImageAPIConfigInternalToVertex(t,e){const n={},r=getValueByPath(t,["outputGcsUri"]);e!==void 0&&r!=null&&setValueByPath(e,["parameters","storageUri"],r);const s=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&setValueByPath(e,["parameters","safetySetting"],s);const a=getValueByPath(t,["personGeneration"]);e!==void 0&&a!=null&&setValueByPath(e,["parameters","personGeneration"],a);const l=getValueByPath(t,["includeRaiReason"]);e!==void 0&&l!=null&&setValueByPath(e,["parameters","includeRaiReason"],l);const d=getValueByPath(t,["outputMimeType"]);e!==void 0&&d!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],d);const h=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],h);const u=getValueByPath(t,["enhanceInputImage"]);e!==void 0&&u!=null&&setValueByPath(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=getValueByPath(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&setValueByPath(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=getValueByPath(t,["labels"]);e!==void 0&&p!=null&&setValueByPath(e,["labels"],p);const g=getValueByPath(t,["numberOfImages"]);e!==void 0&&g!=null&&setValueByPath(e,["parameters","sampleCount"],g);const y=getValueByPath(t,["mode"]);return e!==void 0&&y!=null&&setValueByPath(e,["parameters","mode"],y),n}function upscaleImageAPIParametersInternalToVertex(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["_url","model"],tModel(t,r));const s=getValueByPath(e,["image"]);s!=null&&setValueByPath(n,["instances[0]","image"],imageToVertex(s));const a=getValueByPath(e,["upscaleFactor"]);a!=null&&setValueByPath(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=getValueByPath(e,["config"]);return l!=null&&upscaleImageAPIConfigInternalToVertex(l,n),n}function upscaleImageResponseFromVertex(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>generatedImageFromVertex(a))),setValueByPath(e,["generatedImages"],s)}return e}function videoFromMldev(t){const e={},n=getValueByPath(t,["uri"]);n!=null&&setValueByPath(e,["uri"],n);const r=getValueByPath(t,["encodedVideo"]);r!=null&&setValueByPath(e,["videoBytes"],tBytes(r));const s=getValueByPath(t,["encoding"]);return s!=null&&setValueByPath(e,["mimeType"],s),e}function videoFromVertex(t){const e={},n=getValueByPath(t,["gcsUri"]);n!=null&&setValueByPath(e,["uri"],n);const r=getValueByPath(t,["bytesBase64Encoded"]);r!=null&&setValueByPath(e,["videoBytes"],tBytes(r));const s=getValueByPath(t,["mimeType"]);return s!=null&&setValueByPath(e,["mimeType"],s),e}function videoGenerationMaskToVertex(t){const e={},n=getValueByPath(t,["image"]);n!=null&&setValueByPath(e,["_self"],imageToVertex(n));const r=getValueByPath(t,["maskMode"]);return r!=null&&setValueByPath(e,["maskMode"],r),e}function videoGenerationReferenceImageToMldev(t){const e={},n=getValueByPath(t,["image"]);n!=null&&setValueByPath(e,["image"],imageToMldev(n));const r=getValueByPath(t,["referenceType"]);return r!=null&&setValueByPath(e,["referenceType"],r),e}function videoGenerationReferenceImageToVertex(t){const e={},n=getValueByPath(t,["image"]);n!=null&&setValueByPath(e,["image"],imageToVertex(n));const r=getValueByPath(t,["referenceType"]);return r!=null&&setValueByPath(e,["referenceType"],r),e}function videoToMldev(t){const e={},n=getValueByPath(t,["uri"]);n!=null&&setValueByPath(e,["uri"],n);const r=getValueByPath(t,["videoBytes"]);r!=null&&setValueByPath(e,["encodedVideo"],tBytes(r));const s=getValueByPath(t,["mimeType"]);return s!=null&&setValueByPath(e,["encoding"],s),e}function videoToVertex(t){const e={},n=getValueByPath(t,["uri"]);n!=null&&setValueByPath(e,["gcsUri"],n);const r=getValueByPath(t,["videoBytes"]);r!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(r));const s=getValueByPath(t,["mimeType"]);return s!=null&&setValueByPath(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CONTENT_TYPE_HEADER="Content-Type",SERVER_TIMEOUT_HEADER="X-Server-Timeout",USER_AGENT_HEADER="User-Agent",GOOGLE_API_CLIENT_HEADER="x-goog-api-client",SDK_VERSION="1.29.0",LIBRARY_LABEL=`google-genai-sdk/${SDK_VERSION}`,VERTEX_AI_API_DEFAULT_VERSION="v1beta1",GOOGLE_AI_API_DEFAULT_VERSION="v1beta",responseLineRE$1=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ApiClient{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:VERTEX_AI_API_DEFAULT_VERSION,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:GOOGLE_AI_API_DEFAULT_VERSION,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[l,d]of Object.entries(e.queryParams))s.searchParams.append(l,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?r[s]=Object.assign(Object.assign({},r[s]),a):a!==void 0&&(r[s]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const a=new AbortController,l=a.signal;if(n.timeout&&n?.timeout>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&includeExtraBodyToRequestInit(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await throwErrorIfNotOK(s),new HttpResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await throwErrorIfNotOK(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return __asyncGenerator$1(this,arguments,function*(){const s=(n=e?.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:d,value:h}=yield __await$1(s.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=a.decode(h,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),y=g.status,x=g.code,S=`got status: ${y}. ${JSON.stringify(p)}`;if(x>=400&&x<600)throw new ApiError({message:S,status:x})}}catch(p){if(p.name==="ApiError")throw p}l+=u;let f=l.match(responseLineRE$1);for(;f;){const p=f[1];try{const g=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield __await$1(new HttpResponse(g)),l=l.slice(f[0].length),f=l.match(responseLineRE$1)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=LIBRARY_LABEL+" "+this.clientOptions.userAgentExtra;return e[USER_AGENT_HEADER]=n,e[GOOGLE_API_CLIENT_HEADER]=n,e[CONTENT_TYPE_HEADER]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))r.append(s,a);e.timeout&&e.timeout>0&&r.append(SERVER_TIMEOUT_HEADER,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const d=(r=n?.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const h={file:s},u=this.getFileName(e),f=formatMap("upload/v1beta/files",h._url),p=await this.fetchUploadUrl(f,s.sizeBytes,s.mimeType,u,h,n?.httpOptions);return a.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var s;const a=this.clientOptions.uploader,l=await a.stat(n),d=String(l.size),h=(s=r?.mimeType)!==null&&s!==void 0?s:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r?.customMetadata&&(p.customMetadata=r.customMetadata),r?.chunkingConfig&&(p.chunkingConfig=r.chunkingConfig);const g=await this.fetchUploadUrl(u,d,h,f,p,r?.httpOptions);return a.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,a,l){var d;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const u=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(d=u?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function throwErrorIfNotOK(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new ApiError({message:s,status:n}):new Error(s)}}function includeExtraBodyToRequestInit(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,l){const d=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const u=l[h],f=d[h];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?d[h]=r(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),d[h]=u)}return d}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MCP_LABEL="mcp_used/unknown";let hasMcpToolUsageFromMcpToTool=!1;function hasMcpToolUsage(t){for(const e of t)if(isMcpCallableTool(e)||typeof e=="object"&&"inputSchema"in e)return!0;return hasMcpToolUsageFromMcpToTool}function setMcpUsageHeader(t){var e;const n=(e=t[GOOGLE_API_CLIENT_HEADER])!==null&&e!==void 0?e:"";t[GOOGLE_API_CLIENT_HEADER]=(n+` ${MCP_LABEL}`).trimStart()}function isMcpCallableTool(t){return t!==null&&typeof t=="object"&&t instanceof McpCallableTool}function listAllTools(t,e=100){return __asyncGenerator$1(this,arguments,function*(){let r,s=0;for(;s<e;){const a=yield __await$1(t.listTools({cursor:r}));for(const l of a.tools)yield yield __await$1(l),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class McpCallableTool{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new McpCallableTool(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const f of this.mcpClients)try{for(var d=!0,h=(n=void 0,__asyncValues(listAllTools(f))),u;u=await h.next(),e=u.done,!e;d=!0){s=u.value,d=!1;const p=s;l.push(p);const g=p.name;if(a[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);a[g]=f}}catch(p){n={error:p}}finally{try{!d&&!e&&(r=h.return)&&await r.call(h)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),mcpToolsToGeminiTool(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function handleWebSocketMessage$1(t,e,n){const r=new LiveMusicServerMessage;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class LiveMusic{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=mapToHeaders$1(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let u=()=>{};const f=new Promise(R=>{u=R}),p=e.callbacks,g=function(){u({})},y=this.apiClient,x={onopen:g,onmessage:R=>{handleWebSocketMessage$1(y,p.onmessage,R)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=p?.onclose)!==null&&r!==void 0?r:function(R){}},S=this.webSocketFactory.create(h,headersToMap$1(l),x);S.connect(),await f;const N={setup:{model:tModel(this.apiClient,e.model)}};return S.send(JSON.stringify(N)),new LiveMusicSession(S,this.apiClient)}}class LiveMusicSession{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=liveMusicSetWeightedPromptsParametersToMldev(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=liveMusicSetConfigParametersToMldev(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(LiveMusicPlaybackControl.PLAY)}pause(){this.sendPlaybackControl(LiveMusicPlaybackControl.PAUSE)}stop(){this.sendPlaybackControl(LiveMusicPlaybackControl.STOP)}resetContext(){this.sendPlaybackControl(LiveMusicPlaybackControl.RESET_CONTEXT)}close(){this.conn.close()}}function headersToMap$1(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function mapToHeaders$1(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FUNCTION_RESPONSE_REQUIRES_ID="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function handleWebSocketMessage(t,e,n){const r=new LiveServerMessage;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=liveServerMessageFromVertex(a);Object.assign(r,l)}else Object.assign(r,a);e(r)}class Live{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new LiveMusic(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,a,l,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)&&setMcpUsageHeader(p);const g=mapToHeaders(p);if(this.apiClient.isVertexAI())f=`${h}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,f);else{const b=this.apiClient.getApiKey();let U="BidiGenerateContent",H="key";b?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",H="access_token"),f=`${h}/ws/google.ai.generativelanguage.${u}.GenerativeService.${U}?${H}=${b}`}let y=()=>{};const x=new Promise(b=>{y=b}),S=e.callbacks,w=function(){var b;(b=S?.onopen)===null||b===void 0||b.call(S),y({})},k=this.apiClient,N={onopen:w,onmessage:b=>{handleWebSocketMessage(k,S.onmessage,b)},onerror:(n=S?.onerror)!==null&&n!==void 0?n:function(b){},onclose:(r=S?.onclose)!==null&&r!==void 0?r:function(b){}},R=this.webSocketFactory.create(f,headersToMap(g),N);R.connect(),await x;let B=tModel(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&B.startsWith("publishers/")){const b=this.apiClient.getProject(),U=this.apiClient.getLocation();B=`projects/${b}/locations/${U}/`+B}let q={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Modality.AUDIO]}:e.config.responseModalities=[Modality.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(d=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],z=[];for(const b of F)if(this.isCallableTool(b)){const U=b;z.push(await U.tool())}else z.push(b);z.length>0&&(e.config.tools=z);const V={model:B,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=liveConnectParametersToVertex(this.apiClient,V):q=liveConnectParametersToMldev(this.apiClient,V),delete q.config,R.send(JSON.stringify(q)),new Session(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const defaultLiveSendClientContentParamerters={turnComplete:!0};class Session{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=tContents(n.turns),e.isVertexAI()||(r=r.map(s=>contentToMldev$1(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(FUNCTION_RESPONSE_REQUIRES_ID)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},defaultLiveSendClientContentParamerters),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:liveSendRealtimeInputParametersToVertex(e)}:n={realtimeInput:liveSendRealtimeInputParametersToMldev(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function headersToMap(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function mapToHeaders(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DEFAULT_MAX_REMOTE_CALLS=10;function shouldDisableAfc(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t?.tools)!==null&&n!==void 0?n:[])if(isCallableTool(l)){s=!0;break}if(!s)return!0;const a=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}function hasCallableTools(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>isCallableTool(s)))!==null&&r!==void 0?r:!1}function findAfcIncompatibleToolIndexes(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(isCallableTool(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function shouldAppendAfcHistory(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Models extends BaseModule{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,a,l,d;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!hasCallableTools(n)||shouldDisableAfc(n.config))return await this.generateContentInternal(h);const u=findAfcIncompatibleToolIndexes(n);if(u.length>0){const S=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let f,p;const g=tContents(h.contents),y=(a=(s=(r=h.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:DEFAULT_MAX_REMOTE_CALLS;let x=0;for(;x<y&&(f=await this.generateContentInternal(h),!(!f.functionCalls||f.functionCalls.length===0));){const S=f.candidates[0].content,w=[];for(const k of(d=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(isCallableTool(k)){const R=await k.callTool(f.functionCalls);w.push(...R)}x++,p={role:"user",parts:w},h.contents=tContents(h.contents),h.contents.push(S),h.contents.push(p),shouldAppendAfcHistory(h.config)&&(g.push(S),g.push(p))}return shouldAppendAfcHistory(h.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),shouldDisableAfc(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}const r=findAfcIncompatibleToolIndexes(n);if(r.length>0){const s=r.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let a;const l=[];if(r?.generatedImages)for(const h of r.generatedImages)h&&h?.safetyAttributes&&((s=h?.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=h?.safetyAttributes:l.push(h);let d;return a?d={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Pager(PagedItem.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,a,l,d,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(d=n.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async h=>isCallableTool(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(d.config.tools=l,e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)){const h=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},h);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),setMcpUsageHeader(u),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return d}async initAfcToolsMap(e){var n,r,s;const a=new Map;for(const l of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(isCallableTool(l)){const d=l,h=await d.tool();for(const u of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,d)}}return a}async processAfcStream(e){var n,r,s;const a=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:DEFAULT_MAX_REMOTE_CALLS;let l=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(u,f,p){var g,y;return __asyncGenerator$1(this,arguments,function*(){for(var x,S,w,k;d<a;){l&&(d++,l=!1);const q=yield __await$1(u.processParamsMaybeAddMcpUsage(p)),F=yield __await$1(u.generateContentStreamInternal(q)),z=[],V=[];try{for(var N=!0,R=(S=void 0,__asyncValues(F)),B;B=yield __await$1(R.next()),x=B.done,!x;N=!0){k=B.value,N=!1;const b=k;if(yield yield __await$1(b),b.candidates&&(!((g=b.candidates[0])===null||g===void 0)&&g.content)){V.push(b.candidates[0].content);for(const U of(y=b.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(d<a&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){const H=yield __await$1(f.get(U.functionCall.name).callTool([U.functionCall]));z.push(...H)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(b){S={error:b}}finally{try{!N&&!x&&(w=R.return)&&(yield __await$1(w.call(R)))}finally{if(S)throw S.error}}if(z.length>0){l=!0;const b=new GenerateContentResponse;b.candidates=[{content:{role:"user",parts:z}}],yield yield __await$1(b);const U=[];U.push(...V),U.push({role:"user",parts:z});const H=tContents(p.contents).concat(U);p.contents=H}else break}})})(this,h,e)}async generateContentInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=generateContentParametersToVertex(this.apiClient,e);return d=formatMap("{model}:generateContent",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=generateContentResponseFromVertex(f),g=new GenerateContentResponse;return Object.assign(g,p),g})}else{const u=generateContentParametersToMldev(this.apiClient,e);return d=formatMap("{model}:generateContent",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=generateContentResponseFromMldev(f),g=new GenerateContentResponse;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=generateContentParametersToVertex(this.apiClient,e);return d=formatMap("{model}:streamGenerateContent?alt=sse",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(p){return __asyncGenerator$1(this,arguments,function*(){var g,y,x,S;try{for(var w=!0,k=__asyncValues(p),N;N=yield __await$1(k.next()),g=N.done,!g;w=!0){S=N.value,w=!1;const R=S,B=generateContentResponseFromVertex(yield __await$1(R.json()));B.sdkHttpResponse={headers:R.headers};const q=new GenerateContentResponse;Object.assign(q,B),yield yield __await$1(q)}}catch(R){y={error:R}}finally{try{!w&&!g&&(x=k.return)&&(yield __await$1(x.call(k)))}finally{if(y)throw y.error}}})})}else{const u=generateContentParametersToMldev(this.apiClient,e);return d=formatMap("{model}:streamGenerateContent?alt=sse",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(p){return __asyncGenerator$1(this,arguments,function*(){var g,y,x,S;try{for(var w=!0,k=__asyncValues(p),N;N=yield __await$1(k.next()),g=N.done,!g;w=!0){S=N.value,w=!1;const R=S,B=generateContentResponseFromMldev(yield __await$1(R.json()));B.sdkHttpResponse={headers:R.headers};const q=new GenerateContentResponse;Object.assign(q,B),yield yield __await$1(q)}}catch(R){y={error:R}}finally{try{!w&&!g&&(x=k.return)&&(yield __await$1(x.call(k)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=embedContentParametersToVertex(this.apiClient,e);return d=formatMap("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=embedContentResponseFromVertex(f),g=new EmbedContentResponse;return Object.assign(g,p),g})}else{const u=embedContentParametersToMldev(this.apiClient,e);return d=formatMap("{model}:batchEmbedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=embedContentResponseFromMldev(f),g=new EmbedContentResponse;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=generateImagesParametersToVertex(this.apiClient,e);return d=formatMap("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=generateImagesResponseFromVertex(f),g=new GenerateImagesResponse;return Object.assign(g,p),g})}else{const u=generateImagesParametersToMldev(this.apiClient,e);return d=formatMap("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=generateImagesResponseFromMldev(f),g=new GenerateImagesResponse;return Object.assign(g,p),g})}}async editImageInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=editImageParametersInternalToVertex(this.apiClient,e);return a=formatMap("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:h.headers},f})),s.then(h=>{const u=editImageResponseFromVertex(h),f=new EditImageResponse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=upscaleImageAPIParametersInternalToVertex(this.apiClient,e);return a=formatMap("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:h.headers},f})),s.then(h=>{const u=upscaleImageResponseFromVertex(h),f=new UpscaleImageResponse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=recontextImageParametersToVertex(this.apiClient,e);return a=formatMap("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const u=recontextImageResponseFromVertex(h),f=new RecontextImageResponse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=segmentImageParametersToVertex(this.apiClient,e);return a=formatMap("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const u=segmentImageResponseFromVertex(h),f=new SegmentImageResponse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=getModelParametersToVertex(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>modelFromVertex(f))}else{const u=getModelParametersToMldev(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>modelFromMldev(f))}}async listInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=listModelsParametersToVertex(this.apiClient,e);return d=formatMap("{models_url}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listModelsResponseFromVertex(f),g=new ListModelsResponse;return Object.assign(g,p),g})}else{const u=listModelsParametersToMldev(this.apiClient,e);return d=formatMap("{models_url}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listModelsResponseFromMldev(f),g=new ListModelsResponse;return Object.assign(g,p),g})}}async update(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=updateModelParametersToVertex(this.apiClient,e);return d=formatMap("{model}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>modelFromVertex(f))}else{const u=updateModelParametersToMldev(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>modelFromMldev(f))}}async delete(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=deleteModelParametersToVertex(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=deleteModelResponseFromVertex(f),g=new DeleteModelResponse;return Object.assign(g,p),g})}else{const u=deleteModelParametersToMldev(this.apiClient,e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=deleteModelResponseFromMldev(f),g=new DeleteModelResponse;return Object.assign(g,p),g})}}async countTokens(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=countTokensParametersToVertex(this.apiClient,e);return d=formatMap("{model}:countTokens",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=countTokensResponseFromVertex(f),g=new CountTokensResponse;return Object.assign(g,p),g})}else{const u=countTokensParametersToMldev(this.apiClient,e);return d=formatMap("{model}:countTokens",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=countTokensResponseFromMldev(f),g=new CountTokensResponse;return Object.assign(g,p),g})}}async computeTokens(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=computeTokensParametersToVertex(this.apiClient,e);return a=formatMap("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:h.headers},f})),s.then(h=>{const u=computeTokensResponseFromVertex(h),f=new ComputeTokensResponse;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=generateVideosParametersToVertex(this.apiClient,e);return d=formatMap("{model}:predictLongRunning",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l.then(f=>{const p=generateVideosOperationFromVertex(f),g=new GenerateVideosOperation;return Object.assign(g,p),g})}else{const u=generateVideosParametersToMldev(this.apiClient,e);return d=formatMap("{model}:predictLongRunning",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const p=generateVideosOperationFromMldev(f),g=new GenerateVideosOperation;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Operations extends BaseModule{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=getOperationParametersToVertex(e);return d=formatMap("{operationName}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),l}else{const u=getOperationParametersToMldev(e);return d=formatMap("{operationName}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l}}async fetchPredictVideosOperationInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=fetchPredictOperationParametersToVertex(e);return a=formatMap("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev(t){const e={},n=getValueByPath(t,["data"]);if(n!=null&&setValueByPath(e,["data"],n),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function contentToMldev(t){const e={},n=getValueByPath(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>partToMldev(a))),setValueByPath(e,["parts"],s)}const r=getValueByPath(t,["role"]);return r!=null&&setValueByPath(e,["role"],r),e}function createAuthTokenConfigToMldev(t,e,n){const r={},s=getValueByPath(e,["expireTime"]);n!==void 0&&s!=null&&setValueByPath(n,["expireTime"],s);const a=getValueByPath(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&setValueByPath(n,["newSessionExpireTime"],a);const l=getValueByPath(e,["uses"]);n!==void 0&&l!=null&&setValueByPath(n,["uses"],l);const d=getValueByPath(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&setValueByPath(n,["bidiGenerateContentSetup"],liveConnectConstraintsToMldev(t,d));const h=getValueByPath(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&setValueByPath(n,["fieldMask"],h),r}function createAuthTokenParametersToMldev(t,e){const n={},r=getValueByPath(e,["config"]);return r!=null&&setValueByPath(n,["config"],createAuthTokenConfigToMldev(t,r,n)),n}function fileDataToMldev(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=getValueByPath(t,["fileUri"]);n!=null&&setValueByPath(e,["fileUri"],n);const r=getValueByPath(t,["mimeType"]);return r!=null&&setValueByPath(e,["mimeType"],r),e}function googleMapsToMldev(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=getValueByPath(t,["enableWidget"]);return n!=null&&setValueByPath(e,["enableWidget"],n),e}function googleSearchToMldev(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=getValueByPath(t,["timeRangeFilter"]);return n!=null&&setValueByPath(e,["timeRangeFilter"],n),e}function liveConnectConfigToMldev(t,e){const n={},r=getValueByPath(t,["generationConfig"]);e!==void 0&&r!=null&&setValueByPath(e,["setup","generationConfig"],r);const s=getValueByPath(t,["responseModalities"]);e!==void 0&&s!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],s);const a=getValueByPath(t,["temperature"]);e!==void 0&&a!=null&&setValueByPath(e,["setup","generationConfig","temperature"],a);const l=getValueByPath(t,["topP"]);e!==void 0&&l!=null&&setValueByPath(e,["setup","generationConfig","topP"],l);const d=getValueByPath(t,["topK"]);e!==void 0&&d!=null&&setValueByPath(e,["setup","generationConfig","topK"],d);const h=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&h!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],h);const u=getValueByPath(t,["mediaResolution"]);e!==void 0&&u!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],u);const f=getValueByPath(t,["seed"]);e!==void 0&&f!=null&&setValueByPath(e,["setup","generationConfig","seed"],f);const p=getValueByPath(t,["speechConfig"]);e!==void 0&&p!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(p));const g=getValueByPath(t,["thinkingConfig"]);e!==void 0&&g!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],g);const y=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=getValueByPath(t,["systemInstruction"]);e!==void 0&&x!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev(tContent(x)));const S=getValueByPath(t,["tools"]);if(e!==void 0&&S!=null){let F=tTools(S);Array.isArray(F)&&(F=F.map(z=>toolToMldev(tTool(z)))),setValueByPath(e,["setup","tools"],F)}const w=getValueByPath(t,["sessionResumption"]);e!==void 0&&w!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev(w));const k=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&setValueByPath(e,["setup","inputAudioTranscription"],k);const N=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&setValueByPath(e,["setup","outputAudioTranscription"],N);const R=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&setValueByPath(e,["setup","realtimeInputConfig"],R);const B=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&B!=null&&setValueByPath(e,["setup","contextWindowCompression"],B);const q=getValueByPath(t,["proactivity"]);return e!==void 0&&q!=null&&setValueByPath(e,["setup","proactivity"],q),n}function liveConnectConstraintsToMldev(t,e){const n={},r=getValueByPath(e,["model"]);r!=null&&setValueByPath(n,["setup","model"],tModel(t,r));const s=getValueByPath(e,["config"]);return s!=null&&setValueByPath(n,["config"],liveConnectConfigToMldev(s,n)),n}function partToMldev(t){const e={},n=getValueByPath(t,["functionCall"]);n!=null&&setValueByPath(e,["functionCall"],n);const r=getValueByPath(t,["codeExecutionResult"]);r!=null&&setValueByPath(e,["codeExecutionResult"],r);const s=getValueByPath(t,["executableCode"]);s!=null&&setValueByPath(e,["executableCode"],s);const a=getValueByPath(t,["fileData"]);a!=null&&setValueByPath(e,["fileData"],fileDataToMldev(a));const l=getValueByPath(t,["functionResponse"]);l!=null&&setValueByPath(e,["functionResponse"],l);const d=getValueByPath(t,["inlineData"]);d!=null&&setValueByPath(e,["inlineData"],blobToMldev(d));const h=getValueByPath(t,["text"]);h!=null&&setValueByPath(e,["text"],h);const u=getValueByPath(t,["thought"]);u!=null&&setValueByPath(e,["thought"],u);const f=getValueByPath(t,["thoughtSignature"]);f!=null&&setValueByPath(e,["thoughtSignature"],f);const p=getValueByPath(t,["videoMetadata"]);return p!=null&&setValueByPath(e,["videoMetadata"],p),e}function sessionResumptionConfigToMldev(t){const e={},n=getValueByPath(t,["handle"]);if(n!=null&&setValueByPath(e,["handle"],n),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function toolToMldev(t){const e={},n=getValueByPath(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),setValueByPath(e,["functionDeclarations"],f)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=getValueByPath(t,["googleSearchRetrieval"]);r!=null&&setValueByPath(e,["googleSearchRetrieval"],r);const s=getValueByPath(t,["computerUse"]);s!=null&&setValueByPath(e,["computerUse"],s);const a=getValueByPath(t,["fileSearch"]);a!=null&&setValueByPath(e,["fileSearch"],a);const l=getValueByPath(t,["codeExecution"]);if(l!=null&&setValueByPath(e,["codeExecution"],l),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=getValueByPath(t,["googleMaps"]);d!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev(d));const h=getValueByPath(t,["googleSearch"]);h!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev(h));const u=getValueByPath(t,["urlContext"]);return u!=null&&setValueByPath(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getFieldMasks(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function convertBidiSetupToTokenSetup(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=getFieldMasks(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)a?t.fieldMask=a:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(u=>l.includes(u)?`generationConfig.${u}`:u));const h=[];a&&h.push(a),d.length>0&&h.push(...d),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Tokens extends BaseModule{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=createAuthTokenParametersToMldev(this.apiClient,e);a=formatMap("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const h=convertBidiSetupToTokenSetup(d,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileSearchStoreConfigToMldev(t,e){const n={},r=getValueByPath(t,["displayName"]);return e!==void 0&&r!=null&&setValueByPath(e,["displayName"],r),n}function createFileSearchStoreParametersToMldev(t){const e={},n=getValueByPath(t,["config"]);return n!=null&&createFileSearchStoreConfigToMldev(n,e),e}function deleteFileSearchStoreConfigToMldev(t,e){const n={},r=getValueByPath(t,["force"]);return e!==void 0&&r!=null&&setValueByPath(e,["_query","force"],r),n}function deleteFileSearchStoreParametersToMldev(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["_url","name"],n);const r=getValueByPath(t,["config"]);return r!=null&&deleteFileSearchStoreConfigToMldev(r,e),e}function getFileSearchStoreParametersToMldev(t){const e={},n=getValueByPath(t,["name"]);return n!=null&&setValueByPath(e,["_url","name"],n),e}function importFileConfigToMldev(t,e){const n={},r=getValueByPath(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["customMetadata"],a)}const s=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&s!=null&&setValueByPath(e,["chunkingConfig"],s),n}function importFileOperationFromMldev(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["name"],n);const r=getValueByPath(t,["metadata"]);r!=null&&setValueByPath(e,["metadata"],r);const s=getValueByPath(t,["done"]);s!=null&&setValueByPath(e,["done"],s);const a=getValueByPath(t,["error"]);a!=null&&setValueByPath(e,["error"],a);const l=getValueByPath(t,["response"]);return l!=null&&setValueByPath(e,["response"],importFileResponseFromMldev(l)),e}function importFileParametersToMldev(t){const e={},n=getValueByPath(t,["fileSearchStoreName"]);n!=null&&setValueByPath(e,["_url","file_search_store_name"],n);const r=getValueByPath(t,["fileName"]);r!=null&&setValueByPath(e,["fileName"],r);const s=getValueByPath(t,["config"]);return s!=null&&importFileConfigToMldev(s,e),e}function importFileResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["parent"]);r!=null&&setValueByPath(e,["parent"],r);const s=getValueByPath(t,["documentName"]);return s!=null&&setValueByPath(e,["documentName"],s),e}function listFileSearchStoresConfigToMldev(t,e){const n={},r=getValueByPath(t,["pageSize"]);e!==void 0&&r!=null&&setValueByPath(e,["_query","pageSize"],r);const s=getValueByPath(t,["pageToken"]);return e!==void 0&&s!=null&&setValueByPath(e,["_query","pageToken"],s),n}function listFileSearchStoresParametersToMldev(t){const e={},n=getValueByPath(t,["config"]);return n!=null&&listFileSearchStoresConfigToMldev(n,e),e}function listFileSearchStoresResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["fileSearchStores"],a)}return e}function uploadToFileSearchStoreConfigToMldev(t,e){const n={},r=getValueByPath(t,["mimeType"]);e!==void 0&&r!=null&&setValueByPath(e,["mimeType"],r);const s=getValueByPath(t,["displayName"]);e!==void 0&&s!=null&&setValueByPath(e,["displayName"],s);const a=getValueByPath(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>h)),setValueByPath(e,["customMetadata"],d)}const l=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&l!=null&&setValueByPath(e,["chunkingConfig"],l),n}function uploadToFileSearchStoreParametersToMldev(t){const e={},n=getValueByPath(t,["fileSearchStoreName"]);n!=null&&setValueByPath(e,["_url","file_search_store_name"],n);const r=getValueByPath(t,["config"]);return r!=null&&uploadToFileSearchStoreConfigToMldev(r,e),e}function uploadToFileSearchStoreResumableResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);return n!=null&&setValueByPath(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function deleteDocumentConfigToMldev(t,e){const n={},r=getValueByPath(t,["force"]);return e!==void 0&&r!=null&&setValueByPath(e,["_query","force"],r),n}function deleteDocumentParametersToMldev(t){const e={},n=getValueByPath(t,["name"]);n!=null&&setValueByPath(e,["_url","name"],n);const r=getValueByPath(t,["config"]);return r!=null&&deleteDocumentConfigToMldev(r,e),e}function getDocumentParametersToMldev(t){const e={},n=getValueByPath(t,["name"]);return n!=null&&setValueByPath(e,["_url","name"],n),e}function listDocumentsConfigToMldev(t,e){const n={},r=getValueByPath(t,["pageSize"]);e!==void 0&&r!=null&&setValueByPath(e,["_query","pageSize"],r);const s=getValueByPath(t,["pageToken"]);return e!==void 0&&s!=null&&setValueByPath(e,["_query","pageToken"],s),n}function listDocumentsParametersToMldev(t){const e={},n=getValueByPath(t,["parent"]);n!=null&&setValueByPath(e,["_url","parent"],n);const r=getValueByPath(t,["config"]);return r!=null&&listDocumentsConfigToMldev(r,e),e}function listDocumentsResponseFromMldev(t){const e={},n=getValueByPath(t,["sdkHttpResponse"]);n!=null&&setValueByPath(e,["sdkHttpResponse"],n);const r=getValueByPath(t,["nextPageToken"]);r!=null&&setValueByPath(e,["nextPageToken"],r);const s=getValueByPath(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),setValueByPath(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Documents extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async n=>new Pager(PagedItem.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=getDocumentParametersToMldev(e);return a=formatMap("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=deleteDocumentParametersToMldev(e);s=formatMap("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=listDocumentsParametersToMldev(e);return a=formatMap("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const u=listDocumentsResponseFromMldev(h),f=new ListDocumentsResponse;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FileSearchStores extends BaseModule{constructor(e,n=new Documents(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=createFileSearchStoreParametersToMldev(e);return a=formatMap("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=getFileSearchStoreParametersToMldev(e);return a=formatMap("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=deleteFileSearchStoreParametersToMldev(e);s=formatMap("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=listFileSearchStoresParametersToMldev(e);return a=formatMap("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const u=listFileSearchStoresResponseFromMldev(h),f=new ListFileSearchStoresResponse;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uploadToFileSearchStoreParametersToMldev(e);return a=formatMap("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const u=uploadToFileSearchStoreResumableResponseFromMldev(h),f=new UploadToFileSearchStoreResumableResponse;return Object.assign(f,u),f})}}async importFile(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=importFileParametersToMldev(e);return a=formatMap("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const u=importFileOperationFromMldev(h),f=new ImportFileOperation;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cancelTuningJobParametersToMldev(t,e){const n={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(n,["_url","name"],r),n}function cancelTuningJobParametersToVertex(t,e){const n={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(n,["_url","name"],r),n}function createTuningJobConfigToMldev(t,e,n){const r={};if(getValueByPath(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=getValueByPath(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&setValueByPath(e,["displayName"],s),getValueByPath(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=getValueByPath(t,["epochCount"]);e!==void 0&&a!=null&&setValueByPath(e,["tuningTask","hyperparameters","epochCount"],a);const l=getValueByPath(t,["learningRateMultiplier"]);if(l!=null&&setValueByPath(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),getValueByPath(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(getValueByPath(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(getValueByPath(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=getValueByPath(t,["batchSize"]);e!==void 0&&d!=null&&setValueByPath(e,["tuningTask","hyperparameters","batchSize"],d);const h=getValueByPath(t,["learningRate"]);if(e!==void 0&&h!=null&&setValueByPath(e,["tuningTask","hyperparameters","learningRate"],h),getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(getValueByPath(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function createTuningJobConfigToVertex(t,e,n){const r={};let s=getValueByPath(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=getValueByPath(t,["validationDataset"]);e!==void 0&&y!=null&&setValueByPath(e,["supervisedTuningSpec"],tuningValidationDatasetToVertex(y))}else if(s==="PREFERENCE_TUNING"){const y=getValueByPath(t,["validationDataset"]);e!==void 0&&y!=null&&setValueByPath(e,["preferenceOptimizationSpec"],tuningValidationDatasetToVertex(y))}const a=getValueByPath(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&setValueByPath(e,["tunedModelDisplayName"],a);const l=getValueByPath(t,["description"]);e!==void 0&&l!=null&&setValueByPath(e,["description"],l);let d=getValueByPath(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=getValueByPath(t,["epochCount"]);e!==void 0&&y!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(d==="PREFERENCE_TUNING"){const y=getValueByPath(t,["epochCount"]);e!==void 0&&y!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let h=getValueByPath(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const y=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(h==="PREFERENCE_TUNING"){const y=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let u=getValueByPath(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&setValueByPath(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(u==="PREFERENCE_TUNING"){const y=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&setValueByPath(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let f=getValueByPath(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=getValueByPath(t,["adapterSize"]);e!==void 0&&y!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(f==="PREFERENCE_TUNING"){const y=getValueByPath(t,["adapterSize"]);e!==void 0&&y!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(getValueByPath(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(getValueByPath(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=getValueByPath(t,["labels"]);e!==void 0&&p!=null&&setValueByPath(e,["labels"],p);const g=getValueByPath(t,["beta"]);return e!==void 0&&g!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function createTuningJobParametersPrivateToMldev(t,e){const n={},r=getValueByPath(t,["baseModel"]);r!=null&&setValueByPath(n,["baseModel"],r);const s=getValueByPath(t,["preTunedModel"]);s!=null&&setValueByPath(n,["preTunedModel"],s);const a=getValueByPath(t,["trainingDataset"]);a!=null&&tuningDatasetToMldev(a);const l=getValueByPath(t,["config"]);return l!=null&&createTuningJobConfigToMldev(l,n),n}function createTuningJobParametersPrivateToVertex(t,e){const n={},r=getValueByPath(t,["baseModel"]);r!=null&&setValueByPath(n,["baseModel"],r);const s=getValueByPath(t,["preTunedModel"]);s!=null&&setValueByPath(n,["preTunedModel"],s);const a=getValueByPath(t,["trainingDataset"]);a!=null&&tuningDatasetToVertex(a,n,e);const l=getValueByPath(t,["config"]);return l!=null&&createTuningJobConfigToVertex(l,n,e),n}function getTuningJobParametersToMldev(t,e){const n={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(n,["_url","name"],r),n}function getTuningJobParametersToVertex(t,e){const n={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(n,["_url","name"],r),n}function listTuningJobsConfigToMldev(t,e,n){const r={},s=getValueByPath(t,["pageSize"]);e!==void 0&&s!=null&&setValueByPath(e,["_query","pageSize"],s);const a=getValueByPath(t,["pageToken"]);e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a);const l=getValueByPath(t,["filter"]);return e!==void 0&&l!=null&&setValueByPath(e,["_query","filter"],l),r}function listTuningJobsConfigToVertex(t,e,n){const r={},s=getValueByPath(t,["pageSize"]);e!==void 0&&s!=null&&setValueByPath(e,["_query","pageSize"],s);const a=getValueByPath(t,["pageToken"]);e!==void 0&&a!=null&&setValueByPath(e,["_query","pageToken"],a);const l=getValueByPath(t,["filter"]);return e!==void 0&&l!=null&&setValueByPath(e,["_query","filter"],l),r}function listTuningJobsParametersToMldev(t,e){const n={},r=getValueByPath(t,["config"]);return r!=null&&listTuningJobsConfigToMldev(r,n),n}function listTuningJobsParametersToVertex(t,e){const n={},r=getValueByPath(t,["config"]);return r!=null&&listTuningJobsConfigToVertex(r,n),n}function listTuningJobsResponseFromMldev(t,e){const n={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(n,["sdkHttpResponse"],r);const s=getValueByPath(t,["nextPageToken"]);s!=null&&setValueByPath(n,["nextPageToken"],s);const a=getValueByPath(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>tuningJobFromMldev(d))),setValueByPath(n,["tuningJobs"],l)}return n}function listTuningJobsResponseFromVertex(t,e){const n={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(n,["sdkHttpResponse"],r);const s=getValueByPath(t,["nextPageToken"]);s!=null&&setValueByPath(n,["nextPageToken"],s);const a=getValueByPath(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>tuningJobFromVertex(d))),setValueByPath(n,["tuningJobs"],l)}return n}function tunedModelFromMldev(t,e){const n={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(n,["model"],r);const s=getValueByPath(t,["name"]);return s!=null&&setValueByPath(n,["endpoint"],s),n}function tuningDatasetToMldev(t,e){const n={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=getValueByPath(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),setValueByPath(n,["examples","examples"],s)}return n}function tuningDatasetToVertex(t,e,n){const r={};let s=getValueByPath(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=getValueByPath(t,["gcsUri"]);e!==void 0&&l!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=getValueByPath(t,["gcsUri"]);e!==void 0&&l!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=getValueByPath(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(getValueByPath(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function tuningJobFromMldev(t,e){const n={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(n,["sdkHttpResponse"],r);const s=getValueByPath(t,["name"]);s!=null&&setValueByPath(n,["name"],s);const a=getValueByPath(t,["state"]);a!=null&&setValueByPath(n,["state"],tTuningJobStatus(a));const l=getValueByPath(t,["createTime"]);l!=null&&setValueByPath(n,["createTime"],l);const d=getValueByPath(t,["tuningTask","startTime"]);d!=null&&setValueByPath(n,["startTime"],d);const h=getValueByPath(t,["tuningTask","completeTime"]);h!=null&&setValueByPath(n,["endTime"],h);const u=getValueByPath(t,["updateTime"]);u!=null&&setValueByPath(n,["updateTime"],u);const f=getValueByPath(t,["description"]);f!=null&&setValueByPath(n,["description"],f);const p=getValueByPath(t,["baseModel"]);p!=null&&setValueByPath(n,["baseModel"],p);const g=getValueByPath(t,["_self"]);return g!=null&&setValueByPath(n,["tunedModel"],tunedModelFromMldev(g)),n}function tuningJobFromVertex(t,e){const n={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(n,["sdkHttpResponse"],r);const s=getValueByPath(t,["name"]);s!=null&&setValueByPath(n,["name"],s);const a=getValueByPath(t,["state"]);a!=null&&setValueByPath(n,["state"],tTuningJobStatus(a));const l=getValueByPath(t,["createTime"]);l!=null&&setValueByPath(n,["createTime"],l);const d=getValueByPath(t,["startTime"]);d!=null&&setValueByPath(n,["startTime"],d);const h=getValueByPath(t,["endTime"]);h!=null&&setValueByPath(n,["endTime"],h);const u=getValueByPath(t,["updateTime"]);u!=null&&setValueByPath(n,["updateTime"],u);const f=getValueByPath(t,["error"]);f!=null&&setValueByPath(n,["error"],f);const p=getValueByPath(t,["description"]);p!=null&&setValueByPath(n,["description"],p);const g=getValueByPath(t,["baseModel"]);g!=null&&setValueByPath(n,["baseModel"],g);const y=getValueByPath(t,["tunedModel"]);y!=null&&setValueByPath(n,["tunedModel"],y);const x=getValueByPath(t,["preTunedModel"]);x!=null&&setValueByPath(n,["preTunedModel"],x);const S=getValueByPath(t,["supervisedTuningSpec"]);S!=null&&setValueByPath(n,["supervisedTuningSpec"],S);const w=getValueByPath(t,["preferenceOptimizationSpec"]);w!=null&&setValueByPath(n,["preferenceOptimizationSpec"],w);const k=getValueByPath(t,["tuningDataStats"]);k!=null&&setValueByPath(n,["tuningDataStats"],k);const N=getValueByPath(t,["encryptionSpec"]);N!=null&&setValueByPath(n,["encryptionSpec"],N);const R=getValueByPath(t,["partnerModelTuningSpec"]);R!=null&&setValueByPath(n,["partnerModelTuningSpec"],R);const B=getValueByPath(t,["customBaseModel"]);B!=null&&setValueByPath(n,["customBaseModel"],B);const q=getValueByPath(t,["experiment"]);q!=null&&setValueByPath(n,["experiment"],q);const F=getValueByPath(t,["labels"]);F!=null&&setValueByPath(n,["labels"],F);const z=getValueByPath(t,["outputUri"]);z!=null&&setValueByPath(n,["outputUri"],z);const V=getValueByPath(t,["pipelineJob"]);V!=null&&setValueByPath(n,["pipelineJob"],V);const b=getValueByPath(t,["serviceAccount"]);b!=null&&setValueByPath(n,["serviceAccount"],b);const U=getValueByPath(t,["tunedModelDisplayName"]);U!=null&&setValueByPath(n,["tunedModelDisplayName"],U);const H=getValueByPath(t,["veoTuningSpec"]);return H!=null&&setValueByPath(n,["veoTuningSpec"],H),n}function tuningOperationFromMldev(t,e){const n={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(n,["sdkHttpResponse"],r);const s=getValueByPath(t,["name"]);s!=null&&setValueByPath(n,["name"],s);const a=getValueByPath(t,["metadata"]);a!=null&&setValueByPath(n,["metadata"],a);const l=getValueByPath(t,["done"]);l!=null&&setValueByPath(n,["done"],l);const d=getValueByPath(t,["error"]);return d!=null&&setValueByPath(n,["error"],d),n}function tuningValidationDatasetToVertex(t,e){const n={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(n,["validationDatasetUri"],r);const s=getValueByPath(t,["vertexDatasetResource"]);return s!=null&&setValueByPath(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tunings extends BaseModule{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Pager(PagedItem.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:JobState.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=getTuningJobParametersToVertex(e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>tuningJobFromVertex(f))}else{const u=getTuningJobParametersToMldev(e);return d=formatMap("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>tuningJobFromMldev(f))}}async listInternal(e){var n,r,s,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const u=listTuningJobsParametersToVertex(e);return d=formatMap("tuningJobs",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listTuningJobsResponseFromVertex(f),g=new ListTuningJobsResponse;return Object.assign(g,p),g})}else{const u=listTuningJobsParametersToMldev(e);return d=formatMap("tunedModels",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),l.then(f=>{const p=listTuningJobsResponseFromMldev(f),g=new ListTuningJobsResponse;return Object.assign(g,p),g})}}async cancel(e){var n,r,s,a;let l="",d={};if(this.apiClient.isVertexAI()){const h=cancelTuningJobParametersToVertex(e);l=formatMap("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const h=cancelTuningJobParametersToMldev(e);l=formatMap("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI()){const d=createTuningJobParametersPrivateToVertex(e,e);return a=formatMap("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:h.headers},f})),s.then(h=>tuningJobFromVertex(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=createTuningJobParametersPrivateToMldev(e);return a=formatMap("tunedModels",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:h.headers},f})),s.then(h=>tuningOperationFromMldev(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserDownloader{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const MAX_CHUNK_SIZE=1024*1024*8,MAX_RETRY_COUNT=3,INITIAL_RETRY_DELAY_MS=1e3,DELAY_MULTIPLIER=2,X_GOOG_UPLOAD_STATUS_HEADER_FIELD="x-goog-upload-status";async function uploadBlob(t,e,n){var r;const s=await uploadBlobInternal(t,e,n),a=await s?.json();if(((r=s?.headers)===null||r===void 0?void 0:r[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function uploadBlobToFileSearchStore(t,e,n){var r;const s=await uploadBlobInternal(t,e,n),a=await s?.json();if(((r=s?.headers)===null||r===void 0?void 0:r[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=uploadToFileSearchStoreOperationFromMldev(a),d=new UploadToFileSearchStoreOperation;return Object.assign(d,l),d}async function uploadBlobInternal(t,e,n){var r,s;let a=0,l=0,d=new HttpResponse(new Response),h="upload";for(a=t.size;l<a;){const u=Math.min(MAX_CHUNK_SIZE,a-l),f=t.slice(l,l+u);l+u>=a&&(h+=", finalize");let p=0,g=INITIAL_RETRY_DELAY_MS;for(;p<MAX_RETRY_COUNT&&(d=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(u)}}}),!(!((r=d?.headers)===null||r===void 0)&&r[X_GOOG_UPLOAD_STATUS_HEADER_FIELD]));)p++,await sleep(g),g=g*DELAY_MULTIPLIER;if(l+=u,((s=d?.headers)===null||s===void 0?void 0:s[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function getBlobStat(t){return{size:t.size,type:t.type}}function sleep(t){return new Promise(e=>setTimeout(e,t))}class BrowserUploader{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlob(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlobToFileSearchStore(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await getBlobStat(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserWebSocketFactory{create(e,n,r){return new BrowserWebSocket(e,n,r)}}class BrowserWebSocket{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GOOGLE_API_KEY_HEADER="x-goog-api-key";class WebAuth{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(GOOGLE_API_KEY_HEADER)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GOOGLE_API_KEY_HEADER,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LANGUAGE_LABEL_PREFIX="gl-node/";class GoogleGenAI{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=getBaseUrl(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new WebAuth(this.apiKey);this.apiClient=new ApiClient({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:LANGUAGE_LABEL_PREFIX+"web",uploader:new BrowserUploader,downloader:new BrowserDownloader}),this.models=new Models(this.apiClient),this.live=new Live(this.apiClient,s,new BrowserWebSocketFactory),this.batches=new Batches(this.apiClient),this.chats=new Chats(this.models,this.apiClient),this.caches=new Caches(this.apiClient),this.files=new Files(this.apiClient),this.operations=new Operations(this.apiClient),this.authTokens=new Tokens(this.apiClient),this.tunings=new Tunings(this.apiClient),this.fileSearchStores=new FileSearchStores(this.apiClient)}}const GEMINI_API_KEY="AIzaSyAnuJq1h4Mhi0rgNhhVN5uxABRjUdlBX44";pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;async function callGeminiApi(t){const n=`
    You are an expert university registrar's assistant. Your task is to parse a raw text dump
    from a degree audit PDF and convert it into a structured JSON object.

    Strictly adhere to the following JSON schema:
    ${JSON.stringify({studentInfo:{name:"string",uin:"string",degreeProgram:"string",major:"string",minor:"string"},progress:{totalCreditsRequired:"number",creditsCompleted:"number",creditsInProgress:"number",creditsRemaining:"number"},categories:[{name:"string",hoursRequired:"number or null",hoursEarned:"number",note:"string or null",completed:"boolean",courses:[{semester:"string",code:"string",title:"string",credits:"number",grade:"string"}]}],completedCourses:[{category:"string",semester:"string",code:"string",title:"string",credits:"number",grade:"string"}],inProgressCourses:[{category:"string",semester:"string",code:"string",title:"string",credits:"number"}],remainingRequirements:[{category:"string",coursesNeeded:"number",courses:[{code:"string",title:"string",credits:"number"}]}]},null,2)}

    RULES:
    1.  **studentInfo**: 
        - Extract the Name, UIN, and the full Program string for 'degreeProgram'.
        - From the 'degreeProgram' string, extract the 'major' (e.g., "Computer Science") and 'minor' (e.g., "Finance"). 
        - If no minor is listed, set 'minor' to "None".

    2.  **progress**: 
        - Find the "Total Degree Hours" section.
        - Extract "_____ hours required" for 'totalCreditsRequired'.
        - Extract "EARNED" for 'creditsCompleted'.
        - Extract "In-Prog" for 'creditsInProgress'.
        - Calculate 'creditsRemaining' (required - completed - inProgress).

    3.  **categories**: 
    - For EACH requirement section in the degree audit (e.g., "University Writing Requirement", "Math Requirement - CS Major", "Analyzing the Natural World", "Free Electives - CS Major", etc.), create a category object.
    - Extract the category 'name' exactly as it appears in the audit.
    - Extract 'hoursRequired' from text like "Six hours required" or "11 hours required".
    - Extract 'hoursEarned' from text like "EARNED: 6.00 HOURS" or "EARNED: 12.00 HOURS".
    - Set 'completed' to **true** if the audit explicitly marks the category as complete (e.g., a green checkmark, "Requirement Complete", or "OK") **or** if hoursEarned  hoursRequired.
    
    -  **Special case  Conditional credit hours:**
    - If the section uses wording such as **may be needed to reach 128 Degree Hours**, do **not** treat the number (e.g., 9) as a fixed 'hoursRequired' value.
    - Instead, set:
        "hoursRequired": null
        "note": "Conditional hours may be required to reach total degree hours."
    - In this case, mark "completed": true if all other program requirements are satisfied, even if this category alone shows fewer earned hours.
    
    - List ALL courses under this category in the 'courses' array, including:
        - 'semester' (e.g., FA21, WS22, FA22, SP23)
        - 'code' (e.g., ENGL 160, MATH 180)
        - 'title' (e.g., Composition I, Calculus I)
        - 'credits' (as a number)
        - 'grade' (A, B, C, D, F, S, CR, or IP for in-progress)

    4.  **completedCourses**: 
        - Find all courses that have a letter grade (A, B, C, D, F) or a status (S, CR). 
        - Each course object MUST include 'category', 'semester', 'code', 'title', 'credits' (as a number), and 'grade'.
        - The 'category' should match the requirement section name (e.g., "University Writing Requirement").
        - Do NOT include courses with grade 'U' or 'IP' or 'W'.

    5.  **inProgressCourses**: 
        - Find all courses marked with "IP" (In Progress).
        - Each course object MUST include 'category', 'semester', 'code', 'title', and 'credits' (as a number).

    6.  6. **remainingRequirements**:
        - Identify all requirement sections that are NOT complete 
        (hoursEarned < hoursRequired, or marked incomplete).

        - For each requirement, extract:
             "category": the exact requirement name
             "coursesNeeded": number of courses/hours still required (if shown)
             "courses": list of acceptable courses for fulfilling the requirement

        - Requirements may list acceptable courses in **two different formats**:
        
        ------------------------------------------------------------
        (A) Full course data present:
            Example: "MATH 210  Calculus III (3 cr)"

            When the audit provides course titles AND/OR credit hours:
                 Extract all fields normally:
                    code: "MATH 210"
                    title: "Calculus III"
                    credits: 3

        ------------------------------------------------------------
        (B) Code-only lists:
            Example: "CS 378,398,407,411,..."

            When NO title or credit information is shown:
                 You MUST still include each course code
                 Use:
                    code: "CS 378"
                    title: null
                    credits: null
                 Do NOT invent title or credit information.

        ------------------------------------------------------------
        Detection Rule:
             If the audit text next to a course contains a title or "(X cr)"
             treat it as Format (A)
             If the audit text is ONLY codes with commas/spaces
             treat it as Format (B)

        - Always split multi-code lists correctly, preserving department prefixes.
        Example:
            "CS 378,398,407"  "CS 378", "CS 398", "CS 407"
        
        - Do not omit or remove course titles when they exist in the audit.
        - Do not remove credit hours when they exist in the audit.

    7.  Return ONLY the raw JSON object. Do not include "\`\`\`json" or any other text.

    8. You MUST respond with ONLY valid JSON. No comments, no explanation, no backticks.

    Here is the degree audit text:
    ---
    ${t}
    ---
    `;try{const s=await new GoogleGenAI({vertexai:!1,apiKey:GEMINI_API_KEY}).models.generateContent({model:"gemini-2.5-pro",contents:[{role:"user",parts:[{text:n}]}],generationConfig:{responseMimeType:"application/json",temperature:.1}});let a=s.response?.candidates?.[0]?.content?.parts?.[0]?.text||s.text;if(!a)throw new Error("No structured text returned from Gemini API.");return a=a.trim(),a.startsWith("```json")?a=a.slice(7):a.startsWith("```")&&(a=a.slice(3)),a.endsWith("```")&&(a=a.slice(0,-3)),a=a.trim(),JSON.parse(a)}catch(r){throw console.error("Error calling Gemini API:",r),new Error("Failed to parse audit text with Gemini API.")}}async function extractTextFromPdf(t){const e=await t.arrayBuffer(),n=await pdfExports.getDocument({data:e}).promise;let r="";console.log(`Extracting ${n.numPages} pages...`);for(let s=1;s<=n.numPages;s++){const d=(await(await n.getPage(s)).getTextContent()).items.map(h=>h.str).join(" ");console.log(`Page ${s} text length:`,d.length),r+=d+`
`}return r}async function parseAuditPDF(t){try{const e=await extractTextFromPdf(t);if(!e||e.trim()==="")throw new Error("No text extracted from PDF.");const n=await callGeminiApi(e);if(!n)throw new Error("Received no data from Gemini API.");return n}catch(e){throw console.error("Error parsing audit PDF:",e),e}}const UploadSuccess=({parsedData:t,onClose:e})=>{if(!t)return null;const{studentInfo:n,completedCourses:r,inProgressCourses:s}=t,a=r?.map(d=>d.code).join(", ")||"None found",l=s?.map(d=>d.code).join(", ")||"None found";return jsxRuntimeExports.jsx("div",{onClick:e,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-lg p-8 rounded-3xl shadow-2xl relative mx-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"serif-title text-3xl font-bold text-[#4C3B6F] mb-2",children:"Audit Uploaded Successfully!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Your UIC Degree Audit has been processed and your progress is now ready to view."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#FAF8F5] border border-gray-200 rounded-xl p-4 mb-6 text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Please Verify Your Details"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-gray-500 text-xs",children:"Name"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:n?.name||"Not found"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-gray-500 text-xs",children:"UIN"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:n?.uin||"Not found"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"block text-gray-500 text-xs",children:"Major"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:n?.major||"Not found"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2 mt-4",children:[jsxRuntimeExports.jsx("span",{className:"block text-gray-500 text-xs",children:"Completed Course Codes"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:a})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"block text-gray-500 text-xs",children:"In-Progress Course Codes"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:l})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-left mb-8 space-y-3 text-gray-600 text-sm",children:[jsxRuntimeExports.jsx("p",{children:"From here, you can:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{className:"text-[#4C3B6F]",children:"Review your degree progress"}),"  see what's completed, in progress, or remaining"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{className:"text-[#4C3B6F]",children:"Sculpt your next semester"})," using your uploaded audit data"]}),jsxRuntimeExports.jsxs("li",{children:["Or ",jsxRuntimeExports.jsx("strong",{className:"text-[#4C3B6F]",children:"Ask the AI Asisstant"})," to find courses that interest you"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-4",children:[jsxRuntimeExports.jsx(Link,{to:"/audit",className:"bg-[#f0e5d7] hover:bg-[#e9dccb] text-[#4C3B6F] rounded-full p-3 py-2 text-sm transition-transform transform hover:scale-110 shadow-lg",children:"Re-upload Audit"}),jsxRuntimeExports.jsx(Link,{to:"/dashboard",className:"bg-[#4C3B6F] hover:bg-[#392d57] text-white rounded-full p-3 transition-transform transform hover:scale-110 shadow-lg",title:"Go to Dashboard",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})})]})]})})};function Audit(){const[t,e]=reactExports.useState("idle"),[n,r]=reactExports.useState(""),[s,a]=reactExports.useState(""),[l,d]=reactExports.useState(null),[h,u]=reactExports.useState(!1);reactExports.useEffect(()=>{const k=localStorage.getItem("auditFileName"),N=localStorage.getItem("parsedAuditData");k&&N&&(a(k),d(JSON.parse(N)),console.log("Audit: ",N),e("success"))},[]);const f=async k=>{if(!k||k.type!=="application/pdf"){r("Please upload a valid PDF file."),e("error");return}try{e("processing"),r("");const N=await parseAuditPDF(k);console.log(" Audit parsed successfully:",N),a(k.name),localStorage.setItem("auditFileName",k.name),d(N),localStorage.setItem("parsedAuditData",JSON.stringify(N)),e("success"),u(!0)}catch(N){console.error(" Audit parsing failed:",N),r("An error occurred while processing the file."),e("error")}},p=k=>k.preventDefault(),g=k=>{k.preventDefault(),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(f(k.dataTransfer.files[0]),k.dataTransfer.clearData())},y=()=>{(t==="idle"||t==="error")&&document.getElementById("fileInput").click()},x=k=>{k.target.files&&k.target.files.length>0&&f(k.target.files[0])},S=()=>{localStorage.removeItem("auditFileName"),localStorage.removeItem("parsedAuditData"),e("idle"),a(""),r(""),u(!1),d(null),window.location.reload()},w=()=>{switch(t){case"processing":return jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-500",children:"Processing Audit..."});case"success":return jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-green-600",children:"Upload Successful!"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1 truncate",children:s}),jsxRuntimeExports.jsx("button",{onClick:k=>{k.stopPropagation(),S()},className:"mt-4 text-sm font-semibold text-red-600 hover:underline z-20 relative",children:"Remove & Upload Different File"})]});case"error":return jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-red-600",children:"Error"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n}),jsxRuntimeExports.jsx("button",{onClick:k=>{k.stopPropagation(),S()},className:"mt-4 text-sm font-semibold text-blue-600 hover:underline z-20 relative",children:"Try Again"})]});default:return jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("svg",{className:"mx-auto h-12 w-12 text-purple-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-lg",children:"Drag and drop file here"}),jsxRuntimeExports.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["or ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-purple-700",children:"Browse"})]})]})}};return jsxRuntimeExports.jsxs(Layout,{children:[h&&l&&jsxRuntimeExports.jsx(UploadSuccess,{parsedData:l,onClose:()=>u(!1)}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"serif-title text-5xl lg:text-7xl font-bold brand-purple leading-tight mb-4",children:["Start sculpting ",jsxRuntimeExports.jsx("br",{})," your path"]}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl text-gray-500 mb-10",children:"Upload your UIC Degree Audit PDF"}),jsxRuntimeExports.jsx("div",{className:"drop-zone rounded-xl p-10 md:p-16 flex flex-col items-center justify-center cursor-pointer",onClick:y,onDragOver:p,onDrop:g,children:w()}),jsxRuntimeExports.jsx("input",{type:"file",id:"fileInput",className:"hidden",accept:".pdf",onChange:x})]})}),l&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-4",children:jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 bg-[#4C3B6F] hover:bg-[#392d57] text-white px-4 py-2 rounded-full shadow-md transition-transform transform hover:scale-105",onClick:()=>u(!0),children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 6h.01M12 3a9 9 0 110 18 9 9 0 010-18z"})}),"View Parsed Info"]})})]})}const CourseItem=React.memo(({term:t,code:e,credits:n,grade:r,title:s})=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-center border-b border-gray-200 py-3 text-gray-800 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-8 items-center",children:[jsxRuntimeExports.jsx("span",{className:"w-16 font-medium",children:t}),jsxRuntimeExports.jsx("span",{className:"w-20 font-medium",children:e}),jsxRuntimeExports.jsx("span",{className:"w-12",children:n.toFixed(2)}),jsxRuntimeExports.jsx("span",{className:`w-8 font-semibold ${r==="IP"?"text-blue-500":"text-gray-700"}`,children:r})]}),jsxRuntimeExports.jsx("span",{className:"flex-1 italic truncate ml-4",children:s})]})),CourseListHeader=()=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-center border-b-2 border-gray-400 pb-2 text-gray-500 text-xs font-bold uppercase tracking-wider",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-8 items-center",children:[jsxRuntimeExports.jsx("span",{className:"w-16",children:"Term"}),jsxRuntimeExports.jsx("span",{className:"w-20",children:"Code"}),jsxRuntimeExports.jsx("span",{className:"w-12",children:"Credits"}),jsxRuntimeExports.jsx("span",{className:"w-8",children:"Grade"})]}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-center italic truncate ml-4",children:"Title"})]}),sortByTerm=(t,e)=>{const n={WS:0,SP:1,SU:2,FA:3},r=s=>{if(!s)return 0;const a=s.match(/(WS|SP|SU|FA)(\d+)/i);if(!a)return 0;const[,l,d]=a;return parseInt(`20${d}`)*10+n[l.toUpperCase()]};return r(t.semester)-r(e.semester)};function CompletedView({data:t}){const e=reactExports.useMemo(()=>{const l={};return(t&&t.completedCourses?t.completedCourses:[]).forEach(d=>{const h=d.category||"Uncategorized";l[h]||(l[h]=[]),l[h].push(d)}),Object.entries(l).map(([d,h])=>({category:d,courses:h.sort(sortByTerm)}))},[t]),[n,r]=reactExports.useState(0),s=e.length,a=e[n];return e.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"No completed courses available."}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#4C3B6F]",children:"Completed"}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("h3",{className:"font-semibold text-[#4C3B6F] mb-4",children:a.category})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow p-4 max-h-[350px] overflow-y-auto",children:[jsxRuntimeExports.jsx(CourseListHeader,{}),a.courses.map((l,d)=>jsxRuntimeExports.jsx(CourseItem,{term:l.semester||"N/A",code:l.code||"N/A",credits:parseFloat(l.credits)||0,grade:l.grade||"-",title:l.title||""},d))]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>r(l=>Math.max(0,l-1)),disabled:n===0,className:`px-4 py-2 rounded-md ${n===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#4C3B6F] text-white hover:bg-[#392d57]"}`,children:""}),jsxRuntimeExports.jsxs("span",{className:"text-gray-600 font-medium",children:[n+1," / ",s]}),jsxRuntimeExports.jsx("button",{onClick:()=>r(l=>Math.min(s-1,l+1)),disabled:n===s-1,className:`px-4 py-2 rounded-md ${n===s-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#4C3B6F] text-white hover:bg-[#392d57]"}`,children:""})]})]})}function InProgressView({data:t}){const e=t?.inProgressCourses||[];return e.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center",children:"No courses in progress."}):jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4 text-[#9A8FB8]",children:"In Progress"}),jsxRuntimeExports.jsx(CourseListHeader,{}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-2",children:e.map((n,r)=>jsxRuntimeExports.jsx(CourseItem,{term:n.semester||"N/A",code:n.code||"N/A",credits:parseFloat(n.credits)||0,grade:"IP",title:n.title||""},r))})]})}function RemainingView({data:t}){const e=t?.remainingRequirements||[];return e.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center",children:"All requirements complete  great job!"}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-600",children:"Remaining Requirements"}),jsxRuntimeExports.jsx("ul",{className:"space-y-4",children:e.map((n,r)=>jsxRuntimeExports.jsxs("li",{className:"border p-3 rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:n.category}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Courses needed: ",n.coursesNeeded]}),n.courses?.length>0&&jsxRuntimeExports.jsx("ul",{className:"ml-4 mt-2 list-disc text-gray-700 text-sm",children:n.courses.map((s,a)=>jsxRuntimeExports.jsxs("li",{children:[s.code,"  ",s.title," (",s.credits," cr)"]},a))})]},r))})]})}function Dashboard(){const[t,e]=reactExports.useState(null),[n,r]=reactExports.useState(null),s=useNavigate();if(reactExports.useEffect(()=>{const f=localStorage.getItem("parsedAuditData");f?r(JSON.parse(f)):s("/audit")},[s]),!n)return jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("div",{children:"Loading..."})});const a=n.progress,l=a.totalCreditsRequired,d=a.creditsCompleted/l*100,h=a.creditsInProgress/l*100,u=f=>{e(p=>p===f?null:f)};return jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-2xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"serif-title text-4xl font-bold brand-purple mb-10",children:"Your Progress Toward Graduation"}),jsxRuntimeExports.jsx("span",{children:"Click on each section to  get more information"}),jsxRuntimeExports.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-8 flex overflow-hidden cursor-pointer shadow-inner mb-4 mt-4 relative text-white font-semibold text-sm",children:[jsxRuntimeExports.jsx("div",{className:`h-full flex items-center justify-center transition ${t==="completed"?"ring-4 ring-[#4C3B6F]/50":""} bg-[#4C3B6F] hover:brightness-110`,style:{flexBasis:`${d}%`},onClick:()=>u("completed"),children:a.creditsCompleted}),jsxRuntimeExports.jsx("div",{className:`h-full flex items-center justify-center transition ${t==="inProgress"?"ring-4 ring-[#9A8FB8]/50":""} bg-[#9A8FB8] hover:brightness-110`,style:{flexBasis:`${h}%`},onClick:()=>u("inProgress"),children:a.creditsInProgress}),jsxRuntimeExports.jsx("div",{className:`flex-grow h-full flex items-center justify-center transition ${t==="remaining"?"ring-4 ring-gray-400/50":""} bg-gray-300 text-gray-700 hover:brightness-110`,onClick:()=>u("remaining"),children:a.creditsRemaining})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-6 mb-8 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center cursor-pointer hover:font-bold transition ${t==="completed"?"scale-105 font-semibold":""}`,onClick:()=>u("completed"),children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-[#4C3B6F]"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Completed"})]}),jsxRuntimeExports.jsxs("div",{className:`flex items-center cursor-pointer hover:font-bold transition ${t==="inProgress"?"scale-105 font-semibold":""}`,onClick:()=>u("inProgress"),children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-[#9A8FB8]"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"In Progress"})]}),jsxRuntimeExports.jsxs("div",{className:`flex items-center cursor-pointer hover:font-bold transition ${t==="remaining"?"scale-105 font-semibold":""}`,onClick:()=>u("remaining"),children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-gray-300"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Remaining"})]})]}),!t&&jsxRuntimeExports.jsxs("div",{className:"mt-10 space-y-4 text-gray-600",children:[jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl leading-relaxed",children:"Click each category to get more information."}),jsxRuntimeExports.jsx("p",{className:"text-lg lg:text-xl leading-relaxed",children:"Sculpt your semester, or ask your AI assistant what you can do next!"})]}),t&&jsxRuntimeExports.jsxs("div",{className:"text-left bg-white p-6 rounded-xl shadow transition-all duration-300",children:[t==="completed"&&jsxRuntimeExports.jsx(CompletedView,{data:n}),t==="inProgress"&&jsxRuntimeExports.jsx(InProgressView,{data:n}),t==="remaining"&&jsxRuntimeExports.jsx(RemainingView,{data:n})]})]})})})}function AIAssistant(){const[t,e]=reactExports.useState(""),[n,r]=reactExports.useState([]),[s,a]=reactExports.useState(!1),[l,d]=reactExports.useState(""),[h,u]=reactExports.useState(!1),f="https://schedule-sculptor-rag-811303121618.us-central1.run.app//query",p=async x=>{if(x.preventDefault(),!t.trim()){d("Please enter a question");return}a(!0),d(""),u(!0);try{console.log(" [Frontend] Sending request to API:",{url:f,query:t,timestamp:new Date().toISOString()});const S={query:t,top_courses:8};console.log(" [Frontend] Request body:",JSON.stringify(S,null,2));const w=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});console.log(" [Frontend] Response status:",w.status,w.statusText),console.log(" [Frontend] Response headers:",Object.fromEntries(w.headers.entries()));const k=await w.text();console.log(" [Frontend] Raw response text:",k);let N;try{N=JSON.parse(k),console.log(" [Frontend] Parsed response data:",N)}catch(R){throw console.error(" [Frontend] JSON parse error:",R),new Error("Invalid JSON response from server")}if(!w.ok)throw console.error(" [Frontend] API error response:",{status:w.status,statusText:w.statusText,error:N.error}),w.status===500?new Error("Server error - please try again later"):w.status===400?new Error("Invalid request - please check your query"):new Error(`Request failed with status: ${w.status}`);if(N.error)throw console.error(" [Frontend] API returned error:",N.error),new Error(N.error);console.log(" [Frontend] Successfully received results:",{resultCount:N.results?.length||0,results:N.results}),r(N.results||[])}catch(S){console.error(" [Frontend] Search failed:",{error:S,message:S.message,stack:S.stack}),d(`Unable to connect to the AI Assistant: ${S.message}`)}finally{console.log(" [Frontend] Search completed, loading set to false"),a(!1)}},g=["Courses about machine learning","Classes with no prerequisites","Natural language processing courses","Data visualization electives","Intro to computer science"],y=x=>{e(x)};return jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsxs("div",{className:"py-8 md:py-12",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-10",children:[jsxRuntimeExports.jsx("h1",{className:"serif-title text-4xl md:text-5xl font-bold brand-purple mb-4",children:"AI Course Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Ask me anything about courses. I'll help you find the perfect classes based on your interests."})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto mb-8",children:[jsxRuntimeExports.jsxs("form",{onSubmit:p,className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",value:t,onChange:x=>e(x.target.value),placeholder:"e.g., 'Courses about data science' or 'Classes with no prerequisites'",className:"w-full px-6 py-4 text-lg border-2 border-purple-200 rounded-lg focus:outline-none focus:border-purple-500 transition-colors bg-white",disabled:s}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:s,className:"absolute right-2 top-1/2 transform -translate-y-1/2 px-6 py-2 bg-purple-700 text-white rounded-lg hover:bg-purple-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:s?jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):"Search"})]}),!h&&jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Try asking:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((x,S)=>jsxRuntimeExports.jsx("button",{onClick:()=>y(x),className:"px-3 py-1 text-sm bg-purple-50 text-purple-700 rounded-full hover:bg-purple-100 transition-colors",children:x},S))})]})]}),l&&jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-red-700",children:l}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 mt-2",children:"If this continues, please check your internet connection and try again."})]}),h&&!s&&n.length>0&&jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"serif-title text-2xl font-semibold brand-purple mb-2",children:["Found ",n.length," ",n.length===1?"course":"courses"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Here are the most relevant courses based on your query."})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:n.map((x,S)=>jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow animate-fade-in",style:{animationDelay:`${S*.1}s`},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold brand-purple",children:[x.course_code," ",x.course_code&&""," ",x.class_name]}),x.subject&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1",children:x.subject})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center bg-purple-50 px-3 py-1 rounded-full",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-purple-600 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-purple-700 font-medium",children:[(x.score*100).toFixed(0),"%"]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 leading-relaxed",children:x.description})]},S))})]}),h&&!s&&n.length===0&&!l&&jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto text-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl font-semibold brand-purple mb-2",children:"No courses found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Try rephrasing your question or using different keywords."}),jsxRuntimeExports.jsx("button",{onClick:()=>{e(""),u(!1),r([])},className:"px-6 py-2 bg-purple-700 text-white rounded-lg hover:bg-purple-800 transition-colors",children:"Try Another Search"})]}),!h&&!s&&jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-xl font-semibold brand-purple mb-2",children:"Smart Search"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Ask questions in natural language and get relevant course recommendations instantly."})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-xl font-semibold brand-purple mb-2",children:"Detailed Info"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Get comprehensive course descriptions, prerequisites, and requirements."})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),jsxRuntimeExports.jsx("h3",{className:"serif-title text-xl font-semibold brand-purple mb-2",children:"AI-Powered"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Powered by advanced retrieval technology to find the best matches for you."})]})]})})]})})}function parseCSV(t){const e=t.trim().split(`
`),n=e[0].split(",").map(s=>s.trim().replace(/"/g,"")),r=[];for(let s=1;s<e.length;s++){const a={},l=e[s].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(l.length!==n.length){console.warn("Skipping malformed CSV line:",e[s]);continue}for(let d=0;d<n.length;d++){const h=n[d],u=(l[d]||"").trim().replace(/"/g,"");a[h]=u}r.push(a)}return r}const DataContext=reactExports.createContext(null);function DataProvider({children:t}){const[e,n]=reactExports.useState(null),[r,s]=reactExports.useState(null),[a,l]=reactExports.useState(!0);reactExports.useEffect(()=>{async function h(){try{const u=localStorage.getItem("parsedAuditData");u&&n(JSON.parse(u));const f=await fetch("/Schedule-Sculptor/chunks.csv");if(!f.ok)throw new Error("Failed to fetch course catalog (chunks.csv)");const p=await f.text(),y=parseCSV(p).map(x=>{const S=x.text.match(/Description: (.*)/),w=S?S[1]:x.text,k="metadata.prereq_codes",N=x[k]&&x[k]!=="[]"?x[k].replace(/[\[\]']/g,"").split(" ").filter(Boolean):[];return{code:x["metadata.course_code"],title:x["metadata.class_name"],subject:x["metadata.subject_code"],credits:parseFloat(x["metadata.credits_max"])||3,prereqs:N,description:w}});s(y)}catch(u){console.error("Error loading app data:",u)}finally{l(!1)}}h()},[]);const d={parsedAudit:e,courseCatalog:r,isLoading:a};return jsxRuntimeExports.jsx(DataContext.Provider,{value:d,children:a?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#FAF8F5]",children:jsxRuntimeExports.jsx("p",{className:"text-lg serif-title",children:"Loading application data..."})}):t})}const useData=()=>{const t=reactExports.useContext(DataContext);if(t===null)throw new Error("useData must be used within a DataProvider");return t};var SchemaType;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(SchemaType||(SchemaType={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ExecutableCodeLanguage;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(ExecutableCodeLanguage||(ExecutableCodeLanguage={}));var Outcome;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Outcome||(Outcome={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const POSSIBLE_ROLES=["user","model","function","system"];var HarmCategory;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(HarmCategory||(HarmCategory={}));var HarmBlockThreshold;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HarmBlockThreshold||(HarmBlockThreshold={}));var HarmProbability;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var BlockReason;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(BlockReason||(BlockReason={}));var FinishReason;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(FinishReason||(FinishReason={}));var TaskType;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(TaskType||(TaskType={}));var FunctionCallingMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(FunctionCallingMode||(FunctionCallingMode={}));var DynamicRetrievalMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalMode||(DynamicRetrievalMode={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAIError extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class GoogleGenerativeAIResponseError extends GoogleGenerativeAIError{constructor(e,n){super(e),this.response=n}}class GoogleGenerativeAIFetchError extends GoogleGenerativeAIError{constructor(e,n,r,s){super(e),this.status=n,this.statusText=r,this.errorDetails=s}}class GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError{}class GoogleGenerativeAIAbortError extends GoogleGenerativeAIError{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_BASE_URL="https://generativelanguage.googleapis.com",DEFAULT_API_VERSION="v1beta",PACKAGE_VERSION="0.24.1",PACKAGE_LOG_HEADER="genai-js";var Task;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Task||(Task={}));class RequestUrl{constructor(e,n,r,s,a){this.model=e,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=a}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||DEFAULT_API_VERSION;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||DEFAULT_BASE_URL}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function getClientHeaders(t){const e=[];return t?.apiClient&&e.push(t.apiClient),e.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`),e.join(" ")}async function getHeaders(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",getClientHeaders(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,a]of r.entries()){if(s==="x-goog-api-key")throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new GoogleGenerativeAIRequestInputError(`Header name ${s} can only be set using the apiClient field`);n.append(s,a)}}return n}async function constructModelRequest(t,e,n,r,s,a){const l=new RequestUrl(t,e,n,r,a);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},buildFetchOptions(a)),{method:"POST",headers:await getHeaders(l),body:s})}}async function makeModelRequest(t,e,n,r,s,a={},l=fetch){const{url:d,fetchOptions:h}=await constructModelRequest(t,e,n,r,s,a);return makeRequest(d,h,l)}async function makeRequest(t,e,n=fetch){let r;try{r=await n(t,e)}catch(s){handleResponseError(s,t)}return r.ok||await handleResponseNotOk(r,t),r}function handleResponseError(t,e){let n=t;throw n.name==="AbortError"?(n=new GoogleGenerativeAIAbortError(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof GoogleGenerativeAIFetchError||t instanceof GoogleGenerativeAIRequestInputError||(n=new GoogleGenerativeAIError(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function handleResponseNotOk(t,e){let n="",r;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new GoogleGenerativeAIFetchError(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function buildFetchOptions(t){const e={};if(t?.signal!==void 0||t?.timeout>=0){const n=new AbortController;t?.timeout>=0&&setTimeout(()=>n.abort(),t.timeout),t?.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function addHelpers(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return getText(t)}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),getFunctionCalls(t)[0]}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return getFunctionCalls(t)}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(t)}`,t)},t}function getText(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const l of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.text&&a.push(l.text),l.executableCode&&a.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&a.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function getFunctionCalls(t){var e,n,r,s;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const l of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)l.functionCall&&a.push(l.functionCall);if(a.length>0)return a}const badFinishReasons=[FinishReason.RECITATION,FinishReason.SAFETY,FinishReason.LANGUAGE];function hadBadFinishReason(t){return!!t.finishReason&&badFinishReasons.includes(t.finishReason)}function formatBlockErrorMessage(t){var e,n,r;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];hadBadFinishReason(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,a=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(g){r[g]&&(s[g]=function(y){return new Promise(function(x,S){a.push([g,y,x,S])>1||d(g,y)})})}function d(g,y){try{h(r[g](y))}catch(x){p(a[0][3],x)}}function h(g){g.value instanceof __await?Promise.resolve(g.value.v).then(u,f):p(a[0][2],g)}function u(g){d("next",g)}function f(g){d("throw",g)}function p(g,y){g(y),a.shift(),a.length&&d(a[0][0],a[0][1])}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const responseLineRE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function processStream(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=getResponseStream(e),[r,s]=n.tee();return{stream:generateResponseSequence(r),response:getResponsePromise(s)}}async function getResponsePromise(t){const e=[],n=t.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return addHelpers(aggregateResponses(e));e.push(s)}}function generateResponseSequence(t){return __asyncGenerator(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:s}=yield __await(n.read());if(s)break;yield yield __await(addHelpers(r))}})}function getResponseStream(t){const e=t.getReader();return new ReadableStream({start(r){let s="";return a();function a(){return e.read().then(({value:l,done:d})=>{if(d){if(s.trim()){r.error(new GoogleGenerativeAIError("Failed to parse stream"));return}r.close();return}s+=l;let h=s.match(responseLineRE),u;for(;h;){try{u=JSON.parse(h[1])}catch{r.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${h[1]}"`));return}r.enqueue(u),s=s.substring(h[0].length),h=s.match(responseLineRE)}return a()}).catch(l=>{let d=l;throw d.stack=l.stack,d.name==="AbortError"?d=new GoogleGenerativeAIAbortError("Request aborted when reading from the stream"):d=new GoogleGenerativeAIError("Error reading from the stream"),d})}}})}function aggregateResponses(t){const e=t[t.length-1],n={promptFeedback:e?.promptFeedback};for(const r of t){if(r.candidates){let s=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=a.citationMetadata,n.candidates[s].groundingMetadata=a.groundingMetadata,n.candidates[s].finishReason=a.finishReason,n.candidates[s].finishMessage=a.finishMessage,n.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[s].content||(n.candidates[s].content={role:a.content.role||"user",parts:[]});const l={};for(const d of a.content.parts)d.text&&(l.text=d.text),d.functionCall&&(l.functionCall=d.functionCall),d.executableCode&&(l.executableCode=d.executableCode),d.codeExecutionResult&&(l.codeExecutionResult=d.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),n.candidates[s].content.parts.push(l)}s++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateContentStream(t,e,n,r){const s=await makeModelRequest(e,Task.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return processStream(s)}async function generateContent(t,e,n,r){const a=await(await makeModelRequest(e,Task.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:addHelpers(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function formatSystemInstruction(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function formatNewContent(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return assignRoleToPartsAndValidateSendMessageRequest(e)}function assignRoleToPartsAndValidateSendMessageRequest(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),s=!0):(e.parts.push(a),r=!0);if(r&&s)throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new GoogleGenerativeAIError("No content is provided for sending chat message.");return r?e:n}function formatCountTokensInput(t,e){var n;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(s)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const a=formatNewContent(t);r.contents=[a]}return{generateContentRequest:r}}function formatGenerateContentInput(t){let e;return t.contents?e=t:e={contents:[formatNewContent(t)]},t.systemInstruction&&(e.systemInstruction=formatSystemInstruction(t.systemInstruction)),e}function formatEmbedContentInput(t){return typeof t=="string"||Array.isArray(t)?{content:formatNewContent(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_PART_FIELDS=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],VALID_PARTS_PER_ROLE={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function validateChatHistory(t){let e=!1;for(const n of t){const{role:r,parts:s}=n;if(!e&&r!=="user")throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${r}`);if(!POSSIBLE_ROLES.includes(r))throw new GoogleGenerativeAIError(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);if(!Array.isArray(s))throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new GoogleGenerativeAIError("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of s)for(const h of VALID_PART_FIELDS)h in d&&(a[h]+=1);const l=VALID_PARTS_PER_ROLE[r];for(const d of VALID_PART_FIELDS)if(!l.includes(d)&&a[d]>0)throw new GoogleGenerativeAIError(`Content with role '${r}' can't contain '${d}' part`);e=!0}}function isValidResponse(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SILENT_ERROR="SILENT_ERROR";class ChatSession{constructor(e,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(validateChatHistory(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,s,a,l,d,h;await this._sendPromise;const u=formatNewContent(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),n);let g;return this._sendPromise=this._sendPromise.then(()=>generateContent(this._apiKey,this.model,f,p)).then(y=>{var x;if(isValidResponse(y.response)){this._history.push(u);const S=Object.assign({parts:[],role:"model"},(x=y.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(S)}else{const S=formatBlockErrorMessage(y.response);S&&console.warn(`sendMessage() was unsuccessful. ${S}. Inspect response object for details.`)}g=y}).catch(y=>{throw this._sendPromise=Promise.resolve(),y}),await this._sendPromise,g}async sendMessageStream(e,n={}){var r,s,a,l,d,h;await this._sendPromise;const u=formatNewContent(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,u]},p=Object.assign(Object.assign({},this._requestOptions),n),g=generateContentStream(this._apiKey,this.model,f,p);return this._sendPromise=this._sendPromise.then(()=>g).catch(y=>{throw new Error(SILENT_ERROR)}).then(y=>y.response).then(y=>{if(isValidResponse(y)){this._history.push(u);const x=Object.assign({},y.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=formatBlockErrorMessage(y);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(y=>{y.message!==SILENT_ERROR&&console.error(y)}),g}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function countTokens(t,e,n,r){return(await makeModelRequest(e,Task.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function embedContent(t,e,n,r){return(await makeModelRequest(e,Task.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function batchEmbedContents(t,e,n,r){const s=n.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await makeModelRequest(e,Task.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GenerativeModel{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=formatSystemInstruction(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const s=formatGenerateContentInput(e),a=Object.assign(Object.assign({},this._requestOptions),n);return generateContent(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}async generateContentStream(e,n={}){var r;const s=formatGenerateContentInput(e),a=Object.assign(Object.assign({},this._requestOptions),n);return generateContentStream(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),a)}startChat(e){var n;return new ChatSession(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=formatCountTokensInput(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return countTokens(this.apiKey,this.model,r,s)}async embedContent(e,n={}){const r=formatEmbedContentInput(e),s=Object.assign(Object.assign({},this._requestOptions),n);return embedContent(this.apiKey,this.model,r,s)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return batchEmbedContents(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAI{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new GoogleGenerativeAIError("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new GenerativeModel(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");if(!e.model)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const l of s)if(n?.[l]&&e[l]&&n?.[l]!==e[l]){if(l==="model"){const d=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,h=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===h)continue}throw new GoogleGenerativeAIRequestInputError(`Different value for "${l}" specified in modelParams (${n[l]}) and cachedContent (${e[l]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new GenerativeModel(this.apiKey,a,r)}}const genAI=new GoogleGenerativeAI("AIzaSyAnuJq1h4Mhi0rgNhhVN5uxABRjUdlBX44");function generatePlan(t,e,n){const{requirements:r,creditLoad:s}=t,a=(e?.completedCourses||[]).map(y=>y.code),l=(e?.inProgressCourses||[]).map(y=>y.code),d=new Set([...a,...l]),h={};(e?.remainingRequirements||[]).forEach(y=>{r.includes(y.category)&&(h[y.category]={needed:y.coursesNeeded||1,courseCodes:y.courses.map(x=>x.code)})});function u(y){return n.find(x=>x.code===y)||null}const f=[];let p=0;const g=Math.max(...s);for(const[y,x]of Object.entries(h)){const{needed:S,courseCodes:w}=x,k=[];for(const B of w){if(d.has(B))continue;const q=u(B);!q||!checkPrerequisites(q.prereqs,a)||k.push({...q,category:y})}const N=k.sort(()=>.5-Math.random());let R=0;for(const B of N){if(R>=S||p+B.credits>g)break;f.push(B),p+=B.credits,R++}}return{plan:f,totalCredits:p,criteria:{selectedRequirements:r,creditLoad:g,excludedCourses:[...d]}}}function checkPrerequisites(t,e){return!t||t.length===0?!0:t.every(n=>e.includes(n))}async function generateRationale(t,e,n){try{const r=genAI.getGenerativeModel({model:"gemini-2.5-flash"}),s=`
      You are an empathetic and strategic Academic Advisor.
      
      CONTEXT:
      - The student has generated a schedule for the upcoming semester.
      - Degree Context: ${JSON.stringify(n?.remainingRequirements||"Unknown")}.
      - Preferences: Target Credit Load: ${e.creditLoad}, Difficulty: ${e.difficulty}.
      - Requirements Focused On: ${e.requirements.join(", ")}.
      
      THE PROPOSED SCHEDULE:
      ${t.plan.map(d=>`- ${d.code} (${d.title}): ${d.credits} credits. [Fulfills: ${d.category}]`).join(`
`)}

      TASK:
      Generate a rationale for this schedule using the STRICT MARKDOWN TEMPLATE below. 
      Do not include any text outside of this structure.

      STRICT OUTPUT STRUCTURE:
      
      # Why Were These Courses Chosen?
      
      [Paragraph: Write a 1-2 sentence overview based on their degree audit context and progress.]
      
      [Unordered List:
      - **Course Code**: A short explanation of strategic value and how it fits their preferences.
      - **Course Code**: A short explanation of strategic value and how it fits their preferences.
      ]
      
      [Paragraph: A concluding sentence about the workload balance (e.g., "This mix allows you to focus on...")]
      
      TONE: Professional, encouraging, and clear.
    `;return(await(await r.generateContent(s)).response).text()}catch(r){return console.error("Error generating rationale:",r),`# Why Were These Courses Chosen?

We couldn't generate a personalized explanation at this moment, but these courses were selected to maximize your progress toward your degree requirements while adhering to your credit limit.`}}const RequirementCheckbox=({id:t,label:e,isChecked:n,onChange:r,disabled:s})=>jsxRuntimeExports.jsxs("label",{htmlFor:t,className:`flex items-center space-x-3 ${s?"cursor-not-allowed":"cursor-pointer"}`,children:[jsxRuntimeExports.jsx("input",{id:t,type:"checkbox",className:"h-5 w-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500",checked:n,onChange:r,disabled:s}),jsxRuntimeExports.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-700"}`,children:e})]}),StarRating=({selected:t,onChange:e})=>{const n=[{label:"Very Easy",value:"Very Easy"},{label:"Easy",value:"Easy"},{label:"Moderate",value:"Moderate"},{label:"Challenging",value:"Challenging"},{label:"Intensive",value:"Intensive"}];return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center space-x-4",children:n.map(r=>jsxRuntimeExports.jsxs("label",{className:"flex flex-col items-center cursor-pointer",children:[jsxRuntimeExports.jsx("svg",{className:`w-8 h-8 ${t===r.value?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",onClick:()=>e(r.value),children:jsxRuntimeExports.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),jsxRuntimeExports.jsx("span",{className:`text-xs font-medium mt-1 ${t===r.value?"text-[#4C3B6F]":"text-gray-500"}`,children:r.label})]},r.value))})};function SculptForm({remainingRequirements:t,initialPrefs:e,onSubmit:n,isGenerating:r,hasAuditData:s}){const[a,l]=reactExports.useState(e.requirements),[d,h]=reactExports.useState(e.creditLoad),[u,f]=reactExports.useState(e.difficulty),p=S=>{l(w=>w.includes(S)?w.filter(k=>k!==S):[...w,S])},g=S=>{h(w=>w.includes(S)?w.filter(k=>k!==S):[...w,S])},y=S=>{S.preventDefault(),n({requirements:a,creditLoad:d,difficulty:u})},x=React.useMemo(()=>{const S=t.map(k=>k.category),w=["General Education","Major Core","Technical Electives","Free Electives","Concentration Courses"];return[...new Set([...S,...w])]},[t]);return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-3xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"serif-title text-2xl lg:text-5xl font-bold brand-purple leading-tight mb-4",children:"Sculpt your Semester"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-500 mb-6",children:"Let's plan your next semester based off of your needs."}),jsxRuntimeExports.jsxs("form",{onSubmit:y,className:"space-y-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-around",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl brand-purple mb-4",children:"Step 1: Requirements to fulfill"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start space-y-4 max-w-xs mx-auto",children:[!s&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm",children:"Upload your audit to see remaining requirements."}),x.map((S,w)=>jsxRuntimeExports.jsx(RequirementCheckbox,{id:`req-${w}`,label:S,isChecked:a.includes(S),onChange:()=>p(S),disabled:!s},w))]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 md:mt-0",children:[jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl brand-purple mb-4",children:"Step 2: Your Preferences"}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-700 mb-3",children:"Credit Load:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-start space-y-3 max-w-xs mx-auto",children:[{label:"12 Credits",value:12},{label:"13 Credits",value:13},{label:"14 Credits",value:14},{label:"15 Credits",value:15},{label:"16 Credits",value:16},{label:"17 Credits",value:17},{label:"< 18 Credits (Overload)",value:18}].map((S,w)=>jsxRuntimeExports.jsx(RequirementCheckbox,{id:`credit-${w}`,label:S.label,isChecked:d.includes(S.value),onChange:()=>g(S.value)},S.value))}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-700 mt-8 mb-3",children:"Course Difficulty:"}),jsxRuntimeExports.jsx(StarRating,{selected:u,onChange:f})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"serif-title text-2xl brand-purple mb-4",children:"Step 3: Generate your Schedule!"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:r||!s||a.length===0||d.length===0,className:"px-8 py-3 bg-[#4C3B6F] text-white font-bold rounded-full hover:bg-[#392d57] disabled:bg-gray-300 transition-all transform hover:scale-105",children:r?"Generating...":"Generate My Semester Plan"})]})]})]})}function ok$1(){}function unreachable(){}function stringify$1(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name(t,e){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(t)}const re=/[ \t\n\f\r]/g;function whitespace(t){return typeof t=="object"?t.type==="text"?empty$1(t.value):!1:empty$1(t)}function empty$1(t){return t.replace(re,"")===""}class Schema{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Schema(n,r,e)}function normalize$1(t){return t.toLowerCase()}class Info{constructor(e,n){this.attribute=n,this.property=e}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,n,r,s){let a=-1;if(super(e,n),mark(this,"space",s),typeof r=="number")for(;++a<checks.length;){const l=checks[a];mark(this,checks[a],(r&types[l])===types[l])}}}DefinedInfo.prototype.defined=!0;function mark(t,e,n){n&&(t[e]=n)}function create(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new DefinedInfo(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[normalize$1(r)]=r,n[normalize$1(a.attribute)]=r}return new Schema(e,n,t.space)}const aria=create({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function caseSensitiveTransform(t,e){return e in t?t[e]:e}function caseInsensitiveTransform(t,e){return caseSensitiveTransform(t,e.toLowerCase())}const html$2=create({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:overloadedBoolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),xmlns=create({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(t,e){const n=normalize$1(e);let r=e,s=Info;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(dash,camelcase);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!dash.test(a)){let l=a.replace(cap$1,kebab);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=DefinedInfo}return new s(r,e)}function kebab(t){return"-"+t.toLowerCase()}function camelcase(t){return t.charAt(1).toUpperCase()}const html$1=merge([aria,html$2,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(t){return t.join(" ").trim()}var cjs$2={},cjs$1,hasRequiredCjs$2;function requireCjs$2(){if(hasRequiredCjs$2)return cjs$1;hasRequiredCjs$2=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,d=/^\s+|\s+$/g,h=`
`,u="/",f="*",p="",g="comment",y="declaration";function x(w,k){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];k=k||{};var N=1,R=1;function B($){var J=$.match(e);J&&(N+=J.length);var Q=$.lastIndexOf(h);R=~Q?$.length-Q:R+$.length}function q(){var $={line:N,column:R};return function(J){return J.position=new F($),b(),J}}function F($){this.start=$,this.end={line:N,column:R},this.source=k.source}F.prototype.content=w;function z($){var J=new Error(k.source+":"+N+":"+R+": "+$);if(J.reason=$,J.filename=k.source,J.line=N,J.column=R,J.source=w,!k.silent)throw J}function V($){var J=$.exec(w);if(J){var Q=J[0];return B(Q),w=w.slice(Q.length),J}}function b(){V(n)}function U($){var J;for($=$||[];J=H();)J!==!1&&$.push(J);return $}function H(){var $=q();if(!(u!=w.charAt(0)||f!=w.charAt(1))){for(var J=2;p!=w.charAt(J)&&(f!=w.charAt(J)||u!=w.charAt(J+1));)++J;if(J+=2,p===w.charAt(J-1))return z("End of comment missing");var Q=w.slice(2,J-2);return R+=2,B(Q),w=w.slice(J),R+=2,$({type:g,comment:Q})}}function j(){var $=q(),J=V(r);if(J){if(H(),!V(s))return z("property missing ':'");var Q=V(a),Z=$({type:y,property:S(J[0].replace(t,p)),value:Q?S(Q[0].replace(t,p)):p});return V(l),Z}}function ee(){var $=[];U($);for(var J;J=j();)J!==!1&&($.push(J),U($));return $}return b(),ee()}function S(w){return w?w.replace(d,p):p}return cjs$1=x,cjs$1}var hasRequiredCjs$1;function requireCjs$1(){if(hasRequiredCjs$1)return cjs$2;hasRequiredCjs$1=1;var t=cjs$2&&cjs$2.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cjs$2,"__esModule",{value:!0}),cjs$2.default=n;const e=t(requireCjs$2());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),d=typeof s=="function";return l.forEach(h=>{if(h.type!=="declaration")return;const{property:u,value:f}=h;d?s(u,f,h):f&&(a=a||{},a[u]=f)}),a}return cjs$2}var utilities={},hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(u){return!u||n.test(u)||t.test(u)},l=function(u,f){return f.toUpperCase()},d=function(u,f){return"".concat(f,"-")},h=function(u,f){return f===void 0&&(f={}),a(u)?u:(u=u.toLowerCase(),f.reactCompat?u=u.replace(s,d):u=u.replace(r,d),u.replace(e,l))};return utilities.camelCase=h,utilities}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var t=cjs&&cjs.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(requireCjs$1()),n=requireUtilities();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(d,h){d&&h&&(l[(0,n.camelCase)(d,a)]=h)}),l}return r.default=r,cjs=r,cjs}var cjsExports=requireCjs();const styleToJs=getDefaultExportFromCjs(cjsExports),pointEnd=point$2("end"),pointStart=point$2("start");function point$2(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function position$1(t){const e=pointStart(t),n=pointEnd(t);if(e&&n)return{start:e,end:n}}function stringifyPosition(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?position(t.position):"start"in t||"end"in t?position(t):"line"in t||"column"in t?point$1(t):""}function point$1(t){return index(t&&t.line)+":"+index(t&&t.column)}function position(t){return point$1(t&&t.start)+"-"+point$1(t&&t.end)}function index(t){return t&&typeof t=="number"?t:1}class VFileMessage extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?a.ruleId=r:(a.source=r.slice(0,h),a.ruleId=r.slice(h+1))}if(!a.place&&a.ancestors&&a.ancestors){const h=a.ancestors[a.ancestors.length-1];h&&(a.place=h.position)}const d=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=d?d.line:void 0,this.name=stringifyPosition(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=developmentCreate(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=productionCreate(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$1,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=one$1(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function one$1(t,e,n){if(e.type==="element")return element$1(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(t,e,n);if(e.type==="mdxjsEsm")return mdxEsm(t,e);if(e.type==="root")return root$1(t,e,n);if(e.type==="text")return text$3(t,e)}function element$1(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=svg,t.schema=s),t.ancestors.push(e);const a=findComponentFromName(t,e.tagName,!1),l=createElementProps(t,e);let d=createChildren(t,e);return tableElements.has(e.tagName)&&(d=d.filter(function(h){return typeof h=="string"?!whitespace(h):!0})),addNode(t,l,a,e),addChildren(l,d),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function mdxExpression(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}crashEstree(t,e.position)}function mdxEsm(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);crashEstree(t,e.position)}function mdxJsxElement(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=svg,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:findComponentFromName(t,e.name,!0),l=createJsxElementProps(t,e),d=createChildren(t,e);return addNode(t,l,a,e),addChildren(l,d),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function root$1(t,e,n){const r={};return addChildren(r,createChildren(t,e)),t.create(e,t.Fragment,r,n)}function text$3(t,e){return e.value}function addNode(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function addChildren(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function productionCreate(t,e,n){return r;function r(s,a,l,d){const u=Array.isArray(l.children)?n:e;return d?u(a,l,d):u(a,l)}}function developmentCreate(t,e){return n;function n(r,s,a,l){const d=Array.isArray(a.children),h=pointStart(r);return e(s,a,l,d,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function createElementProps(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&own$3.call(e.properties,s)){const a=createProperty(t,s,e.properties[s]);if(a){const[l,d]=a;t.tableCellAlignToStyle&&l==="align"&&typeof d=="string"&&tableCellElement.has(e.tagName)?r=d:n[l]=d}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function createJsxElementProps(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const d=l.properties[0];d.type,Object.assign(n,t.evaluater.evaluateExpression(d.argument))}else crashEstree(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const d=r.value.data.estree.body[0];d.type,a=t.evaluater.evaluateExpression(d.expression)}else crashEstree(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function createChildren(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:emptyMap;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const h=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(h){const u=s.get(h)||0;l=h+"-"+u,s.set(h,u+1)}}const d=one$1(t,a,l);d!==void 0&&n.push(d)}return n}function createProperty(t,e,n){const r=find(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?stringify$1(n):stringify(n)),r.property==="style"){let s=typeof n=="object"?n:parseStyle(t,String(n));return t.stylePropertyNameCase==="css"&&(s=transformStylesToCssCasing(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?hastToReact[r.property]||r.property:r.attribute,n]}}function parseStyle(t,e){try{return styleToJs(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new VFileMessage("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=docs+"#cannot-parse-style-attribute",s}}function findComponentFromName(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const d=name(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:d,computed:!!(a&&d.type==="Literal"),optional:!1}:d}r=l}else r=name(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return own$3.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);crashEstree(t)}function crashEstree(t,e){const n=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",n}function transformStylesToCssCasing(t){const e={};let n;for(n in t)own$3.call(t,n)&&(e[transformStyleToCssCasing(n)]=t[n]);return e}function transformStyleToCssCasing(t){let e=t.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toDash(t){return"-"+t.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$1(t,e){const n=emptyOptions$1,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return one(t,r,s)}function one(t,e,n){if(node(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return all(t.children,e,n)}return Array.isArray(t)?all(t,e,n):""}function all(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=one(t[s],e,n);return r.join("")}function node(t){return!!(t&&typeof t=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(t){const e="&"+t+";";element.innerHTML=e;const n=element.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function splice(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function push(t,e){return t.length>0?(splice(t,t.length,0,e),t):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(t){const e={};let n=-1;for(;++n<t.length;)syntaxExtension(e,t[n]);return e}function syntaxExtension(t,e){let n;for(n in e){const s=(hasOwnProperty.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){hasOwnProperty.call(s,l)||(s[l]=[]);const d=a[l];constructs(s[l],Array.isArray(d)?d:d?[d]:[])}}}function constructs(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);splice(t,0,0,r)}function decodeNumericCharacterReference(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function normalizeIdentifier(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(t){return t!==null&&(t<32||t===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(t){return t!==null&&t<-2}function markdownLineEndingOrSpace(t){return t!==null&&(t<0||t===32)}function markdownSpace(t){return t===-2||t===-1||t===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function normalizeUri(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&asciiAlphanumeric(t.charCodeAt(n+1))&&asciiAlphanumeric(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const d=t.charCodeAt(n+1);a<56320&&d>56319&&d<57344?(l=String.fromCharCode(a,d),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function factorySpace(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(h){return markdownSpace(h)?(t.enter(n),d(h)):e(h)}function d(h){return markdownSpace(h)&&a++<s?(t.consume(h),d):(t.exit(n),e(h))}}const content$1={tokenize:initializeContent};function initializeContent(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(d){if(d===null){t.consume(d);return}return t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),factorySpace(t,e,"linePrefix")}function s(d){return t.enter("paragraph"),a(d)}function a(d){const h=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=h),n=h,l(d)}function l(d){if(d===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(d);return}return markdownLineEnding(d)?(t.consume(d),t.exit("chunkText"),a):(t.consume(d),l)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(t){const e=this,n=[];let r=0,s,a,l;return d;function d(R){if(r<n.length){const B=n[r];return e.containerState=B[1],t.attempt(B[0].continuation,h,u)(R)}return u(R)}function h(R){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&N();const B=e.events.length;let q=B,F;for(;q--;)if(e.events[q][0]==="exit"&&e.events[q][1].type==="chunkFlow"){F=e.events[q][1].end;break}k(r);let z=B;for(;z<e.events.length;)e.events[z][1].end={...F},z++;return splice(e.events,q+1,0,e.events.slice(B)),e.events.length=z,u(R)}return d(R)}function u(R){if(r===n.length){if(!s)return g(R);if(s.currentConstruct&&s.currentConstruct.concrete)return x(R);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(containerConstruct,f,p)(R)}function f(R){return s&&N(),k(r),g(R)}function p(R){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,x(R)}function g(R){return e.containerState={},t.attempt(containerConstruct,y,x)(R)}function y(R){return r++,n.push([e.currentConstruct,e.containerState]),g(R)}function x(R){if(R===null){s&&N(),k(0),t.consume(R);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),S(R)}function S(R){if(R===null){w(t.exit("chunkFlow"),!0),k(0),t.consume(R);return}return markdownLineEnding(R)?(t.consume(R),w(t.exit("chunkFlow")),r=0,e.interrupt=void 0,d):(t.consume(R),S)}function w(R,B){const q=e.sliceStream(R);if(B&&q.push(null),R.previous=a,a&&(a.next=R),a=R,s.defineSkip(R.start),s.write(q),e.parser.lazy[R.start.line]){let F=s.events.length;for(;F--;)if(s.events[F][1].start.offset<l&&(!s.events[F][1].end||s.events[F][1].end.offset>l))return;const z=e.events.length;let V=z,b,U;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){if(b){U=e.events[V][1].end;break}b=!0}for(k(r),F=z;F<e.events.length;)e.events[F][1].end={...U},F++;splice(e.events,V+1,0,e.events.slice(z)),e.events.length=F}}function k(R){let B=n.length;for(;B-- >R;){const q=n[B];e.containerState=q[1],q[0].exit.call(e,t)}n.length=R}function N(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(t,e,n){return factorySpace(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(t){if(t===null||markdownLineEndingOrSpace(t)||unicodeWhitespace(t))return 1;if(unicodePunctuation(t))return 2}function resolveAll(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(t,e){let n=-1,r,s,a,l,d,h,u,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;h=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},g={...t[n][1].start};movePoint(p,-h),movePoint(g,h),l={type:h>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},d={type:h>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},a={type:h>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:h>1?"strong":"emphasis",start:{...l.start},end:{...d.end}},t[r][1].end={...l.start},t[n][1].start={...d.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=push(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=push(u,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),u=push(u,resolveAll(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=push(u,[["exit",a,e],["enter",d,e],["exit",d,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,u=push(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,splice(t,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function tokenizeAttention(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=classifyCharacter(r);let a;return l;function l(h){return a=h,t.enter("attentionSequence"),d(h)}function d(h){if(h===a)return t.consume(h),d;const u=t.exit("attentionSequence"),f=classifyCharacter(h),p=!f||f===2&&s||n.includes(h),g=!s||s===2&&f||n.includes(r);return u._open=!!(a===42?p:p&&(s||!g)),u._close=!!(a===42?g:g&&(f||!p)),e(h)}}function movePoint(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(t,e,n){let r=0;return s;function s(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return asciiAlpha(y)?(t.consume(y),l):y===64?n(y):u(y)}function l(y){return y===43||y===45||y===46||asciiAlphanumeric(y)?(r=1,d(y)):u(y)}function d(y){return y===58?(t.consume(y),r=0,h):(y===43||y===45||y===46||asciiAlphanumeric(y))&&r++<32?(t.consume(y),d):(r=0,u(y))}function h(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||asciiControl(y)?n(y):(t.consume(y),h)}function u(y){return y===64?(t.consume(y),f):asciiAtext(y)?(t.consume(y),u):n(y)}function f(y){return asciiAlphanumeric(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),r=0,f):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||asciiAlphanumeric(y))&&r++<63){const x=y===45?g:p;return t.consume(y),x}return n(y)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(t,e,n){return r;function r(a){return markdownSpace(a)?factorySpace(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||markdownLineEnding(a)?e(a):n(a)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(t,e,n){const r=this;return s;function s(l){if(l===62){const d=r.containerState;return d.open||(t.enter("blockQuote",{_container:!0}),d.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return markdownSpace(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function tokenizeBlockQuoteContinuation(t,e,n){const r=this;return s;function s(l){return markdownSpace(l)?factorySpace(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(blockQuote,e,n)(l)}}function exit(t){t.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return asciiPunctuation(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(t,e,n){const r=this;let s=0,a,l;return d;function d(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),h}function h(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),a=31,l=asciiAlphanumeric,f(p))}function u(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=asciiHexDigit,f):(t.enter("characterReferenceValue"),a=7,l=asciiDigit,f(p))}function f(p){if(p===59&&s){const g=t.exit("characterReferenceValue");return l===asciiAlphanumeric&&!decodeNamedCharacterReference(r.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),f):n(p)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(t,e,n){const r=this,s={partial:!0,tokenize:q};let a=0,l=0,d;return h;function h(F){return u(F)}function u(F){const z=r.events[r.events.length-1];return a=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,d=F,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(F)}function f(F){return F===d?(l++,t.consume(F),f):l<3?n(F):(t.exit("codeFencedFenceSequence"),markdownSpace(F)?factorySpace(t,p,"whitespace")(F):p(F))}function p(F){return F===null||markdownLineEnding(F)?(t.exit("codeFencedFence"),r.interrupt?e(F):t.check(nonLazyContinuation,S,B)(F)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(F))}function g(F){return F===null||markdownLineEnding(F)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(F)):markdownSpace(F)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),factorySpace(t,y,"whitespace")(F)):F===96&&F===d?n(F):(t.consume(F),g)}function y(F){return F===null||markdownLineEnding(F)?p(F):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(F))}function x(F){return F===null||markdownLineEnding(F)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(F)):F===96&&F===d?n(F):(t.consume(F),x)}function S(F){return t.attempt(s,B,w)(F)}function w(F){return t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),k}function k(F){return a>0&&markdownSpace(F)?factorySpace(t,N,"linePrefix",a+1)(F):N(F)}function N(F){return F===null||markdownLineEnding(F)?t.check(nonLazyContinuation,S,B)(F):(t.enter("codeFlowValue"),R(F))}function R(F){return F===null||markdownLineEnding(F)?(t.exit("codeFlowValue"),N(F)):(t.consume(F),R)}function B(F){return t.exit("codeFenced"),e(F)}function q(F,z,V){let b=0;return U;function U(J){return F.enter("lineEnding"),F.consume(J),F.exit("lineEnding"),H}function H(J){return F.enter("codeFencedFence"),markdownSpace(J)?factorySpace(F,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(J):j(J)}function j(J){return J===d?(F.enter("codeFencedFenceSequence"),ee(J)):V(J)}function ee(J){return J===d?(b++,F.consume(J),ee):b>=l?(F.exit("codeFencedFenceSequence"),markdownSpace(J)?factorySpace(F,$,"whitespace")(J):$(J)):V(J)}function $(J){return J===null||markdownLineEnding(J)?(F.exit("codeFencedFence"),z(J)):V(J)}}}function tokenizeNonLazyContinuation(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(t,e,n){const r=this;return s;function s(u){return t.enter("codeIndented"),factorySpace(t,a,"linePrefix",5)(u)}function a(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?l(u):n(u)}function l(u){return u===null?h(u):markdownLineEnding(u)?t.attempt(furtherStart,l,h)(u):(t.enter("codeFlowValue"),d(u))}function d(u){return u===null||markdownLineEnding(u)?(t.exit("codeFlowValue"),l(u)):(t.consume(u),d)}function h(u){return t.exit("codeIndented"),e(u)}}function tokenizeFurtherStart(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):markdownLineEnding(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):factorySpace(t,a,"linePrefix",5)(l)}function a(l){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(l):markdownLineEnding(l)?s(l):n(l)}}const codeText={name:"codeText",previous,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function previous(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),d(p)}function d(p){return p===96?(t.consume(p),r++,d):(t.exit("codeTextSequence"),h(p))}function h(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),h):p===96?(a=t.enter("codeTextSequence"),s=0,f(p)):markdownLineEnding(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),h):(t.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||markdownLineEnding(p)?(t.exit("codeTextData"),h(p)):(t.consume(p),u)}function f(p){return p===96?(t.consume(p),s++,f):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",u(p))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&chunkedPush(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,n.reverse())}}}function chunkedPush(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function subtokenize(t){const e={};let n=-1,r,s,a,l,d,h,u;const f=new SpliceBuffer(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,a=0,a<h.length&&h[a][1].type==="lineEndingBlank"&&(a+=2),a<h.length&&h[a][1].type==="content"))for(;++a<h.length&&h[a][1].type!=="content";)h[a][1].type==="chunkText"&&(h[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,subcontent(f,n)),n=e[n],u=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=f.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(f.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...f.get(s)[1].start},d=f.slice(s,n),d.unshift(r),f.splice(s,n-s+1,d))}}return splice(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function subcontent(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const d=l.events,h=[],u={};let f,p,g=-1,y=n,x=0,S=0;const w=[S];for(;y;){for(;t.get(++s)[1]!==y;);a.push(s),y._tokenizer||(f=r.sliceStream(y),y.next||f.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(f),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<d.length;)d[g][0]==="exit"&&d[g-1][0]==="enter"&&d[g][1].type===d[g-1][1].type&&d[g][1].start.line!==d[g][1].end.line&&(S=g+1,w.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):w.pop(),g=w.length;g--;){const k=d.slice(w[g],w[g+1]),N=a.pop();h.push([N,N+k.length-1]),t.splice(N,2,k)}for(h.reverse(),g=-1;++g<h.length;)u[x+h[g][0]]=x+h[g][1],x+=h[g][1]-h[g][0]-1;return u}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(t){return subtokenize(t),t}function tokenizeContent(t,e){let n;return r;function r(d){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(d)}function s(d){return d===null?a(d):markdownLineEnding(d)?t.check(continuationConstruct,l,a)(d):(t.consume(d),s)}function a(d){return t.exit("chunkContent"),t.exit("content"),e(d)}function l(d){return t.consume(d),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function tokenizeContinuation(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),factorySpace(t,a,"linePrefix")}function a(l){if(l===null||markdownLineEnding(l))return n(l);const d=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function factoryDestination(t,e,n,r,s,a,l,d,h){const u=h||Number.POSITIVE_INFINITY;let f=0;return p;function p(k){return k===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(k),t.exit(a),g):k===null||k===32||k===41||asciiControl(k)?n(k):(t.enter(r),t.enter(l),t.enter(d),t.enter("chunkString",{contentType:"string"}),S(k))}function g(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(d),t.enter("chunkString",{contentType:"string"}),y(k))}function y(k){return k===62?(t.exit("chunkString"),t.exit(d),g(k)):k===null||k===60||markdownLineEnding(k)?n(k):(t.consume(k),k===92?x:y)}function x(k){return k===60||k===62||k===92?(t.consume(k),y):y(k)}function S(k){return!f&&(k===null||k===41||markdownLineEndingOrSpace(k))?(t.exit("chunkString"),t.exit(d),t.exit(l),t.exit(r),e(k)):f<u&&k===40?(t.consume(k),f++,S):k===41?(t.consume(k),f--,S):k===null||k===32||k===40||asciiControl(k)?n(k):(t.consume(k),k===92?w:S)}function w(k){return k===40||k===41||k===92?(t.consume(k),S):S(k)}}function factoryLabel(t,e,n,r,s,a){const l=this;let d=0,h;return u;function u(y){return t.enter(r),t.enter(s),t.consume(y),t.exit(s),t.enter(a),f}function f(y){return d>999||y===null||y===91||y===93&&!h||y===94&&!d&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(a),t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):markdownLineEnding(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||markdownLineEnding(y)||d++>999?(t.exit("chunkString"),f(y)):(t.consume(y),h||(h=!markdownSpace(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(t.consume(y),d++,p):p(y)}}function factoryTitle(t,e,n,r,s,a){let l;return d;function d(g){return g===34||g===39||g===40?(t.enter(r),t.enter(s),t.consume(g),t.exit(s),l=g===40?41:g,h):n(g)}function h(g){return g===l?(t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):(t.enter(a),u(g))}function u(g){return g===l?(t.exit(a),h(l)):g===null?n(g):markdownLineEnding(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),factorySpace(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===l||g===null||markdownLineEnding(g)?(t.exit("chunkString"),u(g)):(t.consume(g),g===92?p:f)}function p(g){return g===l||g===92?(t.consume(g),f):f(g)}}function factoryWhitespace(t,e){let n;return r;function r(s){return markdownLineEnding(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):markdownSpace(s)?factorySpace(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(t,e,n){const r=this;let s;return a;function a(y){return t.enter("definition"),l(y)}function l(y){return factoryLabel.call(r,t,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function d(y){return s=normalizeIdentifier(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),h):n(y)}function h(y){return markdownLineEndingOrSpace(y)?factoryWhitespace(t,u)(y):u(y)}function u(y){return factoryDestination(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function f(y){return t.attempt(titleBefore,p,p)(y)}function p(y){return markdownSpace(y)?factorySpace(t,g,"whitespace")(y):g(y)}function g(y){return y===null||markdownLineEnding(y)?(t.exit("definition"),r.parser.defined.push(s),e(y)):n(y)}}function tokenizeTitleBefore(t,e,n){return r;function r(d){return markdownLineEndingOrSpace(d)?factoryWhitespace(t,s)(d):n(d)}function s(d){return factoryTitle(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function a(d){return markdownSpace(d)?factorySpace(t,l,"whitespace")(d):l(d)}function l(d){return d===null||markdownLineEnding(d)?e(d):n(d)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return markdownLineEnding(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},splice(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function tokenizeHeadingAtx(t,e,n){let r=0;return s;function s(f){return t.enter("atxHeading"),a(f)}function a(f){return t.enter("atxHeadingSequence"),l(f)}function l(f){return f===35&&r++<6?(t.consume(f),l):f===null||markdownLineEndingOrSpace(f)?(t.exit("atxHeadingSequence"),d(f)):n(f)}function d(f){return f===35?(t.enter("atxHeadingSequence"),h(f)):f===null||markdownLineEnding(f)?(t.exit("atxHeading"),e(f)):markdownSpace(f)?factorySpace(t,d,"whitespace")(f):(t.enter("atxHeadingText"),u(f))}function h(f){return f===35?(t.consume(f),h):(t.exit("atxHeadingSequence"),d(f))}function u(f){return f===null||f===35||markdownLineEndingOrSpace(f)?(t.exit("atxHeadingText"),d(f)):(t.consume(f),u)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function tokenizeHtmlFlow(t,e,n){const r=this;let s,a,l,d,h;return u;function u(T){return f(T)}function f(T){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(T),p}function p(T){return T===33?(t.consume(T),g):T===47?(t.consume(T),a=!0,S):T===63?(t.consume(T),s=3,r.interrupt?e:v):asciiAlpha(T)?(t.consume(T),l=String.fromCharCode(T),w):n(T)}function g(T){return T===45?(t.consume(T),s=2,y):T===91?(t.consume(T),s=5,d=0,x):asciiAlpha(T)?(t.consume(T),s=4,r.interrupt?e:v):n(T)}function y(T){return T===45?(t.consume(T),r.interrupt?e:v):n(T)}function x(T){const _="CDATA[";return T===_.charCodeAt(d++)?(t.consume(T),d===_.length?r.interrupt?e:j:x):n(T)}function S(T){return asciiAlpha(T)?(t.consume(T),l=String.fromCharCode(T),w):n(T)}function w(T){if(T===null||T===47||T===62||markdownLineEndingOrSpace(T)){const _=T===47,A=l.toLowerCase();return!_&&!a&&htmlRawNames.includes(A)?(s=1,r.interrupt?e(T):j(T)):htmlBlockNames.includes(l.toLowerCase())?(s=6,_?(t.consume(T),k):r.interrupt?e(T):j(T)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(T):a?N(T):R(T))}return T===45||asciiAlphanumeric(T)?(t.consume(T),l+=String.fromCharCode(T),w):n(T)}function k(T){return T===62?(t.consume(T),r.interrupt?e:j):n(T)}function N(T){return markdownSpace(T)?(t.consume(T),N):U(T)}function R(T){return T===47?(t.consume(T),U):T===58||T===95||asciiAlpha(T)?(t.consume(T),B):markdownSpace(T)?(t.consume(T),R):U(T)}function B(T){return T===45||T===46||T===58||T===95||asciiAlphanumeric(T)?(t.consume(T),B):q(T)}function q(T){return T===61?(t.consume(T),F):markdownSpace(T)?(t.consume(T),q):R(T)}function F(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),h=T,z):markdownSpace(T)?(t.consume(T),F):V(T)}function z(T){return T===h?(t.consume(T),h=null,b):T===null||markdownLineEnding(T)?n(T):(t.consume(T),z)}function V(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||markdownLineEndingOrSpace(T)?q(T):(t.consume(T),V)}function b(T){return T===47||T===62||markdownSpace(T)?R(T):n(T)}function U(T){return T===62?(t.consume(T),H):n(T)}function H(T){return T===null||markdownLineEnding(T)?j(T):markdownSpace(T)?(t.consume(T),H):n(T)}function j(T){return T===45&&s===2?(t.consume(T),Q):T===60&&s===1?(t.consume(T),Z):T===62&&s===4?(t.consume(T),E):T===63&&s===3?(t.consume(T),v):T===93&&s===5?(t.consume(T),O):markdownLineEnding(T)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(blankLineBefore,I,ee)(T)):T===null||markdownLineEnding(T)?(t.exit("htmlFlowData"),ee(T)):(t.consume(T),j)}function ee(T){return t.check(nonLazyContinuationStart,$,I)(T)}function $(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),J}function J(T){return T===null||markdownLineEnding(T)?ee(T):(t.enter("htmlFlowData"),j(T))}function Q(T){return T===45?(t.consume(T),v):j(T)}function Z(T){return T===47?(t.consume(T),l="",X):j(T)}function X(T){if(T===62){const _=l.toLowerCase();return htmlRawNames.includes(_)?(t.consume(T),E):j(T)}return asciiAlpha(T)&&l.length<8?(t.consume(T),l+=String.fromCharCode(T),X):j(T)}function O(T){return T===93?(t.consume(T),v):j(T)}function v(T){return T===62?(t.consume(T),E):T===45&&s===2?(t.consume(T),v):j(T)}function E(T){return T===null||markdownLineEnding(T)?(t.exit("htmlFlowData"),I(T)):(t.consume(T),E)}function I(T){return t.exit("htmlFlow"),e(T)}}function tokenizeNonLazyContinuationStart(t,e,n){const r=this;return s;function s(l){return markdownLineEnding(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function tokenizeBlankLineBefore(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(blankLine,e,n)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(t,e,n){const r=this;let s,a,l;return d;function d(v){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(v),h}function h(v){return v===33?(t.consume(v),u):v===47?(t.consume(v),q):v===63?(t.consume(v),R):asciiAlpha(v)?(t.consume(v),V):n(v)}function u(v){return v===45?(t.consume(v),f):v===91?(t.consume(v),a=0,x):asciiAlpha(v)?(t.consume(v),N):n(v)}function f(v){return v===45?(t.consume(v),y):n(v)}function p(v){return v===null?n(v):v===45?(t.consume(v),g):markdownLineEnding(v)?(l=p,Z(v)):(t.consume(v),p)}function g(v){return v===45?(t.consume(v),y):p(v)}function y(v){return v===62?Q(v):v===45?g(v):p(v)}function x(v){const E="CDATA[";return v===E.charCodeAt(a++)?(t.consume(v),a===E.length?S:x):n(v)}function S(v){return v===null?n(v):v===93?(t.consume(v),w):markdownLineEnding(v)?(l=S,Z(v)):(t.consume(v),S)}function w(v){return v===93?(t.consume(v),k):S(v)}function k(v){return v===62?Q(v):v===93?(t.consume(v),k):S(v)}function N(v){return v===null||v===62?Q(v):markdownLineEnding(v)?(l=N,Z(v)):(t.consume(v),N)}function R(v){return v===null?n(v):v===63?(t.consume(v),B):markdownLineEnding(v)?(l=R,Z(v)):(t.consume(v),R)}function B(v){return v===62?Q(v):R(v)}function q(v){return asciiAlpha(v)?(t.consume(v),F):n(v)}function F(v){return v===45||asciiAlphanumeric(v)?(t.consume(v),F):z(v)}function z(v){return markdownLineEnding(v)?(l=z,Z(v)):markdownSpace(v)?(t.consume(v),z):Q(v)}function V(v){return v===45||asciiAlphanumeric(v)?(t.consume(v),V):v===47||v===62||markdownLineEndingOrSpace(v)?b(v):n(v)}function b(v){return v===47?(t.consume(v),Q):v===58||v===95||asciiAlpha(v)?(t.consume(v),U):markdownLineEnding(v)?(l=b,Z(v)):markdownSpace(v)?(t.consume(v),b):Q(v)}function U(v){return v===45||v===46||v===58||v===95||asciiAlphanumeric(v)?(t.consume(v),U):H(v)}function H(v){return v===61?(t.consume(v),j):markdownLineEnding(v)?(l=H,Z(v)):markdownSpace(v)?(t.consume(v),H):b(v)}function j(v){return v===null||v===60||v===61||v===62||v===96?n(v):v===34||v===39?(t.consume(v),s=v,ee):markdownLineEnding(v)?(l=j,Z(v)):markdownSpace(v)?(t.consume(v),j):(t.consume(v),$)}function ee(v){return v===s?(t.consume(v),s=void 0,J):v===null?n(v):markdownLineEnding(v)?(l=ee,Z(v)):(t.consume(v),ee)}function $(v){return v===null||v===34||v===39||v===60||v===61||v===96?n(v):v===47||v===62||markdownLineEndingOrSpace(v)?b(v):(t.consume(v),$)}function J(v){return v===47||v===62||markdownLineEndingOrSpace(v)?b(v):n(v)}function Q(v){return v===62?(t.consume(v),t.exit("htmlTextData"),t.exit("htmlText"),e):n(v)}function Z(v){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),X}function X(v){return markdownSpace(v)?factorySpace(t,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):O(v)}function O(v){return t.enter("htmlTextData"),l(v)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&splice(t,0,t.length,n),t}function resolveToLabelEnd(t,e){let n=t.length,r=0,s,a,l,d;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const h={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},f={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return d=[["enter",h,e],["enter",u,e]],d=push(d,t.slice(a+1,a+r+3)),d=push(d,[["enter",f,e]]),d=push(d,resolveAll(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),d=push(d,[["exit",f,e],t[l-2],t[l-1],["exit",u,e]]),d=push(d,t.slice(l+1)),d=push(d,[["exit",h,e]]),splice(t,a,t.length,d),t}function tokenizeLabelEnd(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return d;function d(g){return a?a._inactive?p(g):(l=r.parser.defined.includes(normalizeIdentifier(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),h):n(g)}function h(g){return g===40?t.attempt(resourceConstruct,f,l?f:p)(g):g===91?t.attempt(referenceFullConstruct,f,l?u:p)(g):l?f(g):p(g)}function u(g){return t.attempt(referenceCollapsedConstruct,f,p)(g)}function f(g){return e(g)}function p(g){return a._balanced=!0,n(g)}}function tokenizeResource(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return markdownLineEndingOrSpace(p)?factoryWhitespace(t,a)(p):a(p)}function a(p){return p===41?f(p):factoryDestination(t,l,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return markdownLineEndingOrSpace(p)?factoryWhitespace(t,h)(p):f(p)}function d(p){return n(p)}function h(p){return p===34||p===39||p===40?factoryTitle(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function u(p){return markdownLineEndingOrSpace(p)?factoryWhitespace(t,f)(p):f(p)}function f(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function tokenizeReferenceFull(t,e,n){const r=this;return s;function s(d){return factoryLabel.call(r,t,a,l,"reference","referenceMarker","referenceString")(d)}function a(d){return r.parser.defined.includes(normalizeIdentifier(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(d):n(d)}function l(d){return n(d)}}function tokenizeReferenceCollapsed(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(t,e,n){const r=this;return s;function s(d){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(d),t.exit("labelImageMarker"),a}function a(d){return d===91?(t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelImage"),l):n(d)}function l(d){return d===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(d):e(d)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),factorySpace(t,e,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(t,e,n){let r=0,s;return a;function a(u){return t.enter("thematicBreak"),l(u)}function l(u){return s=u,d(u)}function d(u){return u===s?(t.enter("thematicBreakSequence"),h(u)):r>=3&&(u===null||markdownLineEnding(u))?(t.exit("thematicBreak"),e(u)):n(u)}function h(u){return u===s?(t.consume(u),r++,h):(t.exit("thematicBreakSequence"),markdownSpace(u)?factorySpace(t,d,"whitespace")(u):d(u))}}const list$1={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent};function tokenizeListStart(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return d;function d(y){const x=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:asciiDigit(y)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(thematicBreak$1,n,u)(y):u(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(y)}return n(y)}function h(y){return asciiDigit(y)&&++l<10?(t.consume(y),h):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),u(y)):n(y)}function u(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(blankLine,r.interrupt?n:f,t.attempt(listItemPrefixWhitespaceConstruct,g,p))}function f(y){return r.containerState.initialBlankLine=!0,a++,g(y)}function p(y){return markdownSpace(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function tokenizeListContinuation(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(blankLine,s,a);function s(d){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,factorySpace(t,e,"listItemIndent",r.containerState.size+1)(d)}function a(d){return r.containerState.furtherBlankLines||!markdownSpace(d)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(d)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(indentConstruct,e,l)(d))}function l(d){return r.containerState._closeFlow=!0,r.interrupt=void 0,factorySpace(t,t.attempt(list$1,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function tokenizeIndent(t,e,n){const r=this;return factorySpace(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function tokenizeListEnd(t){t.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(t,e,n){const r=this;return factorySpace(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!markdownSpace(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function tokenizeSetextUnderline(t,e,n){const r=this;let s;return a;function a(u){let f=r.events.length,p;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){p=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=u,l(u)):n(u)}function l(u){return t.enter("setextHeadingLineSequence"),d(u)}function d(u){return u===s?(t.consume(u),d):(t.exit("setextHeadingLineSequence"),markdownSpace(u)?factorySpace(t,h,"lineSuffix")(u):h(u))}function h(u){return u===null||markdownLineEnding(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const flow$1={tokenize:initializeFlow};function initializeFlow(t){const e=this,n=t.attempt(blankLine,r,t.attempt(this.parser.constructs.flowInitial,s,factorySpace(t,t.attempt(this.parser.constructs.flow,s,t.attempt(content,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$2=initializeFactory("text");function initializeFactory(t){return{resolveAll:createResolver(t==="text"?resolveAllLineSuffixes:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,d);return l;function l(f){return u(f)?a(f):d(f)}function d(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),h}function h(f){return u(f)?(n.exit("data"),a(f)):(n.consume(f),h)}function u(f){if(f===null)return!0;const p=s[f];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function createResolver(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function resolveAllLineSuffixes(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,d=0,h;for(;a--;){const u=s[a];if(typeof u=="string"){for(l=u.length;u.charCodeAt(l-1)===32;)d++,l--;if(l)break;l=-1}else if(u===-2)h=!0,d++;else if(u!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(d=0),d){const u={type:n===t.length||h||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-d,offset:r.end.offset-d},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$1={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$1},Symbol.toStringTag,{value:"Module"}));function createTokenizer(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],d=[];const h={attempt:z(q),check:z(F),consume:N,enter:R,exit:B,interrupt:z(F,{interrupt:!0})},u={code:null,containerState:{},defineSkip:S,events:[],now:x,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:p};let f=e.tokenize.call(u,h);return e.resolveAll&&a.push(e),u;function p(H){return l=push(l,H),w(),l[l.length-1]!==null?[]:(V(e,0),u.events=resolveAll(a,u.events,u),u.events)}function g(H,j){return serializeChunks(y(H),j)}function y(H){return sliceChunks(l,H)}function x(){const{_bufferIndex:H,_index:j,line:ee,column:$,offset:J}=r;return{_bufferIndex:H,_index:j,line:ee,column:$,offset:J}}function S(H){s[H.line]=H.column,U()}function w(){let H;for(;r._index<l.length;){const j=l[r._index];if(typeof j=="string")for(H=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===H&&r._bufferIndex<j.length;)k(j.charCodeAt(r._bufferIndex));else k(j)}}function k(H){f=f(H)}function N(H){markdownLineEnding(H)?(r.line++,r.column=1,r.offset+=H===-3?2:1,U()):H!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=H}function R(H,j){const ee=j||{};return ee.type=H,ee.start=x(),u.events.push(["enter",ee,u]),d.push(ee),ee}function B(H){const j=d.pop();return j.end=x(),u.events.push(["exit",j,u]),j}function q(H,j){V(H,j.from)}function F(H,j){j.restore()}function z(H,j){return ee;function ee($,J,Q){let Z,X,O,v;return Array.isArray($)?I($):"tokenize"in $?I([$]):E($);function E(M){return L;function L(G){const W=G!==null&&M[G],Y=G!==null&&M.null,se=[...Array.isArray(W)?W:W?[W]:[],...Array.isArray(Y)?Y:Y?[Y]:[]];return I(se)(G)}}function I(M){return Z=M,X=0,M.length===0?Q:T(M[X])}function T(M){return L;function L(G){return v=b(),O=M,M.partial||(u.currentConstruct=M),M.name&&u.parser.constructs.disable.null.includes(M.name)?A():M.tokenize.call(j?Object.assign(Object.create(u),j):u,h,_,A)(G)}}function _(M){return H(O,v),J}function A(M){return v.restore(),++X<Z.length?T(Z[X]):Q}}}function V(H,j){H.resolveAll&&!a.includes(H)&&a.push(H),H.resolve&&splice(u.events,j,u.events.length-j,H.resolve(u.events.slice(j),u)),H.resolveTo&&(u.events=H.resolveTo(u.events,u))}function b(){const H=x(),j=u.previous,ee=u.currentConstruct,$=u.events.length,J=Array.from(d);return{from:$,restore:Q};function Q(){r=H,u.previous=j,u.currentConstruct=ee,u.events.length=$,d=J,U()}}function U(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function sliceChunks(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const d=l[0];typeof d=="string"?l[0]=d.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function serializeChunks(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function parse(t){const r={constructs:combineExtensions([defaultConstructs,...(t||{}).extensions||[]]),content:s(content$1),defined:[],document:s(document$2),flow:s(flow$1),lazy:{},string:s(string$1),text:s(text$2)};return r;function s(a){return l;function l(d){return createTokenizer(r,a,d)}}}function postprocess(t){for(;!subtokenize(t););return t}const search=/[\0\t\n\r]/g;function preprocess(){let t=1,e="",n=!0,r;return s;function s(a,l,d){const h=[];let u,f,p,g,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(search.lastIndex=p,u=search.exec(a),g=u&&u.index!==void 0?u.index:a.length,y=a.charCodeAt(g),!u){e=a.slice(p);break}if(y===10&&p===g&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),p<g&&(h.push(a.slice(p,g)),t+=g-p),y){case 0:{h.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,h.push(-2);t++<f;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:r=!0,t=1}p=g+1}return d&&(r&&h.push(-5),e&&h.push(e),h.push(null)),h}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(t){return t.replace(characterEscapeOrReference,decode)}function decode(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return decodeNumericCharacterReference(n.slice(a?2:1),a?16:10)}return decodeNamedCharacterReference(n)||t}const own$2={}.hasOwnProperty;function fromMarkdown(t,e,n){return typeof e!="string"&&(n=e,e=void 0),compiler(n)(postprocess(parse(n).document().write(preprocess()(t,e,!0))))}function compiler(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ae),autolinkProtocol:b,autolinkEmail:b,atxHeading:a(ge),blockQuote:a(Y),characterEscape:b,characterReference:b,codeFenced:a(se),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(se,l),codeText:a(le,l),codeTextData:b,data:b,codeFlowValue:b,definition:a(ne),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(de),hardBreakEscape:a(me),hardBreakTrailing:a(me),htmlFlow:a(Se,l),htmlFlowData:b,htmlText:a(Se,l),htmlTextData:b,image:a(Ce),label:l,link:a(Ae),listItem:a(_e),listItemValue:g,listOrdered:a(Ie,p),listUnordered:a(Ie),paragraph:a(Je),reference:T,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(ge),strong:a(et),thematicBreak:a(We)},exit:{atxHeading:h(),atxHeadingSequence:q,autolink:h(),autolinkEmail:W,autolinkProtocol:G,blockQuote:h(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:A,characterReferenceMarkerNumeric:A,characterReferenceValue:M,characterReference:L,codeFenced:h(w),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:x,codeFlowValue:U,codeIndented:h(k),codeText:h(J),codeTextData:U,data:U,definition:h(),definitionDestinationString:B,definitionLabelString:N,definitionTitleString:R,emphasis:h(),hardBreakEscape:h(j),hardBreakTrailing:h(j),htmlFlow:h(ee),htmlFlowData:U,htmlText:h($),htmlTextData:U,image:h(Z),label:O,labelText:X,lineEnding:H,link:h(Q),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:_,resourceDestinationString:v,resourceTitleString:E,resource:I,setextHeading:h(V),setextHeadingLineSequence:z,setextHeadingText:F,strong:h(),thematicBreak:h()}};configure(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(fe){let ve={type:"root",children:[]};const Be={stack:[ve],tokenStack:[],config:e,enter:d,exit:u,buffer:l,resume:f,data:n},Ue=[];let Me=-1;for(;++Me<fe.length;)if(fe[Me][1].type==="listOrdered"||fe[Me][1].type==="listUnordered")if(fe[Me][0]==="enter")Ue.push(Me);else{const qe=Ue.pop();Me=s(fe,qe,Me)}for(Me=-1;++Me<fe.length;){const qe=e[fe[Me][0]];own$2.call(qe,fe[Me][1].type)&&qe[fe[Me][1].type].call(Object.assign({sliceSerialize:fe[Me][2].sliceSerialize},Be),fe[Me][1])}if(Be.tokenStack.length>0){const qe=Be.tokenStack[Be.tokenStack.length-1];(qe[1]||defaultOnError).call(Be,void 0,qe[0])}for(ve.position={start:point(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:point(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},Me=-1;++Me<e.transforms.length;)ve=e.transforms[Me](ve)||ve;return ve}function s(fe,ve,Be){let Ue=ve-1,Me=-1,qe=!1,St,Ct,Kt,sn;for(;++Ue<=Be;){const at=fe[Ue];switch(at[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{at[0]==="enter"?Me++:Me--,sn=void 0;break}case"lineEndingBlank":{at[0]==="enter"&&(St&&!sn&&!Me&&!Kt&&(Kt=Ue),sn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:sn=void 0}if(!Me&&at[0]==="enter"&&at[1].type==="listItemPrefix"||Me===-1&&at[0]==="exit"&&(at[1].type==="listUnordered"||at[1].type==="listOrdered")){if(St){let Nt=Ue;for(Ct=void 0;Nt--;){const pe=fe[Nt];if(pe[1].type==="lineEnding"||pe[1].type==="lineEndingBlank"){if(pe[0]==="exit")continue;Ct&&(fe[Ct][1].type="lineEndingBlank",qe=!0),pe[1].type="lineEnding",Ct=Nt}else if(!(pe[1].type==="linePrefix"||pe[1].type==="blockQuotePrefix"||pe[1].type==="blockQuotePrefixWhitespace"||pe[1].type==="blockQuoteMarker"||pe[1].type==="listItemIndent"))break}Kt&&(!Ct||Kt<Ct)&&(St._spread=!0),St.end=Object.assign({},Ct?fe[Ct][1].start:at[1].end),fe.splice(Ct||Ue,0,["exit",St,at[2]]),Ue++,Be++}if(at[1].type==="listItemPrefix"){const Nt={type:"listItem",_spread:!1,start:Object.assign({},at[1].start),end:void 0};St=Nt,fe.splice(Ue,0,["enter",Nt,at[2]]),Ue++,Be++,Kt=void 0,sn=!0}}}return fe[ve][1]._spread=qe,Be}function a(fe,ve){return Be;function Be(Ue){d.call(this,fe(Ue),Ue),ve&&ve.call(this,Ue)}}function l(){this.stack.push({type:"fragment",children:[]})}function d(fe,ve,Be){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([ve,Be||void 0]),fe.position={start:point(ve.start),end:void 0}}function h(fe){return ve;function ve(Be){fe&&fe.call(this,Be),u.call(this,Be)}}function u(fe,ve){const Be=this.stack.pop(),Ue=this.tokenStack.pop();if(Ue)Ue[0].type!==fe.type&&(ve?ve.call(this,fe,Ue[0]):(Ue[1]||defaultOnError).call(this,fe,Ue[0]));else throw new Error("Cannot close `"+fe.type+"` ("+stringifyPosition({start:fe.start,end:fe.end})+"): its not open");Be.position.end=point(fe.end)}function f(){return toString$1(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(fe){if(this.data.expectingFirstListItemValue){const ve=this.stack[this.stack.length-2];ve.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function y(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.lang=fe}function x(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.meta=fe}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=fe.replace(/(\r?\n|\r)$/g,"")}function N(fe){const ve=this.resume(),Be=this.stack[this.stack.length-1];Be.label=ve,Be.identifier=normalizeIdentifier(this.sliceSerialize(fe)).toLowerCase()}function R(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.title=fe}function B(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.url=fe}function q(fe){const ve=this.stack[this.stack.length-1];if(!ve.depth){const Be=this.sliceSerialize(fe).length;ve.depth=Be}}function F(){this.data.setextHeadingSlurpLineEnding=!0}function z(fe){const ve=this.stack[this.stack.length-1];ve.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function V(){this.data.setextHeadingSlurpLineEnding=void 0}function b(fe){const Be=this.stack[this.stack.length-1].children;let Ue=Be[Be.length-1];(!Ue||Ue.type!=="text")&&(Ue=De(),Ue.position={start:point(fe.start),end:void 0},Be.push(Ue)),this.stack.push(Ue)}function U(fe){const ve=this.stack.pop();ve.value+=this.sliceSerialize(fe),ve.position.end=point(fe.end)}function H(fe){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Be=ve.children[ve.children.length-1];Be.position.end=point(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ve.type)&&(b.call(this,fe),U.call(this,fe))}function j(){this.data.atHardBreak=!0}function ee(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=fe}function $(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=fe}function J(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=fe}function Q(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=ve,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function Z(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=ve,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function X(fe){const ve=this.sliceSerialize(fe),Be=this.stack[this.stack.length-2];Be.label=decodeString(ve),Be.identifier=normalizeIdentifier(ve).toLowerCase()}function O(){const fe=this.stack[this.stack.length-1],ve=this.resume(),Be=this.stack[this.stack.length-1];if(this.data.inReference=!0,Be.type==="link"){const Ue=fe.children;Be.children=Ue}else Be.alt=ve}function v(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.url=fe}function E(){const fe=this.resume(),ve=this.stack[this.stack.length-1];ve.title=fe}function I(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function _(fe){const ve=this.resume(),Be=this.stack[this.stack.length-1];Be.label=ve,Be.identifier=normalizeIdentifier(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function A(fe){this.data.characterReferenceType=fe.type}function M(fe){const ve=this.sliceSerialize(fe),Be=this.data.characterReferenceType;let Ue;Be?(Ue=decodeNumericCharacterReference(ve,Be==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ue=decodeNamedCharacterReference(ve);const Me=this.stack[this.stack.length-1];Me.value+=Ue}function L(fe){const ve=this.stack.pop();ve.position.end=point(fe.end)}function G(fe){U.call(this,fe);const ve=this.stack[this.stack.length-1];ve.url=this.sliceSerialize(fe)}function W(fe){U.call(this,fe);const ve=this.stack[this.stack.length-1];ve.url="mailto:"+this.sliceSerialize(fe)}function Y(){return{type:"blockquote",children:[]}}function se(){return{type:"code",lang:null,meta:null,value:""}}function le(){return{type:"inlineCode",value:""}}function ne(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function de(){return{type:"emphasis",children:[]}}function ge(){return{type:"heading",depth:0,children:[]}}function me(){return{type:"break"}}function Se(){return{type:"html",value:""}}function Ce(){return{type:"image",title:null,url:"",alt:null}}function Ae(){return{type:"link",title:null,url:"",children:[]}}function Ie(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function _e(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function et(){return{type:"strong",children:[]}}function De(){return{type:"text",value:""}}function We(){return{type:"thematicBreak"}}}function point(t){return{line:t.line,column:t.column,offset:t.offset}}function configure(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?configure(t,r):extension(t,r)}}function extension(t,e){let n;for(n in e)if(own$2.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function defaultOnError(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+stringifyPosition({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(t){const e=this;e.parser=n;function n(r){return fromMarkdown(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function hardBreak(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function code(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function strikethrough(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function emphasis(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function footnoteReference(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=normalizeUri(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,d=t.footnoteCounts.get(r);d===void 0?(d=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,d+=1,t.footnoteCounts.set(r,d);const h={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,h);const u={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(e,u),t.applyData(e,u)}function heading(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function html(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function revert(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function imageReference(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return revert(t,e);const s={src:normalizeUri(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function image(t,e){const n={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function inlineCode(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function linkReference(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return revert(t,e);const s={href:normalizeUri(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function link(t,e){const n={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function listItem(t,e,n){const r=t.all(e),s=n?listLoose(n):listItemLoose(e),a={},l=[];if(typeof e.checked=="boolean"){const f=r[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let d=-1;for(;++d<r.length;){const f=r[d];(s||d!==0||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!s?l.push(...f.children):l.push(f)}const h=r[r.length-1];h&&(s||h.type!=="element"||h.tagName!=="p")&&l.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,u),t.applyData(e,u)}function listLoose(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=listItemLoose(n[r])}return e}function listItemLoose(t){const e=t.spread;return e??t.children.length>1}function list(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function paragraph(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function root(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function strong(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function table(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},d=pointStart(e.children[1]),h=pointEnd(e.children[e.children.length-1]);d&&h&&(l.position={start:d,end:h}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function tableRow(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,d=l?l.length:e.children.length;let h=-1;const u=[];for(;++h<d;){const p=e.children[h],g={},y=l?l[h]:void 0;y&&(g.align=y);let x={type:"element",tagName:a,properties:g,children:[]};p&&(x.children=t.all(p),t.patch(p,x),x=t.applyData(p,x)),u.push(x)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,f),t.applyData(e,f)}function tableCell(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const tab=9,space=32;function trimLines(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(trimLine(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(trimLine(e.slice(s),s>0,!1)),a.join("")}function trimLine(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===tab||a===space;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===tab||a===space;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function text(t,e){const n={type:"text",value:trimLines(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function thematicBreak(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root,strong,table,tableCell,tableRow,text,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case PRIMITIVE:case VOID:return n(l,s);case ARRAY:{const d=n([],s);for(const h of l)d.push(r(h));return d}case OBJECT:{const d=n({},s);for(const[h,u]of l)d[r(h)]=r(u);return d}case DATE:return n(new Date(l),s);case REGEXP:{const{source:d,flags:h}=l;return n(new RegExp(d,h),s)}case MAP:{const d=n(new Map,s);for(const[h,u]of l)d.set(r(h),r(u));return d}case SET:{const d=n(new Set,s);for(const h of l)d.add(r(h));return d}case ERROR:{const{name:d,message:h}=l;return n(new env[d](h),s)}case BIGINT:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:d}=new Uint8Array(l);return n(new DataView(d),l)}}return n(new env[a](l),s)};return r},deserialize=t=>deserializer(new Map,t)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=t=>{const e=typeof t;if(e!=="object"||!t)return[PRIMITIVE,e];const n=toString.call(t).slice(8,-1);switch(n){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,n]}return n.includes("Array")?[ARRAY,n]:n.includes("Error")?[ERROR,n]:[OBJECT,n]},shouldSkip=([t,e])=>t===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(t,e,n,r)=>{const s=(l,d)=>{const h=r.push(l)-1;return n.set(d,h),h},a=l=>{if(n.has(l))return n.get(l);let[d,h]=typeOf(l);switch(d){case PRIMITIVE:{let f=l;switch(h){case"bigint":d=BIGINT,f=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);f=null;break;case"undefined":return s([VOID],l)}return s([d,f],l)}case ARRAY:{if(h){let g=l;return h==="DataView"?g=new Uint8Array(l.buffer):h==="ArrayBuffer"&&(g=new Uint8Array(l)),s([h,[...g]],l)}const f=[],p=s([d,f],l);for(const g of l)f.push(a(g));return p}case OBJECT:{if(h)switch(h){case"BigInt":return s([h,l.toString()],l);case"Boolean":case"Number":case"String":return s([h,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const f=[],p=s([d,f],l);for(const g of keys(l))(t||!shouldSkip(typeOf(l[g])))&&f.push([a(g),a(l[g])]);return p}case DATE:return s([d,l.toISOString()],l);case REGEXP:{const{source:f,flags:p}=l;return s([d,{source:f,flags:p}],l)}case MAP:{const f=[],p=s([d,f],l);for(const[g,y]of l)(t||!(shouldSkip(typeOf(g))||shouldSkip(typeOf(y))))&&f.push([a(g),a(y)]);return p}case SET:{const f=[],p=s([d,f],l);for(const g of l)(t||!shouldSkip(typeOf(g)))&&f.push(a(g));return p}}const{message:u}=l;return s([d,{name:h,message:u}],l)};return a},serialize=(t,{json:e,lossy:n}={})=>{const r=[];return serializer(!(e||n),!!e,new Map,r)(t),r},structuredClone$1=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize(t,e)):structuredClone(t):(t,e)=>deserialize(serialize(t,e));function defaultFootnoteBackContent(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function defaultFootnoteBackLabel(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function footer(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||defaultFootnoteBackContent,r=t.options.footnoteBackLabel||defaultFootnoteBackLabel,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let h=-1;for(;++h<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[h]);if(!u)continue;const f=t.all(u),p=String(u.identifier).toUpperCase(),g=normalizeUri(p.toLowerCase());let y=0;const x=[],S=t.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){x.length>0&&x.push({type:"text",value:" "});let N=typeof n=="string"?n:n(h,y);typeof N=="string"&&(N={type:"text",value:N}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(h,y),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const w=f[f.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const N=w.children[w.children.length-1];N&&N.type==="text"?N.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...x)}else f.push(...x);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(f,!0)};t.patch(u,k),d.push(k)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...structuredClone$1(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(d,!0)},{type:"text",value:`
`}]}}const convert=(function(t){if(t==null)return ok;if(typeof t=="function")return castFactory(t);if(typeof t=="object")return Array.isArray(t)?anyFactory(t):propertiesFactory(t);if(typeof t=="string")return typeFactory(t);throw new Error("Expected function, string, or object as test")});function anyFactory(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=convert(t[n]);return castFactory(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function propertiesFactory(t){const e=t;return castFactory(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function typeFactory(t){return castFactory(e);function e(n){return n&&n.type===t}}function castFactory(t){return e;function e(n,r,s){return!!(looksLikeANode(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function ok(){return!0}function looksLikeANode(t){return t!==null&&typeof t=="object"&&"type"in t}function color(t){return t}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=convert(s),l=r?-1:1;d(t,void 0,[])();function d(h,u,f){const p=h&&typeof h=="object"?h:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(h.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=empty,x,S,w;if((!e||a(h,u,f[f.length-1]||void 0))&&(y=toResult(n(h,f)),y[0]===EXIT))return y;if("children"in h&&h.children){const k=h;if(k.children&&y[0]!==SKIP)for(S=(r?k.children.length:-1)+l,w=f.concat(k);S>-1&&S<k.children.length;){const N=k.children[S];if(x=d(N,S,w)(),x[0]===EXIT)return x;S=typeof x[1]=="number"?x[1]:S+l}}return y}}}function toResult(t){return Array.isArray(t)?t:typeof t=="number"?[CONTINUE,t]:t==null?empty:[t]}function visit(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),visitParents(t,a,d,s);function d(h,u){const f=u[u.length-1],p=f?f.children.indexOf(h):void 0;return l(h,p,f)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState(t,e){const n=e||emptyOptions,r=new Map,s=new Map,a=new Map,l={...handlers,...n.handlers},d={all:u,applyData,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:h,options:n,patch,wrap:wrap$1};return visit(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?r:s,g=String(f.identifier).toUpperCase();p.has(g)||p.set(g,f)}}),d;function h(f,p){const g=f.type,y=d.handlers[g];if(own$1.call(d.handlers,g)&&y)return y(d,f,p);if(d.options.passThrough&&d.options.passThrough.includes(g)){if("children"in f){const{children:S,...w}=f,k=structuredClone$1(w);return k.children=d.all(f),k}return structuredClone$1(f)}return(d.options.unknownHandler||defaultUnknownHandler)(d,f,p)}function u(f){const p=[];if("children"in f){const g=f.children;let y=-1;for(;++y<g.length;){const x=d.one(g[y],f);if(x){if(y&&g[y-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=trimMarkdownSpaceStart(x.value)),!Array.isArray(x)&&x.type==="element")){const S=x.children[0];S&&S.type==="text"&&(S.value=trimMarkdownSpaceStart(S.value))}Array.isArray(x)?p.push(...x):p.push(x)}}}return p}}function patch(t,e){t.position&&(e.position=position$1(t))}function applyData(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,structuredClone$1(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function defaultUnknownHandler(t,e){const n=e.data||{},r="value"in e&&!(own$1.call(n,"hProperties")||own$1.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function wrap$1(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function trimMarkdownSpaceStart(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function toHast(t,e){const n=createState(t,e),r=n.one(t,void 0),s=footer(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function remarkRehype(t,e){return t&&"run"in t?async function(n,r){const s=toHast(n,{file:r,...e});await t.run(s,r)}:function(n,r){return toHast(n,{file:r,...t||e})}}function bail(t){if(t)throw t}var extend$1,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend$1;hasRequiredExtend=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},a=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var f=t.call(u,"constructor"),p=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!p)return!1;var g;for(g in u);return typeof g>"u"||t.call(u,g)},l=function(u,f){n&&f.name==="__proto__"?n(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},d=function(u,f){if(f==="__proto__")if(t.call(u,f)){if(r)return r(u,f).value}else return;return u[f]};return extend$1=function h(){var u,f,p,g,y,x,S=arguments[0],w=1,k=arguments.length,N=!1;for(typeof S=="boolean"&&(N=S,S=arguments[1]||{},w=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});w<k;++w)if(u=arguments[w],u!=null)for(f in u)p=d(S,f),g=d(u,f),S!==g&&(N&&g&&(a(g)||(y=s(g)))?(y?(y=!1,x=p&&s(p)?p:[]):x=p&&a(p)?p:{},l(S,{name:f,newValue:h(N,x,g)})):typeof g<"u"&&l(S,{name:f,newValue:g}));return S},extend$1}var extendExports=requireExtend();const extend=getDefaultExportFromCjs(extendExports);function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function trough(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);d(null,...s);function d(h,...u){const f=t[++a];let p=-1;if(h){l(h);return}for(;++p<s.length;)(u[p]===null||u[p]===void 0)&&(u[p]=s[p]);s=u,f?wrap(f,d)(...u):l(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function wrap(t,e){let n;return r;function r(...l){const d=t.length>l.length;let h;d&&l.push(s);try{h=t.apply(this,l)}catch(u){const f=u;if(d&&n)throw f;return s(f)}d||(h&&h.then&&typeof h.then=="function"?h.then(a,s):h instanceof Error?s(h):a(h))}function s(l,...d){n||(n=!0,e(l,...d))}function a(l){s(null,l)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,d=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),d>-1&&(t.codePointAt(s)===e.codePointAt(d--)?d<0&&(r=s):(d=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function dirname(t){if(assertPath$1(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function extname(t){assertPath$1(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const d=t.codePointAt(e);if(d===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),d===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function join(...t){let e=-1,n;for(;++e<t.length;)assertPath$1(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":normalize(n)}function normalize(t){assertPath$1(t);const e=t.codePointAt(0)===47;let n=normalizeString(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function normalizeString(t,e){let n="",r=0,s=-1,a=0,l=-1,d,h;for(;++l<=t.length;){if(l<t.length)d=t.codePointAt(l);else{if(d===47)break;d=47}if(d===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(h=n.lastIndexOf("/"),h!==n.length-1){h<0?(n="",r=0):(n=n.slice(0,h),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else d===46&&a>-1?a++:a=-1}return n}function assertPath$1(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const minproc={cwd};function cwd(){return"/"}function isUrl(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function urlToPath(t){if(typeof t=="string")t=new URL(t);else if(!isUrl(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(t)}function getPathFromURLPosix(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let n;e?isUrl(e)?n={path:e}:typeof e=="string"||isUint8Array$1(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<order.length;){const a=order[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)order.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new VFileMessage(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(t,e){if(t&&t.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function assertPath(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const CallableInstance=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Processor;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(extend(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=n,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=vfile(e),r=this.parser||this.Parser;return assertParser("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const d=vfile(e),h=r.parse(d);r.run(h,d,function(f,p,g){if(f||!p||!g)return u(f);const y=p,x=r.stringify(y,g);looksLikeAValue(x)?g.value=x:g.result=x,u(f,g)});function u(f,p){f||!p?l(f):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,s),assertDone("processSync","process",n),r;function s(a,l){n=!0,bail(a),r=l}}run(e,n,r){assertNode(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,d){const h=vfile(n);s.run(e,h,u);function u(f,p,g){const y=p||e;f?d(f):l?l(y):r(void 0,y,g)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),assertDone("runSync","run",r),s;function a(l,d){bail(l),s=d,r=!0}}stringify(e,n){this.freeze();const r=vfile(n),s=this.compiler||this.Compiler;return assertCompiler("stringify",s),assertNode(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")h(e,n);else if(typeof e=="object")Array.isArray(e)?d(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(u){if(typeof u=="function")h(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...p]=u;h(f,p)}else l(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function l(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(u.plugins),u.settings&&(s.settings=extend(!0,s.settings,u.settings))}function d(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const p=u[f];a(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function h(u,f){let p=-1,g=-1;for(;++p<r.length;)if(r[p][0]===u){g=p;break}if(g===-1)r.push([u,...f]);else if(f.length>0){let[y,...x]=f;const S=r[g][1];isPlainObject(S)&&isPlainObject(y)&&(y=extend(!0,S,y)),r[g]=[u,y,...x]}}}}const unified=new Processor().freeze();function assertParser(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function assertCompiler(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function assertUnfrozen(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(t){if(!isPlainObject(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function assertDone(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function vfile(t){return looksLikeAVFile(t)?t:new VFile(t)}function looksLikeAVFile(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function looksLikeAValue(t){return typeof t=="string"||isUint8Array(t)}function isUint8Array(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(t){const e=createProcessor(t),n=createFile(t);return post(e.runSync(e.parse(n),n),t)}function createProcessor(t){const e=t.rehypePlugins||emptyPlugins,n=t.remarkPlugins||emptyPlugins,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(n).use(remarkRehype,r).use(e)}function createFile(t){const e=t.children||"",n=new VFile;return typeof e=="string"&&(n.value=e),n}function post(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,d=e.unwrapDisallowed,h=e.urlTransform||defaultUrlTransform;for(const f of deprecations)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+changelog+f.id,void 0);return visit(t,u),toJsxRuntime(t,{Fragment:jsxRuntimeExports.Fragment,components:s,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function u(f,p,g){if(f.type==="raw"&&g&&typeof p=="number")return l?g.children.splice(p,1):g.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let y;for(y in urlAttributes)if(Object.hasOwn(urlAttributes,y)&&Object.hasOwn(f.properties,y)){const x=f.properties[y],S=urlAttributes[y];(S===null||S.includes(f.tagName))&&(f.properties[y]=h(String(x||""),y,f))}}if(f.type==="element"){let y=n?!n.includes(f.tagName):a?a.includes(f.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(f,p,g)),y&&g&&typeof p=="number")return d&&f.children?g.children.splice(p,1,...f.children):g.children.splice(p,1),p}}}function defaultUrlTransform(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||safeProtocol.test(t.slice(0,e))?t:""}const RationaleModal=({isOpen:t,onClose:e,rationale:n,isLoading:r})=>t?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-opacity-50 backdrop-blur-sm animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#FFF9F0] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden relative border-4 border-[#E6D5B8]",children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition-colors",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),jsxRuntimeExports.jsx("div",{className:"p-8 max-h-[80vh] overflow-y-auto",children:r?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4C3B6F]"}),jsxRuntimeExports.jsx("p",{className:"text-[#4C3B6F] font-medium animate-pulse",children:"Consulting the AI Advisor..."})]}):jsxRuntimeExports.jsx("div",{className:"prose prose-purple prose-lg",children:jsxRuntimeExports.jsx(Markdown,{components:{h1:({node:s,...a})=>jsxRuntimeExports.jsx("h1",{className:"serif-title align-middle text-4xl font-bold text-[#4C3B6F] mb-4",...a}),strong:({node:s,...a})=>jsxRuntimeExports.jsx("span",{className:"font-bold text-gray-900",...a}),ul:({node:s,...a})=>jsxRuntimeExports.jsx("ul",{className:"list-disc pl-5 space-y-2 text-gray-700",...a}),li:({node:s,...a})=>jsxRuntimeExports.jsx("li",{className:"pl-1",...a}),p:({node:s,...a})=>jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",...a})},children:n})})})]})}):null,SuggestedCourseItem=({term:t,code:e,credits:n,title:r,category:s})=>{const l={"Tech Elective":"bg-gray-800","Gen Ed":"bg-green-500",Major:"bg-red-500",Minor:"bg-purple-500",Concentration:"bg-yellow-500","Free Elective":"bg-blue-500"}[s]||"bg-gray-400";return jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 py-3 border-b border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:`${l} w-2 h-2 rounded-full`}),jsxRuntimeExports.jsx("span",{className:"w-16 font-medium text-gray-500",children:t}),jsxRuntimeExports.jsx("span",{className:"w-20 font-bold text-gray-800",children:e}),jsxRuntimeExports.jsx("span",{className:"w-16 text-gray-600",children:n.toFixed(2)}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-gray-800",children:r})]})};function SculptResults({plan:t,preferences:e,onGenerateNew:n,rationale:r,isRationaleLoading:s}){const[a,l]=reactExports.useState(!1);if(!t)return jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Generating..."})});const d=h=>h.category?h.category:e.requirements.includes("Technical Electives")&&h.subject==="CS"?"Tech Elective":"Free Elective";return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-3xl",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"serif-title text-5xl lg:text-7xl font-bold brand-purple leading-tight mb-3",children:"Suggested Courses"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-500",children:"Based off of your requirements and priorities"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:t.plan.length>0?t.plan.map(h=>jsxRuntimeExports.jsx(SuggestedCourseItem,{term:"SP26",code:h.code,credits:h.credits,title:h.title,category:d(h)},h.code)):jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No courses found matching criteria."})}),jsxRuntimeExports.jsx("div",{className:"text-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:()=>l(!0),className:"bg-white text-[#4C3B6F] font-semibold py-2 px-5 rounded-full border-2 border-[#4C3B6F] hover:bg-gray-50 transition-all shadow-sm hover:shadow-md flex items-center mx-auto",children:[jsxRuntimeExports.jsx("span",{className:"",children:""})," Why Were These Courses Chosen?"]})}),jsxRuntimeExports.jsx(RationaleModal,{isOpen:a,onClose:()=>l(!1),rationale:r,isLoading:s}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Credit Load: ",jsxRuntimeExports.jsxs("span",{className:"font-normal text-gray-600",children:[t.totalCredits," Credit Hours"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["Semester Difficulty: ",jsxRuntimeExports.jsx("span",{className:"font-normal text-gray-600",children:e.difficulty})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3",children:[jsxRuntimeExports.jsx("button",{className:"px-6 py-3 bg-[#4C3B6F] text-white font-bold rounded-full hover:bg-[#392d57] transition-all",children:"Confirm Semester Plan"}),jsxRuntimeExports.jsx("button",{onClick:n,className:"px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-full hover:bg-gray-300 transition-all",children:"Generate New Plan"})]})]})]})}function SculptSemester(){const{parsedAudit:t,courseCatalog:e,isLoading:n}=useData(),r=useNavigate();reactExports.useEffect(()=>{!n&&!t&&(console.log("No audit data found, redirecting to /audit"),r("/audit"))},[n,t,r]);const[s,a]=reactExports.useState("form"),[l,d]=reactExports.useState({requirements:[],creditLoad:[],difficulty:"Moderate"}),[h,u]=reactExports.useState(null),[f,p]=reactExports.useState(!1),[g,y]=reactExports.useState(""),[x,S]=reactExports.useState(!1),w=reactExports.useMemo(()=>(t?.remainingRequirements||[]).filter(R=>R.courses&&R.courses.length>0),[t]),k=R=>{p(!0),d(R),u(null),setTimeout(async()=>{const B=generatePlan(R,t,e);u(B),p(!1),a("results"),S(!0);const q=await generateRationale(B,R,t);y(q),S(!1)},1500)},N=()=>{a("form"),u(null),y("")};return n?jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("p",{className:"text-center",children:"Loading data..."})}):jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx("div",{className:"flex justify-center animate-fade-in",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-3xl",children:s==="form"?jsxRuntimeExports.jsx(SculptForm,{remainingRequirements:w,initialPrefs:l,onSubmit:k,isGenerating:f,hasAuditData:!!t}):jsxRuntimeExports.jsx(SculptResults,{plan:h,preferences:l,rationale:g,isRationaleLoading:x,onGenerateNew:N})})})})}function App(){return jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Welcome,{})}),jsxRuntimeExports.jsx(Route,{path:"/audit",element:jsxRuntimeExports.jsx(Audit,{})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/ai-assistant",element:jsxRuntimeExports.jsx(AIAssistant,{})}),jsxRuntimeExports.jsx(Route,{path:"/sculpt",element:jsxRuntimeExports.jsx(SculptSemester,{})})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/Schedule-Sculptor/",children:jsxRuntimeExports.jsx(DataProvider,{children:jsxRuntimeExports.jsx(App,{})})})}));
